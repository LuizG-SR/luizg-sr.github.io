import{$ as Nr,A as M1,B as g_,C as gn,D as x1,E as k1,F as mi,G as _a,H as __,I as bf,J as HC,K as R1,L as N1,M as Pe,N as Rr,O as An,P as $C,Q as P1,R as If,S as Le,T as $n,U as y_,V as qC,W as gi,X as ya,Y as bo,Z as Ic,_ as O1,a as V,aa as dn,b as de,c as d_,d as Bt,e as C1,f as Ec,g as UC,h as N,i as b1,j as h_,k as I1,l as D1,m as ne,n as Cc,o as f_,p as S1,q as T1,r as Fn,s as bc,t as Cf,u as BC,v as A1,w as ys,x as jC,y as p_,z as m_}from"./chunk-LBPIEI2V.js";var Lu=C1((ax,Eh)=>{"use strict";(function(n,e){typeof ax=="object"&&typeof Eh<"u"?Eh.exports=e():typeof define=="function"&&define.amd?define(e):n.moment=e()})(ax,function(){"use strict";var n;function e(){return n.apply(null,arguments)}function t(c){n=c}function r(c){return c instanceof Array||Object.prototype.toString.call(c)==="[object Array]"}function i(c){return c!=null&&Object.prototype.toString.call(c)==="[object Object]"}function s(c,f){return Object.prototype.hasOwnProperty.call(c,f)}function o(c){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(c).length===0;var f;for(f in c)if(s(c,f))return!1;return!0}function a(c){return c===void 0}function l(c){return typeof c=="number"||Object.prototype.toString.call(c)==="[object Number]"}function u(c){return c instanceof Date||Object.prototype.toString.call(c)==="[object Date]"}function h(c,f){var g=[],y,C=c.length;for(y=0;y<C;++y)g.push(f(c[y],y));return g}function p(c,f){for(var g in f)s(f,g)&&(c[g]=f[g]);return s(f,"toString")&&(c.toString=f.toString),s(f,"valueOf")&&(c.valueOf=f.valueOf),c}function _(c,f,g,y){return lt(c,f,g,y,!0).utc()}function w(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function E(c){return c._pf==null&&(c._pf=w()),c._pf}var S;Array.prototype.some?S=Array.prototype.some:S=function(c){var f=Object(this),g=f.length>>>0,y;for(y=0;y<g;y++)if(y in f&&c.call(this,f[y],y,f))return!0;return!1};function x(c){var f=null,g=!1,y=c._d&&!isNaN(c._d.getTime());if(y&&(f=E(c),g=S.call(f.parsedDateParts,function(C){return C!=null}),y=f.overflow<0&&!f.empty&&!f.invalidEra&&!f.invalidMonth&&!f.invalidWeekday&&!f.weekdayMismatch&&!f.nullInput&&!f.invalidFormat&&!f.userInvalidated&&(!f.meridiem||f.meridiem&&g),c._strict&&(y=y&&f.charsLeftOver===0&&f.unusedTokens.length===0&&f.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(c))c._isValid=y;else return y;return c._isValid}function H(c){var f=_(NaN);return c!=null?p(E(f),c):E(f).userInvalidated=!0,f}var Y=e.momentProperties=[],q=!1;function Q(c,f){var g,y,C,R=Y.length;if(a(f._isAMomentObject)||(c._isAMomentObject=f._isAMomentObject),a(f._i)||(c._i=f._i),a(f._f)||(c._f=f._f),a(f._l)||(c._l=f._l),a(f._strict)||(c._strict=f._strict),a(f._tzm)||(c._tzm=f._tzm),a(f._isUTC)||(c._isUTC=f._isUTC),a(f._offset)||(c._offset=f._offset),a(f._pf)||(c._pf=E(f)),a(f._locale)||(c._locale=f._locale),R>0)for(g=0;g<R;g++)y=Y[g],C=f[y],a(C)||(c[y]=C);return c}function pe(c){Q(this,c),this._d=new Date(c._d!=null?c._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),q===!1&&(q=!0,e.updateOffset(this),q=!1)}function re(c){return c instanceof pe||c!=null&&c._isAMomentObject!=null}function k(c){e.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+c)}function I(c,f){var g=!0;return p(function(){if(e.deprecationHandler!=null&&e.deprecationHandler(null,c),g){var y=[],C,R,W,ge=arguments.length;for(R=0;R<ge;R++){if(C="",typeof arguments[R]=="object"){C+=`
[`+R+"] ";for(W in arguments[0])s(arguments[0],W)&&(C+=W+": "+arguments[0][W]+", ");C=C.slice(0,-2)}else C=arguments[R];y.push(C)}k(c+`
Arguments: `+Array.prototype.slice.call(y).join("")+`
`+new Error().stack),g=!1}return f.apply(this,arguments)},f)}var A={};function P(c,f){e.deprecationHandler!=null&&e.deprecationHandler(c,f),A[c]||(k(f),A[c]=!0)}e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;function O(c){return typeof Function<"u"&&c instanceof Function||Object.prototype.toString.call(c)==="[object Function]"}function L(c){var f,g;for(g in c)s(c,g)&&(f=c[g],O(f)?this[g]=f:this["_"+g]=f);this._config=c,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function M(c,f){var g=p({},c),y;for(y in f)s(f,y)&&(i(c[y])&&i(f[y])?(g[y]={},p(g[y],c[y]),p(g[y],f[y])):f[y]!=null?g[y]=f[y]:delete g[y]);for(y in c)s(c,y)&&!s(f,y)&&i(c[y])&&(g[y]=p({},g[y]));return g}function tr(c){c!=null&&this.set(c)}var ui;Object.keys?ui=Object.keys:ui=function(c){var f,g=[];for(f in c)s(c,f)&&g.push(f);return g};var Ee={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Me(c,f,g){var y=this._calendar[c]||this._calendar.sameElse;return O(y)?y.call(f,g):y}function Ce(c,f,g){var y=""+Math.abs(c),C=f-y.length,R=c>=0;return(R?g?"+":"":"-")+Math.pow(10,Math.max(0,C)).toString().substr(1)+y}var Ye=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Lt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,nr={},St={};function ae(c,f,g,y){var C=y;typeof y=="string"&&(C=function(){return this[y]()}),c&&(St[c]=C),f&&(St[f[0]]=function(){return Ce(C.apply(this,arguments),f[1],f[2])}),g&&(St[g]=function(){return this.localeData().ordinal(C.apply(this,arguments),c)})}function xt(c){return c.match(/\[[\s\S]/)?c.replace(/^\[|\]$/g,""):c.replace(/\\/g,"")}function as(c){var f=c.match(Ye),g,y;for(g=0,y=f.length;g<y;g++)St[f[g]]?f[g]=St[f[g]]:f[g]=xt(f[g]);return function(C){var R="",W;for(W=0;W<y;W++)R+=O(f[W])?f[W].call(C,c):f[W];return R}}function aa(c,f){return c.isValid()?(f=$t(f,c.localeData()),nr[f]=nr[f]||as(f),nr[f](c)):c.localeData().invalidDate()}function $t(c,f){var g=5;function y(C){return f.longDateFormat(C)||C}for(Lt.lastIndex=0;g>=0&&Lt.test(c);)c=c.replace(Lt,y),Lt.lastIndex=0,g-=1;return c}var Pi={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function rr(c){var f=this._longDateFormat[c],g=this._longDateFormat[c.toUpperCase()];return f||!g?f:(this._longDateFormat[c]=g.match(Ye).map(function(y){return y==="MMMM"||y==="MM"||y==="DD"||y==="dddd"?y.slice(1):y}).join(""),this._longDateFormat[c])}var Oi="Invalid date";function ls(){return this._invalidDate}var tf="%d",nf=/\d{1,2}/;function rf(c){return this._ordinal.replace("%d",c)}var sf={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function vg(c,f,g,y){var C=this._relativeTime[g];return O(C)?C(c,f,g,y):C.replace(/%d/i,c)}function wg(c,f){var g=this._relativeTime[c>0?"future":"past"];return O(g)?g(f):g.replace(/%s/i,f)}var Eg={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function gr(c){return typeof c=="string"?Eg[c]||Eg[c.toLowerCase()]:void 0}function tc(c){var f={},g,y;for(y in c)s(c,y)&&(g=gr(y),g&&(f[g]=c[y]));return f}var of={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Cg(c){var f=[],g;for(g in c)s(c,g)&&f.push({unit:g,priority:of[g]});return f.sort(function(y,C){return y.priority-C.priority}),f}var bg=/\d/,jn=/\d\d/,nc=/\d{3}/,Sl=/\d{4}/,un=/[+-]?\d{6}/,Ke=/\d\d?/,Tl=/\d\d\d\d?/,af=/\d\d\d\d\d\d?/,Al=/\d{1,3}/,lf=/\d{1,4}/,us=/[+-]?\d{1,6}/,ao=/\d+/,Ml=/[+-]?\d+/,uf=/Z|[+-]\d\d:?\d\d/gi,rc=/Z|[+-]\d\d(?::?\d\d)?/gi,mC=/[+-]?\d+(\.\d{1,3})?/,lo=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,uo=/^[1-9]\d?/,ic=/^([1-9]\d|\d)/,cs;cs={};function fe(c,f,g){cs[c]=O(f)?f:function(y,C){return y&&g?g:f}}function cf(c,f){return s(cs,c)?cs[c](f._strict,f._locale):new RegExp(co(c))}function co(c){return ci(c.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(f,g,y,C,R){return g||y||C||R}))}function ci(c){return c.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Hn(c){return c<0?Math.ceil(c)||0:Math.floor(c)}function Je(c){var f=+c,g=0;return f!==0&&isFinite(f)&&(g=Hn(f)),g}var ho={};function Ct(c,f){var g,y=f,C;for(typeof c=="string"&&(c=[c]),l(f)&&(y=function(R,W){W[f]=Je(R)}),C=c.length,g=0;g<C;g++)ho[c[g]]=y}function cn(c,f){Ct(c,function(g,y,C,R){C._w=C._w||{},f(g,C._w,C,R)})}function Ig(c,f,g){f!=null&&s(ho,c)&&ho[c](f,g._a,g,c)}function ds(c){return c%4===0&&c%100!==0||c%400===0}var nn=0,Fi=1,di=2,Vt=3,Br=4,Li=5,hi=6,Dg=7,df=8;ae("Y",0,0,function(){var c=this.year();return c<=9999?Ce(c,4):"+"+c}),ae(0,["YY",2],0,function(){return this.year()%100}),ae(0,["YYYY",4],0,"year"),ae(0,["YYYYY",5],0,"year"),ae(0,["YYYYYY",6,!0],0,"year"),fe("Y",Ml),fe("YY",Ke,jn),fe("YYYY",lf,Sl),fe("YYYYY",us,un),fe("YYYYYY",us,un),Ct(["YYYYY","YYYYYY"],nn),Ct("YYYY",function(c,f){f[nn]=c.length===2?e.parseTwoDigitYear(c):Je(c)}),Ct("YY",function(c,f){f[nn]=e.parseTwoDigitYear(c)}),Ct("Y",function(c,f){f[nn]=parseInt(c,10)});function hs(c){return ds(c)?366:365}e.parseTwoDigitYear=function(c){return Je(c)+(Je(c)>68?1900:2e3)};var Vi=fo("FullYear",!0);function Sg(){return ds(this.year())}function fo(c,f){return function(g){return g!=null?(sc(this,c,g),e.updateOffset(this,f),this):po(this,c)}}function po(c,f){if(!c.isValid())return NaN;var g=c._d,y=c._isUTC;switch(f){case"Milliseconds":return y?g.getUTCMilliseconds():g.getMilliseconds();case"Seconds":return y?g.getUTCSeconds():g.getSeconds();case"Minutes":return y?g.getUTCMinutes():g.getMinutes();case"Hours":return y?g.getUTCHours():g.getHours();case"Date":return y?g.getUTCDate():g.getDate();case"Day":return y?g.getUTCDay():g.getDay();case"Month":return y?g.getUTCMonth():g.getMonth();case"FullYear":return y?g.getUTCFullYear():g.getFullYear();default:return NaN}}function sc(c,f,g){var y,C,R,W,ge;if(!(!c.isValid()||isNaN(g))){switch(y=c._d,C=c._isUTC,f){case"Milliseconds":return void(C?y.setUTCMilliseconds(g):y.setMilliseconds(g));case"Seconds":return void(C?y.setUTCSeconds(g):y.setSeconds(g));case"Minutes":return void(C?y.setUTCMinutes(g):y.setMinutes(g));case"Hours":return void(C?y.setUTCHours(g):y.setHours(g));case"Date":return void(C?y.setUTCDate(g):y.setDate(g));case"FullYear":break;default:return}R=g,W=c.month(),ge=c.date(),ge=ge===29&&W===1&&!ds(R)?28:ge,C?y.setUTCFullYear(R,W,ge):y.setFullYear(R,W,ge)}}function Tg(c){return c=gr(c),O(this[c])?this[c]():this}function Ag(c,f){if(typeof c=="object"){c=tc(c);var g=Cg(c),y,C=g.length;for(y=0;y<C;y++)this[g[y].unit](c[g[y].unit])}else if(c=gr(c),O(this[c]))return this[c](f);return this}function gC(c,f){return(c%f+f)%f}var Ut;Array.prototype.indexOf?Ut=Array.prototype.indexOf:Ut=function(c){var f;for(f=0;f<this.length;++f)if(this[f]===c)return f;return-1};function oc(c,f){if(isNaN(c)||isNaN(f))return NaN;var g=gC(f,12);return c+=(f-g)/12,g===1?ds(c)?29:28:31-g%7%2}ae("M",["MM",2],"Mo",function(){return this.month()+1}),ae("MMM",0,0,function(c){return this.localeData().monthsShort(this,c)}),ae("MMMM",0,0,function(c){return this.localeData().months(this,c)}),fe("M",Ke,uo),fe("MM",Ke,jn),fe("MMM",function(c,f){return f.monthsShortRegex(c)}),fe("MMMM",function(c,f){return f.monthsRegex(c)}),Ct(["M","MM"],function(c,f){f[Fi]=Je(c)-1}),Ct(["MMM","MMMM"],function(c,f,g,y){var C=g._locale.monthsParse(c,y,g._strict);C!=null?f[Fi]=C:E(g).invalidMonth=c});var hf="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),la="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),fs=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ff=lo,_C=lo;function Mg(c,f){return c?r(this._months)?this._months[c.month()]:this._months[(this._months.isFormat||fs).test(f)?"format":"standalone"][c.month()]:r(this._months)?this._months:this._months.standalone}function xg(c,f){return c?r(this._monthsShort)?this._monthsShort[c.month()]:this._monthsShort[fs.test(f)?"format":"standalone"][c.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function kg(c,f,g){var y,C,R,W=c.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],y=0;y<12;++y)R=_([2e3,y]),this._shortMonthsParse[y]=this.monthsShort(R,"").toLocaleLowerCase(),this._longMonthsParse[y]=this.months(R,"").toLocaleLowerCase();return g?f==="MMM"?(C=Ut.call(this._shortMonthsParse,W),C!==-1?C:null):(C=Ut.call(this._longMonthsParse,W),C!==-1?C:null):f==="MMM"?(C=Ut.call(this._shortMonthsParse,W),C!==-1?C:(C=Ut.call(this._longMonthsParse,W),C!==-1?C:null)):(C=Ut.call(this._longMonthsParse,W),C!==-1?C:(C=Ut.call(this._shortMonthsParse,W),C!==-1?C:null))}function pf(c,f,g){var y,C,R;if(this._monthsParseExact)return kg.call(this,c,f,g);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),y=0;y<12;y++){if(C=_([2e3,y]),g&&!this._longMonthsParse[y]&&(this._longMonthsParse[y]=new RegExp("^"+this.months(C,"").replace(".","")+"$","i"),this._shortMonthsParse[y]=new RegExp("^"+this.monthsShort(C,"").replace(".","")+"$","i")),!g&&!this._monthsParse[y]&&(R="^"+this.months(C,"")+"|^"+this.monthsShort(C,""),this._monthsParse[y]=new RegExp(R.replace(".",""),"i")),g&&f==="MMMM"&&this._longMonthsParse[y].test(c))return y;if(g&&f==="MMM"&&this._shortMonthsParse[y].test(c))return y;if(!g&&this._monthsParse[y].test(c))return y}}function ac(c,f){if(!c.isValid())return c;if(typeof f=="string"){if(/^\d+$/.test(f))f=Je(f);else if(f=c.localeData().monthsParse(f),!l(f))return c}var g=f,y=c.date();return y=y<29?y:Math.min(y,oc(c.year(),g)),c._isUTC?c._d.setUTCMonth(g,y):c._d.setMonth(g,y),c}function mf(c){return c!=null?(ac(this,c),e.updateOffset(this,!0),this):po(this,"Month")}function Rg(){return oc(this.year(),this.month())}function yC(c){return this._monthsParseExact?(s(this,"_monthsRegex")||gf.call(this),c?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=ff),this._monthsShortStrictRegex&&c?this._monthsShortStrictRegex:this._monthsShortRegex)}function vC(c){return this._monthsParseExact?(s(this,"_monthsRegex")||gf.call(this),c?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=_C),this._monthsStrictRegex&&c?this._monthsStrictRegex:this._monthsRegex)}function gf(){function c(Fe,ut){return ut.length-Fe.length}var f=[],g=[],y=[],C,R,W,ge;for(C=0;C<12;C++)R=_([2e3,C]),W=ci(this.monthsShort(R,"")),ge=ci(this.months(R,"")),f.push(W),g.push(ge),y.push(ge),y.push(W);f.sort(c),g.sort(c),y.sort(c),this._monthsRegex=new RegExp("^("+y.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+g.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+f.join("|")+")","i")}function Ng(c,f,g,y,C,R,W){var ge;return c<100&&c>=0?(ge=new Date(c+400,f,g,y,C,R,W),isFinite(ge.getFullYear())&&ge.setFullYear(c)):ge=new Date(c,f,g,y,C,R,W),ge}function xl(c){var f,g;return c<100&&c>=0?(g=Array.prototype.slice.call(arguments),g[0]=c+400,f=new Date(Date.UTC.apply(null,g)),isFinite(f.getUTCFullYear())&&f.setUTCFullYear(c)):f=new Date(Date.UTC.apply(null,arguments)),f}function fi(c,f,g){var y=7+f-g,C=(7+xl(c,0,y).getUTCDay()-f)%7;return-C+y-1}function pi(c,f,g,y,C){var R=(7+g-y)%7,W=fi(c,y,C),ge=1+7*(f-1)+R+W,Fe,ut;return ge<=0?(Fe=c-1,ut=hs(Fe)+ge):ge>hs(c)?(Fe=c+1,ut=ge-hs(c)):(Fe=c,ut=ge),{year:Fe,dayOfYear:ut}}function ps(c,f,g){var y=fi(c.year(),f,g),C=Math.floor((c.dayOfYear()-y-1)/7)+1,R,W;return C<1?(W=c.year()-1,R=C+xr(W,f,g)):C>xr(c.year(),f,g)?(R=C-xr(c.year(),f,g),W=c.year()+1):(W=c.year(),R=C),{week:R,year:W}}function xr(c,f,g){var y=fi(c,f,g),C=fi(c+1,f,g);return(hs(c)-y+C)/7}ae("w",["ww",2],"wo","week"),ae("W",["WW",2],"Wo","isoWeek"),fe("w",Ke,uo),fe("ww",Ke,jn),fe("W",Ke,uo),fe("WW",Ke,jn),cn(["w","ww","W","WW"],function(c,f,g,y){f[y.substr(0,1)]=Je(c)});function Pg(c){return ps(c,this._week.dow,this._week.doy).week}var kt={dow:0,doy:6};function lc(){return this._week.dow}function kl(){return this._week.doy}function Rl(c){var f=this.localeData().week(this);return c==null?f:this.add((c-f)*7,"d")}function wC(c){var f=ps(this,1,4).week;return c==null?f:this.add((c-f)*7,"d")}ae("d",0,"do","day"),ae("dd",0,0,function(c){return this.localeData().weekdaysMin(this,c)}),ae("ddd",0,0,function(c){return this.localeData().weekdaysShort(this,c)}),ae("dddd",0,0,function(c){return this.localeData().weekdays(this,c)}),ae("e",0,0,"weekday"),ae("E",0,0,"isoWeekday"),fe("d",Ke),fe("e",Ke),fe("E",Ke),fe("dd",function(c,f){return f.weekdaysMinRegex(c)}),fe("ddd",function(c,f){return f.weekdaysShortRegex(c)}),fe("dddd",function(c,f){return f.weekdaysRegex(c)}),cn(["dd","ddd","dddd"],function(c,f,g,y){var C=g._locale.weekdaysParse(c,y,g._strict);C!=null?f.d=C:E(g).invalidWeekday=c}),cn(["d","e","E"],function(c,f,g,y){f[y]=Je(c)});function Og(c,f){return typeof c!="string"?c:isNaN(c)?(c=f.weekdaysParse(c),typeof c=="number"?c:null):parseInt(c,10)}function EC(c,f){return typeof c=="string"?f.weekdaysParse(c)%7||7:isNaN(c)?null:c}function _f(c,f){return c.slice(f,7).concat(c.slice(0,f))}var CC="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Fg="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Nl="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),ms=lo,Lg=lo,Vg=lo;function Ug(c,f){var g=r(this._weekdays)?this._weekdays:this._weekdays[c&&c!==!0&&this._weekdays.isFormat.test(f)?"format":"standalone"];return c===!0?_f(g,this._week.dow):c?g[c.day()]:g}function ua(c){return c===!0?_f(this._weekdaysShort,this._week.dow):c?this._weekdaysShort[c.day()]:this._weekdaysShort}function bC(c){return c===!0?_f(this._weekdaysMin,this._week.dow):c?this._weekdaysMin[c.day()]:this._weekdaysMin}function IC(c,f,g){var y,C,R,W=c.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],y=0;y<7;++y)R=_([2e3,1]).day(y),this._minWeekdaysParse[y]=this.weekdaysMin(R,"").toLocaleLowerCase(),this._shortWeekdaysParse[y]=this.weekdaysShort(R,"").toLocaleLowerCase(),this._weekdaysParse[y]=this.weekdays(R,"").toLocaleLowerCase();return g?f==="dddd"?(C=Ut.call(this._weekdaysParse,W),C!==-1?C:null):f==="ddd"?(C=Ut.call(this._shortWeekdaysParse,W),C!==-1?C:null):(C=Ut.call(this._minWeekdaysParse,W),C!==-1?C:null):f==="dddd"?(C=Ut.call(this._weekdaysParse,W),C!==-1||(C=Ut.call(this._shortWeekdaysParse,W),C!==-1)?C:(C=Ut.call(this._minWeekdaysParse,W),C!==-1?C:null)):f==="ddd"?(C=Ut.call(this._shortWeekdaysParse,W),C!==-1||(C=Ut.call(this._weekdaysParse,W),C!==-1)?C:(C=Ut.call(this._minWeekdaysParse,W),C!==-1?C:null)):(C=Ut.call(this._minWeekdaysParse,W),C!==-1||(C=Ut.call(this._weekdaysParse,W),C!==-1)?C:(C=Ut.call(this._shortWeekdaysParse,W),C!==-1?C:null))}function DC(c,f,g){var y,C,R;if(this._weekdaysParseExact)return IC.call(this,c,f,g);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),y=0;y<7;y++){if(C=_([2e3,1]).day(y),g&&!this._fullWeekdaysParse[y]&&(this._fullWeekdaysParse[y]=new RegExp("^"+this.weekdays(C,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[y]=new RegExp("^"+this.weekdaysShort(C,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[y]=new RegExp("^"+this.weekdaysMin(C,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[y]||(R="^"+this.weekdays(C,"")+"|^"+this.weekdaysShort(C,"")+"|^"+this.weekdaysMin(C,""),this._weekdaysParse[y]=new RegExp(R.replace(".",""),"i")),g&&f==="dddd"&&this._fullWeekdaysParse[y].test(c))return y;if(g&&f==="ddd"&&this._shortWeekdaysParse[y].test(c))return y;if(g&&f==="dd"&&this._minWeekdaysParse[y].test(c))return y;if(!g&&this._weekdaysParse[y].test(c))return y}}function gs(c){if(!this.isValid())return c!=null?this:NaN;var f=po(this,"Day");return c!=null?(c=Og(c,this.localeData()),this.add(c-f,"d")):f}function SC(c){if(!this.isValid())return c!=null?this:NaN;var f=(this.day()+7-this.localeData()._week.dow)%7;return c==null?f:this.add(c-f,"d")}function TC(c){if(!this.isValid())return c!=null?this:NaN;if(c!=null){var f=EC(c,this.localeData());return this.day(this.day()%7?f:f-7)}else return this.day()||7}function Pl(c){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||mo.call(this),c?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=ms),this._weekdaysStrictRegex&&c?this._weekdaysStrictRegex:this._weekdaysRegex)}function uc(c){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||mo.call(this),c?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Lg),this._weekdaysShortStrictRegex&&c?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Bg(c){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||mo.call(this),c?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Vg),this._weekdaysMinStrictRegex&&c?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function mo(){function c(yr,Co){return Co.length-yr.length}var f=[],g=[],y=[],C=[],R,W,ge,Fe,ut;for(R=0;R<7;R++)W=_([2e3,1]).day(R),ge=ci(this.weekdaysMin(W,"")),Fe=ci(this.weekdaysShort(W,"")),ut=ci(this.weekdays(W,"")),f.push(ge),g.push(Fe),y.push(ut),C.push(ge),C.push(Fe),C.push(ut);f.sort(c),g.sort(c),y.sort(c),C.sort(c),this._weekdaysRegex=new RegExp("^("+C.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+y.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+g.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+f.join("|")+")","i")}function go(){return this.hours()%12||12}function jg(){return this.hours()||24}ae("H",["HH",2],0,"hour"),ae("h",["hh",2],0,go),ae("k",["kk",2],0,jg),ae("hmm",0,0,function(){return""+go.apply(this)+Ce(this.minutes(),2)}),ae("hmmss",0,0,function(){return""+go.apply(this)+Ce(this.minutes(),2)+Ce(this.seconds(),2)}),ae("Hmm",0,0,function(){return""+this.hours()+Ce(this.minutes(),2)}),ae("Hmmss",0,0,function(){return""+this.hours()+Ce(this.minutes(),2)+Ce(this.seconds(),2)});function cc(c,f){ae(c,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),f)})}cc("a",!0),cc("A",!1);function qt(c,f){return f._meridiemParse}fe("a",qt),fe("A",qt),fe("H",Ke,ic),fe("h",Ke,uo),fe("k",Ke,uo),fe("HH",Ke,jn),fe("hh",Ke,jn),fe("kk",Ke,jn),fe("hmm",Tl),fe("hmmss",af),fe("Hmm",Tl),fe("Hmmss",af),Ct(["H","HH"],Vt),Ct(["k","kk"],function(c,f,g){var y=Je(c);f[Vt]=y===24?0:y}),Ct(["a","A"],function(c,f,g){g._isPm=g._locale.isPM(c),g._meridiem=c}),Ct(["h","hh"],function(c,f,g){f[Vt]=Je(c),E(g).bigHour=!0}),Ct("hmm",function(c,f,g){var y=c.length-2;f[Vt]=Je(c.substr(0,y)),f[Br]=Je(c.substr(y)),E(g).bigHour=!0}),Ct("hmmss",function(c,f,g){var y=c.length-4,C=c.length-2;f[Vt]=Je(c.substr(0,y)),f[Br]=Je(c.substr(y,2)),f[Li]=Je(c.substr(C)),E(g).bigHour=!0}),Ct("Hmm",function(c,f,g){var y=c.length-2;f[Vt]=Je(c.substr(0,y)),f[Br]=Je(c.substr(y))}),Ct("Hmmss",function(c,f,g){var y=c.length-4,C=c.length-2;f[Vt]=Je(c.substr(0,y)),f[Br]=Je(c.substr(y,2)),f[Li]=Je(c.substr(C))});function AC(c){return(c+"").toLowerCase().charAt(0)==="p"}var MC=/[ap]\.?m?\.?/i,Hg=fo("Hours",!0);function $g(c,f,g){return c>11?g?"pm":"PM":g?"am":"AM"}var yf={calendar:Ee,longDateFormat:Pi,invalidDate:Oi,ordinal:tf,dayOfMonthOrdinalParse:nf,relativeTime:sf,months:hf,monthsShort:la,week:kt,weekdays:CC,weekdaysMin:Nl,weekdaysShort:Fg,meridiemParse:MC},Tt={},ca={},_r;function qg(c,f){var g,y=Math.min(c.length,f.length);for(g=0;g<y;g+=1)if(c[g]!==f[g])return g;return y}function zg(c){return c&&c.toLowerCase().replace("_","-")}function Ol(c){for(var f=0,g,y,C,R;f<c.length;){for(R=zg(c[f]).split("-"),g=R.length,y=zg(c[f+1]),y=y?y.split("-"):null;g>0;){if(C=da(R.slice(0,g).join("-")),C)return C;if(y&&y.length>=g&&qg(R,y)>=g-1)break;g--}f++}return _r}function Wg(c){return!!(c&&c.match("^[^/\\\\]*$"))}function da(c){var f=null,g;if(Tt[c]===void 0&&typeof Eh<"u"&&Eh&&Eh.exports&&Wg(c))try{f=_r._abbr,g=d_,g("./locale/"+c),jr(f)}catch{Tt[c]=null}return Tt[c]}function jr(c,f){var g;return c&&(a(f)?g=Ui(c):g=dc(c,f),g?_r=g:typeof console<"u"&&console.warn&&console.warn("Locale "+c+" not found. Did you forget to load it?")),_r._abbr}function dc(c,f){if(f!==null){var g,y=yf;if(f.abbr=c,Tt[c]!=null)P("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),y=Tt[c]._config;else if(f.parentLocale!=null)if(Tt[f.parentLocale]!=null)y=Tt[f.parentLocale]._config;else if(g=da(f.parentLocale),g!=null)y=g._config;else return ca[f.parentLocale]||(ca[f.parentLocale]=[]),ca[f.parentLocale].push({name:c,config:f}),null;return Tt[c]=new tr(M(y,f)),ca[c]&&ca[c].forEach(function(C){dc(C.name,C.config)}),jr(c),Tt[c]}else return delete Tt[c],null}function hc(c,f){if(f!=null){var g,y,C=yf;Tt[c]!=null&&Tt[c].parentLocale!=null?Tt[c].set(M(Tt[c]._config,f)):(y=da(c),y!=null&&(C=y._config),f=M(C,f),y==null&&(f.abbr=c),g=new tr(f),g.parentLocale=Tt[c],Tt[c]=g),jr(c)}else Tt[c]!=null&&(Tt[c].parentLocale!=null?(Tt[c]=Tt[c].parentLocale,c===jr()&&jr(c)):Tt[c]!=null&&delete Tt[c]);return Tt[c]}function Ui(c){var f;if(c&&c._locale&&c._locale._abbr&&(c=c._locale._abbr),!c)return _r;if(!r(c)){if(f=da(c),f)return f;c=[c]}return Ol(c)}function Gg(){return ui(Tt)}function _o(c){var f,g=c._a;return g&&E(c).overflow===-2&&(f=g[Fi]<0||g[Fi]>11?Fi:g[di]<1||g[di]>oc(g[nn],g[Fi])?di:g[Vt]<0||g[Vt]>24||g[Vt]===24&&(g[Br]!==0||g[Li]!==0||g[hi]!==0)?Vt:g[Br]<0||g[Br]>59?Br:g[Li]<0||g[Li]>59?Li:g[hi]<0||g[hi]>999?hi:-1,E(c)._overflowDayOfYear&&(f<nn||f>di)&&(f=di),E(c)._overflowWeeks&&f===-1&&(f=Dg),E(c)._overflowWeekday&&f===-1&&(f=df),E(c).overflow=f),c}var Yg=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Kg=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,vf=/Z|[+-]\d\d(?::?\d\d)?/,ha=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],fc=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],pc=/^\/?Date\((-?\d+)/i,Qg=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Zg={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function _s(c){var f,g,y=c._i,C=Yg.exec(y)||Kg.exec(y),R,W,ge,Fe,ut=ha.length,yr=fc.length;if(C){for(E(c).iso=!0,f=0,g=ut;f<g;f++)if(ha[f][1].exec(C[1])){W=ha[f][0],R=ha[f][2]!==!1;break}if(W==null){c._isValid=!1;return}if(C[3]){for(f=0,g=yr;f<g;f++)if(fc[f][1].exec(C[3])){ge=(C[2]||" ")+fc[f][0];break}if(ge==null){c._isValid=!1;return}}if(!R&&ge!=null){c._isValid=!1;return}if(C[4])if(vf.exec(C[4]))Fe="Z";else{c._isValid=!1;return}c._f=W+(ge||"")+(Fe||""),v(c)}else c._isValid=!1}function Xg(c,f,g,y,C,R){var W=[Jg(c),la.indexOf(f),parseInt(g,10),parseInt(y,10),parseInt(C,10)];return R&&W.push(parseInt(R,10)),W}function Jg(c){var f=parseInt(c,10);return f<=49?2e3+f:f<=999?1900+f:f}function e_(c){return c.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function t_(c,f,g){if(c){var y=Fg.indexOf(c),C=new Date(f[0],f[1],f[2]).getDay();if(y!==C)return E(g).weekdayMismatch=!0,g._isValid=!1,!1}return!0}function mc(c,f,g){if(c)return Zg[c];if(f)return 0;var y=parseInt(g,10),C=y%100,R=(y-C)/100;return R*60+C}function ir(c){var f=Qg.exec(e_(c._i)),g;if(f){if(g=Xg(f[4],f[3],f[2],f[5],f[6],f[7]),!t_(f[1],g,c))return;c._a=g,c._tzm=mc(f[8],f[9],f[10]),c._d=xl.apply(null,c._a),c._d.setUTCMinutes(c._d.getUTCMinutes()-c._tzm),E(c).rfc2822=!0}else c._isValid=!1}function n_(c){var f=pc.exec(c._i);if(f!==null){c._d=new Date(+f[1]);return}if(_s(c),c._isValid===!1)delete c._isValid;else return;if(ir(c),c._isValid===!1)delete c._isValid;else return;c._strict?c._isValid=!1:e.createFromInputFallback(c)}e.createFromInputFallback=I("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(c){c._d=new Date(c._i+(c._useUTC?" UTC":""))});function yo(c,f,g){return c??f??g}function fa(c){var f=new Date(e.now());return c._useUTC?[f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()]:[f.getFullYear(),f.getMonth(),f.getDate()]}function d(c){var f,g,y=[],C,R,W;if(!c._d){for(C=fa(c),c._w&&c._a[di]==null&&c._a[Fi]==null&&m(c),c._dayOfYear!=null&&(W=yo(c._a[nn],C[nn]),(c._dayOfYear>hs(W)||c._dayOfYear===0)&&(E(c)._overflowDayOfYear=!0),g=xl(W,0,c._dayOfYear),c._a[Fi]=g.getUTCMonth(),c._a[di]=g.getUTCDate()),f=0;f<3&&c._a[f]==null;++f)c._a[f]=y[f]=C[f];for(;f<7;f++)c._a[f]=y[f]=c._a[f]==null?f===2?1:0:c._a[f];c._a[Vt]===24&&c._a[Br]===0&&c._a[Li]===0&&c._a[hi]===0&&(c._nextDay=!0,c._a[Vt]=0),c._d=(c._useUTC?xl:Ng).apply(null,y),R=c._useUTC?c._d.getUTCDay():c._d.getDay(),c._tzm!=null&&c._d.setUTCMinutes(c._d.getUTCMinutes()-c._tzm),c._nextDay&&(c._a[Vt]=24),c._w&&typeof c._w.d<"u"&&c._w.d!==R&&(E(c).weekdayMismatch=!0)}}function m(c){var f,g,y,C,R,W,ge,Fe,ut;f=c._w,f.GG!=null||f.W!=null||f.E!=null?(R=1,W=4,g=yo(f.GG,c._a[nn],ps(ze(),1,4).year),y=yo(f.W,1),C=yo(f.E,1),(C<1||C>7)&&(Fe=!0)):(R=c._locale._week.dow,W=c._locale._week.doy,ut=ps(ze(),R,W),g=yo(f.gg,c._a[nn],ut.year),y=yo(f.w,ut.week),f.d!=null?(C=f.d,(C<0||C>6)&&(Fe=!0)):f.e!=null?(C=f.e+R,(f.e<0||f.e>6)&&(Fe=!0)):C=R),y<1||y>xr(g,R,W)?E(c)._overflowWeeks=!0:Fe!=null?E(c)._overflowWeekday=!0:(ge=pi(g,y,C,R,W),c._a[nn]=ge.year,c._dayOfYear=ge.dayOfYear)}e.ISO_8601=function(){},e.RFC_2822=function(){};function v(c){if(c._f===e.ISO_8601){_s(c);return}if(c._f===e.RFC_2822){ir(c);return}c._a=[],E(c).empty=!0;var f=""+c._i,g,y,C,R,W,ge=f.length,Fe=0,ut,yr;for(C=$t(c._f,c._locale).match(Ye)||[],yr=C.length,g=0;g<yr;g++)R=C[g],y=(f.match(cf(R,c))||[])[0],y&&(W=f.substr(0,f.indexOf(y)),W.length>0&&E(c).unusedInput.push(W),f=f.slice(f.indexOf(y)+y.length),Fe+=y.length),St[R]?(y?E(c).empty=!1:E(c).unusedTokens.push(R),Ig(R,y,c)):c._strict&&!y&&E(c).unusedTokens.push(R);E(c).charsLeftOver=ge-Fe,f.length>0&&E(c).unusedInput.push(f),c._a[Vt]<=12&&E(c).bigHour===!0&&c._a[Vt]>0&&(E(c).bigHour=void 0),E(c).parsedDateParts=c._a.slice(0),E(c).meridiem=c._meridiem,c._a[Vt]=b(c._locale,c._a[Vt],c._meridiem),ut=E(c).era,ut!==null&&(c._a[nn]=c._locale.erasConvertYear(ut,c._a[nn])),d(c),_o(c)}function b(c,f,g){var y;return g==null?f:c.meridiemHour!=null?c.meridiemHour(f,g):(c.isPM!=null&&(y=c.isPM(g),y&&f<12&&(f+=12),!y&&f===12&&(f=0)),f)}function F(c){var f,g,y,C,R,W,ge=!1,Fe=c._f.length;if(Fe===0){E(c).invalidFormat=!0,c._d=new Date(NaN);return}for(C=0;C<Fe;C++)R=0,W=!1,f=Q({},c),c._useUTC!=null&&(f._useUTC=c._useUTC),f._f=c._f[C],v(f),x(f)&&(W=!0),R+=E(f).charsLeftOver,R+=E(f).unusedTokens.length*10,E(f).score=R,ge?R<y&&(y=R,g=f):(y==null||R<y||W)&&(y=R,g=f,W&&(ge=!0));p(c,g||f)}function j(c){if(!c._d){var f=tc(c._i),g=f.day===void 0?f.date:f.day;c._a=h([f.year,f.month,g,f.hour,f.minute,f.second,f.millisecond],function(y){return y&&parseInt(y,10)}),d(c)}}function se(c){var f=new pe(_o(It(c)));return f._nextDay&&(f.add(1,"d"),f._nextDay=void 0),f}function It(c){var f=c._i,g=c._f;return c._locale=c._locale||Ui(c._l),f===null||g===void 0&&f===""?H({nullInput:!0}):(typeof f=="string"&&(c._i=f=c._locale.preparse(f)),re(f)?new pe(_o(f)):(u(f)?c._d=f:r(g)?F(c):g?v(c):Tn(c),x(c)||(c._d=null),c))}function Tn(c){var f=c._i;a(f)?c._d=new Date(e.now()):u(f)?c._d=new Date(f.valueOf()):typeof f=="string"?n_(c):r(f)?(c._a=h(f.slice(0),function(g){return parseInt(g,10)}),d(c)):i(f)?j(c):l(f)?c._d=new Date(f):e.createFromInputFallback(c)}function lt(c,f,g,y,C){var R={};return(f===!0||f===!1)&&(y=f,f=void 0),(g===!0||g===!1)&&(y=g,g=void 0),(i(c)&&o(c)||r(c)&&c.length===0)&&(c=void 0),R._isAMomentObject=!0,R._useUTC=R._isUTC=C,R._l=g,R._i=c,R._f=f,R._strict=y,se(R)}function ze(c,f,g,y){return lt(c,f,g,y,!1)}var On=I("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var c=ze.apply(null,arguments);return this.isValid()&&c.isValid()?c<this?this:c:H()}),pa=I("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var c=ze.apply(null,arguments);return this.isValid()&&c.isValid()?c>this?this:c:H()});function kr(c,f){var g,y;if(f.length===1&&r(f[0])&&(f=f[0]),!f.length)return ze();for(g=f[0],y=1;y<f.length;++y)(!f[y].isValid()||f[y][c](g))&&(g=f[y]);return g}function gc(){var c=[].slice.call(arguments,0);return kr("isBefore",c)}function wf(){var c=[].slice.call(arguments,0);return kr("isAfter",c)}var g$=function(){return Date.now?Date.now():+new Date},Ef=["year","quarter","month","week","day","hour","minute","second","millisecond"];function _$(c){var f,g=!1,y,C=Ef.length;for(f in c)if(s(c,f)&&!(Ut.call(Ef,f)!==-1&&(c[f]==null||!isNaN(c[f]))))return!1;for(y=0;y<C;++y)if(c[Ef[y]]){if(g)return!1;parseFloat(c[Ef[y]])!==Je(c[Ef[y]])&&(g=!0)}return!0}function y$(){return this._isValid}function v$(){return Bi(NaN)}function r_(c){var f=tc(c),g=f.year||0,y=f.quarter||0,C=f.month||0,R=f.week||f.isoWeek||0,W=f.day||0,ge=f.hour||0,Fe=f.minute||0,ut=f.second||0,yr=f.millisecond||0;this._isValid=_$(f),this._milliseconds=+yr+ut*1e3+Fe*6e4+ge*1e3*60*60,this._days=+W+R*7,this._months=+C+y*3+g*12,this._data={},this._locale=Ui(),this._bubble()}function i_(c){return c instanceof r_}function xC(c){return c<0?Math.round(-1*c)*-1:Math.round(c)}function w$(c,f,g){var y=Math.min(c.length,f.length),C=Math.abs(c.length-f.length),R=0,W;for(W=0;W<y;W++)(g&&c[W]!==f[W]||!g&&Je(c[W])!==Je(f[W]))&&R++;return R+C}function t1(c,f){ae(c,0,0,function(){var g=this.utcOffset(),y="+";return g<0&&(g=-g,y="-"),y+Ce(~~(g/60),2)+f+Ce(~~g%60,2)})}t1("Z",":"),t1("ZZ",""),fe("Z",rc),fe("ZZ",rc),Ct(["Z","ZZ"],function(c,f,g){g._useUTC=!0,g._tzm=kC(rc,c)});var E$=/([\+\-]|\d\d)/gi;function kC(c,f){var g=(f||"").match(c),y,C,R;return g===null?null:(y=g[g.length-1]||[],C=(y+"").match(E$)||["-",0,0],R=+(C[1]*60)+Je(C[2]),R===0?0:C[0]==="+"?R:-R)}function RC(c,f){var g,y;return f._isUTC?(g=f.clone(),y=(re(c)||u(c)?c.valueOf():ze(c).valueOf())-g.valueOf(),g._d.setTime(g._d.valueOf()+y),e.updateOffset(g,!1),g):ze(c).local()}function NC(c){return-Math.round(c._d.getTimezoneOffset())}e.updateOffset=function(){};function C$(c,f,g){var y=this._offset||0,C;if(!this.isValid())return c!=null?this:NaN;if(c!=null){if(typeof c=="string"){if(c=kC(rc,c),c===null)return this}else Math.abs(c)<16&&!g&&(c=c*60);return!this._isUTC&&f&&(C=NC(this)),this._offset=c,this._isUTC=!0,C!=null&&this.add(C,"m"),y!==c&&(!f||this._changeInProgress?s1(this,Bi(c-y,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?y:NC(this)}function b$(c,f){return c!=null?(typeof c!="string"&&(c=-c),this.utcOffset(c,f),this):-this.utcOffset()}function I$(c){return this.utcOffset(0,c)}function D$(c){return this._isUTC&&(this.utcOffset(0,c),this._isUTC=!1,c&&this.subtract(NC(this),"m")),this}function S$(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var c=kC(uf,this._i);c!=null?this.utcOffset(c):this.utcOffset(0,!0)}return this}function T$(c){return this.isValid()?(c=c?ze(c).utcOffset():0,(this.utcOffset()-c)%60===0):!1}function A$(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function M$(){if(!a(this._isDSTShifted))return this._isDSTShifted;var c={},f;return Q(c,this),c=It(c),c._a?(f=c._isUTC?_(c._a):ze(c._a),this._isDSTShifted=this.isValid()&&w$(c._a,f.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function x$(){return this.isValid()?!this._isUTC:!1}function k$(){return this.isValid()?this._isUTC:!1}function n1(){return this.isValid()?this._isUTC&&this._offset===0:!1}var R$=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,N$=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Bi(c,f){var g=c,y=null,C,R,W;return i_(c)?g={ms:c._milliseconds,d:c._days,M:c._months}:l(c)||!isNaN(+c)?(g={},f?g[f]=+c:g.milliseconds=+c):(y=R$.exec(c))?(C=y[1]==="-"?-1:1,g={y:0,d:Je(y[di])*C,h:Je(y[Vt])*C,m:Je(y[Br])*C,s:Je(y[Li])*C,ms:Je(xC(y[hi]*1e3))*C}):(y=N$.exec(c))?(C=y[1]==="-"?-1:1,g={y:Fl(y[2],C),M:Fl(y[3],C),w:Fl(y[4],C),d:Fl(y[5],C),h:Fl(y[6],C),m:Fl(y[7],C),s:Fl(y[8],C)}):g==null?g={}:typeof g=="object"&&("from"in g||"to"in g)&&(W=P$(ze(g.from),ze(g.to)),g={},g.ms=W.milliseconds,g.M=W.months),R=new r_(g),i_(c)&&s(c,"_locale")&&(R._locale=c._locale),i_(c)&&s(c,"_isValid")&&(R._isValid=c._isValid),R}Bi.fn=r_.prototype,Bi.invalid=v$;function Fl(c,f){var g=c&&parseFloat(c.replace(",","."));return(isNaN(g)?0:g)*f}function r1(c,f){var g={};return g.months=f.month()-c.month()+(f.year()-c.year())*12,c.clone().add(g.months,"M").isAfter(f)&&--g.months,g.milliseconds=+f-+c.clone().add(g.months,"M"),g}function P$(c,f){var g;return c.isValid()&&f.isValid()?(f=RC(f,c),c.isBefore(f)?g=r1(c,f):(g=r1(f,c),g.milliseconds=-g.milliseconds,g.months=-g.months),g):{milliseconds:0,months:0}}function i1(c,f){return function(g,y){var C,R;return y!==null&&!isNaN(+y)&&(P(f,"moment()."+f+"(period, number) is deprecated. Please use moment()."+f+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),R=g,g=y,y=R),C=Bi(g,y),s1(this,C,c),this}}function s1(c,f,g,y){var C=f._milliseconds,R=xC(f._days),W=xC(f._months);c.isValid()&&(y=y??!0,W&&ac(c,po(c,"Month")+W*g),R&&sc(c,"Date",po(c,"Date")+R*g),C&&c._d.setTime(c._d.valueOf()+C*g),y&&e.updateOffset(c,R||W))}var O$=i1(1,"add"),F$=i1(-1,"subtract");function o1(c){return typeof c=="string"||c instanceof String}function L$(c){return re(c)||u(c)||o1(c)||l(c)||U$(c)||V$(c)||c===null||c===void 0}function V$(c){var f=i(c)&&!o(c),g=!1,y=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],C,R,W=y.length;for(C=0;C<W;C+=1)R=y[C],g=g||s(c,R);return f&&g}function U$(c){var f=r(c),g=!1;return f&&(g=c.filter(function(y){return!l(y)&&o1(c)}).length===0),f&&g}function B$(c){var f=i(c)&&!o(c),g=!1,y=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],C,R;for(C=0;C<y.length;C+=1)R=y[C],g=g||s(c,R);return f&&g}function j$(c,f){var g=c.diff(f,"days",!0);return g<-6?"sameElse":g<-1?"lastWeek":g<0?"lastDay":g<1?"sameDay":g<2?"nextDay":g<7?"nextWeek":"sameElse"}function H$(c,f){arguments.length===1&&(arguments[0]?L$(arguments[0])?(c=arguments[0],f=void 0):B$(arguments[0])&&(f=arguments[0],c=void 0):(c=void 0,f=void 0));var g=c||ze(),y=RC(g,this).startOf("day"),C=e.calendarFormat(this,y)||"sameElse",R=f&&(O(f[C])?f[C].call(this,g):f[C]);return this.format(R||this.localeData().calendar(C,this,ze(g)))}function $$(){return new pe(this)}function q$(c,f){var g=re(c)?c:ze(c);return this.isValid()&&g.isValid()?(f=gr(f)||"millisecond",f==="millisecond"?this.valueOf()>g.valueOf():g.valueOf()<this.clone().startOf(f).valueOf()):!1}function z$(c,f){var g=re(c)?c:ze(c);return this.isValid()&&g.isValid()?(f=gr(f)||"millisecond",f==="millisecond"?this.valueOf()<g.valueOf():this.clone().endOf(f).valueOf()<g.valueOf()):!1}function W$(c,f,g,y){var C=re(c)?c:ze(c),R=re(f)?f:ze(f);return this.isValid()&&C.isValid()&&R.isValid()?(y=y||"()",(y[0]==="("?this.isAfter(C,g):!this.isBefore(C,g))&&(y[1]===")"?this.isBefore(R,g):!this.isAfter(R,g))):!1}function G$(c,f){var g=re(c)?c:ze(c),y;return this.isValid()&&g.isValid()?(f=gr(f)||"millisecond",f==="millisecond"?this.valueOf()===g.valueOf():(y=g.valueOf(),this.clone().startOf(f).valueOf()<=y&&y<=this.clone().endOf(f).valueOf())):!1}function Y$(c,f){return this.isSame(c,f)||this.isAfter(c,f)}function K$(c,f){return this.isSame(c,f)||this.isBefore(c,f)}function Q$(c,f,g){var y,C,R;if(!this.isValid())return NaN;if(y=RC(c,this),!y.isValid())return NaN;switch(C=(y.utcOffset()-this.utcOffset())*6e4,f=gr(f),f){case"year":R=s_(this,y)/12;break;case"month":R=s_(this,y);break;case"quarter":R=s_(this,y)/3;break;case"second":R=(this-y)/1e3;break;case"minute":R=(this-y)/6e4;break;case"hour":R=(this-y)/36e5;break;case"day":R=(this-y-C)/864e5;break;case"week":R=(this-y-C)/6048e5;break;default:R=this-y}return g?R:Hn(R)}function s_(c,f){if(c.date()<f.date())return-s_(f,c);var g=(f.year()-c.year())*12+(f.month()-c.month()),y=c.clone().add(g,"months"),C,R;return f-y<0?(C=c.clone().add(g-1,"months"),R=(f-y)/(y-C)):(C=c.clone().add(g+1,"months"),R=(f-y)/(C-y)),-(g+R)||0}e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Z$(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function X$(c){if(!this.isValid())return null;var f=c!==!0,g=f?this.clone().utc():this;return g.year()<0||g.year()>9999?aa(g,f?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):O(Date.prototype.toISOString)?f?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",aa(g,"Z")):aa(g,f?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function J$(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var c="moment",f="",g,y,C,R;return this.isLocal()||(c=this.utcOffset()===0?"moment.utc":"moment.parseZone",f="Z"),g="["+c+'("]',y=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",C="-MM-DD[T]HH:mm:ss.SSS",R=f+'[")]',this.format(g+y+C+R)}function eq(c){c||(c=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);var f=aa(this,c);return this.localeData().postformat(f)}function tq(c,f){return this.isValid()&&(re(c)&&c.isValid()||ze(c).isValid())?Bi({to:this,from:c}).locale(this.locale()).humanize(!f):this.localeData().invalidDate()}function nq(c){return this.from(ze(),c)}function rq(c,f){return this.isValid()&&(re(c)&&c.isValid()||ze(c).isValid())?Bi({from:this,to:c}).locale(this.locale()).humanize(!f):this.localeData().invalidDate()}function iq(c){return this.to(ze(),c)}function a1(c){var f;return c===void 0?this._locale._abbr:(f=Ui(c),f!=null&&(this._locale=f),this)}var l1=I("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(c){return c===void 0?this.localeData():this.locale(c)});function u1(){return this._locale}var o_=1e3,_c=60*o_,a_=60*_c,c1=(365*400+97)*24*a_;function yc(c,f){return(c%f+f)%f}function d1(c,f,g){return c<100&&c>=0?new Date(c+400,f,g)-c1:new Date(c,f,g).valueOf()}function h1(c,f,g){return c<100&&c>=0?Date.UTC(c+400,f,g)-c1:Date.UTC(c,f,g)}function sq(c){var f,g;if(c=gr(c),c===void 0||c==="millisecond"||!this.isValid())return this;switch(g=this._isUTC?h1:d1,c){case"year":f=g(this.year(),0,1);break;case"quarter":f=g(this.year(),this.month()-this.month()%3,1);break;case"month":f=g(this.year(),this.month(),1);break;case"week":f=g(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":f=g(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":f=g(this.year(),this.month(),this.date());break;case"hour":f=this._d.valueOf(),f-=yc(f+(this._isUTC?0:this.utcOffset()*_c),a_);break;case"minute":f=this._d.valueOf(),f-=yc(f,_c);break;case"second":f=this._d.valueOf(),f-=yc(f,o_);break}return this._d.setTime(f),e.updateOffset(this,!0),this}function oq(c){var f,g;if(c=gr(c),c===void 0||c==="millisecond"||!this.isValid())return this;switch(g=this._isUTC?h1:d1,c){case"year":f=g(this.year()+1,0,1)-1;break;case"quarter":f=g(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":f=g(this.year(),this.month()+1,1)-1;break;case"week":f=g(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":f=g(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":f=g(this.year(),this.month(),this.date()+1)-1;break;case"hour":f=this._d.valueOf(),f+=a_-yc(f+(this._isUTC?0:this.utcOffset()*_c),a_)-1;break;case"minute":f=this._d.valueOf(),f+=_c-yc(f,_c)-1;break;case"second":f=this._d.valueOf(),f+=o_-yc(f,o_)-1;break}return this._d.setTime(f),e.updateOffset(this,!0),this}function aq(){return this._d.valueOf()-(this._offset||0)*6e4}function lq(){return Math.floor(this.valueOf()/1e3)}function uq(){return new Date(this.valueOf())}function cq(){var c=this;return[c.year(),c.month(),c.date(),c.hour(),c.minute(),c.second(),c.millisecond()]}function dq(){var c=this;return{years:c.year(),months:c.month(),date:c.date(),hours:c.hours(),minutes:c.minutes(),seconds:c.seconds(),milliseconds:c.milliseconds()}}function hq(){return this.isValid()?this.toISOString():null}function fq(){return x(this)}function pq(){return p({},E(this))}function mq(){return E(this).overflow}function gq(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}ae("N",0,0,"eraAbbr"),ae("NN",0,0,"eraAbbr"),ae("NNN",0,0,"eraAbbr"),ae("NNNN",0,0,"eraName"),ae("NNNNN",0,0,"eraNarrow"),ae("y",["y",1],"yo","eraYear"),ae("y",["yy",2],0,"eraYear"),ae("y",["yyy",3],0,"eraYear"),ae("y",["yyyy",4],0,"eraYear"),fe("N",PC),fe("NN",PC),fe("NNN",PC),fe("NNNN",Tq),fe("NNNNN",Aq),Ct(["N","NN","NNN","NNNN","NNNNN"],function(c,f,g,y){var C=g._locale.erasParse(c,y,g._strict);C?E(g).era=C:E(g).invalidEra=c}),fe("y",ao),fe("yy",ao),fe("yyy",ao),fe("yyyy",ao),fe("yo",Mq),Ct(["y","yy","yyy","yyyy"],nn),Ct(["yo"],function(c,f,g,y){var C;g._locale._eraYearOrdinalRegex&&(C=c.match(g._locale._eraYearOrdinalRegex)),g._locale.eraYearOrdinalParse?f[nn]=g._locale.eraYearOrdinalParse(c,C):f[nn]=parseInt(c,10)});function _q(c,f){var g,y,C,R=this._eras||Ui("en")._eras;for(g=0,y=R.length;g<y;++g){switch(typeof R[g].since){case"string":C=e(R[g].since).startOf("day"),R[g].since=C.valueOf();break}switch(typeof R[g].until){case"undefined":R[g].until=1/0;break;case"string":C=e(R[g].until).startOf("day").valueOf(),R[g].until=C.valueOf();break}}return R}function yq(c,f,g){var y,C,R=this.eras(),W,ge,Fe;for(c=c.toUpperCase(),y=0,C=R.length;y<C;++y)if(W=R[y].name.toUpperCase(),ge=R[y].abbr.toUpperCase(),Fe=R[y].narrow.toUpperCase(),g)switch(f){case"N":case"NN":case"NNN":if(ge===c)return R[y];break;case"NNNN":if(W===c)return R[y];break;case"NNNNN":if(Fe===c)return R[y];break}else if([W,ge,Fe].indexOf(c)>=0)return R[y]}function vq(c,f){var g=c.since<=c.until?1:-1;return f===void 0?e(c.since).year():e(c.since).year()+(f-c.offset)*g}function wq(){var c,f,g,y=this.localeData().eras();for(c=0,f=y.length;c<f;++c)if(g=this.clone().startOf("day").valueOf(),y[c].since<=g&&g<=y[c].until||y[c].until<=g&&g<=y[c].since)return y[c].name;return""}function Eq(){var c,f,g,y=this.localeData().eras();for(c=0,f=y.length;c<f;++c)if(g=this.clone().startOf("day").valueOf(),y[c].since<=g&&g<=y[c].until||y[c].until<=g&&g<=y[c].since)return y[c].narrow;return""}function Cq(){var c,f,g,y=this.localeData().eras();for(c=0,f=y.length;c<f;++c)if(g=this.clone().startOf("day").valueOf(),y[c].since<=g&&g<=y[c].until||y[c].until<=g&&g<=y[c].since)return y[c].abbr;return""}function bq(){var c,f,g,y,C=this.localeData().eras();for(c=0,f=C.length;c<f;++c)if(g=C[c].since<=C[c].until?1:-1,y=this.clone().startOf("day").valueOf(),C[c].since<=y&&y<=C[c].until||C[c].until<=y&&y<=C[c].since)return(this.year()-e(C[c].since).year())*g+C[c].offset;return this.year()}function Iq(c){return s(this,"_erasNameRegex")||OC.call(this),c?this._erasNameRegex:this._erasRegex}function Dq(c){return s(this,"_erasAbbrRegex")||OC.call(this),c?this._erasAbbrRegex:this._erasRegex}function Sq(c){return s(this,"_erasNarrowRegex")||OC.call(this),c?this._erasNarrowRegex:this._erasRegex}function PC(c,f){return f.erasAbbrRegex(c)}function Tq(c,f){return f.erasNameRegex(c)}function Aq(c,f){return f.erasNarrowRegex(c)}function Mq(c,f){return f._eraYearOrdinalRegex||ao}function OC(){var c=[],f=[],g=[],y=[],C,R,W,ge,Fe,ut=this.eras();for(C=0,R=ut.length;C<R;++C)W=ci(ut[C].name),ge=ci(ut[C].abbr),Fe=ci(ut[C].narrow),f.push(W),c.push(ge),g.push(Fe),y.push(W),y.push(ge),y.push(Fe);this._erasRegex=new RegExp("^("+y.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+f.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+c.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+g.join("|")+")","i")}ae(0,["gg",2],0,function(){return this.weekYear()%100}),ae(0,["GG",2],0,function(){return this.isoWeekYear()%100});function l_(c,f){ae(0,[c,c.length],0,f)}l_("gggg","weekYear"),l_("ggggg","weekYear"),l_("GGGG","isoWeekYear"),l_("GGGGG","isoWeekYear"),fe("G",Ml),fe("g",Ml),fe("GG",Ke,jn),fe("gg",Ke,jn),fe("GGGG",lf,Sl),fe("gggg",lf,Sl),fe("GGGGG",us,un),fe("ggggg",us,un),cn(["gggg","ggggg","GGGG","GGGGG"],function(c,f,g,y){f[y.substr(0,2)]=Je(c)}),cn(["gg","GG"],function(c,f,g,y){f[y]=e.parseTwoDigitYear(c)});function xq(c){return f1.call(this,c,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function kq(c){return f1.call(this,c,this.isoWeek(),this.isoWeekday(),1,4)}function Rq(){return xr(this.year(),1,4)}function Nq(){return xr(this.isoWeekYear(),1,4)}function Pq(){var c=this.localeData()._week;return xr(this.year(),c.dow,c.doy)}function Oq(){var c=this.localeData()._week;return xr(this.weekYear(),c.dow,c.doy)}function f1(c,f,g,y,C){var R;return c==null?ps(this,y,C).year:(R=xr(c,y,C),f>R&&(f=R),Fq.call(this,c,f,g,y,C))}function Fq(c,f,g,y,C){var R=pi(c,f,g,y,C),W=xl(R.year,0,R.dayOfYear);return this.year(W.getUTCFullYear()),this.month(W.getUTCMonth()),this.date(W.getUTCDate()),this}ae("Q",0,"Qo","quarter"),fe("Q",bg),Ct("Q",function(c,f){f[Fi]=(Je(c)-1)*3});function Lq(c){return c==null?Math.ceil((this.month()+1)/3):this.month((c-1)*3+this.month()%3)}ae("D",["DD",2],"Do","date"),fe("D",Ke,uo),fe("DD",Ke,jn),fe("Do",function(c,f){return c?f._dayOfMonthOrdinalParse||f._ordinalParse:f._dayOfMonthOrdinalParseLenient}),Ct(["D","DD"],di),Ct("Do",function(c,f){f[di]=Je(c.match(Ke)[0])});var p1=fo("Date",!0);ae("DDD",["DDDD",3],"DDDo","dayOfYear"),fe("DDD",Al),fe("DDDD",nc),Ct(["DDD","DDDD"],function(c,f,g){g._dayOfYear=Je(c)});function Vq(c){var f=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return c==null?f:this.add(c-f,"d")}ae("m",["mm",2],0,"minute"),fe("m",Ke,ic),fe("mm",Ke,jn),Ct(["m","mm"],Br);var Uq=fo("Minutes",!1);ae("s",["ss",2],0,"second"),fe("s",Ke,ic),fe("ss",Ke,jn),Ct(["s","ss"],Li);var Bq=fo("Seconds",!1);ae("S",0,0,function(){return~~(this.millisecond()/100)}),ae(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),ae(0,["SSS",3],0,"millisecond"),ae(0,["SSSS",4],0,function(){return this.millisecond()*10}),ae(0,["SSSSS",5],0,function(){return this.millisecond()*100}),ae(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),ae(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),ae(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),ae(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),fe("S",Al,bg),fe("SS",Al,jn),fe("SSS",Al,nc);var ma,m1;for(ma="SSSS";ma.length<=9;ma+="S")fe(ma,ao);function jq(c,f){f[hi]=Je(("0."+c)*1e3)}for(ma="S";ma.length<=9;ma+="S")Ct(ma,jq);m1=fo("Milliseconds",!1),ae("z",0,0,"zoneAbbr"),ae("zz",0,0,"zoneName");function Hq(){return this._isUTC?"UTC":""}function $q(){return this._isUTC?"Coordinated Universal Time":""}var ee=pe.prototype;ee.add=O$,ee.calendar=H$,ee.clone=$$,ee.diff=Q$,ee.endOf=oq,ee.format=eq,ee.from=tq,ee.fromNow=nq,ee.to=rq,ee.toNow=iq,ee.get=Tg,ee.invalidAt=mq,ee.isAfter=q$,ee.isBefore=z$,ee.isBetween=W$,ee.isSame=G$,ee.isSameOrAfter=Y$,ee.isSameOrBefore=K$,ee.isValid=fq,ee.lang=l1,ee.locale=a1,ee.localeData=u1,ee.max=pa,ee.min=On,ee.parsingFlags=pq,ee.set=Ag,ee.startOf=sq,ee.subtract=F$,ee.toArray=cq,ee.toObject=dq,ee.toDate=uq,ee.toISOString=X$,ee.inspect=J$,typeof Symbol<"u"&&Symbol.for!=null&&(ee[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),ee.toJSON=hq,ee.toString=Z$,ee.unix=lq,ee.valueOf=aq,ee.creationData=gq,ee.eraName=wq,ee.eraNarrow=Eq,ee.eraAbbr=Cq,ee.eraYear=bq,ee.year=Vi,ee.isLeapYear=Sg,ee.weekYear=xq,ee.isoWeekYear=kq,ee.quarter=ee.quarters=Lq,ee.month=mf,ee.daysInMonth=Rg,ee.week=ee.weeks=Rl,ee.isoWeek=ee.isoWeeks=wC,ee.weeksInYear=Pq,ee.weeksInWeekYear=Oq,ee.isoWeeksInYear=Rq,ee.isoWeeksInISOWeekYear=Nq,ee.date=p1,ee.day=ee.days=gs,ee.weekday=SC,ee.isoWeekday=TC,ee.dayOfYear=Vq,ee.hour=ee.hours=Hg,ee.minute=ee.minutes=Uq,ee.second=ee.seconds=Bq,ee.millisecond=ee.milliseconds=m1,ee.utcOffset=C$,ee.utc=I$,ee.local=D$,ee.parseZone=S$,ee.hasAlignedHourOffset=T$,ee.isDST=A$,ee.isLocal=x$,ee.isUtcOffset=k$,ee.isUtc=n1,ee.isUTC=n1,ee.zoneAbbr=Hq,ee.zoneName=$q,ee.dates=I("dates accessor is deprecated. Use date instead.",p1),ee.months=I("months accessor is deprecated. Use month instead",mf),ee.years=I("years accessor is deprecated. Use year instead",Vi),ee.zone=I("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",b$),ee.isDSTShifted=I("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",M$);function qq(c){return ze(c*1e3)}function zq(){return ze.apply(null,arguments).parseZone()}function g1(c){return c}var gt=tr.prototype;gt.calendar=Me,gt.longDateFormat=rr,gt.invalidDate=ls,gt.ordinal=rf,gt.preparse=g1,gt.postformat=g1,gt.relativeTime=vg,gt.pastFuture=wg,gt.set=L,gt.eras=_q,gt.erasParse=yq,gt.erasConvertYear=vq,gt.erasAbbrRegex=Dq,gt.erasNameRegex=Iq,gt.erasNarrowRegex=Sq,gt.months=Mg,gt.monthsShort=xg,gt.monthsParse=pf,gt.monthsRegex=vC,gt.monthsShortRegex=yC,gt.week=Pg,gt.firstDayOfYear=kl,gt.firstDayOfWeek=lc,gt.weekdays=Ug,gt.weekdaysMin=bC,gt.weekdaysShort=ua,gt.weekdaysParse=DC,gt.weekdaysRegex=Pl,gt.weekdaysShortRegex=uc,gt.weekdaysMinRegex=Bg,gt.isPM=AC,gt.meridiem=$g;function u_(c,f,g,y){var C=Ui(),R=_().set(y,f);return C[g](R,c)}function _1(c,f,g){if(l(c)&&(f=c,c=void 0),c=c||"",f!=null)return u_(c,f,g,"month");var y,C=[];for(y=0;y<12;y++)C[y]=u_(c,y,g,"month");return C}function FC(c,f,g,y){typeof c=="boolean"?(l(f)&&(g=f,f=void 0),f=f||""):(f=c,g=f,c=!1,l(f)&&(g=f,f=void 0),f=f||"");var C=Ui(),R=c?C._week.dow:0,W,ge=[];if(g!=null)return u_(f,(g+R)%7,y,"day");for(W=0;W<7;W++)ge[W]=u_(f,(W+R)%7,y,"day");return ge}function Wq(c,f){return _1(c,f,"months")}function Gq(c,f){return _1(c,f,"monthsShort")}function Yq(c,f,g){return FC(c,f,g,"weekdays")}function Kq(c,f,g){return FC(c,f,g,"weekdaysShort")}function Qq(c,f,g){return FC(c,f,g,"weekdaysMin")}jr("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(c){var f=c%10,g=Je(c%100/10)===1?"th":f===1?"st":f===2?"nd":f===3?"rd":"th";return c+g}}),e.lang=I("moment.lang is deprecated. Use moment.locale instead.",jr),e.langData=I("moment.langData is deprecated. Use moment.localeData instead.",Ui);var vo=Math.abs;function Zq(){var c=this._data;return this._milliseconds=vo(this._milliseconds),this._days=vo(this._days),this._months=vo(this._months),c.milliseconds=vo(c.milliseconds),c.seconds=vo(c.seconds),c.minutes=vo(c.minutes),c.hours=vo(c.hours),c.months=vo(c.months),c.years=vo(c.years),this}function y1(c,f,g,y){var C=Bi(f,g);return c._milliseconds+=y*C._milliseconds,c._days+=y*C._days,c._months+=y*C._months,c._bubble()}function Xq(c,f){return y1(this,c,f,1)}function Jq(c,f){return y1(this,c,f,-1)}function v1(c){return c<0?Math.floor(c):Math.ceil(c)}function ez(){var c=this._milliseconds,f=this._days,g=this._months,y=this._data,C,R,W,ge,Fe;return c>=0&&f>=0&&g>=0||c<=0&&f<=0&&g<=0||(c+=v1(LC(g)+f)*864e5,f=0,g=0),y.milliseconds=c%1e3,C=Hn(c/1e3),y.seconds=C%60,R=Hn(C/60),y.minutes=R%60,W=Hn(R/60),y.hours=W%24,f+=Hn(W/24),Fe=Hn(w1(f)),g+=Fe,f-=v1(LC(Fe)),ge=Hn(g/12),g%=12,y.days=f,y.months=g,y.years=ge,this}function w1(c){return c*4800/146097}function LC(c){return c*146097/4800}function tz(c){if(!this.isValid())return NaN;var f,g,y=this._milliseconds;if(c=gr(c),c==="month"||c==="quarter"||c==="year")switch(f=this._days+y/864e5,g=this._months+w1(f),c){case"month":return g;case"quarter":return g/3;case"year":return g/12}else switch(f=this._days+Math.round(LC(this._months)),c){case"week":return f/7+y/6048e5;case"day":return f+y/864e5;case"hour":return f*24+y/36e5;case"minute":return f*1440+y/6e4;case"second":return f*86400+y/1e3;case"millisecond":return Math.floor(f*864e5)+y;default:throw new Error("Unknown unit "+c)}}function wo(c){return function(){return this.as(c)}}var E1=wo("ms"),nz=wo("s"),rz=wo("m"),iz=wo("h"),sz=wo("d"),oz=wo("w"),az=wo("M"),lz=wo("Q"),uz=wo("y"),cz=E1;function dz(){return Bi(this)}function hz(c){return c=gr(c),this.isValid()?this[c+"s"]():NaN}function Ll(c){return function(){return this.isValid()?this._data[c]:NaN}}var fz=Ll("milliseconds"),pz=Ll("seconds"),mz=Ll("minutes"),gz=Ll("hours"),_z=Ll("days"),yz=Ll("months"),vz=Ll("years");function wz(){return Hn(this.days()/7)}var Eo=Math.round,vc={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Ez(c,f,g,y,C){return C.relativeTime(f||1,!!g,c,y)}function Cz(c,f,g,y){var C=Bi(c).abs(),R=Eo(C.as("s")),W=Eo(C.as("m")),ge=Eo(C.as("h")),Fe=Eo(C.as("d")),ut=Eo(C.as("M")),yr=Eo(C.as("w")),Co=Eo(C.as("y")),ga=R<=g.ss&&["s",R]||R<g.s&&["ss",R]||W<=1&&["m"]||W<g.m&&["mm",W]||ge<=1&&["h"]||ge<g.h&&["hh",ge]||Fe<=1&&["d"]||Fe<g.d&&["dd",Fe];return g.w!=null&&(ga=ga||yr<=1&&["w"]||yr<g.w&&["ww",yr]),ga=ga||ut<=1&&["M"]||ut<g.M&&["MM",ut]||Co<=1&&["y"]||["yy",Co],ga[2]=f,ga[3]=+c>0,ga[4]=y,Ez.apply(null,ga)}function bz(c){return c===void 0?Eo:typeof c=="function"?(Eo=c,!0):!1}function Iz(c,f){return vc[c]===void 0?!1:f===void 0?vc[c]:(vc[c]=f,c==="s"&&(vc.ss=f-1),!0)}function Dz(c,f){if(!this.isValid())return this.localeData().invalidDate();var g=!1,y=vc,C,R;return typeof c=="object"&&(f=c,c=!1),typeof c=="boolean"&&(g=c),typeof f=="object"&&(y=Object.assign({},vc,f),f.s!=null&&f.ss==null&&(y.ss=f.s-1)),C=this.localeData(),R=Cz(this,!g,y,C),g&&(R=C.pastFuture(+this,R)),C.postformat(R)}var VC=Math.abs;function wc(c){return(c>0)-(c<0)||+c}function c_(){if(!this.isValid())return this.localeData().invalidDate();var c=VC(this._milliseconds)/1e3,f=VC(this._days),g=VC(this._months),y,C,R,W,ge=this.asSeconds(),Fe,ut,yr,Co;return ge?(y=Hn(c/60),C=Hn(y/60),c%=60,y%=60,R=Hn(g/12),g%=12,W=c?c.toFixed(3).replace(/\.?0+$/,""):"",Fe=ge<0?"-":"",ut=wc(this._months)!==wc(ge)?"-":"",yr=wc(this._days)!==wc(ge)?"-":"",Co=wc(this._milliseconds)!==wc(ge)?"-":"",Fe+"P"+(R?ut+R+"Y":"")+(g?ut+g+"M":"")+(f?yr+f+"D":"")+(C||y||c?"T":"")+(C?Co+C+"H":"")+(y?Co+y+"M":"")+(c?Co+W+"S":"")):"P0D"}var ct=r_.prototype;ct.isValid=y$,ct.abs=Zq,ct.add=Xq,ct.subtract=Jq,ct.as=tz,ct.asMilliseconds=E1,ct.asSeconds=nz,ct.asMinutes=rz,ct.asHours=iz,ct.asDays=sz,ct.asWeeks=oz,ct.asMonths=az,ct.asQuarters=lz,ct.asYears=uz,ct.valueOf=cz,ct._bubble=ez,ct.clone=dz,ct.get=hz,ct.milliseconds=fz,ct.seconds=pz,ct.minutes=mz,ct.hours=gz,ct.days=_z,ct.weeks=wz,ct.months=yz,ct.years=vz,ct.humanize=Dz,ct.toISOString=c_,ct.toString=c_,ct.toJSON=c_,ct.locale=a1,ct.localeData=u1,ct.toIsoString=I("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",c_),ct.lang=l1,ae("X",0,0,"unix"),ae("x",0,0,"valueOf"),fe("x",Ml),fe("X",mC),Ct("X",function(c,f,g){g._d=new Date(parseFloat(c)*1e3)}),Ct("x",function(c,f,g){g._d=new Date(Je(c))});return e.version="2.30.1",t(ze),e.fn=ee,e.min=gc,e.max=wf,e.now=g$,e.utc=_,e.unix=qq,e.months=Wq,e.isDate=u,e.locale=jr,e.invalid=H,e.duration=Bi,e.isMoment=re,e.weekdays=Yq,e.parseZone=zq,e.localeData=Ui,e.isDuration=i_,e.monthsShort=Gq,e.weekdaysMin=Qq,e.defineLocale=dc,e.updateLocale=hc,e.locales=Gg,e.weekdaysShort=Kq,e.normalizeUnits=gr,e.relativeTimeRounding=bz,e.relativeTimeThreshold=Iz,e.calendarFormat=j$,e.prototype=ee,e.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},e})});var Cj=C1((ux,Ej)=>{"use strict";(function(n,e){typeof ux=="object"&&typeof Ej<"u"&&typeof d_=="function"?e(Lu()):typeof define=="function"&&define.amd?define(["../moment"],e):e(n.moment)})(ux,function(n){"use strict";var e=n.defineLocale("pt-br",{months:"janeiro_fevereiro_mar\xE7o_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_ter\xE7a-feira_quarta-feira_quinta-feira_sexta-feira_s\xE1bado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_s\xE1b".split("_"),weekdaysMin:"do_2\xAA_3\xAA_4\xAA_5\xAA_6\xAA_s\xE1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [\xE0s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [\xE0s] HH:mm"},calendar:{sameDay:"[Hoje \xE0s] LT",nextDay:"[Amanh\xE3 \xE0s] LT",nextWeek:"dddd [\xE0s] LT",lastDay:"[Ontem \xE0s] LT",lastWeek:function(){return this.day()===0||this.day()===6?"[\xDAltimo] dddd [\xE0s] LT":"[\xDAltima] dddd [\xE0s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h\xE1 %s",s:"poucos segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um m\xEAs",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d\xBA",invalidDate:"Data inv\xE1lida"});return e})});function F1(n,e){return Object.is(n,e)}var Mn=null,v_=!1,w_=1,Io=Symbol("SIGNAL");function ft(n){let e=Mn;return Mn=n,e}function L1(){return Mn}var Sf={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function GC(n){if(v_)throw new Error("");if(Mn===null)return;Mn.consumerOnSignalRead(n);let e=Mn.nextProducerIndex++;if(I_(Mn),e<Mn.producerNode.length&&Mn.producerNode[e]!==n&&Df(Mn)){let t=Mn.producerNode[e];b_(t,Mn.producerIndexOfThis[e])}Mn.producerNode[e]!==n&&(Mn.producerNode[e]=n,Mn.producerIndexOfThis[e]=Df(Mn)?j1(n,Mn,e):0),Mn.producerLastReadVersion[e]=n.version}function Sz(){w_++}function V1(n){if(!(Df(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===w_)){if(!n.producerMustRecompute(n)&&!KC(n)){n.dirty=!1,n.lastCleanEpoch=w_;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=w_}}function U1(n){if(n.liveConsumerNode===void 0)return;let e=v_;v_=!0;try{for(let t of n.liveConsumerNode)t.dirty||Tz(t)}finally{v_=e}}function B1(){return Mn?.consumerAllowSignalWrites!==!1}function Tz(n){n.dirty=!0,U1(n),n.consumerMarkedDirty?.(n)}function C_(n){return n&&(n.nextProducerIndex=0),ft(n)}function YC(n,e){if(ft(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Df(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)b_(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function KC(n){I_(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(V1(t),r!==t.version))return!0}return!1}function QC(n){if(I_(n),Df(n))for(let e=0;e<n.producerNode.length;e++)b_(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function j1(n,e,t){if(H1(n),n.liveConsumerNode.length===0&&$1(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=j1(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function b_(n,e){if(H1(n),n.liveConsumerNode.length===1&&$1(n))for(let r=0;r<n.producerNode.length;r++)b_(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];I_(i),i.producerIndexOfThis[r]=e}}function Df(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function I_(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function H1(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function $1(n){return n.producerNode!==void 0}function q1(n){let e=Object.create(Az);e.computation=n;let t=()=>{if(V1(e),GC(e),e.value===E_)throw e.error;return e.value};return t[Io]=e,t}var zC=Symbol("UNSET"),WC=Symbol("COMPUTING"),E_=Symbol("ERRORED"),Az=de(V({},Sf),{value:zC,dirty:!0,error:null,equal:F1,producerMustRecompute(n){return n.value===zC||n.value===WC},producerRecomputeValue(n){if(n.value===WC)throw new Error("Detected cycle in computations.");let e=n.value;n.value=WC;let t=C_(n),r;try{r=n.computation()}catch(i){r=E_,n.error=i}finally{YC(n,t)}if(e!==zC&&e!==E_&&r!==E_&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function Mz(){throw new Error}var z1=Mz;function W1(){z1()}function G1(n){z1=n}var xz=null;function Y1(n){let e=Object.create(Q1);e.value=n;let t=()=>(GC(e),e.value);return t[Io]=e,t}function ZC(n,e){B1()||W1(),n.equal(n.value,e)||(n.value=e,kz(n))}function K1(n,e){B1()||W1(),ZC(n,e(n.value))}var Q1=de(V({},Sf),{equal:F1,value:void 0});function kz(n){n.version++,Sz(),U1(n),xz?.()}function Ue(n){return typeof n=="function"}function Dc(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var D_=Dc(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Vl(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var rn=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Ue(r))try{r()}catch(s){e=s instanceof D_?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Z1(s)}catch(o){e=e??[],o instanceof D_?e=[...e,...o.errors]:e.push(o)}}if(e)throw new D_(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Z1(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Vl(t,e)}remove(e){let{_finalizers:t}=this;t&&Vl(t,e),e instanceof n&&e._removeParent(this)}};rn.EMPTY=(()=>{let n=new rn;return n.closed=!0,n})();var XC=rn.EMPTY;function S_(n){return n instanceof rn||n&&"closed"in n&&Ue(n.remove)&&Ue(n.add)&&Ue(n.unsubscribe)}function Z1(n){Ue(n)?n():n.unsubscribe()}var ji={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Sc={setTimeout(n,e,...t){let{delegate:r}=Sc;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Sc;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function T_(n){Sc.setTimeout(()=>{let{onUnhandledError:e}=ji;if(e)e(n);else throw n})}function Ul(){}var X1=JC("C",void 0,void 0);function J1(n){return JC("E",void 0,n)}function eN(n){return JC("N",n,void 0)}function JC(n,e,t){return{kind:n,value:e,error:t}}var Bl=null;function Tc(n){if(ji.useDeprecatedSynchronousErrorHandling){let e=!Bl;if(e&&(Bl={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Bl;if(Bl=null,t)throw r}}else n()}function tN(n){ji.useDeprecatedSynchronousErrorHandling&&Bl&&(Bl.errorThrown=!0,Bl.error=n)}var jl=class extends rn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,S_(e)&&e.add(this)):this.destination=Pz}static create(e,t,r){return new Do(e,t,r)}next(e){this.isStopped?tb(eN(e),this):this._next(e)}error(e){this.isStopped?tb(J1(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?tb(X1,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Rz=Function.prototype.bind;function eb(n,e){return Rz.call(n,e)}var nb=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){A_(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){A_(r)}else A_(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){A_(t)}}},Do=class extends jl{constructor(e,t,r){super();let i;if(Ue(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&ji.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&eb(e.next,s),error:e.error&&eb(e.error,s),complete:e.complete&&eb(e.complete,s)}):i=e}this.destination=new nb(i)}};function A_(n){ji.useDeprecatedSynchronousErrorHandling?tN(n):T_(n)}function Nz(n){throw n}function tb(n,e){let{onStoppedNotification:t}=ji;t&&Sc.setTimeout(()=>t(n,e))}var Pz={closed:!0,next:Ul,error:Nz,complete:Ul};var Ac=typeof Symbol=="function"&&Symbol.observable||"@@observable";function qn(n){return n}function rb(...n){return ib(n)}function ib(n){return n.length===0?qn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var He=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=Fz(t)?t:new Do(t,r,i);return Tc(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=nN(r),new r((i,s)=>{let o=new Do({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ac](){return this}pipe(...t){return ib(t)(this)}toPromise(t){return t=nN(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function nN(n){var e;return(e=n??ji.Promise)!==null&&e!==void 0?e:Promise}function Oz(n){return n&&Ue(n.next)&&Ue(n.error)&&Ue(n.complete)}function Fz(n){return n&&n instanceof jl||Oz(n)&&S_(n)}function sb(n){return Ue(n?.lift)}function Ve(n){return e=>{if(sb(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Oe(n,e,t,r,i){return new ob(n,e,t,r,i)}var ob=class extends jl{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Mc(){return Ve((n,e)=>{let t=null;n._refCount++;let r=Oe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var xc=class extends He{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,sb(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new rn;let t=this.getSubject();e.add(this.source.subscribe(Oe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=rn.EMPTY)}return e}refCount(){return Mc()(this)}};var rN=Dc(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var _t=(()=>{class n extends He{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new M_(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new rN}next(t){Tc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Tc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Tc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?XC:(this.currentObservers=null,s.push(t),new rn(()=>{this.currentObservers=null,Vl(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new He;return t.source=this,t}}return n.create=(e,t)=>new M_(e,t),n})(),M_=class extends _t{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:XC}};var zn=class extends _t{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Tf={now(){return(Tf.delegate||Date).now()},delegate:void 0};var x_=class extends _t{constructor(e=1/0,t=1/0,r=Tf){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=t.now(),a=0;for(let l=1;l<r.length&&r[l]<=o;l+=2)a=l;a&&r.splice(0,a+1)}}};var k_=class extends rn{constructor(e,t){super()}schedule(e,t=0){return this}};var Af={setInterval(n,e,...t){let{delegate:r}=Af;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Af;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var kc=class extends k_{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Af.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Af.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Vl(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Rc=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Rc.now=Tf.now;var Nc=class extends Rc{constructor(e,t=Rc.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var So=new Nc(kc);var R_=class extends kc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var N_=class extends Nc{};var ab=new N_(R_);var vr=new He(n=>n.complete());function iN(n){return n&&Ue(n.schedule)}function lb(n){return n[n.length-1]}function Pc(n){return Ue(lb(n))?n.pop():void 0}function vs(n){return iN(lb(n))?n.pop():void 0}function sN(n,e){return typeof lb(n)=="number"?n.pop():e}var P_=n=>n&&typeof n.length=="number"&&typeof n!="function";function O_(n){return Ue(n?.then)}function F_(n){return Ue(n[Ac])}function L_(n){return Symbol.asyncIterator&&Ue(n?.[Symbol.asyncIterator])}function V_(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Lz(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var U_=Lz();function B_(n){return Ue(n?.[U_])}function j_(n){return I1(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield h_(t.read());if(i)return yield h_(void 0);yield yield h_(r)}}finally{t.releaseLock()}})}function H_(n){return Ue(n?.getReader)}function Rt(n){if(n instanceof He)return n;if(n!=null){if(F_(n))return Vz(n);if(P_(n))return Uz(n);if(O_(n))return Bz(n);if(L_(n))return oN(n);if(B_(n))return jz(n);if(H_(n))return Hz(n)}throw V_(n)}function Vz(n){return new He(e=>{let t=n[Ac]();if(Ue(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Uz(n){return new He(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Bz(n){return new He(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,T_)})}function jz(n){return new He(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function oN(n){return new He(e=>{$z(n,e).catch(t=>e.error(t))})}function Hz(n){return oN(j_(n))}function $z(n,e){var t,r,i,s;return b1(this,void 0,void 0,function*(){try{for(t=D1(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Pr(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Hr(n,e=0){return Ve((t,r)=>{t.subscribe(Oe(r,i=>Pr(r,n,()=>r.next(i),e),()=>Pr(r,n,()=>r.complete(),e),i=>Pr(r,n,()=>r.error(i),e)))})}function Hi(n,e=0){return Ve((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function aN(n,e){return Rt(n).pipe(Hi(e),Hr(e))}function lN(n,e){return Rt(n).pipe(Hi(e),Hr(e))}function uN(n,e){return new He(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function cN(n,e){return new He(t=>{let r;return Pr(t,e,()=>{r=n[U_](),Pr(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>Ue(r?.return)&&r.return()})}function $_(n,e){if(!n)throw new Error("Iterable cannot be null");return new He(t=>{Pr(t,e,()=>{let r=n[Symbol.asyncIterator]();Pr(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function dN(n,e){return $_(j_(n),e)}function hN(n,e){if(n!=null){if(F_(n))return aN(n,e);if(P_(n))return uN(n,e);if(O_(n))return lN(n,e);if(L_(n))return $_(n,e);if(B_(n))return cN(n,e);if(H_(n))return dN(n,e)}throw V_(n)}function Ze(n,e){return e?hN(n,e):Rt(n)}function De(...n){let e=vs(n);return Ze(n,e)}function Oc(n,e){let t=Ue(n)?n:()=>n,r=i=>i.error(t());return new He(e?i=>e.schedule(r,0,i):r)}function ub(n){return!!n&&(n instanceof He||Ue(n.lift)&&Ue(n.subscribe))}var To=Dc(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function he(n,e){return Ve((t,r)=>{let i=0;t.subscribe(Oe(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:qz}=Array;function zz(n,e){return qz(e)?n(...e):n(e)}function q_(n){return he(e=>zz(n,e))}var{isArray:Wz}=Array,{getPrototypeOf:Gz,prototype:Yz,keys:Kz}=Object;function z_(n){if(n.length===1){let e=n[0];if(Wz(e))return{args:e,keys:null};if(Qz(e)){let t=Kz(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function Qz(n){return n&&typeof n=="object"&&Gz(n)===Yz}function W_(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Mf(...n){let e=vs(n),t=Pc(n),{args:r,keys:i}=z_(n);if(r.length===0)return Ze([],e);let s=new He(Zz(r,e,i?o=>W_(i,o):qn));return t?s.pipe(q_(t)):s}function Zz(n,e,t=qn){return r=>{fN(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let l=0;l<i;l++)fN(e,()=>{let u=Ze(n[l],e),h=!1;u.subscribe(Oe(r,p=>{s[l]=p,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function fN(n,e,t){n?Pr(t,n,e):e()}function pN(n,e,t,r,i,s,o,a){let l=[],u=0,h=0,p=!1,_=()=>{p&&!l.length&&!u&&e.complete()},w=S=>u<r?E(S):l.push(S),E=S=>{s&&e.next(S),u++;let x=!1;Rt(t(S,h++)).subscribe(Oe(e,H=>{i?.(H),s?w(H):e.next(H)},()=>{x=!0},void 0,()=>{if(x)try{for(u--;l.length&&u<r;){let H=l.shift();o?Pr(e,o,()=>E(H)):E(H)}_()}catch(H){e.error(H)}}))};return n.subscribe(Oe(e,w,()=>{p=!0,_()})),()=>{a?.()}}function _n(n,e,t=1/0){return Ue(e)?_n((r,i)=>he((s,o)=>e(r,s,i,o))(Rt(n(r,i))),t):(typeof e=="number"&&(t=e),Ve((r,i)=>pN(r,i,n,t)))}function va(n=1/0){return _n(qn,n)}function mN(){return va(1)}function Fc(...n){return mN()(Ze(n,vs(n)))}function G_(n){return new He(e=>{Rt(n()).subscribe(e)})}function cb(...n){let e=Pc(n),{args:t,keys:r}=z_(n),i=new He(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),l=o,u=o;for(let h=0;h<o;h++){let p=!1;Rt(t[h]).subscribe(Oe(s,_=>{p||(p=!0,u--),a[h]=_},()=>l--,void 0,()=>{(!l||!p)&&(u||s.next(r?W_(r,a):a),s.complete())}))}});return e?i.pipe(q_(e)):i}function Lc(...n){let e=vs(n),t=sN(n,1/0),r=n;return r.length?r.length===1?Rt(r[0]):va(t)(Ze(r,e)):vr}function Wn(n,e){return Ve((t,r)=>{let i=0;t.subscribe(Oe(r,s=>n.call(e,s,i++)&&r.next(s)))})}function wa(n){return Ve((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Oe(t,void 0,void 0,o=>{s=Rt(n(o,wa(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function gN(n,e,t,r,i){return(s,o)=>{let a=t,l=e,u=0;s.subscribe(Oe(o,h=>{let p=u++;l=a?n(l,h,p):(a=!0,h),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function Hl(n,e){return Ue(e)?_n(n,e,1):_n(n,1)}function db(n,e=So){return Ve((t,r)=>{let i=null,s=null,o=null,a=()=>{if(i){i.unsubscribe(),i=null;let u=s;s=null,r.next(u)}};function l(){let u=o+n,h=e.now();if(h<u){i=this.schedule(void 0,u-h),r.add(i);return}a()}t.subscribe(Oe(r,u=>{s=u,o=e.now(),i||(i=e.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function Ea(n){return Ve((e,t)=>{let r=!1;e.subscribe(Oe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ao(n){return n<=0?()=>vr:Ve((e,t)=>{let r=0;e.subscribe(Oe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function hb(n){return he(()=>n)}function xf(n,e=qn){return n=n??Xz,Ve((t,r)=>{let i,s=!0;t.subscribe(Oe(r,o=>{let a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function Xz(n,e){return n===e}function Y_(n=Jz){return Ve((e,t)=>{let r=!1;e.subscribe(Oe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Jz(){return new To}function $l(n){return Ve((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function _i(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Wn((i,s)=>n(i,s,r)):qn,Ao(1),t?Ea(e):Y_(()=>new To))}function Vc(n){return n<=0?()=>vr:Ve((e,t)=>{let r=[];e.subscribe(Oe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function fb(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Wn((i,s)=>n(i,s,r)):qn,Vc(1),t?Ea(e):Y_(()=>new To))}function kf(){return Ve((n,e)=>{let t,r=!1;n.subscribe(Oe(e,i=>{let s=t;t=i,r&&e.next([s,i]),r=!0}))})}function ws(n,e){return Ve(gN(n,e,arguments.length>=2,!0))}function Rf(n={}){let{connector:e=()=>new _t,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,l,u=0,h=!1,p=!1,_=()=>{a?.unsubscribe(),a=void 0},w=()=>{_(),o=l=void 0,h=p=!1},E=()=>{let S=o;w(),S?.unsubscribe()};return Ve((S,x)=>{u++,!p&&!h&&_();let H=l=l??e();x.add(()=>{u--,u===0&&!p&&!h&&(a=pb(E,i))}),H.subscribe(x),!o&&u>0&&(o=new Do({next:Y=>H.next(Y),error:Y=>{p=!0,_(),a=pb(w,t,Y),H.error(Y)},complete:()=>{h=!0,_(),a=pb(w,r),H.complete()}}),Rt(S).subscribe(o))})(s)}}function pb(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Do({next:()=>{r.unsubscribe(),n()}});return Rt(e(...t)).subscribe(r)}function K_(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,Rf({connector:()=>new x_(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function mb(n){return Ve((e,t)=>{let r=!1,i=0;e.subscribe(Oe(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}function ql(...n){let e=vs(n);return Ve((t,r)=>{(e?Fc(n,t,e):Fc(n,t)).subscribe(r)})}function bt(n,e){return Ve((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(Oe(r,l=>{i?.unsubscribe();let u=0,h=s++;Rt(n(l,h)).subscribe(i=Oe(r,p=>r.next(e?e(l,p,h,u++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Q_(n,e){return Ue(e)?bt(()=>n,e):bt(()=>n)}function gb(n){return Ve((e,t)=>{Rt(n).subscribe(Oe(t,()=>t.complete(),Ul)),!t.closed&&e.subscribe(t)})}function yn(n,e,t){let r=Ue(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ve((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Oe(s,l=>{var u;(u=r.next)===null||u===void 0||u.call(r,l),s.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),s.complete()},l=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,l),s.error(l)},()=>{var l,u;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):qn}function _b(...n){let e=Pc(n);return Ve((t,r)=>{let i=n.length,s=new Array(i),o=n.map(()=>!1),a=!1;for(let l=0;l<i;l++)Rt(n[l]).subscribe(Oe(r,u=>{s[l]=u,!a&&!o[l]&&(o[l]=!0,(a=o.every(qn))&&(o=null))},Ul));t.subscribe(Oe(r,l=>{if(a){let u=[l,...s];r.next(e?e(...u):u)}}))})}var oP="https://g.co/ng/security#xss",X=class extends Error{constructor(e,t){super(TI(e,t)),this.code=e}};function TI(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Hf(n){return{toString:n}.toString()}var Z_="__parameters__";function eW(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function aP(n,e,t){return Hf(()=>{let r=eW(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(l,u,h){let p=l.hasOwnProperty(Z_)?l[Z_]:Object.defineProperty(l,Z_,{value:[]})[Z_];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var $r=globalThis;function Nt(n){for(let e in n)if(n[e]===Nt)return e;throw Error("Could not find renamed property on target object.")}function tW(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Er(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Er).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function kb(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var nW=Nt({__forward_ref__:Nt});function zr(n){return n.__forward_ref__=zr,n.toString=function(){return Er(this())},n}function wr(n){return lP(n)?n():n}function lP(n){return typeof n=="function"&&n.hasOwnProperty(nW)&&n.__forward_ref__===zr}function ie(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function yt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Oy(n){return _N(n,cP)||_N(n,dP)}function uP(n){return Oy(n)!==null}function _N(n,e){return n.hasOwnProperty(e)?n[e]:null}function rW(n){let e=n&&(n[cP]||n[dP]);return e||null}function yN(n){return n&&(n.hasOwnProperty(vN)||n.hasOwnProperty(iW))?n[vN]:null}var cP=Nt({\u0275prov:Nt}),vN=Nt({\u0275inj:Nt}),dP=Nt({ngInjectableDef:Nt}),iW=Nt({ngInjectorDef:Nt}),oe=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ie({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function hP(n){return n&&!!n.\u0275providers}var sW=Nt({\u0275cmp:Nt}),oW=Nt({\u0275dir:Nt}),aW=Nt({\u0275pipe:Nt}),lW=Nt({\u0275mod:Nt}),uy=Nt({\u0275fac:Nt}),Pf=Nt({__NG_ELEMENT_ID__:Nt}),wN=Nt({__NG_ENV_ID__:Nt});function $f(n){return typeof n=="string"?n:n==null?"":String(n)}function uW(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():$f(n)}function cW(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new X(-200,n)}function AI(n,e){throw new X(-201,!1)}var et=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(et||{}),Rb;function fP(){return Rb}function yi(n){let e=Rb;return Rb=n,e}function pP(n,e,t){let r=Oy(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&et.Optional)return null;if(e!==void 0)return e;AI(n,"Injector")}var dW={},Ff=dW,Nb="__NG_DI_FLAG__",cy="ngTempTokenPath",hW="ngTokenPath",fW=/\n/gm,pW="\u0275",EN="__source",$c;function mW(){return $c}function Ca(n){let e=$c;return $c=n,e}function gW(n,e=et.Default){if($c===void 0)throw new X(-203,!1);return $c===null?pP(n,void 0,e):$c.get(n,e&et.Optional?null:void 0,e)}function B(n,e=et.Default){return(fP()||gW)(wr(n),e)}function J(n,e=et.Default){return B(n,Fy(e))}function Fy(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Pb(n){let e=[];for(let t=0;t<n.length;t++){let r=wr(n[t]);if(Array.isArray(r)){if(r.length===0)throw new X(900,!1);let i,s=et.Default;for(let o=0;o<r.length;o++){let a=r[o],l=_W(a);typeof l=="number"?l===-1?i=a.token:s|=l:i=a}e.push(B(i,s))}else e.push(B(r))}return e}function mP(n,e){return n[Nb]=e,n.prototype[Nb]=e,n}function _W(n){return n[Nb]}function yW(n,e,t,r){let i=n[cy];throw e[EN]&&i.unshift(e[EN]),n.message=vW(`
`+n.message,i,t,r),n[hW]=i,n[cy]=null,n}function vW(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==pW?n.slice(2):n;let i=Er(e);if(Array.isArray(e))i=e.map(Er).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Er(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(fW,`
  `)}`}var rd=mP(aP("Optional"),8);var MI=mP(aP("SkipSelf"),4);function zc(n,e){let t=n.hasOwnProperty(uy);return t?n[uy]:null}function xI(n,e){n.forEach(t=>Array.isArray(t)?xI(t,e):e(t))}function gP(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function dy(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function wW(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function kI(n,e,t){let r=qf(n,e);return r>=0?n[r|1]=t:(r=~r,wW(n,r,e,t)),r}function yb(n,e){let t=qf(n,e);if(t>=0)return n[t|1]}function qf(n,e){return EW(n,e,1)}function EW(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Wc={},Or=[],Gc=new oe(""),_P=new oe("",-1),yP=new oe(""),hy=class{get(e,t=Ff){if(t===Ff){let r=new Error(`NullInjectorError: No provider for ${Er(e)}!`);throw r.name="NullInjectorError",r}return t}},vP=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(vP||{}),bs=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(bs||{}),Da=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Da||{});function CW(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Ob(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];bW(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function wP(n){return n===3||n===4||n===6}function bW(n){return n.charCodeAt(0)===64}function Lf(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?CN(n,t,i,null,e[++r]):CN(n,t,i,null,null))}}return n}function CN(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var EP="ng-template";function IW(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&CW(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(RI(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function RI(n){return n.type===4&&n.value!==EP}function DW(n,e,t){let r=n.type===4&&!t?EP:n.value;return e===r}function SW(n,e,t){let r=4,i=n.attrs,s=i!==null?MW(i):0,o=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!o&&!$i(r)&&!$i(l))return!1;if(o&&$i(l))continue;o=!1,r=l|r&1;continue}if(!o)if(r&4){if(r=2|r&1,l!==""&&!DW(n,l,t)||l===""&&e.length===1){if($i(r))return!1;o=!0}}else if(r&8){if(i===null||!IW(n,i,l,t)){if($i(r))return!1;o=!0}}else{let u=e[++a],h=TW(l,i,RI(n),t);if(h===-1){if($i(r))return!1;o=!0;continue}if(u!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&u!==p){if($i(r))return!1;o=!0}}}}return $i(r)||o}function $i(n){return(n&1)===0}function TW(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return xW(e,n)}function AW(n,e,t=!1){for(let r=0;r<e.length;r++)if(SW(n,e[r],t))return!0;return!1}function MW(n){for(let e=0;e<n.length;e++){let t=n[e];if(wP(t))return e}return n.length}function xW(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function bN(n,e){return n?":not("+e.trim()+")":e}function kW(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!$i(o)&&(e+=bN(s,i),i=""),r=o,s=s||!$i(r);t++}return i!==""&&(e+=bN(s,i)),e}function RW(n){return n.map(kW).join(",")}function NW(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!$i(i))break;i=s}r++}return{attrs:e,classes:t}}function pt(n){return Hf(()=>{let e=SP(n),t=de(V({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===vP.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||bs.Emulated,styles:n.styles||Or,_:null,schemas:n.schemas||null,tView:null,id:""});TP(t);let r=n.dependencies;return t.directiveDefs=DN(r,!1),t.pipeDefs=DN(r,!0),t.id=FW(t),t})}function PW(n){return Sa(n)||CP(n)}function OW(n){return n!==null}function vt(n){return Hf(()=>({type:n.type,bootstrap:n.bootstrap||Or,declarations:n.declarations||Or,imports:n.imports||Or,exports:n.exports||Or,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function IN(n,e){if(n==null)return Wc;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=Da.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==Da.None?[r,a]:r,e[s]=o):t[s]=r}return t}function Pt(n){return Hf(()=>{let e=SP(n);return TP(e),e})}function Sa(n){return n[sW]||null}function CP(n){return n[oW]||null}function bP(n){return n[aW]||null}function IP(n){let e=Sa(n)||CP(n)||bP(n);return e!==null?e.standalone:!1}function DP(n,e){let t=n[lW]||null;if(!t&&e===!0)throw new Error(`Type ${Er(n)} does not have '\u0275mod' property.`);return t}function SP(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Wc,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Or,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:IN(n.inputs,e),outputs:IN(n.outputs),debugInfo:null}}function TP(n){n.features?.forEach(e=>e(n))}function DN(n,e){if(!n)return null;let t=e?bP:PW;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(OW)}function FW(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ly(n){return{\u0275providers:n}}function LW(...n){return{\u0275providers:AP(!0,n),\u0275fromNgModule:!0}}function AP(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return xI(e,o=>{let a=o;Fb(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&MP(i,s),t}function MP(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];NI(i,s=>{e(s,r)})}}function Fb(n,e,t,r){if(n=wr(n),!n)return!1;let i=null,s=yN(n),o=!s&&Sa(n);if(!s&&!o){let l=n.ngModule;if(s=yN(l),s)i=l;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of l)Fb(u,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{xI(s.imports,h=>{Fb(h,e,t,r)&&(u||=[],u.push(h))})}finally{}u!==void 0&&MP(u,e)}if(!a){let u=zc(i)||(()=>new i);e({provide:i,useFactory:u,deps:Or},i),e({provide:yP,useValue:i,multi:!0},i),e({provide:Gc,useValue:()=>B(i),multi:!0},i)}let l=s.providers;if(l!=null&&!a){let u=n;NI(l,h=>{e(h,u)})}}else return!1;return i!==n&&n.providers!==void 0}function NI(n,e){for(let t of n)hP(t)&&(t=t.\u0275providers),Array.isArray(t)?NI(t,e):e(t)}var VW=Nt({provide:String,useValue:Nt});function xP(n){return n!==null&&typeof n=="object"&&VW in n}function UW(n){return!!(n&&n.useExisting)}function BW(n){return!!(n&&n.useFactory)}function Yc(n){return typeof n=="function"}function jW(n){return!!n.useClass}var Vy=new oe(""),sy={},HW={},vb;function PI(){return vb===void 0&&(vb=new hy),vb}var qr=class{},Vf=class extends qr{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Vb(e,o=>this.processProvider(o)),this.records.set(_P,Uc(void 0,this)),i.has("environment")&&this.records.set(qr,Uc(void 0,this));let s=this.records.get(Vy);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(yP,Or,et.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ft(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ft(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Ca(this),r=yi(void 0),i;try{return e()}finally{Ca(t),yi(r)}}get(e,t=Ff,r=et.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(wN))return e[wN](this);r=Fy(r);let i,s=Ca(this),o=yi(void 0);try{if(!(r&et.SkipSelf)){let l=this.records.get(e);if(l===void 0){let u=GW(e)&&Oy(e);u&&this.injectableDefInScope(u)?l=Uc(Lb(e),sy):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=r&et.Self?PI():this.parent;return t=r&et.Optional&&t===Ff?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[cy]=a[cy]||[]).unshift(Er(e)),s)throw a;return yW(a,e,"R3InjectorError",this.source)}else throw a}finally{yi(o),Ca(s)}}resolveInjectorInitializers(){let e=ft(null),t=Ca(this),r=yi(void 0),i;try{let s=this.get(Gc,Or,et.Self);for(let o of s)o()}finally{Ca(t),yi(r),ft(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Er(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new X(205,!1)}processProvider(e){e=wr(e);let t=Yc(e)?e:wr(e&&e.provide),r=qW(e);if(!Yc(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Uc(void 0,sy,!0),i.factory=()=>Pb(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ft(null);try{return t.value===sy&&(t.value=HW,t.value=t.factory()),typeof t.value=="object"&&t.value&&WW(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ft(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=wr(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Lb(n){let e=Oy(n),t=e!==null?e.factory:zc(n);if(t!==null)return t;if(n instanceof oe)throw new X(204,!1);if(n instanceof Function)return $W(n);throw new X(204,!1)}function $W(n){if(n.length>0)throw new X(204,!1);let t=rW(n);return t!==null?()=>t.factory(n):()=>new n}function qW(n){if(xP(n))return Uc(void 0,n.useValue);{let e=kP(n);return Uc(e,sy)}}function kP(n,e,t){let r;if(Yc(n)){let i=wr(n);return zc(i)||Lb(i)}else if(xP(n))r=()=>wr(n.useValue);else if(BW(n))r=()=>n.useFactory(...Pb(n.deps||[]));else if(UW(n))r=()=>B(wr(n.useExisting));else{let i=wr(n&&(n.useClass||n.provide));if(zW(n))r=()=>new i(...Pb(n.deps));else return zc(i)||Lb(i)}return r}function Uc(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function zW(n){return!!n.deps}function WW(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function GW(n){return typeof n=="function"||typeof n=="object"&&n instanceof oe}function Vb(n,e){for(let t of n)Array.isArray(t)?Vb(t,e):t&&hP(t)?Vb(t.\u0275providers,e):e(t)}function As(n,e){n instanceof Vf&&n.assertNotDestroyed();let t,r=Ca(n),i=yi(void 0);try{return e()}finally{Ca(r),yi(i)}}function RP(){return fP()!==void 0||mW()!=null}function YW(n){if(!RP())throw new X(-203,!1)}function KW(n){let e=$r.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function QW(n){return typeof n=="function"}var Ms=0,ot=1,Be=2,Cr=3,zi=4,Gi=5,fy=6,py=7,Wi=8,Kc=9,Is=10,sn=11,Uf=12,SN=13,id=14,Ds=15,Qc=16,Bc=17,Zc=18,Uy=19,NP=20,ba=21,wb=22,vi=23,Ss=25,OI=1;var Wl=7,my=8,gy=9,wi=10,_y=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(_y||{});function Ia(n){return Array.isArray(n)&&typeof n[OI]=="object"}function Po(n){return Array.isArray(n)&&n[OI]===!0}function FI(n){return(n.flags&4)!==0}function By(n){return n.componentOffset>-1}function jy(n){return(n.flags&1)===1}function Mo(n){return!!n.template}function Ub(n){return(n[Be]&512)!==0}var Bb=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function PP(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function xs(){return OP}function OP(n){return n.type.prototype.ngOnChanges&&(n.setInput=XW),ZW}xs.ngInherit=!0;function ZW(){let n=LP(this),e=n?.current;if(e){let t=n.previous;if(t===Wc)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function XW(n,e,t,r,i){let s=this.declaredInputs[r],o=LP(n)||JW(n,{previous:Wc,current:null}),a=o.current||(o.current={}),l=o.previous,u=l[s];a[s]=new Bb(u&&u.currentValue,t,l===Wc),PP(n,e,i,t)}var FP="__ngSimpleChanges__";function LP(n){return n[FP]||null}function JW(n,e){return n[FP]=e}var TN=null;var Es=function(n,e,t){TN?.(n,e,t)},VP="svg",eG="math";function Ts(n){for(;Array.isArray(n);)n=n[Ms];return n}function tG(n){for(;Array.isArray(n);){if(typeof n[OI]=="object")return n;n=n[Ms]}return null}function UP(n,e){return Ts(e[n])}function Ei(n,e){return Ts(e[n.index])}function BP(n,e){return n.data[e]}function nG(n,e){return n[e]}function ka(n,e){let t=e[n];return Ia(t)?t:t[Ms]}function LI(n){return(n[Be]&128)===128}function rG(n){return Po(n[Cr])}function Xc(n,e){return e==null?null:n[e]}function jP(n){n[Bc]=0}function HP(n){n[Be]&1024||(n[Be]|=1024,LI(n)&&$y(n))}function iG(n,e){for(;n>0;)e=e[id],n--;return e}function Hy(n){return!!(n[Be]&9216||n[vi]?.dirty)}function jb(n){n[Is].changeDetectionScheduler?.notify(8),n[Be]&64&&(n[Be]|=1024),Hy(n)&&$y(n)}function $y(n){n[Is].changeDetectionScheduler?.notify(0);let e=Gl(n);for(;e!==null&&!(e[Be]&8192||(e[Be]|=8192,!LI(e)));)e=Gl(e)}function $P(n,e){if((n[Be]&256)===256)throw new X(911,!1);n[ba]===null&&(n[ba]=[]),n[ba].push(e)}function sG(n,e){if(n[ba]===null)return;let t=n[ba].indexOf(e);t!==-1&&n[ba].splice(t,1)}function Gl(n){let e=n[Cr];return Po(e)?e[Cr]:e}var tt={lFrame:eO(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var qP=!1;function oG(){return tt.lFrame.elementDepthCount}function aG(){tt.lFrame.elementDepthCount++}function lG(){tt.lFrame.elementDepthCount--}function zP(){return tt.bindingsEnabled}function uG(){return tt.skipHydrationRootTNode!==null}function cG(n){return tt.skipHydrationRootTNode===n}function dG(){tt.skipHydrationRootTNode=null}function Mt(){return tt.lFrame.lView}function Yn(){return tt.lFrame.tView}function Se(n){return tt.lFrame.contextLView=n,n[Wi]}function Te(n){return tt.lFrame.contextLView=null,n}function sr(){let n=WP();for(;n!==null&&n.type===64;)n=n.parent;return n}function WP(){return tt.lFrame.currentTNode}function hG(){let n=tt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Xl(n,e){let t=tt.lFrame;t.currentTNode=n,t.isParent=e}function VI(){return tt.lFrame.isParent}function GP(){tt.lFrame.isParent=!1}function fG(){return tt.lFrame.contextLView}function YP(){return qP}function AN(n){qP=n}function pG(n){return tt.lFrame.bindingIndex=n}function zf(){return tt.lFrame.bindingIndex++}function KP(n){let e=tt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function mG(){return tt.lFrame.inI18n}function gG(n,e){let t=tt.lFrame;t.bindingIndex=t.bindingRootIndex=n,Hb(e)}function _G(){return tt.lFrame.currentDirectiveIndex}function Hb(n){tt.lFrame.currentDirectiveIndex=n}function QP(n){let e=tt.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function ZP(n){tt.lFrame.currentQueryIndex=n}function yG(n){let e=n[ot];return e.type===2?e.declTNode:e.type===1?n[Gi]:null}function XP(n,e,t){if(t&et.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&et.Host);)if(i=yG(s),i===null||(s=s[id],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=tt.lFrame=JP();return r.currentTNode=e,r.lView=n,!0}function UI(n){let e=JP(),t=n[ot];tt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function JP(){let n=tt.lFrame,e=n===null?null:n.child;return e===null?eO(n):e}function eO(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function tO(){let n=tt.lFrame;return tt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var nO=tO;function BI(){let n=tO();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function vG(n){return(tt.lFrame.contextLView=iG(n,tt.lFrame.contextLView))[Wi]}function Jl(){return tt.lFrame.selectedIndex}function Yl(n){tt.lFrame.selectedIndex=n}function qy(){let n=tt.lFrame;return BP(n.tView,n.selectedIndex)}function xn(){tt.lFrame.currentNamespace=VP}function kn(){wG()}function wG(){tt.lFrame.currentNamespace=null}function EG(){return tt.lFrame.currentNamespace}var rO=!0;function zy(){return rO}function Wy(n){rO=n}function CG(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=OP(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Gy(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function oy(n,e,t){iO(n,e,3,t)}function ay(n,e,t,r){(n[Be]&3)===t&&iO(n,e,t,r)}function Eb(n,e){let t=n[Be];(t&3)===e&&(t&=16383,t+=1,n[Be]=t)}function iO(n,e,t,r){let i=r!==void 0?n[Bc]&65535:0,s=r??-1,o=e.length-1,a=0;for(let l=i;l<o;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(n[Bc]+=65536),(a<s||s==-1)&&(bG(n,t,e,l),n[Bc]=(n[Bc]&4294901760)+l+2),l++}function MN(n,e){Es(4,n,e);let t=ft(null);try{e.call(n)}finally{ft(t),Es(5,n,e)}}function bG(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[Be]>>14<n[Bc]>>16&&(n[Be]&3)===e&&(n[Be]+=16384,MN(a,s)):MN(a,s)}var qc=-1,Kl=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function IG(n){return n instanceof Kl}function DG(n){return(n.flags&8)!==0}function SG(n){return(n.flags&16)!==0}var Cb={},$b=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Fy(r);let i=this.injector.get(e,Cb,r);return i!==Cb||t===Cb?i:this.parentInjector.get(e,t,r)}};function sO(n){return n!==qc}function yy(n){return n&32767}function TG(n){return n>>16}function vy(n,e){let t=TG(n),r=e;for(;t>0;)r=r[id],t--;return r}var qb=!0;function xN(n){let e=qb;return qb=n,e}var AG=256,oO=AG-1,aO=5,MG=0,Cs={};function xG(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Pf)&&(r=t[Pf]),r==null&&(r=t[Pf]=MG++);let i=r&oO,s=1<<i;e.data[n+(i>>aO)]|=s}function wy(n,e){let t=lO(n,e);if(t!==-1)return t;let r=e[ot];r.firstCreatePass&&(n.injectorIndex=e.length,bb(r.data,n),bb(e,null),bb(r.blueprint,null));let i=jI(n,e),s=n.injectorIndex;if(sO(i)){let o=yy(i),a=vy(i,e),l=a[ot].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|l[o+u]}return e[s+8]=i,s}function bb(n,e){n.push(0,0,0,0,0,0,0,0,e)}function lO(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function jI(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=fO(i),r===null)return qc;if(t++,i=i[id],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return qc}function zb(n,e,t){xG(n,e,t)}function kG(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(wP(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function uO(n,e,t){if(t&et.Optional||n!==void 0)return n;AI(e,"NodeInjector")}function cO(n,e,t,r){if(t&et.Optional&&r===void 0&&(r=null),!(t&(et.Self|et.Host))){let i=n[Kc],s=yi(void 0);try{return i?i.get(e,r,t&et.Optional):pP(e,r,t&et.Optional)}finally{yi(s)}}return uO(r,e,t)}function dO(n,e,t,r=et.Default,i){if(n!==null){if(e[Be]&2048&&!(r&et.Self)){let o=FG(n,e,t,r,Cs);if(o!==Cs)return o}let s=hO(n,e,t,r,Cs);if(s!==Cs)return s}return cO(e,t,r,i)}function hO(n,e,t,r,i){let s=PG(t);if(typeof s=="function"){if(!XP(e,n,r))return r&et.Host?uO(i,t,r):cO(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&et.Optional))AI(t);else return o}finally{nO()}}else if(typeof s=="number"){let o=null,a=lO(n,e),l=qc,u=r&et.Host?e[Ds][Gi]:null;for((a===-1||r&et.SkipSelf)&&(l=a===-1?jI(n,e):e[a+8],l===qc||!RN(r,!1)?a=-1:(o=e[ot],a=yy(l),e=vy(l,e)));a!==-1;){let h=e[ot];if(kN(s,a,h.data)){let p=RG(a,e,t,o,r,u);if(p!==Cs)return p}l=e[a+8],l!==qc&&RN(r,e[ot].data[a+8]===u)&&kN(s,a,e)?(o=h,a=yy(l),e=vy(l,e)):a=-1}}return i}function RG(n,e,t,r,i,s){let o=e[ot],a=o.data[n+8],l=r==null?By(a)&&qb:r!=o&&(a.type&3)!==0,u=i&et.Host&&s===a,h=NG(a,o,t,l,u);return h!==null?Jc(e,o,h,a):Cs}function NG(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,l=n.directiveStart,u=n.directiveEnd,h=s>>20,p=r?a:a+h,_=i?a+h:u;for(let w=p;w<_;w++){let E=o[w];if(w<l&&t===E||w>=l&&E.type===t)return w}if(i){let w=o[l];if(w&&Mo(w)&&w.type===t)return l}return null}function Jc(n,e,t,r){let i=n[t],s=e.data;if(IG(i)){let o=i;o.resolving&&cW(uW(s[t]));let a=xN(o.canSeeViewProviders);o.resolving=!0;let l,u=o.injectImpl?yi(o.injectImpl):null,h=XP(n,r,et.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&CG(t,s[t],e)}finally{u!==null&&yi(u),xN(a),o.resolving=!1,nO()}}return i}function PG(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Pf)?n[Pf]:void 0;return typeof e=="number"?e>=0?e&oO:OG:e}function kN(n,e,t){let r=1<<n;return!!(t[e+(n>>aO)]&r)}function RN(n,e){return!(n&et.Self)&&!(n&et.Host&&e)}var zl=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return dO(this._tNode,this._lView,e,Fy(r),t)}};function OG(){return new zl(sr(),Mt())}function ks(n){return Hf(()=>{let e=n.prototype.constructor,t=e[uy]||Wb(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[uy]||Wb(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Wb(n){return lP(n)?()=>{let e=Wb(wr(n));return e&&e()}:zc(n)}function FG(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[Be]&2048&&!(o[Be]&512);){let a=hO(s,o,t,r|et.Self,Cs);if(a!==Cs)return a;let l=s.parent;if(!l){let u=o[NP];if(u){let h=u.get(t,Cs,r);if(h!==Cs)return h}l=fO(o),o=o[id]}s=l}return i}function fO(n){let e=n[ot],t=e.type;return t===2?e.declTNode:t===1?n[Gi]:null}function HI(n){return kG(sr(),n)}function NN(n,e=null,t=null,r){let i=pO(n,e,t,r);return i.resolveInjectorInitializers(),i}function pO(n,e=null,t=null,r,i=new Set){let s=[t||Or,LW(n)];return r=r||(typeof n=="object"?void 0:Er(n)),new Vf(s,e||PI(),r||null,i)}var Gn=class n{static{this.THROW_IF_NOT_FOUND=Ff}static{this.NULL=new hy}static create(e,t){if(Array.isArray(e))return NN({name:""},t,e,"");{let r=e.name??"";return NN({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=ie({token:n,providedIn:"any",factory:()=>B(_P)})}static{this.__NG_ELEMENT_ID__=-1}};var LG=new oe("");LG.__NG_ELEMENT_ID__=n=>{let e=sr();if(e===null)throw new X(204,!1);if(e.type&2)return e.value;if(n&et.Optional)return null;throw new X(204,!1)};var VG="ngOriginalError";function Ib(n){return n[VG]}var mO=!0,$I=(()=>{class n{static{this.__NG_ELEMENT_ID__=UG}static{this.__NG_ENV_ID__=t=>t}}return n})(),Gb=class extends $I{constructor(e){super(),this._lView=e}onDestroy(e){return $P(this._lView,e),()=>sG(this._lView,e)}};function UG(){return new Gb(Mt())}var sd=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new zn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=ie({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Yb=class extends _t{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,RP()&&(this.destroyRef=J($I,{optional:!0})??void 0,this.pendingTasks=J(sd,{optional:!0})??void 0)}emit(e){let t=ft(null);try{super.next(e)}finally{ft(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof rn&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Xe=Yb;function Ey(...n){}function gO(n){let e,t;function r(){n=Ey;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function PN(n){return queueMicrotask(()=>n()),()=>{n=Ey}}var qI="isAngularZone",Cy=qI+"_ID",BG=0,$e=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xe(!1),this.onMicrotaskEmpty=new Xe(!1),this.onStable=new Xe(!1),this.onError=new Xe(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=mO}=e;if(typeof Zone>"u")throw new X(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,$G(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(qI)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new X(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new X(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,jG,Ey,Ey);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},jG={};function zI(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function HG(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){gO(()=>{n.callbackScheduled=!1,Kb(n),n.isCheckStableRunning=!0,zI(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Kb(n)}function $G(n){let e=()=>{HG(n)},t=BG++;n._inner=n._inner.fork({name:"angular",properties:{[qI]:!0,[Cy]:t,[Cy+t]:!0},onInvokeTask:(r,i,s,o,a,l)=>{if(qG(l))return r.invokeTask(s,o,a,l);try{return ON(n),r.invokeTask(s,o,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),FN(n)}},onInvoke:(r,i,s,o,a,l,u)=>{try{return ON(n),r.invoke(s,o,a,l,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!zG(l)&&e(),FN(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Kb(n),zI(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Kb(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function ON(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function FN(n){n._nesting--,zI(n)}var by=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xe,this.onMicrotaskEmpty=new Xe,this.onStable=new Xe,this.onError=new Xe}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function qG(n){return _O(n,"__ignore_ng_zone__")}function zG(n){return _O(n,"__scheduler_tick__")}function _O(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function WG(n="zone.js",e){return n==="noop"?new by:n==="zone.js"?new $e(e):n}var xo=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Ib(e);for(;t&&Ib(t);)t=Ib(t);return t||null}},GG=new oe("",{providedIn:"root",factory:()=>{let n=J($e),e=J(xo);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function YG(){return Yy(sr(),Mt())}function Yy(n,e){return new Fr(Ei(n,e))}var Fr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=YG}}return n})();function yO(n){return(n.flags&128)===128}var vO=new Map,KG=0;function QG(){return KG++}function ZG(n){vO.set(n[Uy],n)}function Qb(n){vO.delete(n[Uy])}var LN="__ngContext__";function Ta(n,e){Ia(e)?(n[LN]=e[Uy],ZG(e)):n[LN]=e}function wO(n){return CO(n[Uf])}function EO(n){return CO(n[zi])}function CO(n){for(;n!==null&&!Po(n);)n=n[zi];return n}var Zb;function bO(n){Zb=n}function IO(){if(Zb!==void 0)return Zb;if(typeof document<"u")return document;throw new X(210,!1)}var Ky=new oe("",{providedIn:"root",factory:()=>XG}),XG="ng",WI=new oe(""),vn=new oe("",{providedIn:"platform",factory:()=>"unknown"});var GI=new oe(""),YI=new oe("",{providedIn:"root",factory:()=>IO().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var JG="h",e6="b";var t6=()=>null;function KI(n,e,t=!1){return t6(n,e,t)}var DO=!1,n6=new oe("",{providedIn:"root",factory:()=>DO});var X_;function r6(){if(X_===void 0&&(X_=null,$r.trustedTypes))try{X_=$r.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return X_}function Qy(n){return r6()?.createHTML(n)||n}var J_;function SO(){if(J_===void 0&&(J_=null,$r.trustedTypes))try{J_=$r.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return J_}function VN(n){return SO()?.createHTML(n)||n}function UN(n){return SO()?.createScriptURL(n)||n}var ko=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${oP})`}},Xb=class extends ko{getTypeName(){return"HTML"}},Jb=class extends ko{getTypeName(){return"Style"}},eI=class extends ko{getTypeName(){return"Script"}},tI=class extends ko{getTypeName(){return"URL"}},nI=class extends ko{getTypeName(){return"ResourceURL"}};function Ci(n){return n instanceof ko?n.changingThisBreaksApplicationSecurity:n}function Oo(n,e){let t=i6(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${oP})`)}return t===e}function i6(n){return n instanceof ko&&n.getTypeName()||null}function TO(n){return new Xb(n)}function AO(n){return new Jb(n)}function MO(n){return new eI(n)}function xO(n){return new tI(n)}function kO(n){return new nI(n)}function s6(n){let e=new iI(n);return o6()?new rI(e):e}var rI=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(Qy(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},iI=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=Qy(e),t}};function o6(){try{return!!new window.DOMParser().parseFromString(Qy(""),"text/html")}catch{return!1}}var a6=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Zy(n){return n=String(n),n.match(a6)?n:"unsafe:"+n}function Fo(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Wf(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var RO=Fo("area,br,col,hr,img,wbr"),NO=Fo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),PO=Fo("rp,rt"),l6=Wf(PO,NO),u6=Wf(NO,Fo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),c6=Wf(PO,Fo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),BN=Wf(RO,u6,c6,l6),OO=Fo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),d6=Fo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),h6=Fo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),f6=Wf(OO,d6,h6),p6=Fo("script,style,template"),sI=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=_6(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=g6(t);if(s){t=s;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=jN(e).toLowerCase();if(!BN.hasOwnProperty(t))return this.sanitizedSomething=!0,!p6.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let s=r.item(i),o=s.name,a=o.toLowerCase();if(!f6.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;OO[a]&&(l=Zy(l)),this.buf.push(" ",o,'="',HN(l),'"')}return this.buf.push(">"),!0}endElement(e){let t=jN(e).toLowerCase();BN.hasOwnProperty(t)&&!RO.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(HN(e))}};function m6(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function g6(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw FO(e);return e}function _6(n){let e=n.firstChild;if(e&&m6(n,e))throw FO(e);return e}function jN(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function FO(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var y6=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,v6=/([^\#-~ |!])/g;function HN(n){return n.replace(/&/g,"&amp;").replace(y6,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(v6,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var ey;function QI(n,e){let t=null;try{ey=ey||s6(n);let r=e?String(e):"";t=ey.getInertBodyElement(r);let i=5,s=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=ey.getInertBodyElement(r)}while(r!==s);let a=new sI().sanitizeChildren($N(t)||t);return Qy(a)}finally{if(t){let r=$N(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function $N(n){return"content"in n&&w6(n)?n.content:null}function w6(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var Wr=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Wr||{});function ZI(n){let e=JI();return e?VN(e.sanitize(Wr.HTML,n)||""):Oo(n,"HTML")?VN(Ci(n)):QI(IO(),$f(n))}function XI(n){let e=JI();return e?e.sanitize(Wr.URL,n)||"":Oo(n,"URL")?Ci(n):Zy($f(n))}function E6(n){let e=JI();if(e)return UN(e.sanitize(Wr.RESOURCE_URL,n)||"");if(Oo(n,"ResourceURL"))return UN(Ci(n));throw new X(904,!1)}function C6(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?E6:XI}function LO(n,e,t){return C6(e,t)(n)}function JI(){let n=Mt();return n&&n[Is].sanitizer}var b6=/^>|^->|<!--|-->|--!>|<!-$/g,I6=/(<|>)/g,D6="\u200B$1\u200B";function S6(n){return n.replace(b6,e=>e.replace(I6,D6))}function VO(n){return n instanceof Function?n():n}function T6(n){return(n??J(Gn)).get(vn)==="browser"}var Ro=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ro||{}),A6;function eD(n,e){return A6(n,e)}function jc(n,e,t,r,i){if(r!=null){let s,o=!1;Po(r)?s=r:Ia(r)&&(o=!0,r=r[Ms]);let a=Ts(r);n===0&&t!==null?i==null?$O(e,t,a):Iy(e,t,a,i||null,!0):n===1&&t!==null?Iy(e,t,a,i||null,!0):n===2?q6(e,a,o):n===3&&e.destroyNode(a),s!=null&&W6(e,n,s,t,i)}}function M6(n,e){return n.createText(e)}function x6(n,e,t){n.setValue(e,t)}function k6(n,e){return n.createComment(S6(e))}function UO(n,e,t){return n.createElement(e,t)}function R6(n,e){BO(n,e),e[Ms]=null,e[Gi]=null}function N6(n,e,t,r,i,s){r[Ms]=i,r[Gi]=e,Jy(n,r,t,1,i,s)}function BO(n,e){e[Is].changeDetectionScheduler?.notify(9),Jy(n,e,e[sn],2,null,null)}function P6(n){let e=n[Uf];if(!e)return Db(n[ot],n);for(;e;){let t=null;if(Ia(e))t=e[Uf];else{let r=e[wi];r&&(t=r)}if(!t){for(;e&&!e[zi]&&e!==n;)Ia(e)&&Db(e[ot],e),e=e[Cr];e===null&&(e=n),Ia(e)&&Db(e[ot],e),t=e&&e[zi]}e=t}}function O6(n,e,t,r){let i=wi+r,s=t.length;r>0&&(t[i-1][zi]=e),r<s-wi?(e[zi]=t[i],gP(t,wi+r,e)):(t.push(e),e[zi]=null),e[Cr]=t;let o=e[Qc];o!==null&&t!==o&&jO(o,e);let a=e[Zc];a!==null&&a.insertView(n),jb(e),e[Be]|=128}function jO(n,e){let t=n[gy],r=e[Cr];if(Ia(r))n[Be]|=_y.HasTransplantedViews;else{let i=r[Cr][Ds];e[Ds]!==i&&(n[Be]|=_y.HasTransplantedViews)}t===null?n[gy]=[e]:t.push(e)}function tD(n,e){let t=n[gy],r=t.indexOf(e);t.splice(r,1)}function oI(n,e){if(n.length<=wi)return;let t=wi+e,r=n[t];if(r){let i=r[Qc];i!==null&&i!==n&&tD(i,r),e>0&&(n[t-1][zi]=r[zi]);let s=dy(n,wi+e);R6(r[ot],r);let o=s[Zc];o!==null&&o.detachView(s[ot]),r[Cr]=null,r[zi]=null,r[Be]&=-129}return r}function HO(n,e){if(!(e[Be]&256)){let t=e[sn];t.destroyNode&&Jy(n,e,t,3,null,null),P6(e)}}function Db(n,e){if(e[Be]&256)return;let t=ft(null);try{e[Be]&=-129,e[Be]|=256,e[vi]&&QC(e[vi]),L6(n,e),F6(n,e),e[ot].type===1&&e[sn].destroy();let r=e[Qc];if(r!==null&&Po(e[Cr])){r!==e[Cr]&&tD(r,e);let i=e[Zc];i!==null&&i.detachView(n)}Qb(e)}finally{ft(t)}}function F6(n,e){let t=n.cleanup,r=e[py];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[py]=null);let i=e[ba];if(i!==null){e[ba]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function L6(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Kl)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],l=s[o+1];Es(4,a,l);try{l.call(a)}finally{Es(5,a,l)}}else{Es(4,i,s);try{s.call(i)}finally{Es(5,i,s)}}}}}function V6(n,e,t){return U6(n,e.parent,t)}function U6(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Ms];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===bs.None||s===bs.Emulated)return null}return Ei(r,t)}}function Iy(n,e,t,r,i){n.insertBefore(e,t,r,i)}function $O(n,e,t){n.appendChild(e,t)}function qN(n,e,t,r,i){r!==null?Iy(n,e,t,r,i):$O(n,e,t)}function qO(n,e){return n.parentNode(e)}function B6(n,e){return n.nextSibling(e)}function j6(n,e,t){return $6(n,e,t)}function H6(n,e,t){return n.type&40?Ei(n,t):null}var $6=H6,zN;function Xy(n,e,t,r){let i=V6(n,r,e),s=e[sn],o=r.parent||e[Gi],a=j6(o,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)qN(s,i,t[l],a,!1);else qN(s,i,t,a,!1);zN!==void 0&&zN(s,r,e,t,i)}function Nf(n,e){if(e!==null){let t=e.type;if(t&3)return Ei(e,n);if(t&4)return aI(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Nf(n,r);{let i=n[e.index];return Po(i)?aI(-1,i):Ts(i)}}else{if(t&128)return Nf(n,e.next);if(t&32)return eD(e,n)()||Ts(n[e.index]);{let r=zO(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Gl(n[Ds]);return Nf(i,r)}else return Nf(n,e.next)}}}return null}function zO(n,e){if(e!==null){let r=n[Ds][Gi],i=e.projection;return r.projection[i]}return null}function aI(n,e){let t=wi+n+1;if(t<e.length){let r=e[t],i=r[ot].firstChild;if(i!==null)return Nf(r,i)}return e[Wl]}function q6(n,e,t){n.removeChild(null,e,t)}function nD(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],l=t.type;if(o&&e===0&&(a&&Ta(Ts(a),r),t.flags|=2),(t.flags&32)!==32)if(l&8)nD(n,e,t.child,r,i,s,!1),jc(e,n,i,a,s);else if(l&32){let u=eD(t,r),h;for(;h=u();)jc(e,n,i,h,s);jc(e,n,i,a,s)}else l&16?z6(n,e,r,t,i,s):jc(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Jy(n,e,t,r,i,s){nD(t,r,n.firstChild,e,i,s,!1)}function z6(n,e,t,r,i,s){let o=t[Ds],l=o[Gi].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let h=l[u];jc(e,n,i,h,s)}else{let u=l,h=o[Cr];yO(r)&&(u.flags|=128),nD(n,e,u,h,i,s,!0)}}function W6(n,e,t,r,i){let s=t[Wl],o=Ts(t);s!==o&&jc(e,n,r,s,i);for(let a=wi;a<t.length;a++){let l=t[a];Jy(l[ot],l,n,e,r,s)}}function G6(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Ro.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Ro.Important),n.setStyle(t,r,i,s))}}function Y6(n,e,t){n.setAttribute(e,"style",t)}function WO(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function GO(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&Ob(n,e,r),i!==null&&WO(n,e,i),s!==null&&Y6(n,e,s)}var Ra={};function z(n=1){YO(Yn(),Mt(),Jl()+n,!1)}function YO(n,e,t,r){if(!r)if((e[Be]&3)===3){let s=n.preOrderCheckHooks;s!==null&&oy(e,s,t)}else{let s=n.preOrderHooks;s!==null&&ay(e,s,0,t)}Yl(t)}function te(n,e=et.Default){let t=Mt();if(t===null)return B(n,e);let r=sr();return dO(r,t,wr(n),e)}function KO(){let n="invalid";throw new Error(n)}function QO(n,e,t,r,i,s){let o=ft(null);try{let a=null;i&Da.SignalBased&&(a=e[r][Io]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Da.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):PP(e,a,r,s)}finally{ft(o)}}function K6(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Yl(~i);else{let s=i,o=t[++r],a=t[++r];gG(o,s);let l=e[s];a(2,l)}}}finally{Yl(-1)}}function ev(n,e,t,r,i,s,o,a,l,u,h){let p=e.blueprint.slice();return p[Ms]=i,p[Be]=r|4|128|8|64,(u!==null||n&&n[Be]&2048)&&(p[Be]|=2048),jP(p),p[Cr]=p[id]=n,p[Wi]=t,p[Is]=o||n&&n[Is],p[sn]=a||n&&n[sn],p[Kc]=l||n&&n[Kc]||null,p[Gi]=s,p[Uy]=QG(),p[fy]=h,p[NP]=u,p[Ds]=e.type==2?n[Ds]:p,p}function Gf(n,e,t,r,i){let s=n.data[e];if(s===null)s=Q6(n,e,t,r,i),mG()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=hG();s.injectorIndex=o===null?-1:o.injectorIndex}return Xl(s,!0),s}function Q6(n,e,t,r,i){let s=WP(),o=VI(),a=o?s:s&&s.parent,l=n.data[e]=t5(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=l),s!==null&&(o?s.child==null&&l.parent!==null&&(s.child=l):s.next===null&&(s.next=l,l.prev=s)),l}function ZO(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function XO(n,e,t,r,i){let s=Jl(),o=r&2;try{Yl(-1),o&&e.length>Ss&&YO(n,e,Ss,!1),Es(o?2:0,i),t(r,i)}finally{Yl(s),Es(o?3:1,i)}}function rD(n,e,t){if(FI(e)){let r=ft(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let l=t[o];a.contentQueries(1,l,o)}}}finally{ft(r)}}}function iD(n,e,t){zP()&&(a5(n,e,t,Ei(t,e)),(t.flags&64)===64&&tF(n,e,t))}function sD(n,e,t=Ei){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function JO(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=oD(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function oD(n,e,t,r,i,s,o,a,l,u,h){let p=Ss+r,_=p+i,w=Z6(p,_),E=typeof u=="function"?u():u;return w[ot]={type:n,blueprint:w,template:t,queries:null,viewQuery:a,declTNode:e,data:w.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:E,incompleteFirstPass:!1,ssrId:h}}function Z6(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ra);return t}function X6(n,e,t,r){let s=r.get(n6,DO)||t===bs.ShadowDom,o=n.selectRootElement(e,s);return J6(o),o}function J6(n){e5(n)}var e5=()=>null;function t5(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return uG()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function WN(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,l=Da.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let u=s;if(i!==null){if(!i.hasOwnProperty(s))continue;u=i[s]}n===0?GN(r,t,u,a,l):GN(r,t,u,a)}return r}function GN(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function n5(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],l=null,u=null;for(let h=r;h<i;h++){let p=s[h],_=t?t.get(p):null,w=_?_.inputs:null,E=_?_.outputs:null;l=WN(0,p.inputs,h,l,w),u=WN(1,p.outputs,h,u,E);let S=l!==null&&o!==null&&!RI(e)?y5(l,h,o):null;a.push(S)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=u}function r5(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function aD(n,e,t,r,i,s,o,a){let l=Ei(e,t),u=e.inputs,h;!a&&u!=null&&(h=u[r])?(uD(n,t,h,r,i),By(e)&&i5(t,e.index)):e.type&3?(r=r5(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(l,r,i)):e.type&12}function i5(n,e){let t=ka(e,n);t[Be]&16||(t[Be]|=64)}function lD(n,e,t,r){if(zP()){let i=r===null?null:{"":-1},s=u5(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&eF(n,e,t,o,i,a),i&&c5(t,r,i)}t.mergedAttrs=Lf(t.mergedAttrs,t.attrs)}function eF(n,e,t,r,i,s){for(let u=0;u<r.length;u++)zb(wy(t,e),n,r[u].type);h5(t,n.data.length,r.length);for(let u=0;u<r.length;u++){let h=r[u];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,l=ZO(n,e,r.length,null);for(let u=0;u<r.length;u++){let h=r[u];t.mergedAttrs=Lf(t.mergedAttrs,h.hostAttrs),f5(n,t,e,l,h),d5(l,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}n5(n,t,s)}function s5(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;o5(o)!=a&&o.push(a),o.push(t,r,s)}}function o5(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function a5(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;By(t)&&p5(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||wy(t,e),Ta(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let l=n.data[a],u=Jc(e,n,a,t);if(Ta(u,e),o!==null&&_5(e,a-i,u,l,t,o),Mo(l)){let h=ka(t.index,e);h[Wi]=Jc(e,n,a,t)}}}function tF(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=_G();try{Yl(s);for(let a=r;a<i;a++){let l=n.data[a],u=e[a];Hb(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&l5(l,u)}}finally{Yl(-1),Hb(o)}}function l5(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function u5(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(AW(e,o.selectors,!1))if(r||(r=[]),Mo(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let l=a.length;lI(n,e,l)}else r.unshift(o),lI(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function lI(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function c5(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new X(-301,!1);r.push(e[i],s)}}}function d5(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Mo(e)&&(t[""]=n)}}function h5(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function f5(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=zc(i.type,!0)),o=new Kl(s,Mo(i),te);n.blueprint[r]=o,t[r]=o,s5(n,e,r,ZO(n,t,i.hostVars,Ra),i)}function p5(n,e,t){let r=Ei(e,n),i=JO(t),s=n[Is].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=tv(n,ev(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function m5(n,e,t,r,i,s){let o=Ei(n,e);g5(e[sn],o,s,n.value,t,r,i)}function g5(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?$f(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function _5(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let l=o[a++],u=o[a++],h=o[a++],p=o[a++];QO(r,t,l,u,h,p)}}function y5(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function nF(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function rF(n,e){let t=n.contentQueries;if(t!==null){let r=ft(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];ZP(s),a.contentQueries(2,e[o],o)}}}finally{ft(r)}}}function tv(n,e){return n[Uf]?n[SN][zi]=e:n[Uf]=e,n[SN]=e,e}function uI(n,e,t){ZP(0);let r=ft(null);try{e(n,t)}finally{ft(r)}}function v5(n){return n[py]??=[]}function w5(n){return n.cleanup??=[]}function E5(n,e,t){return(n===null||Mo(n))&&(t=tG(t[e.index])),t[sn]}function iF(n,e){let t=n[Kc],r=t?t.get(xo,null):null;r&&r.handleError(e)}function uD(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],l=t[s++],u=e[o],h=n.data[o];QO(h,u,r,a,l,i)}}function C5(n,e,t){let r=UP(e,n);x6(n[sn],r,t)}function b5(n,e){let t=ka(e,n),r=t[ot];I5(r,t);let i=t[Ms];i!==null&&t[fy]===null&&(t[fy]=KI(i,t[Kc])),cD(r,t,t[Wi])}function I5(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function cD(n,e,t){UI(e);try{let r=n.viewQuery;r!==null&&uI(1,r,t);let i=n.template;i!==null&&XO(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Zc]?.finishViewCreation(n),n.staticContentQueries&&rF(n,e),n.staticViewQueries&&uI(2,n.viewQuery,t);let s=n.components;s!==null&&D5(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Be]&=-5,BI()}}function D5(n,e){for(let t=0;t<e.length;t++)b5(n,e[t])}function S5(n,e,t,r){let i=ft(null);try{let s=e.tView,a=n[Be]&4096?4096:16,l=ev(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];l[Qc]=u;let h=n[Zc];return h!==null&&(l[Zc]=h.createEmbeddedView(s)),cD(s,l,t),l}finally{ft(i)}}function YN(n,e){return!e||e.firstChild===null||yO(n)}function T5(n,e,t,r=!0){let i=e[ot];if(O6(i,e,n,t),r){let o=aI(t,n),a=e[sn],l=qO(a,n[Wl]);l!==null&&N6(i,n[Gi],a,e,l,o)}let s=e[fy];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Dy(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Ts(s)),Po(s)&&A5(s,r);let o=t.type;if(o&8)Dy(n,e,t.child,r);else if(o&32){let a=eD(t,e),l;for(;l=a();)r.push(l)}else if(o&16){let a=zO(e,t);if(Array.isArray(a))r.push(...a);else{let l=Gl(e[Ds]);Dy(l[ot],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function A5(n,e){for(let t=wi;t<n.length;t++){let r=n[t],i=r[ot].firstChild;i!==null&&Dy(r[ot],r,i,e)}n[Wl]!==n[Ms]&&e.push(n[Wl])}var sF=[];function M5(n){return n[vi]??x5(n)}function x5(n){let e=sF.pop()??Object.create(R5);return e.lView=n,e}function k5(n){n.lView[vi]!==n&&(n.lView=null,sF.push(n))}var R5=de(V({},Sf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{$y(n.lView)},consumerOnSignalRead(){this.lView[vi]=this}});function N5(n){let e=n[vi]??Object.create(P5);return e.lView=n,e}var P5=de(V({},Sf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Gl(n.lView);for(;e&&!oF(e[ot]);)e=Gl(e);e&&HP(e)},consumerOnSignalRead(){this.lView[vi]=this}});function oF(n){return n.type!==2}var O5=100;function aF(n,e=!0,t=0){let r=n[Is],i=r.rendererFactory,s=!1;s||i.begin?.();try{F5(n,t)}catch(o){throw e&&iF(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function F5(n,e){let t=YP();try{AN(!0),cI(n,e);let r=0;for(;Hy(n);){if(r===O5)throw new X(103,!1);r++,cI(n,1)}}finally{AN(t)}}function L5(n,e,t,r){let i=e[Be];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Is].inlineEffectRunner?.flush(),UI(e);let a=!0,l=null,u=null;s||(oF(n)?(u=M5(e),l=C_(u)):L1()===null?(a=!1,u=N5(e),l=C_(u)):e[vi]&&(QC(e[vi]),e[vi]=null));try{jP(e),pG(n.bindingStartIndex),t!==null&&XO(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let w=n.preOrderCheckHooks;w!==null&&oy(e,w,null)}else{let w=n.preOrderHooks;w!==null&&ay(e,w,0,null),Eb(e,0)}if(o||V5(e),lF(e,0),n.contentQueries!==null&&rF(n,e),!s)if(h){let w=n.contentCheckHooks;w!==null&&oy(e,w)}else{let w=n.contentHooks;w!==null&&ay(e,w,1),Eb(e,1)}K6(n,e);let p=n.components;p!==null&&cF(e,p,0);let _=n.viewQuery;if(_!==null&&uI(2,_,r),!s)if(h){let w=n.viewCheckHooks;w!==null&&oy(e,w)}else{let w=n.viewHooks;w!==null&&ay(e,w,2),Eb(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[wb]){for(let w of e[wb])w();e[wb]=null}s||(e[Be]&=-73)}catch(h){throw s||$y(e),h}finally{u!==null&&(YC(u,l),a&&k5(u)),BI()}}function lF(n,e){for(let t=wO(n);t!==null;t=EO(t))for(let r=wi;r<t.length;r++){let i=t[r];uF(i,e)}}function V5(n){for(let e=wO(n);e!==null;e=EO(e)){if(!(e[Be]&_y.HasTransplantedViews))continue;let t=e[gy];for(let r=0;r<t.length;r++){let i=t[r];HP(i)}}}function U5(n,e,t){let r=ka(e,n);uF(r,t)}function uF(n,e){LI(n)&&cI(n,e)}function cI(n,e){let r=n[ot],i=n[Be],s=n[vi],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&KC(s)),o||=!1,s&&(s.dirty=!1),n[Be]&=-9217,o)L5(r,n,r.template,n[Wi]);else if(i&8192){lF(n,1);let a=r.components;a!==null&&cF(n,a,1)}}function cF(n,e,t){for(let r=0;r<e.length;r++)U5(n,e[r],t)}function dD(n,e){let t=YP()?64:1088;for(n[Is].changeDetectionScheduler?.notify(e);n;){n[Be]|=t;let r=Gl(n);if(Ub(n)&&!r)return n;n=r}return null}var Ql=class{get rootNodes(){let e=this._lView,t=e[ot];return Dy(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Wi]}set context(e){this._lView[Wi]=e}get destroyed(){return(this._lView[Be]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Cr];if(Po(e)){let t=e[my],r=t?t.indexOf(this):-1;r>-1&&(oI(e,r),dy(t,r))}this._attachedToViewContainer=!1}HO(this._lView[ot],this._lView)}onDestroy(e){$P(this._lView,e)}markForCheck(){dD(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Be]&=-129}reattach(){jb(this._lView),this._lView[Be]|=128}detectChanges(){this._lView[Be]|=1024,aF(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new X(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ub(this._lView),t=this._lView[Qc];t!==null&&!e&&tD(t,this._lView),BO(this._lView[ot],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new X(902,!1);this._appRef=e;let t=Ub(this._lView),r=this._lView[Qc];r!==null&&!t&&jO(r,this._lView),jb(this._lView)}},nv=(()=>{class n{static{this.__NG_ELEMENT_ID__=H5}}return n})(),B5=nv,j5=class extends B5{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=S5(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Ql(i)}};function H5(){return $5(sr(),Mt())}function $5(n,e){return n.type&4?new j5(e,n,Yy(n,e)):null}var Zhe=new RegExp(`^(\\d+)*(${e6}|${JG})*(.*)`);var q5=()=>null;function KN(n,e){return q5(n,e)}var ed=class{},hD=new oe("",{providedIn:"root",factory:()=>!1});var dF=new oe(""),hF=new oe(""),dI=class{},Sy=class{};function z5(n){let e=Error(`No component factory found for ${Er(n)}.`);return e[W5]=n,e}var W5="ngComponent";var hI=class{resolveComponentFactory(e){throw z5(e)}},Aa=class{static{this.NULL=new hI}},Ma=class{},bi=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>G5()}}return n})();function G5(){let n=Mt(),e=sr(),t=ka(e.index,n);return(Ia(t)?t:n)[sn]}var Y5=(()=>{class n{static{this.\u0275prov=ie({token:n,providedIn:"root",factory:()=>null})}}return n})();function Ty(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=kb(i,a);else if(s==2){let l=a,u=e[++o];r=kb(r,l+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Ay=class extends Aa{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Sa(e);return new td(t,this.ngModule)}};function QN(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:Da.None;e?t.push({propName:o,templateName:r,isSignal:(a&Da.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function K5(n){let e=n.toLowerCase();return e==="svg"?VP:e==="math"?eG:null}var td=class extends Sy{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=QN(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return QN(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=RW(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=ft(null);try{i=i||this.ngModule;let o=i instanceof qr?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new $b(e,o):e,l=a.get(Ma,null);if(l===null)throw new X(407,!1);let u=a.get(Y5,null),h=a.get(ed,null),p={rendererFactory:l,sanitizer:u,inlineEffectRunner:null,changeDetectionScheduler:h},_=l.createRenderer(null,this.componentDef),w=this.componentDef.selectors[0][0]||"div",E=r?X6(_,r,this.componentDef.encapsulation,a):UO(_,w,K5(w)),S=512;this.componentDef.signals?S|=4096:this.componentDef.onPush||(S|=16);let x=null;E!==null&&(x=KI(E,a,!0));let H=oD(0,null,null,1,0,null,null,null,null,null,null),Y=ev(null,H,null,S,null,null,p,_,a,null,x);UI(Y);let q,Q,pe=null;try{let re=this.componentDef,k,I=null;re.findHostDirectiveDefs?(k=[],I=new Map,re.findHostDirectiveDefs(re,k,I),k.push(re)):k=[re];let A=Q5(Y,E);pe=Z5(A,E,re,k,Y,p,_),Q=BP(H,Ss),E&&e9(_,re,E,r),t!==void 0&&t9(Q,this.ngContentSelectors,t),q=J5(pe,re,k,I,Y,[n9]),cD(H,Y,null)}catch(re){throw pe!==null&&Qb(pe),Qb(Y),re}finally{BI()}return new fI(this.componentType,q,Yy(Q,Y),Y,Q)}finally{ft(s)}}},fI=class extends dI{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Ql(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;uD(s[ot],s,i,e,t),this.previousInputValues.set(e,t);let o=ka(this._tNode.index,s);dD(o,1)}}get injector(){return new zl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Q5(n,e){let t=n[ot],r=Ss;return n[r]=e,Gf(t,r,2,"#host",null)}function Z5(n,e,t,r,i,s,o){let a=i[ot];X5(r,n,e,o);let l=null;e!==null&&(l=KI(e,i[Kc]));let u=s.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=ev(i,JO(t),null,h,i[n.index],n,s,u,null,null,l);return a.firstCreatePass&&lI(a,n,r.length-1),tv(i,p),i[n.index]=p}function X5(n,e,t,r){for(let i of n)e.mergedAttrs=Lf(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Ty(e,e.mergedAttrs,!0),t!==null&&GO(r,t,e))}function J5(n,e,t,r,i,s){let o=sr(),a=i[ot],l=Ei(o,i);eF(a,i,o,t,null,r);for(let h=0;h<t.length;h++){let p=o.directiveStart+h,_=Jc(i,a,p,o);Ta(_,i)}tF(a,i,o),l&&Ta(l,i);let u=Jc(i,a,o.directiveStart+o.componentOffset,o);if(n[Wi]=i[Wi]=u,s!==null)for(let h of s)h(u,e);return rD(a,o,i),u}function e9(n,e,t,r){if(r)Ob(n,t,["ng-version","18.2.7"]);else{let{attrs:i,classes:s}=NW(e.selectors[0]);i&&Ob(n,t,i),s&&s.length>0&&WO(n,t,s.join(" "))}}function t9(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function n9(){let n=sr();Gy(Mt()[ot],n)}var od=(()=>{class n{static{this.__NG_ELEMENT_ID__=r9}}return n})();function r9(){let n=sr();return s9(n,Mt())}var i9=od,fF=class extends i9{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Yy(this._hostTNode,this._hostLView)}get injector(){return new zl(this._hostTNode,this._hostLView)}get parentInjector(){let e=jI(this._hostTNode,this._hostLView);if(sO(e)){let t=vy(e,this._hostLView),r=yy(e),i=t[ot].data[r+8];return new zl(i,t)}else return new zl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=ZN(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-wi}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=KN(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,YN(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!QW(e),a;if(o)a=t;else{let E=t||{};a=E.index,r=E.injector,i=E.projectableNodes,s=E.environmentInjector||E.ngModuleRef}let l=o?e:new td(Sa(e)),u=r||this.parentInjector;if(!s&&l.ngModule==null){let S=(o?u:this.parentInjector).get(qr,null);S&&(s=S)}let h=Sa(l.componentType??{}),p=KN(this._lContainer,h?.id??null),_=p?.firstChild??null,w=l.create(u,i,_,s);return this.insertImpl(w.hostView,a,YN(this._hostTNode,p)),w}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(rG(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[Cr],u=new fF(l,l[Gi],l[Cr]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return T5(o,i,s,r),e.attachToViewContainerRef(),gP(Sb(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=ZN(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=oI(this._lContainer,t);r&&(dy(Sb(this._lContainer),t),HO(r[ot],r))}detach(e){let t=this._adjustIndex(e,-1),r=oI(this._lContainer,t);return r&&dy(Sb(this._lContainer),t)!=null?new Ql(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function ZN(n){return n[my]}function Sb(n){return n[my]||(n[my]=[])}function s9(n,e){let t,r=e[n.index];return Po(r)?t=r:(t=nF(r,e,null,n),e[n.index]=t,tv(e,t)),a9(t,e,n,r),new fF(t,n,e)}function o9(n,e){let t=n[sn],r=t.createComment(""),i=Ei(e,n),s=qO(t,i);return Iy(t,s,r,B6(t,i),!1),r}var a9=c9,l9=()=>!1;function u9(n,e,t){return l9(n,e,t)}function c9(n,e,t,r){if(n[Wl])return;let i;t.type&8?i=Ts(r):i=o9(e,t),n[Wl]=i}var XN=new Set;function ad(n){XN.has(n)||(XN.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function d9(n){return typeof n=="function"&&n[Io]!==void 0}function Rs(n,e){ad("NgSignals");let t=Y1(n),r=t[Io];return e?.equal&&(r.equal=e.equal),t.set=i=>ZC(r,i),t.update=i=>K1(r,i),t.asReadonly=h9.bind(t),t}function h9(){let n=this[Io];if(n.readonlyFn===void 0){let e=()=>this();e[Io]=n,n.readonlyFn=e}return n.readonlyFn}function pF(n){return d9(n)&&typeof n.set=="function"}function f9(n){let e=[],t=new Map;function r(i){let s=t.get(i);if(!s){let o=n(i);t.set(i,s=o.then(_9))}return s}return My.forEach((i,s)=>{let o=[];i.templateUrl&&o.push(r(i.templateUrl).then(u=>{i.template=u}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let u=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((p,_)=>{a.push(""),o.push(r(p).then(w=>{a[u+_]=w,h.splice(h.indexOf(p),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&o.push(r(i.styleUrl).then(u=>{a.push(u),i.styleUrl=void 0}));let l=Promise.all(o).then(()=>y9(s));e.push(l)}),m9(),Promise.all(e).then(()=>{})}var My=new Map,p9=new Set;function m9(){let n=My;return My=new Map,n}function g9(){return My.size===0}function _9(n){return typeof n=="string"?n:n.text()}function y9(n){p9.delete(n)}function v9(n){return Object.getPrototypeOf(n.prototype).constructor}function Gr(n){let e=v9(n.type),t=!0,r=[n];for(;e;){let i;if(Mo(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new X(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=ty(n.inputs),o.inputTransforms=ty(n.inputTransforms),o.declaredInputs=ty(n.declaredInputs),o.outputs=ty(n.outputs);let a=i.hostBindings;a&&I9(n,a);let l=i.viewQuery,u=i.contentQueries;if(l&&C9(n,l),u&&b9(n,u),w9(n,i),tW(n.outputs,i.outputs),Mo(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Gr&&(t=!1)}}e=Object.getPrototypeOf(e)}E9(r)}function w9(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function E9(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Lf(i.hostAttrs,t=Lf(t,i.hostAttrs))}}function ty(n){return n===Wc?{}:n===Or?[]:n}function C9(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function b9(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function I9(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function fD(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var xa=class{},Bf=class{};var xy=class extends xa{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ay(this);let s=DP(e);this._bootstrapComponents=VO(s.bootstrap),this._r3Injector=pO(e,t,[{provide:xa,useValue:this},{provide:Aa,useValue:this.componentFactoryResolver},...r],Er(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},ky=class extends Bf{constructor(e){super(),this.moduleType=e}create(e){return new xy(this.moduleType,e,[])}};function D9(n,e,t){return new xy(n,e,t,!1)}var pI=class extends xa{constructor(e){super(),this.componentFactoryResolver=new Ay(this),this.instance=null;let t=new Vf([...e.providers,{provide:xa,useValue:this},{provide:Aa,useValue:this.componentFactoryResolver}],e.parent||PI(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function rv(n,e,t=null){return new pI({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function mF(n){return T9(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function S9(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function T9(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function eu(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function A9(n){return(n.flags&32)===32}function M9(n,e,t,r,i,s,o,a,l){let u=e.consts,h=Gf(e,n,4,o||null,a||null);lD(e,t,h,Xc(u,l)),Gy(e,h);let p=h.tView=oD(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function x9(n,e,t,r,i,s,o,a,l,u){let h=t+Ss,p=e.firstCreatePass?M9(h,e,n,r,i,s,o,a,l):e.data[h];Xl(p,!1);let _=k9(e,n,p,t);zy()&&Xy(e,n,_,p),Ta(_,n);let w=nF(_,n,_,p);return n[h]=w,tv(n,w),u9(w,p,n),jy(p)&&iD(e,n,p),l!=null&&sD(n,p,u),p}function zt(n,e,t,r,i,s,o,a){let l=Mt(),u=Yn(),h=Xc(u.consts,s);return x9(l,u,n,e,t,r,i,h,o,a),zt}var k9=R9;function R9(n,e,t,r){return Wy(!0),e[sn].createComment("")}var Hc=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Hc||{}),gF=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=ie({token:n,providedIn:"root",factory:()=>new n})}}return n})(),mI=class n{constructor(){this.ngZone=J($e),this.scheduler=J(ed),this.errorHandler=J(xo,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Hc.EarlyRead,Hc.Write,Hc.MixedReadWrite,Hc.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=ie({token:n,providedIn:"root",factory:()=>new n})}},gI=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function pD(n,e){!e?.injector&&YW(pD);let t=e?.injector??J(Gn);return T6(t)?(ad("NgAfterNextRender"),P9(n,t,e,!0)):O9}function N9(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function P9(n,e,t,r){let i=e.get(gF);i.impl??=e.get(mI);let s=t?.phase??Hc.MixedReadWrite,o=t?.manualCleanup!==!0?e.get($I):null,a=new gI(i.impl,N9(n,s),r,o);return i.impl.register(a),a}var O9={destroy(){}};function Ns(n,e,t,r){let i=Mt(),s=zf();if(eu(i,s,e)){let o=Yn(),a=qy();m5(a,i,n,e,t,r)}return Ns}function F9(n,e,t,r){return eu(n,zf(),t)?e+$f(t)+r:Ra}function ny(n,e){return n<<17|e<<2}function Zl(n){return n>>17&32767}function L9(n){return(n&2)==2}function V9(n,e){return n&131071|e<<17}function _I(n){return n|2}function nd(n){return(n&131068)>>2}function Tb(n,e){return n&-131069|e<<2}function U9(n){return(n&1)===1}function yI(n){return n|1}function B9(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Zl(o),l=nd(o);n[r]=t;let u=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||qf(p,h)>0)&&(u=!0)}else h=t;if(i)if(l!==0){let _=Zl(n[a+1]);n[r+1]=ny(_,a),_!==0&&(n[_+1]=Tb(n[_+1],r)),n[a+1]=V9(n[a+1],r)}else n[r+1]=ny(a,0),a!==0&&(n[a+1]=Tb(n[a+1],r)),a=r;else n[r+1]=ny(l,0),a===0?a=r:n[l+1]=Tb(n[l+1],r),l=r;u&&(n[r+1]=_I(n[r+1])),JN(n,h,r,!0),JN(n,h,r,!1),j9(e,h,n,r,s),o=ny(a,l),s?e.classBindings=o:e.styleBindings=o}function j9(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&qf(s,e)>=0&&(t[r+1]=yI(t[r+1]))}function JN(n,e,t,r){let i=n[t+1],s=e===null,o=r?Zl(i):nd(i),a=!1;for(;o!==0&&(a===!1||s);){let l=n[o],u=n[o+1];H9(l,e)&&(a=!0,n[o+1]=r?yI(u):_I(u)),o=r?Zl(u):nd(u)}a&&(n[t+1]=r?_I(i):yI(i))}function H9(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?qf(n,e)>=0:!1}var qi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function $9(n){return n.substring(qi.key,qi.keyEnd)}function q9(n){return z9(n),_F(n,yF(n,0,qi.textEnd))}function _F(n,e){let t=qi.textEnd;return t===e?-1:(e=qi.keyEnd=W9(n,qi.key=e,t),yF(n,e,t))}function z9(n){qi.key=0,qi.keyEnd=0,qi.value=0,qi.valueEnd=0,qi.textEnd=n.length}function yF(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function W9(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function Re(n,e,t){let r=Mt(),i=zf();if(eu(r,i,e)){let s=Yn(),o=qy();aD(s,o,r,n,e,r[sn],t,!1)}return Re}function vI(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";uD(n,t,s[o],o,r)}function tu(n,e,t){return vF(n,e,t,!1),tu}function Ps(n,e){return vF(n,e,null,!0),Ps}function Ii(n){Y9(e8,G9,n,!0)}function G9(n,e){for(let t=q9(e);t>=0;t=_F(e,t))kI(n,$9(e),!0)}function vF(n,e,t,r){let i=Mt(),s=Yn(),o=KP(2);if(s.firstUpdatePass&&EF(s,n,o,r),e!==Ra&&eu(i,o,e)){let a=s.data[Jl()];CF(s,a,i,i[sn],n,i[o+1]=n8(e,t),r,o)}}function Y9(n,e,t,r){let i=Yn(),s=KP(2);i.firstUpdatePass&&EF(i,null,s,r);let o=Mt();if(t!==Ra&&eu(o,s,t)){let a=i.data[Jl()];if(bF(a,r)&&!wF(i,s)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(t=kb(l,t||"")),vI(i,a,o,t,r)}else t8(i,a,o,o[sn],o[s+1],o[s+1]=J9(n,e,t),r,s)}}function wF(n,e){return e>=n.expandoStartIndex}function EF(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Jl()],o=wF(n,t);bF(s,r)&&e===null&&!o&&(e=!1),e=K9(i,s,e,r),B9(i,s,e,t,o,r)}}function K9(n,e,t,r){let i=QP(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Ab(null,n,e,t,r),t=jf(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=Ab(i,n,e,t,r),s===null){let l=Q9(n,e,r);l!==void 0&&Array.isArray(l)&&(l=Ab(null,n,e,l[1],r),l=jf(l,e.attrs,r),Z9(n,e,r,l))}else s=X9(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function Q9(n,e,t){let r=t?e.classBindings:e.styleBindings;if(nd(r)!==0)return n[Zl(r)]}function Z9(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Zl(i)]=r}function X9(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=jf(r,o,t)}return jf(r,e.attrs,t)}function Ab(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=jf(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function jf(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),kI(n,o,t?!0:e[++s]))}return n===void 0?null:n}function J9(n,e,t){if(t==null||t==="")return Or;let r=[],i=Ci(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function e8(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&kI(n,r,t)}function t8(n,e,t,r,i,s,o,a){i===Ra&&(i=Or);let l=0,u=0,h=0<i.length?i[0]:null,p=0<s.length?s[0]:null;for(;h!==null||p!==null;){let _=l<i.length?i[l+1]:void 0,w=u<s.length?s[u+1]:void 0,E=null,S;h===p?(l+=2,u+=2,_!==w&&(E=p,S=w)):p===null||h!==null&&h<p?(l+=2,E=h):(u+=2,E=p,S=w),E!==null&&CF(n,e,t,r,E,S,o,a),h=l<i.length?i[l]:null,p=u<s.length?s[u]:null}}function CF(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let l=n.data,u=l[a+1],h=U9(u)?eP(l,e,t,i,nd(u),o):void 0;if(!Ry(h)){Ry(s)||L9(u)&&(s=eP(l,null,t,i,a,o));let p=UP(Jl(),t);G6(r,o,p,i,s)}}function eP(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let l=n[i],u=Array.isArray(l),h=u?l[1]:l,p=h===null,_=t[i+1];_===Ra&&(_=p?Or:void 0);let w=p?yb(_,r):h===r?_:void 0;if(u&&!Ry(w)&&(w=yb(l,r)),Ry(w)&&(a=w,o))return a;let E=n[i+1];i=o?Zl(E):nd(E)}if(e!==null){let l=s?e.residualClasses:e.residualStyles;l!=null&&(a=yb(l,r))}return a}function Ry(n){return n!==void 0}function n8(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Er(Ci(n)))),n}function bF(n,e){return(n.flags&(e?8:16))!==0}function r8(n,e,t,r,i,s){let o=e.consts,a=Xc(o,i),l=Gf(e,n,2,r,a);return lD(e,t,l,Xc(o,s)),l.attrs!==null&&Ty(l,l.attrs,!1),l.mergedAttrs!==null&&Ty(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function D(n,e,t,r){let i=Mt(),s=Yn(),o=Ss+n,a=i[sn],l=s.firstCreatePass?r8(o,s,i,e,t,r):s.data[o],u=i8(s,i,l,a,e,n);i[o]=u;let h=jy(l);return Xl(l,!0),GO(a,u,l),!A9(l)&&zy()&&Xy(s,i,u,l),oG()===0&&Ta(u,i),aG(),h&&(iD(s,i,l),rD(s,l,i)),r!==null&&sD(i,l),D}function T(){let n=sr();VI()?GP():(n=n.parent,Xl(n,!1));let e=n;cG(e)&&dG(),lG();let t=Yn();return t.firstCreatePass&&(Gy(t,n),FI(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&DG(e)&&vI(t,e,Mt(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&SG(e)&&vI(t,e,Mt(),e.stylesWithoutHost,!1),T}function ce(n,e,t,r){return D(n,e,t,r),T(),ce}var i8=(n,e,t,r,i,s)=>(Wy(!0),UO(r,i,EG()));function s8(n,e,t,r,i){let s=e.consts,o=Xc(s,r),a=Gf(e,n,8,"ng-container",o);o!==null&&Ty(a,o,!0);let l=Xc(s,i);return lD(e,t,a,l),e.queries!==null&&e.queries.elementStart(e,a),a}function iv(n,e,t){let r=Mt(),i=Yn(),s=n+Ss,o=i.firstCreatePass?s8(s,i,r,e,t):i.data[s];Xl(o,!0);let a=o8(i,r,o,n);return r[s]=a,zy()&&Xy(i,r,a,o),Ta(a,r),jy(o)&&(iD(i,r,o),rD(i,o,r)),t!=null&&sD(r,o),iv}function sv(){let n=sr(),e=Yn();return VI()?GP():(n=n.parent,Xl(n,!1)),e.firstCreatePass&&(Gy(e,n),FI(n)&&e.queries.elementEnd(n)),sv}var o8=(n,e,t,r)=>(Wy(!0),k6(e[sn],""));function Wt(){return Mt()}function mD(n,e,t){let r=Mt(),i=zf();if(eu(r,i,e)){let s=Yn(),o=qy(),a=QP(s.data),l=E5(a,o,r);aD(s,o,r,n,e,l,t,!0)}return mD}var Ny="en-US";var a8=Ny;function l8(n){typeof n=="string"&&(a8=n.toLowerCase().replace(/_/g,"-"))}var u8=(n,e,t)=>{};function me(n,e,t,r){let i=Mt(),s=Yn(),o=sr();return IF(s,i,i[sn],o,n,e,r),me}function c8(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[py],l=i[s+2];return a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function IF(n,e,t,r,i,s,o){let a=jy(r),u=n.firstCreatePass&&w5(n),h=e[Wi],p=v5(e),_=!0;if(r.type&3||o){let S=Ei(r,e),x=o?o(S):S,H=p.length,Y=o?Q=>o(Ts(Q[r.index])):r.index,q=null;if(!o&&a&&(q=c8(n,e,i,r.index)),q!==null){let Q=q.__ngLastListenerFn__||q;Q.__ngNextListenerFn__=s,q.__ngLastListenerFn__=s,_=!1}else{s=nP(r,e,h,s),u8(S,i,s);let Q=t.listen(x,i,s);p.push(s,Q),u&&u.push(i,Y,H,H+1)}}else s=nP(r,e,h,s);let w=r.outputs,E;if(_&&w!==null&&(E=w[i])){let S=E.length;if(S)for(let x=0;x<S;x+=2){let H=E[x],Y=E[x+1],pe=e[H][Y].subscribe(s),re=p.length;p.push(s,pe),u&&u.push(i,r.index,re,-(re+1))}}}function tP(n,e,t,r){let i=ft(null);try{return Es(6,e,t),t(r)!==!1}catch(s){return iF(n,s),!1}finally{Es(7,e,t),ft(i)}}function nP(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?ka(n.index,e):e;dD(o,5);let a=tP(e,t,r,s),l=i.__ngNextListenerFn__;for(;l;)a=tP(e,t,l,s)&&a,l=l.__ngNextListenerFn__;return a}}function ke(n=1){return vG(n)}function ld(n){let e=fG();return nG(e,Ss+n)}function G(n,e=""){let t=Mt(),r=Yn(),i=n+Ss,s=r.firstCreatePass?Gf(r,i,1,e,null):r.data[i],o=d8(r,t,s,e,n);t[i]=o,zy()&&Xy(r,t,o,s),Xl(s,!1)}var d8=(n,e,t,r,i)=>(Wy(!0),M6(e[sn],r));function on(n){return Lr("",n,""),on}function Lr(n,e,t){let r=Mt(),i=F9(r,n,e,t);return i!==Ra&&C5(r,Jl(),i),Lr}function ye(n,e,t){pF(e)&&(e=e());let r=Mt(),i=zf();if(eu(r,i,e)){let s=Yn(),o=qy();aD(s,o,r,n,e,r[sn],t,!1)}return ye}function be(n,e){let t=pF(n);return t&&n.set(e),t}function ve(n,e){let t=Mt(),r=Yn(),i=sr();return IF(r,t,t[sn],i,n,e),ve}function h8(n,e,t){let r=Yn();if(r.firstCreatePass){let i=Mo(n);wI(t,r.data,r.blueprint,i,!0),wI(e,r.data,r.blueprint,i,!1)}}function wI(n,e,t,r,i){if(n=wr(n),Array.isArray(n))for(let s=0;s<n.length;s++)wI(n[s],e,t,r,i);else{let s=Yn(),o=Mt(),a=sr(),l=Yc(n)?n:wr(n.provide),u=kP(n),h=a.providerIndexes&1048575,p=a.directiveStart,_=a.providerIndexes>>20;if(Yc(n)||!n.multi){let w=new Kl(u,i,te),E=xb(l,e,i?h:h+_,p);E===-1?(zb(wy(a,o),s,l),Mb(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(w),o.push(w)):(t[E]=w,o[E]=w)}else{let w=xb(l,e,h+_,p),E=xb(l,e,h,h+_),S=w>=0&&t[w],x=E>=0&&t[E];if(i&&!x||!i&&!S){zb(wy(a,o),s,l);let H=m8(i?p8:f8,t.length,i,r,u);!i&&x&&(t[E].providerFactory=H),Mb(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(H),o.push(H)}else{let H=DF(t[i?E:w],u,!i&&r);Mb(s,n,w>-1?w:E,H)}!i&&r&&x&&t[E].componentProviders++}}}function Mb(n,e,t,r){let i=Yc(e),s=jW(e);if(i||s){let l=(s?wr(e.useClass):e).prototype.ngOnDestroy;if(l){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=u.indexOf(t);h===-1?u.push(t,[r,l]):u[h+1].push(r,l)}else u.push(t,l)}}}function DF(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function xb(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function f8(n,e,t,r){return EI(this.multi,[])}function p8(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Jc(t,t[ot],this.providerFactory.index,r);s=a.slice(0,o),EI(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],EI(i,s);return s}function EI(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function m8(n,e,t,r,i){let s=new Kl(n,t,te);return s.multi=[],s.index=e,s.componentProviders=0,DF(s,i,r&&!t),s}function Yi(n,e=[]){return t=>{t.providersResolver=(r,i)=>h8(r,i?i(n):n,e)}}var g8=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=AP(!1,t.type),i=r.length>0?rv([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=ie({token:n,providedIn:"environment",factory:()=>new n(B(qr))})}}return n})();function Yf(n){ad("NgStandalone"),n.getStandaloneInjector=e=>e.get(g8).getOrCreateStandaloneInjector(n)}var ry=null;function _8(n){ry!==null&&(n.defaultEncapsulation!==ry.defaultEncapsulation||n.preserveWhitespaces!==ry.preserveWhitespaces)||(ry=n)}var No=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},SF=new No("18.2.7");var ov=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var gD=new oe(""),Kf=new oe(""),av=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,_D||(y8(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{$e.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t()},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(B($e),B(lv),B(Kf))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})(),lv=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return _D?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function y8(n){_D=n}var _D;function nu(n){return!!n&&typeof n.then=="function"}function TF(n){return!!n&&typeof n.subscribe=="function"}var uv=new oe(""),AF=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=J(uv,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if(nu(s))t.push(s);else if(TF(s)){let o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),yD=new oe("");function v8(){G1(()=>{throw new X(600,!1)})}function w8(n){return n.isBoundToModule}var E8=10;function C8(n,e,t){try{let r=t();return nu(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function MF(n,e){return Array.isArray(e)?e.reduce(MF,n):V(V({},n),e)}var Di=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=J(GG),this.afterRenderManager=J(gF),this.zonelessEnabled=J(hD),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new _t,this.afterTick=new _t,this.componentTypes=[],this.components=[],this.isStable=J(sd).hasPendingTasks.pipe(he(t=>!t)),this._injector=J(qr)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Sy;if(!this._injector.get(AF).done){let _=!i&&IP(t),w=!1;throw new X(405,w)}let o;i?o=t:o=this._injector.get(Aa).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=w8(o)?void 0:this._injector.get(xa),l=r||o.selector,u=o.create(Gn.NULL,[],l,a),h=u.location.nativeElement,p=u.injector.get(gD,null);return p?.registerApplication(h),u.onDestroy(()=>{this.detachView(u.hostView),ly(this.components,u),p?.unregisterApplication(h)}),this._loadComponent(u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new X(101,!1);let t=ft(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,ft(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Ma,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<E8;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)b8(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Hy(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;ly(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(yD,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ly(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new X(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ly(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function b8(n,e,t,r){if(!t&&!Hy(n))return;aF(n,e,t&&!r?0:1)}var CI=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},cv=(()=>{class n{compileModuleSync(t){return new ky(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=DP(t),s=VO(i.declarations).reduce((o,a)=>{let l=Sa(a);return l&&o.push(new td(l)),o},[]);return new CI(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),I8=new oe("");function D8(n,e,t){let r=new ky(t);return Promise.resolve(r)}function rP(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var S8=(()=>{class n{constructor(){this.zone=J($e),this.changeDetectionScheduler=J(ed),this.applicationRef=J(Di)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function T8({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new $e(de(V({},xF()),{scheduleInRootZone:t})),[{provide:$e,useFactory:n},{provide:Gc,multi:!0,useFactory:()=>{let r=J(S8,{optional:!0});return()=>r.initialize()}},{provide:Gc,multi:!0,useFactory:()=>{let r=J(A8);return()=>{r.initialize()}}},e===!0?{provide:dF,useValue:!0}:[],{provide:hF,useValue:t??mO}]}function xF(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var A8=(()=>{class n{constructor(){this.subscription=new rn,this.initialized=!1,this.zone=J($e),this.pendingTasks=J(sd)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{$e.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{$e.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var M8=(()=>{class n{constructor(){this.appRef=J(Di),this.taskService=J(sd),this.ngZone=J($e),this.zonelessEnabled=J(hD),this.disableScheduling=J(dF,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new rn,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Cy):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(J(hF,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof by||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?PN:gO;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Cy+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,PN(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function x8(){return typeof $localize<"u"&&$localize.locale||Ny}var vD=new oe("",{providedIn:"root",factory:()=>J(vD,et.Optional|et.SkipSelf)||x8()});var wD=new oe("");function iy(n){return!!n.platformInjector}function k8(n){let e=iy(n)?n.r3Injector:n.moduleRef.injector,t=e.get($e);return t.run(()=>{iy(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(xo,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),iy(n)){let s=()=>e.destroy(),o=n.platformInjector.get(wD);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else n.moduleRef.onDestroy(()=>{ly(n.allPlatformModules,n.moduleRef),i.unsubscribe()});return C8(r,t,()=>{let s=e.get(AF);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(vD,Ny);if(l8(o||Ny),iy(n)){let a=e.get(Di);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return R8(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function R8(n,e){let t=n.injector.get(Di);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new X(-403,!1);e.push(n)}var kF=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,s=()=>WG(r?.ngZone,de(V({},xF({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),o=r?.ignoreChangesOutsideZone,a=[T8({ngZoneFactory:s,ignoreChangesOutsideZone:o}),{provide:ed,useExisting:M8}],l=D9(t.moduleType,this.injector,a);return k8({moduleRef:l,allPlatformModules:this._modules})}bootstrapModule(t,r=[]){let i=MF({},r);return D8(this.injector,i,t).then(s=>this.bootstrapModuleFactory(s,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new X(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(wD,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(B(Gn))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Of=null,RF=new oe("");function N8(n){if(Of&&!Of.get(RF,!1))throw new X(400,!1);v8(),Of=n;let e=n.get(kF);return F8(n),e}function ED(n,e,t=[]){let r=`Platform: ${e}`,i=new oe(r);return(s=[])=>{let o=NF();if(!o||o.injector.get(RF,!1)){let a=[...t,...s,{provide:i,useValue:!0}];n?n(a):N8(P8(a,r))}return O8(i)}}function P8(n=[],e){return Gn.create({name:e,providers:[{provide:Vy,useValue:"platform"},{provide:wD,useValue:new Set([()=>Of=null])},...n]})}function O8(n){let e=NF();if(!e)throw new X(401,!1);return e}function NF(){return Of?.get(kF)??null}function F8(n){n.get(WI,null)?.forEach(t=>t())}function CD(){return!1}var Na=(()=>{class n{static{this.__NG_ELEMENT_ID__=L8}}return n})();function L8(n){return V8(sr(),Mt(),(n&16)===16)}function V8(n,e,t){if(By(n)&&!t){let r=ka(n.index,e);return new Ql(r,r)}else if(n.type&175){let r=e[Ds];return new Ql(r,e)}return null}var bI=class{constructor(){}supports(e){return mF(e)}create(e){return new II(e)}},U8=(n,e)=>e,II=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||U8}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<iP(r,i,s)?t:r,a=iP(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let u=a-i,h=l-i;if(u!=h){for(let _=0;_<u;_++){let w=_<s.length?s[_]:s[_]=0,E=w+_;h<=E&&E<u&&(s[_]=w+1)}let p=o.previousIndex;s[p]=h-u}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!mF(e))throw new X(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,S9(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new DI(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Py),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Py),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},DI=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},SI=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Py=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new SI,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function iP(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function sP(){return new bD([new bI])}var bD=(()=>{class n{static{this.\u0275prov=ie({token:n,providedIn:"root",factory:sP})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||sP()),deps:[[n,new MI,new rd]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new X(901,!1)}}return n})();var PF=ED(null,"core",[]),OF=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(B(Di))}}static{this.\u0275mod=vt({type:n})}static{this.\u0275inj=yt({})}}return n})();function Pa(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Qf(n,e){ad("NgSignals");let t=q1(n);return e?.equal&&(t[Io].equal=e.equal),t}function Lo(n){let e=ft(null);try{return n()}finally{ft(e)}}function FF(n){let e=Sa(n);if(!e)return null;let t=new td(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var $F=null;function Os(){return $F}function qF(n){$F??=n}var dv=class{};var wn=new oe(""),MD=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:()=>J(B8),providedIn:"platform"})}}return n})(),zF=new oe(""),B8=(()=>{class n extends MD{constructor(){super(),this._doc=J(wn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Os().getBaseHref(this._doc)}onPopState(t){let r=Os().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Os().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function xD(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function LF(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Vo(n){return n&&n[0]!=="?"?"?"+n:n}var Uo=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:()=>J(kD),providedIn:"root"})}}return n})(),WF=new oe(""),kD=(()=>{class n extends Uo{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??J(wn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xD(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Vo(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Vo(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Vo(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(B(MD),B(WF,8))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),GF=(()=>{class n extends Uo{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=xD(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Vo(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Vo(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(B(MD),B(WF,8))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})(),ud=(()=>{class n{constructor(t){this._subject=new Xe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=$8(LF(VF(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Vo(r))}normalize(t){return n.stripTrailingSlash(H8(this._basePath,VF(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Vo(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Vo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Vo}static{this.joinWithSlash=xD}static{this.stripTrailingSlash=LF}static{this.\u0275fac=function(r){return new(r||n)(B(Uo))}}static{this.\u0275prov=ie({token:n,factory:()=>j8(),providedIn:"root"})}}return n})();function j8(){return new ud(B(Uo))}function H8(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function VF(n){return n.replace(/\/index.html$/,"")}function $8(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function YF(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var ID=/\s+/,UF=[],KF=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=UF,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(ID):UF}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(ID):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(ID).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(te(Fr),te(bi))}}static{this.\u0275dir=Pt({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var DD=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},cd=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new DD(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),BF(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);BF(s,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(te(od),te(nv),te(bD))}}static{this.\u0275dir=Pt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function BF(n,e){n.context.$implicit=e.item}var Yr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new SD,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){jF("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){jF("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(te(od),te(nv))}}static{this.\u0275dir=Pt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),SD=class{constructor(){this.$implicit=null,this.ngIf=null}};function jF(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Er(e)}'.`)}var dd=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=vt({type:n})}static{this.\u0275inj=yt({})}}return n})(),RD="browser",q8="server";function ND(n){return n===RD}function ru(n){return n===q8}var QF=(()=>{class n{static{this.\u0275prov=ie({token:n,providedIn:"root",factory:()=>ND(J(vn))?new TD(J(wn),window):new AD})}}return n})(),TD=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=z8(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function z8(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var AD=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},hv=class{};var FD=class extends dv{constructor(){super(...arguments),this.supportsDOMEvents=!0}},LD=class n extends FD{static makeCurrent(){qF(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=W8();return t==null?null:G8(t)}resetBaseElement(){Zf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return YF(document.cookie,e)}},Zf=null;function W8(){return Zf=Zf||document.querySelector("base"),Zf?Zf.getAttribute("href"):null}function G8(n){return new URL(n,document.baseURI).pathname}var VD=class{addToWindow(e){$r.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new X(5103,!1);return s},$r.getAllAngularTestabilities=()=>e.getAllTestabilities(),$r.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=$r.getAllAngularTestabilities(),s=i.length,o=function(){s--,s==0&&r()};i.forEach(a=>{a.whenStable(o)})};$r.frameworkStabilizers||($r.frameworkStabilizers=[]),$r.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Os().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},Y8=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})(),UD=new oe(""),JF=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new X(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(B(UD),B($e))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})(),fv=class{constructor(e){this._doc=e}},PD="ng-app-id",eL=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ru(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${PD}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(PD),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(PD,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(B(wn),B(Ky),B(YI,8),B(vn))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})(),OD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},jD=/%COMP%/g,tL="%COMP%",K8=`_nghost-${tL}`,Q8=`_ngcontent-${tL}`,Z8=!0,X8=new oe("",{providedIn:"root",factory:()=>Z8});function J8(n){return Q8.replace(jD,n)}function e7(n){return K8.replace(jD,n)}function nL(n,e){return e.map(t=>t.replace(jD,n))}var pv=(()=>{class n{constructor(t,r,i,s,o,a,l,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=ru(a),this.defaultRenderer=new Xf(t,o,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===bs.ShadowDom&&(r=de(V({},r),{encapsulation:bs.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof mv?i.applyToHost(t):i instanceof Jf&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case bs.Emulated:s=new mv(l,u,r,this.appId,h,o,a,p);break;case bs.ShadowDom:return new BD(l,u,t,r,o,a,this.nonce,p);default:s=new Jf(l,u,r,h,o,a,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(B(JF),B(eL),B(Ky),B(X8),B(wn),B(vn),B($e),B(YI))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})(),Xf=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(OD[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(ZF(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ZF(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new X(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=OD[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=OD[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ro.DashCase|Ro.Important)?e.style.setProperty(t,r,i&Ro.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ro.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Os().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function ZF(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var BD=class extends Xf{constructor(e,t,r,i,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=nL(i.id,i.styles);for(let h of u){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Jf=class extends Xf{constructor(e,t,r,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?nL(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},mv=class extends Jf{constructor(e,t,r,i,s,o,a,l){let u=i+"-"+r.id;super(e,t,r,s,o,a,l,u),this.contentAttr=J8(u),this.hostAttr=e7(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},t7=(()=>{class n extends fv{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(B(wn))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})(),XF=["alt","control","meta","shift"],n7={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},r7={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},i7=(()=>{class n extends fv{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Os().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),XF.forEach(u=>{let h=r.indexOf(u);h>-1&&(r.splice(h,1),o+=u+".")}),o+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(t,r){let i=n7[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),XF.forEach(o=>{if(o!==i){let a=r7[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(B(wn))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})();function s7(){LD.makeCurrent()}function o7(){return new xo}function a7(){return bO(document),document}var l7=[{provide:vn,useValue:RD},{provide:WI,useValue:s7,multi:!0},{provide:wn,useFactory:a7,deps:[]}],rL=ED(PF,"browser",l7),u7=new oe(""),c7=[{provide:Kf,useClass:VD,deps:[]},{provide:gD,useClass:av,deps:[$e,lv,Kf]},{provide:av,useClass:av,deps:[$e,lv,Kf]}],d7=[{provide:Vy,useValue:"root"},{provide:xo,useFactory:o7,deps:[]},{provide:UD,useClass:t7,multi:!0,deps:[wn,$e,vn]},{provide:UD,useClass:i7,multi:!0,deps:[wn]},pv,eL,JF,{provide:Ma,useExisting:pv},{provide:hv,useClass:Y8,deps:[]},[]],fd=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Ky,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(B(u7,12))}}static{this.\u0275mod=vt({type:n})}static{this.\u0275inj=yt({providers:[...d7,...c7],imports:[dd,OF]})}}return n})();var iL=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(B(wn))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var HD=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=B(h7),i},providedIn:"root"})}}return n})(),h7=(()=>{class n extends HD{constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case Wr.NONE:return r;case Wr.HTML:return Oo(r,"HTML")?Ci(r):QI(this._doc,String(r)).toString();case Wr.STYLE:return Oo(r,"Style")?Ci(r):r;case Wr.SCRIPT:if(Oo(r,"Script"))return Ci(r);throw new X(5200,!1);case Wr.URL:return Oo(r,"URL")?Ci(r):Zy(String(r));case Wr.RESOURCE_URL:if(Oo(r,"ResourceURL"))return Ci(r);throw new X(5201,!1);default:throw new X(5202,!1)}}bypassSecurityTrustHtml(t){return TO(t)}bypassSecurityTrustStyle(t){return AO(t)}bypassSecurityTrustScript(t){return MO(t)}bypassSecurityTrustUrl(t){return xO(t)}bypassSecurityTrustResourceUrl(t){return kO(t)}static{this.\u0275fac=function(r){return new(r||n)(B(wn))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Qe="primary",fp=Symbol("RouteTitle"),YD=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function vd(n){return new YD(n)}function f7(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function p7(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Fs(n[t],e[t]))return!1;return!0}function Fs(n,e){let t=n?KD(n):void 0,r=e?KD(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!mL(n[i],e[i]))return!1;return!0}function KD(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function mL(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function gL(n){return n.length>0?n[n.length-1]:null}function Fa(n){return ub(n)?n:nu(n)?Ze(Promise.resolve(n)):De(n)}var m7={exact:yL,subset:vL},_L={exact:g7,subset:_7,ignored:()=>!0};function sL(n,e,t){return m7[t.paths](n.root,e.root,t.matrixParams)&&_L[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function g7(n,e){return Fs(n,e)}function yL(n,e,t){if(!su(n.segments,e.segments)||!yv(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!yL(n.children[r],e.children[r],t))return!1;return!0}function _7(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>mL(n[t],e[t]))}function vL(n,e,t){return wL(n,e,e.segments,t)}function wL(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!su(i,t)||e.hasChildren()||!yv(i,t,r))}else if(n.segments.length===t.length){if(!su(n.segments,t)||!yv(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!vL(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!su(n.segments,i)||!yv(n.segments,i,r)||!n.children[Qe]?!1:wL(n.children[Qe],e,s,r)}}function yv(n,e,t){return e.every((r,i)=>_L[t](n[i].parameters,r.parameters))}var jo=class{constructor(e=new Dt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=vd(this.queryParams),this._queryParamMap}toString(){return w7.serialize(this)}},Dt=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vv(this)}},iu=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=vd(this.parameters),this._parameterMap}toString(){return CL(this)}};function y7(n,e){return su(n,e)&&n.every((t,r)=>Fs(t.parameters,e[r].parameters))}function su(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function v7(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Qe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Qe&&(t=t.concat(e(i,r)))}),t}var pp=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:()=>new wd,providedIn:"root"})}}return n})(),wd=class{parse(e){let t=new ZD(e);return new jo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${ep(e.root,!0)}`,r=b7(e.queryParams),i=typeof e.fragment=="string"?`#${E7(e.fragment)}`:"";return`${t}${r}${i}`}},w7=new wd;function vv(n){return n.segments.map(e=>CL(e)).join("/")}function ep(n,e){if(!n.hasChildren())return vv(n);if(e){let t=n.children[Qe]?ep(n.children[Qe],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Qe&&r.push(`${i}:${ep(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=v7(n,(r,i)=>i===Qe?[ep(n.children[Qe],!1)]:[`${i}:${ep(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Qe]!=null?`${vv(n)}/${t[0]}`:`${vv(n)}/(${t.join("//")})`}}function EL(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gv(n){return EL(n).replace(/%3B/gi,";")}function E7(n){return encodeURI(n)}function QD(n){return EL(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wv(n){return decodeURIComponent(n)}function oL(n){return wv(n.replace(/\+/g,"%20"))}function CL(n){return`${QD(n.path)}${C7(n.parameters)}`}function C7(n){return Object.entries(n).map(([e,t])=>`;${QD(e)}=${QD(t)}`).join("")}function b7(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${gv(t)}=${gv(i)}`).join("&"):`${gv(t)}=${gv(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var I7=/^[^\/()?;#]+/;function qD(n){let e=n.match(I7);return e?e[0]:""}var D7=/^[^\/()?;=#]+/;function S7(n){let e=n.match(D7);return e?e[0]:""}var T7=/^[^=?&#]+/;function A7(n){let e=n.match(T7);return e?e[0]:""}var M7=/^[^&#]+/;function x7(n){let e=n.match(M7);return e?e[0]:""}var ZD=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Dt([],{}):new Dt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Qe]=new Dt(e,t)),r}parseSegment(){let e=qD(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new X(4009,!1);return this.capture(e),new iu(wv(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=S7(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=qD(this.remaining);i&&(r=i,this.capture(r))}e[wv(t)]=wv(r)}parseQueryParam(e){let t=A7(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=x7(this.remaining);o&&(r=o,this.capture(r))}let i=oL(t),s=oL(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=qD(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new X(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Qe);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[Qe]:new Dt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new X(4011,!1)}};function bL(n){return n.segments.length>0?new Dt([],{[Qe]:n}):n}function IL(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=IL(i);if(r===Qe&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Dt(n.segments,e);return k7(t)}function k7(n){if(n.numberOfChildren===1&&n.children[Qe]){let e=n.children[Qe];return new Dt(n.segments.concat(e.segments),e.children)}return n}function ou(n){return n instanceof jo}function R7(n,e,t=null,r=null){let i=DL(n);return SL(i,e,t,r)}function DL(n){let e;function t(s){let o={};for(let l of s.children){let u=t(l);o[l.outlet]=u}let a=new Dt(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=bL(r);return e??i}function SL(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return zD(i,i,i,t,r);let s=N7(e);if(s.toRoot())return zD(i,i,new Dt([],{}),t,r);let o=P7(s,i,n),a=o.processChildren?rp(o.segmentGroup,o.index,s.commands):AL(o.segmentGroup,o.index,s.commands);return zD(i,o.segmentGroup,a,t,r)}function Ev(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function op(n){return typeof n=="object"&&n!=null&&n.outlets}function zD(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([l,u])=>{s[l]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`});let o;n===e?o=t:o=TL(n,e,t);let a=bL(IL(o));return new jo(a,s,i)}function TL(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=TL(s,e,t)}),new Dt(n.segments,r)}var Cv=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ev(r[0]))throw new X(4003,!1);let i=r.find(op);if(i&&i!==gL(r))throw new X(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function N7(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Cv(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Cv(t,e,r)}var gd=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function P7(n,e,t){if(n.isAbsolute)return new gd(e,!0,0);if(!t)return new gd(e,!1,NaN);if(t.parent===null)return new gd(t,!0,0);let r=Ev(n.commands[0])?0:1,i=t.segments.length-1+r;return O7(t,i,n.numberOfDoubleDots)}function O7(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new X(4005,!1);i=r.segments.length}return new gd(r,!1,i-s)}function F7(n){return op(n[0])?n[0].outlets:{[Qe]:n}}function AL(n,e,t){if(n??=new Dt([],{}),n.segments.length===0&&n.hasChildren())return rp(n,e,t);let r=L7(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Dt(n.segments.slice(0,r.pathIndex),{});return s.children[Qe]=new Dt(n.segments.slice(r.pathIndex),n.children),rp(s,0,i)}else return r.match&&i.length===0?new Dt(n.segments,{}):r.match&&!n.hasChildren()?XD(n,e,t):r.match?rp(n,0,i):XD(n,e,t)}function rp(n,e,t){if(t.length===0)return new Dt(n.segments,{});{let r=F7(t),i={};if(Object.keys(r).some(s=>s!==Qe)&&n.children[Qe]&&n.numberOfChildren===1&&n.children[Qe].segments.length===0){let s=rp(n.children[Qe],e,t);return new Dt(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=AL(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Dt(n.segments,i)}}function L7(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(op(a))break;let l=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!lL(l,u,o))return s;r+=2}else{if(!lL(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function XD(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(op(s)){let l=V7(s.outlets);return new Dt(r,l)}if(i===0&&Ev(t[0])){let l=n.segments[e];r.push(new iu(l.path,aL(t[0]))),i++;continue}let o=op(s)?s.outlets[Qe]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Ev(a)?(r.push(new iu(o,aL(a))),i+=2):(r.push(new iu(o,{})),i++)}return new Dt(r,{})}function V7(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=XD(new Dt([],{}),0,r))}),e}function aL(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function lL(n,e,t){return n==t.path&&Fs(e,t.parameters)}var ip="imperative",Ln=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ln||{}),Si=class{constructor(e,t){this.id=e,this.url=t}},Ed=class extends Si{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Ln.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ls=class extends Si{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Ln.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Qr=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Qr||{}),bv=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(bv||{}),Bo=class extends Si{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ln.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Oa=class extends Si{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ln.NavigationSkipped}},ap=class extends Si{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Ln.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Iv=class extends Si{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ln.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},JD=class extends Si{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ln.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},eS=class extends Si{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Ln.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},tS=class extends Si{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ln.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nS=class extends Si{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ln.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rS=class{constructor(e){this.route=e,this.type=Ln.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},iS=class{constructor(e){this.route=e,this.type=Ln.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},sS=class{constructor(e){this.snapshot=e,this.type=Ln.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},oS=class{constructor(e){this.snapshot=e,this.type=Ln.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},aS=class{constructor(e){this.snapshot=e,this.type=Ln.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},lS=class{constructor(e){this.snapshot=e,this.type=Ln.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dv=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Ln.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},lp=class{},Cd=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function U7(n,e){return n.providers&&!n._injector&&(n._injector=rv(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Ki(n){return n.outlet||Qe}function B7(n,e){let t=n.filter(r=>Ki(r)===e);return t.push(...n.filter(r=>Ki(r)!==e)),t}function mp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var uS=class{get injector(){return mp(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new gp(this.rootInjector),this.attachRef=null}},gp=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new uS(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(B(qr))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Sv=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=cS(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=cS(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=dS(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return dS(e,this._root).map(t=>t.value)}};function cS(n,e){if(n===e.value)return e;for(let t of e.children){let r=cS(n,t);if(r)return r}return null}function dS(n,e){if(n===e.value)return[e];for(let t of e.children){let r=dS(n,t);if(r.length)return r.unshift(e),r}return[]}var Kr=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function md(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Tv=class extends Sv{constructor(e,t){super(e),this.snapshot=t,wS(this,e)}toString(){return this.snapshot.toString()}};function ML(n){let e=j7(n),t=new zn([new iu("",{})]),r=new zn({}),i=new zn({}),s=new zn({}),o=new zn(""),a=new au(t,r,s,o,i,Qe,n,e.root);return a.snapshot=e.root,new Tv(new Kr(a,[]),e)}function j7(n){let e={},t={},r={},i="",s=new _d([],e,r,i,t,Qe,n,null,{});return new Mv("",new Kr(s,[]))}var au=class{constructor(e,t,r,i,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(he(u=>u[fp]))??De(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(he(e=>vd(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(he(e=>vd(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Av(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&kL(i)&&(r.resolve[fp]=i.title),r}var _d=class{get title(){return this.data?.[fp]}constructor(e,t,r,i,s,o,a,l,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=vd(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=vd(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Mv=class extends Sv{constructor(e,t){super(t),this.url=e,wS(this,t)}toString(){return xL(this._root)}};function wS(n,e){e.value._routerState=n,e.children.forEach(t=>wS(n,t))}function xL(n){let e=n.children.length>0?` { ${n.children.map(xL).join(", ")} } `:"";return`${n.value}${e}`}function WD(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Fs(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Fs(e.params,t.params)||n.paramsSubject.next(t.params),p7(e.url,t.url)||n.urlSubject.next(t.url),Fs(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function hS(n,e){let t=Fs(n.params,e.params)&&y7(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||hS(n.parent,e.parent))}function kL(n){return typeof n.title=="string"||n.title===null}var ES=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Qe,this.activateEvents=new Xe,this.deactivateEvents=new Xe,this.attachEvents=new Xe,this.detachEvents=new Xe,this.parentContexts=J(gp),this.location=J(od),this.changeDetector=J(Na),this.inputBinder=J(Pv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new X(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new X(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new X(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new X(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new fS(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Pt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[xs]})}}return n})(),fS=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===au?this.route:e===gp?this.childContexts:this.parent.get(e,t)}},Pv=new oe(""),uL=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Mf([r.queryParams,r.params,r.data]).pipe(bt(([s,o,a],l)=>(a=V(V(V({},s),o),a),l===0?De(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=FF(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})();function H7(n,e,t){let r=up(n,e._root,t?t._root:void 0);return new Tv(r,e)}function up(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=$7(n,e,t);return new Kr(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>up(n,a)),o}}let r=q7(e.value),i=e.children.map(s=>up(n,s));return new Kr(r,i)}}function $7(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return up(n,r,i);return up(n,r)})}function q7(n){return new au(new zn(n.url),new zn(n.params),new zn(n.queryParams),new zn(n.fragment),new zn(n.data),n.outlet,n.component,n)}var cp=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},RL="ngNavigationCancelingError";function xv(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ou(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=NL(!1,Qr.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function NL(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[RL]=!0,t.cancellationCode=e,t}function z7(n){return PL(n)&&ou(n.url)}function PL(n){return!!n&&n[RL]}var W7=(n,e,t,r)=>he(i=>(new pS(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),pS=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),WD(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=md(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=md(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=md(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=md(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new lS(s.value.snapshot))}),e.children.length&&this.forwardEvent(new oS(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(WD(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),WD(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},kv=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},yd=class{constructor(e,t){this.component=e,this.route=t}};function G7(n,e,t){let r=n._root,i=e?e._root:null;return tp(r,i,t,[r.value])}function Y7(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Id(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!uP(n)?n:e.get(n):r}function tp(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=md(e);return n.children.forEach(o=>{K7(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>sp(a,t.getContext(o),i)),i}function K7(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=Q7(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new kv(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?tp(n,e,a?a.children:null,r,i):tp(n,e,t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new yd(a.outlet.component,o))}else o&&sp(e,a,i),i.canActivateChecks.push(new kv(r)),s.component?tp(n,null,a?a.children:null,r,i):tp(n,null,t,r,i);return i}function Q7(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!su(n.url,e.url);case"pathParamsOrQueryParamsChange":return!su(n.url,e.url)||!Fs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hS(n,e)||!Fs(n.queryParams,e.queryParams);case"paramsChange":default:return!hS(n,e)}}function sp(n,e,t){let r=md(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?sp(o,e.children.getContext(s),t):sp(o,null,t):sp(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new yd(e.outlet.component,i)):t.canDeactivateChecks.push(new yd(null,i)):t.canDeactivateChecks.push(new yd(null,i))}function _p(n){return typeof n=="function"}function Z7(n){return typeof n=="boolean"}function X7(n){return n&&_p(n.canLoad)}function J7(n){return n&&_p(n.canActivate)}function eY(n){return n&&_p(n.canActivateChild)}function tY(n){return n&&_p(n.canDeactivate)}function nY(n){return n&&_p(n.canMatch)}function OL(n){return n instanceof To||n?.name==="EmptyError"}var _v=Symbol("INITIAL_VALUE");function bd(){return bt(n=>Mf(n.map(e=>e.pipe(Ao(1),ql(_v)))).pipe(he(e=>{for(let t of e)if(t!==!0){if(t===_v)return _v;if(t===!1||rY(t))return t}return!0}),Wn(e=>e!==_v),Ao(1)))}function rY(n){return ou(n)||n instanceof cp}function iY(n,e){return _n(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?De(de(V({},t),{guardsResult:!0})):sY(o,r,i,n).pipe(_n(a=>a&&Z7(a)?oY(r,s,n,e):De(a)),he(a=>de(V({},t),{guardsResult:a})))})}function sY(n,e,t,r){return Ze(n).pipe(_n(i=>dY(i.component,i.route,t,e,r)),_i(i=>i!==!0,!0))}function oY(n,e,t,r){return Ze(e).pipe(Hl(i=>Fc(lY(i.route.parent,r),aY(i.route,r),cY(n,i.path,t),uY(n,i.route,t))),_i(i=>i!==!0,!0))}function aY(n,e){return n!==null&&e&&e(new aS(n)),De(!0)}function lY(n,e){return n!==null&&e&&e(new sS(n)),De(!0)}function uY(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return De(!0);let i=r.map(s=>G_(()=>{let o=mp(e)??t,a=Id(s,o),l=J7(a)?a.canActivate(e,n):As(o,()=>a(e,n));return Fa(l).pipe(_i())}));return De(i).pipe(bd())}function cY(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>Y7(o)).filter(o=>o!==null).map(o=>G_(()=>{let a=o.guards.map(l=>{let u=mp(o.node)??t,h=Id(l,u),p=eY(h)?h.canActivateChild(r,n):As(u,()=>h(r,n));return Fa(p).pipe(_i())});return De(a).pipe(bd())}));return De(s).pipe(bd())}function dY(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return De(!0);let o=s.map(a=>{let l=mp(e)??i,u=Id(a,l),h=tY(u)?u.canDeactivate(n,e,t,r):As(l,()=>u(n,e,t,r));return Fa(h).pipe(_i())});return De(o).pipe(bd())}function hY(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return De(!0);let s=i.map(o=>{let a=Id(o,n),l=X7(a)?a.canLoad(e,t):As(n,()=>a(e,t));return Fa(l)});return De(s).pipe(bd(),FL(r))}function FL(n){return rb(yn(e=>{if(typeof e!="boolean")throw xv(n,e)}),he(e=>e===!0))}function fY(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return De(!0);let s=i.map(o=>{let a=Id(o,n),l=nY(a)?a.canMatch(e,t):As(n,()=>a(e,t));return Fa(l)});return De(s).pipe(bd(),FL(r))}var dp=class{constructor(e){this.segmentGroup=e||null}},hp=class extends Error{constructor(e){super(),this.urlTree=e}};function pd(n){return Oc(new dp(n))}function pY(n){return Oc(new X(4e3,!1))}function mY(n){return Oc(NL(!1,Qr.GuardRejected))}var mS=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return De(r);if(i.numberOfChildren>1||!i.children[Qe])return pY(`${e.redirectTo}`);i=i.children[Qe]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:l,fragment:u,routeConfig:h,url:p,outlet:_,params:w,data:E,title:S}=i,x=As(s,()=>a({params:w,data:E,queryParams:l,fragment:u,routeConfig:h,url:p,outlet:_,title:S}));if(x instanceof jo)throw new hp(x);t=x}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new hp(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new jo(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,r,i)}),new Dt(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new X(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},gS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gY(n,e,t,r,i){let s=LL(n,e,t);return s.matched?(r=U7(e,r),fY(r,e,t,i).pipe(he(o=>o===!0?s:V({},gS)))):De(s)}function LL(n,e,t){if(e.path==="**")return _Y(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},gS):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||f7)(t,n,e);if(!i)return V({},gS);let s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=i.consumed.length>0?V(V({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function _Y(n){return{matched:!0,parameters:n.length>0?gL(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function cL(n,e,t,r){return t.length>0&&wY(n,t,r)?{segmentGroup:new Dt(e,vY(r,new Dt(t,n.children))),slicedSegments:[]}:t.length===0&&EY(n,t,r)?{segmentGroup:new Dt(n.segments,yY(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Dt(n.segments,n.children),slicedSegments:t}}function yY(n,e,t,r){let i={};for(let s of t)if(Ov(n,e,s)&&!r[Ki(s)]){let o=new Dt([],{});i[Ki(s)]=o}return V(V({},r),i)}function vY(n,e){let t={};t[Qe]=e;for(let r of n)if(r.path===""&&Ki(r)!==Qe){let i=new Dt([],{});t[Ki(r)]=i}return t}function wY(n,e,t){return t.some(r=>Ov(n,e,r)&&Ki(r)!==Qe)}function EY(n,e,t){return t.some(r=>Ov(n,e,r))}function Ov(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function CY(n,e,t){return e.length===0&&!n.children[t]}var _S=class{};function bY(n,e,t,r,i,s,o="emptyOnly"){return new yS(n,e,t,r,i,o,s).recognize()}var IY=31,yS=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new mS(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new X(4002,`'${e.segmentGroup}'`)}recognize(){let e=cL(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(he(({children:t,rootSnapshot:r})=>{let i=new Kr(r,t),s=new Mv("",i),o=R7(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new _d([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Qe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Qe,t).pipe(he(r=>({children:r,rootSnapshot:t})),wa(r=>{if(r instanceof hp)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof dp?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(he(o=>o instanceof Kr?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Ze(s).pipe(Hl(o=>{let a=r.children[o],l=B7(t,o);return this.processSegmentGroup(e,l,a,o,i)}),ws((o,a)=>(o.push(...a),o)),Ea(null),fb(),_n(o=>{if(o===null)return pd(r);let a=VL(o);return DY(a),De(a)}))}processSegment(e,t,r,i,s,o,a){return Ze(t).pipe(Hl(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,s,o,a).pipe(wa(u=>{if(u instanceof dp)return De(null);throw u}))),_i(l=>!!l),wa(l=>{if(OL(l))return CY(r,i,s)?De(new _S):pd(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,l){return Ki(r)!==o&&(o===Qe||!Ov(i,s,r))?pd(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,l):pd(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:l,parameters:u,consumedSegments:h,positionalParamSegments:p,remainingSegments:_}=LL(t,i,s);if(!l)return pd(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>IY&&(this.allowRedirects=!1));let w=new _d(s,u,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,dL(i),Ki(i),i.component??i._loadedComponent??null,i,hL(i)),E=Av(w,a,this.paramsInheritanceStrategy);w.params=Object.freeze(E.params),w.data=Object.freeze(E.data);let S=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,w,e);return this.applyRedirects.lineralizeSegments(i,S).pipe(_n(x=>this.processSegment(e,r,t,x.concat(_),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=gY(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(bt(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(bt(({routes:u})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:_,remainingSegments:w}=l,E=new _d(_,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,dL(r),Ki(r),r.component??r._loadedComponent??null,r,hL(r)),S=Av(E,o,this.paramsInheritanceStrategy);E.params=Object.freeze(S.params),E.data=Object.freeze(S.data);let{segmentGroup:x,slicedSegments:H}=cL(t,_,w,u);if(H.length===0&&x.hasChildren())return this.processChildren(h,u,x,E).pipe(he(q=>new Kr(E,q)));if(u.length===0&&H.length===0)return De(new Kr(E,[]));let Y=Ki(r)===s;return this.processSegment(h,u,x,H,Y?Qe:s,!0,E).pipe(he(q=>new Kr(E,q instanceof Kr?[q]:[])))}))):pd(t)))}getChildConfig(e,t,r){return t.children?De({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?De({routes:t._loadedRoutes,injector:t._loadedInjector}):hY(e,t,r,this.urlSerializer).pipe(_n(i=>i?this.configLoader.loadChildren(e,t).pipe(yn(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):mY(t))):De({routes:[],injector:e})}};function DY(n){n.sort((e,t)=>e.value.outlet===Qe?-1:t.value.outlet===Qe?1:e.value.outlet.localeCompare(t.value.outlet))}function SY(n){let e=n.value.routeConfig;return e&&e.path===""}function VL(n){let e=[],t=new Set;for(let r of n){if(!SY(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=VL(r.children);e.push(new Kr(r.value,i))}return e.filter(r=>!t.has(r))}function dL(n){return n.data||{}}function hL(n){return n.resolve||{}}function TY(n,e,t,r,i,s){return _n(o=>bY(n,e,t,r,o.extractedUrl,i,s).pipe(he(({state:a,tree:l})=>de(V({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function AY(n,e){return _n(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return De(t);let s=new Set(i.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let u of UL(l))o.add(u);let a=0;return Ze(o).pipe(Hl(l=>s.has(l)?MY(l,r,n,e):(l.data=Av(l,l.parent,n).resolve,De(void 0))),yn(()=>a++),Vc(1),_n(l=>a===o.size?De(t):vr))})}function UL(n){let e=n.children.map(t=>UL(t)).flat();return[n,...e]}function MY(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!kL(i)&&(s[fp]=i.title),xY(s,n,e,r).pipe(he(o=>(n._resolvedData=o,n.data=Av(n,n.parent,t).resolve,null)))}function xY(n,e,t,r){let i=KD(n);if(i.length===0)return De({});let s={};return Ze(i).pipe(_n(o=>kY(n[o],e,t,r).pipe(_i(),yn(a=>{if(a instanceof cp)throw xv(new wd,a);s[o]=a}))),Vc(1),hb(s),wa(o=>OL(o)?vr:Oc(o)))}function kY(n,e,t,r){let i=mp(e)??r,s=Id(n,i),o=s.resolve?s.resolve(e,t):As(i,()=>s(e,t));return Fa(o)}function GD(n){return bt(e=>{let t=n(e);return t?Ze(t).pipe(he(()=>e)):De(e)})}var BL=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Qe);return r}getResolvedTitleForRoute(t){return t.data[fp]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:()=>J(RY),providedIn:"root"})}}return n})(),RY=(()=>{class n extends BL{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(B(iL))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),yp=new oe("",{providedIn:"root",factory:()=>({})}),NY=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=pt({type:n,selectors:[["ng-component"]],standalone:!0,features:[Yf],decls:1,vars:0,template:function(r,i){r&1&&ce(0,"router-outlet")},dependencies:[ES],encapsulation:2})}}return n})();function CS(n){let e=n.children&&n.children.map(CS),t=e?de(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Qe&&(t.component=NY),t}var Rv=new oe(""),bS=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=J(cv)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return De(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Fa(t.loadComponent()).pipe(he(jL),yn(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),$l(()=>{this.componentLoaders.delete(t)})),i=new xc(r,()=>new _t).pipe(Mc());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return De({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=PY(r,this.compiler,t,this.onLoadEndListener).pipe($l(()=>{this.childrenLoaders.delete(r)})),o=new xc(s,()=>new _t).pipe(Mc());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function PY(n,e,t,r){return Fa(n.loadChildren()).pipe(he(jL),_n(i=>i instanceof Bf||Array.isArray(i)?De(i):Ze(e.compileModuleAsync(i))),he(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(Rv,[],{optional:!0,self:!0}).flat()),{routes:o.map(CS),injector:s}}))}function OY(n){return n&&typeof n=="object"&&"default"in n}function jL(n){return OY(n)?n.default:n}var IS=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:()=>J(FY),providedIn:"root"})}}return n})(),FY=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),HL=new oe(""),$L=new oe("");function LY(n,e,t){let r=n.get($L),i=n.get(wn);return n.get($e).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let s,o=new Promise(u=>{s=u}),a=i.startViewTransition(()=>(s(),VY(n))),{onViewTransitionCreated:l}=r;return l&&As(n,()=>l({transition:a,from:e,to:t})),o})}function VY(n){return new Promise(e=>{pD({read:()=>setTimeout(e)},{injector:n})})}var UY=new oe(""),DS=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new _t,this.transitionAbortSubject=new _t,this.configLoader=J(bS),this.environmentInjector=J(qr),this.urlSerializer=J(pp),this.rootContexts=J(gp),this.location=J(ud),this.inputBindingEnabled=J(Pv,{optional:!0})!==null,this.titleStrategy=J(BL),this.options=J(yp,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=J(IS),this.createViewTransition=J(HL,{optional:!0}),this.navigationErrorHandler=J(UY,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>De(void 0),this.rootComponentType=null;let t=i=>this.events.next(new rS(i)),r=i=>this.events.next(new iS(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(de(V(V({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new zn({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ip,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Wn(s=>s.id!==0),he(s=>de(V({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),bt(s=>{let o=!1,a=!1;return De(s).pipe(bt(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Qr.SupersededByNewNavigation),vr;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?de(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=l.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!u&&h!=="reload"){let p="";return this.events.next(new Oa(l.id,this.urlSerializer.serialize(l.rawUrl),p,bv.IgnoredSameUrlNavigation)),l.resolve(!1),vr}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return De(l).pipe(bt(p=>{let _=this.transitions?.getValue();return this.events.next(new Ed(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),_!==this.transitions?.getValue()?vr:Promise.resolve(p)}),TY(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),yn(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=de(V({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let _=new Iv(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(_)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:p,extractedUrl:_,source:w,restoredState:E,extras:S}=l,x=new Ed(p,this.urlSerializer.serialize(_),w,E);this.events.next(x);let H=ML(this.rootComponentType).snapshot;return this.currentTransition=s=de(V({},l),{targetSnapshot:H,urlAfterRedirects:_,extras:de(V({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=_,De(s)}else{let p="";return this.events.next(new Oa(l.id,this.urlSerializer.serialize(l.extractedUrl),p,bv.IgnoredByUrlHandlingStrategy)),l.resolve(!1),vr}}),yn(l=>{let u=new JD(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),he(l=>(this.currentTransition=s=de(V({},l),{guards:G7(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),iY(this.environmentInjector,l=>this.events.next(l)),yn(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw xv(this.urlSerializer,l.guardsResult);let u=new eS(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),Wn(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Qr.GuardRejected),!1)),GD(l=>{if(l.guards.canActivateChecks.length)return De(l).pipe(yn(u=>{let h=new tS(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),bt(u=>{let h=!1;return De(u).pipe(AY(this.paramsInheritanceStrategy,this.environmentInjector),yn({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(u,"",Qr.NoDataFromResolver)}}))}),yn(u=>{let h=new nS(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}))}),GD(l=>{let u=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(yn(_=>{h.component=_}),he(()=>{})));for(let _ of h.children)p.push(...u(_));return p};return Mf(u(l.targetSnapshot.root)).pipe(Ea(null),Ao(1))}),GD(()=>this.afterPreactivation()),bt(()=>{let{currentSnapshot:l,targetSnapshot:u}=s,h=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return h?Ze(h).pipe(he(()=>s)):De(s)}),he(l=>{let u=H7(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=de(V({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),yn(()=>{this.events.next(new lp)}),W7(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Ao(1),yn({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ls(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),gb(this.transitionAbortSubject.pipe(yn(l=>{throw l}))),$l(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Qr.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),wa(l=>{if(a=!0,PL(l))this.events.next(new Bo(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),z7(l)?this.events.next(new Cd(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let u=new ap(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let h=As(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(h instanceof cp){let{message:p,cancellationCode:_}=xv(this.urlSerializer,h);this.events.next(new Bo(s.id,this.urlSerializer.serialize(s.extractedUrl),p,_)),this.events.next(new Cd(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(u);let p=t.errorHandler(l);s.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return vr}))}))}cancelNavigationTransition(t,r,i){let s=new Bo(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function BY(n){return n!==ip}var jY=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:()=>J(HY),providedIn:"root"})}}return n})(),vS=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},HY=(()=>{class n extends vS{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ks(n)))(i||n)}})()}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),qL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:()=>J($Y),providedIn:"root"})}}return n})(),$Y=(()=>{class n extends qL{constructor(){super(...arguments),this.location=J(ud),this.urlSerializer=J(pp),this.options=J(yp,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=J(IS),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new jo,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=ML(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Ed)this.stateMemento=this.createStateMemento();else if(t instanceof Oa)this.rawUrlTree=r.initialUrl;else if(t instanceof Iv){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof lp?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Bo&&(t.code===Qr.GuardRejected||t.code===Qr.NoDataFromResolver)?this.restoreHistory(r):t instanceof ap?this.restoreHistory(r,!0):t instanceof Ls&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof jo?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=V(V({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=V(V({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ks(n)))(i||n)}})()}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),np=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(np||{});function zL(n,e){n.events.pipe(Wn(t=>t instanceof Ls||t instanceof Bo||t instanceof ap||t instanceof Oa),he(t=>t instanceof Ls||t instanceof Oa?np.COMPLETE:(t instanceof Bo?t.code===Qr.Redirect||t.code===Qr.SupersededByNewNavigation:!1)?np.REDIRECTING:np.FAILED),Wn(t=>t!==np.REDIRECTING),Ao(1)).subscribe(()=>{e()})}function qY(n){throw n}var zY={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},WY={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},En=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=J(ov),this.stateManager=J(qL),this.options=J(yp,{optional:!0})||{},this.pendingTasks=J(sd),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=J(DS),this.urlSerializer=J(pp),this.location=J(ud),this.urlHandlingStrategy=J(IS),this._events=new _t,this.errorHandler=this.options.errorHandler||qY,this.navigated=!1,this.routeReuseStrategy=J(jY),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=J(Rv,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!J(Pv,{optional:!0}),this.eventsSubscription=new rn,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Bo&&r.code!==Qr.Redirect&&r.code!==Qr.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ls)this.navigated=!0;else if(r instanceof Cd){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||BY(i.source)},o);this.scheduleNavigation(a,ip,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}YY(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ip,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let l=V({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(CS),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=V(V({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let _=i?i.snapshot:this.routerState.snapshot.root;p=DL(_)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return SL(p,t,h,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ou(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,ip,null,r)}navigate(t,r={skipLocationChange:!1}){return GY(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},zY):r===!1?i=V({},WY):i=r,ou(t))return sL(this.currentUrlTree,t,i);let s=this.parseUrl(t);return sL(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,u;o?(a=o.resolve,l=o.reject,u=o.promise):u=new Promise((p,_)=>{a=p,l=_});let h=this.pendingTasks.add();return zL(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function GY(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new X(4008,!1)}function YY(n){return!(n instanceof lp)&&!(n instanceof Cd)}var WL=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.onChanges=new _t,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof Ls&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ou(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:LO(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:ou(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(te(En),te(au),HI("tabindex"),te(bi),te(Fr),te(Uo))}}static{this.\u0275dir=Pt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&me("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&Ns("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Pa],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Pa],replaceUrl:[2,"replaceUrl","replaceUrl",Pa],routerLink:"routerLink"},standalone:!0,features:[fD,xs]})}}return n})();var Nv=class{};var KY=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Wn(t=>t instanceof Ls),Hl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=rv(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Ze(i).pipe(va())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=De(null);let s=i.pipe(_n(o=>o===null?De(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return Ze([s,o]).pipe(va())}else return s})}static{this.\u0275fac=function(r){return new(r||n)(B(En),B(cv),B(qr),B(Nv),B(bS))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),GL=new oe(""),QY=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ed?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ls?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Oa&&t.code===bv.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Dv&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Dv(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){KO()}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})();function ZY(n){return n.routerState.root}function vp(n,e){return{\u0275kind:n,\u0275providers:e}}function XY(){let n=J(Gn);return e=>{let t=n.get(Di);if(e!==t.components[0])return;let r=n.get(En),i=n.get(YL);n.get(SS)===1&&r.initialNavigation(),n.get(KL,null,et.Optional)?.setUpPreloading(),n.get(GL,null,et.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var YL=new oe("",{factory:()=>new _t}),SS=new oe("",{providedIn:"root",factory:()=>1});function JY(){return vp(2,[{provide:SS,useValue:0},{provide:uv,multi:!0,deps:[Gn],useFactory:e=>{let t=e.get(zF,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(En),s=e.get(YL);zL(i,()=>{r(!0)}),e.get(DS).afterPreactivation=()=>(r(!0),s.closed?De(void 0):s),i.initialNavigation()}))}}])}function eK(){return vp(3,[{provide:uv,multi:!0,useFactory:()=>{let e=J(En);return()=>{e.setUpLocationChangeListener()}}},{provide:SS,useValue:2}])}var KL=new oe("");function tK(n){return vp(0,[{provide:KL,useExisting:KY},{provide:Nv,useExisting:n}])}function nK(){return vp(8,[uL,{provide:Pv,useExisting:uL}])}function rK(n){let e=[{provide:HL,useValue:LY},{provide:$L,useValue:V({skipNextTransition:!!n?.skipInitialTransition},n)}];return vp(9,e)}var fL=new oe("ROUTER_FORROOT_GUARD"),iK=[ud,{provide:pp,useClass:wd},En,gp,{provide:au,useFactory:ZY,deps:[En]},bS,[]],wp=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[iK,[],{provide:Rv,multi:!0,useValue:t},{provide:fL,useFactory:lK,deps:[[En,new rd,new MI]]},{provide:yp,useValue:r||{}},r?.useHash?oK():aK(),sK(),r?.preloadingStrategy?tK(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?uK(r):[],r?.bindToComponentInputs?nK().\u0275providers:[],r?.enableViewTransitions?rK().\u0275providers:[],cK()]}}static forChild(t){return{ngModule:n,providers:[{provide:Rv,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(B(fL,8))}}static{this.\u0275mod=vt({type:n})}static{this.\u0275inj=yt({})}}return n})();function sK(){return{provide:GL,useFactory:()=>{let n=J(QF),e=J($e),t=J(yp),r=J(DS),i=J(pp);return t.scrollOffset&&n.setOffset(t.scrollOffset),new QY(i,r,n,e,t)}}}function oK(){return{provide:Uo,useClass:GF}}function aK(){return{provide:Uo,useClass:kD}}function lK(n){return"guarded"}function uK(n){return[n.initialNavigation==="disabled"?eK().\u0275providers:[],n.initialNavigation==="enabledBlocking"?JY().\u0275providers:[]]}var pL=new oe("");function cK(){return[{provide:pL,useFactory:XY},{provide:yD,multi:!0,useExisting:pL}]}var dK="firebase",hK="10.14.0";Nr(dK,hK,"app");var Ho=new No("ANGULARFIRE2_VERSION");var fK=(n,e)=>{let t=e?[e]:O1(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Qi=class{constructor(){return fK(pK)}},pK="app-check";function TS(){}var Fv=class{zone;delegate;constructor(e,t=ab){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},AS=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",TS,{},TS,TS)),t.pipe(yn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Va=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Fv(Zone.current)),this.insideAngular=t.run(()=>new Fv(Zone.current,So)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(B($e))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function QL(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function MS(n){return n.pipe(Hr(QL().outsideAngular))}function Yt(n){return mK(QL())(n)}function mK(n){return function(t){return t=t.lift(new AS(n.ngZone)),t.pipe(Hi(n.outsideAngular),Hr(n.insideAngular))}}var gK=new Map,_K={activated:!1,tokenObservers:[]},yK={initialized:!1,enabled:!1};function Zi(n){return gK.get(n)||Object.assign({},_K)}function tV(){return yK}var vK="https://content-firebaseappcheck.googleapis.com/v1";var wK="exchangeDebugToken",ZL={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},vpe=24*60*60*1e3;var kS=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new Fn,this.pending.promise.catch(t=>{}),yield EK(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Fn,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function EK(n){return new Promise(e=>{setTimeout(e,n)})}var CK={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Ua=new M1("appCheck","AppCheck",CK);function nV(n){if(!Zi(n).activated)throw Ua.create("use-before-activation",{appName:n.name})}function rV(r,i){return N(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let w=yield o.getHeartbeatsHeader();w&&(s["X-Firebase-Client"]=w)}let a={method:"POST",body:JSON.stringify(e),headers:s},l;try{l=yield fetch(n,a)}catch(w){throw Ua.create("fetch-network-error",{originalErrorMessage:w?.message})}if(l.status!==200)throw Ua.create("fetch-status-error",{httpStatus:l.status});let u;try{u=yield l.json()}catch(w){throw Ua.create("fetch-parse-error",{originalErrorMessage:w?.message})}let h=u.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Ua.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let p=Number(h[1])*1e3,_=Date.now();return{token:u.token,expireTimeMillis:_+p,issuedAtTimeMillis:_}})}function iV(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${vK}/projects/${t}/apps/${r}:${wK}?key=${i}`,body:{debug_token:e}}}var bK="firebase-app-check-database",IK=1,RS="firebase-app-check-store";var Vv=null;function DK(){return Vv||(Vv=new Promise((n,e)=>{try{let t=indexedDB.open(bK,IK);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ua.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(RS,{keyPath:"compositeKey"})}}}catch(t){e(Ua.create("storage-open",{originalErrorMessage:t?.message}))}}),Vv)}function SK(n,e){return TK(AK(n),e)}function TK(n,e){return N(this,null,function*(){let r=(yield DK()).transaction(RS,"readwrite"),s=r.objectStore(RS).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var u;a(Ua.create("storage-set",{originalErrorMessage:(u=l.target.error)===null||u===void 0?void 0:u.message}))}})})}function AK(n){return`${n.options.appId}-${n.name}`}var NS=new ya("@firebase/app-check");function xS(n,e){return p_()?SK(n,e).catch(t=>{NS.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function sV(){return tV().enabled}function oV(){return N(this,null,function*(){let n=tV();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var MK={error:"UNKNOWN_ERROR"};function xK(n){return f_.encodeString(JSON.stringify(n),!1)}function PS(n,e=!1){return N(this,null,function*(){let t=n.app;nV(t);let r=Zi(t),i=r.token,s;if(i&&!Ep(i)&&(r.token=void 0,i=void 0),!i){let l=yield r.cachedTokenPromise;l&&(Ep(l)?i=l:yield xS(t,void 0))}if(!e&&i&&Ep(i))return{token:i.token};let o=!1;if(sV()){r.exchangeTokenPromise||(r.exchangeTokenPromise=rV(iV(t,yield oV()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);let l=yield r.exchangeTokenPromise;return yield xS(t,l),r.token=l,{token:l.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield Zi(t).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?NS.warn(l.message):NS.error(l),s=l}let a;return i?s?Ep(i)?a={token:i.token,internalError:s}:a=JL(s):(a={token:i.token},r.token=i,yield xS(t,i)):a=JL(s),o&&PK(t,a),a})}function kK(n){return N(this,null,function*(){let e=n.app;nV(e);let{provider:t}=Zi(e);if(sV()){let r=yield oV(),{token:i}=yield rV(iV(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function RK(n,e,t,r){let{app:i}=n,s=Zi(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Ep(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),XL(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>XL(n))}function aV(n,e){let t=Zi(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function XL(n){let{app:e}=n,t=Zi(e),r=t.tokenRefresher;r||(r=NK(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function NK(n){let{app:e}=n;return new kS(()=>N(this,null,function*(){let t=Zi(e),r;if(t.token?r=yield PS(n,!0):r=yield PS(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Zi(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},ZL.RETRIAL_MIN_WAIT,ZL.RETRIAL_MAX_WAIT)}function PK(n,e){let t=Zi(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ep(n){return n.expireTimeMillis-Date.now()>0}function JL(n){return{token:xK(MK),error:n}}var OS=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Zi(this.app);for(let t of e)aV(this.app,t.next);return Promise.resolve()}};function OK(n,e){return new OS(n,e)}function FK(n){return{getToken:e=>PS(n,e),getLimitedUseToken:()=>kK(n),addTokenListener:e=>RK(n,"INTERNAL",e),removeTokenListener:e=>aV(n.app,e)}}var LK="@firebase/app-check",VK="0.8.8";var UK="app-check",eV="app-check-internal";function BK(){bo(new $n(UK,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return OK(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(eV).initialize()})),bo(new $n(eV,n=>{let e=n.getProvider("app-check").getImmediate();return FK(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Nr(LK,VK)}BK();var jK=["localhost","0.0.0.0","127.0.0.1"],kpe=typeof window<"u"&&jK.includes(window.location.hostname);var HK="firebase",$K="10.14.0";dn.registerVersion(HK,$K,"app-compat");var qK=["ngOnDestroy"],uV=(n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(qK.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(a=>{let l=a?.[s];return typeof l=="function"?l.bind(a):l?.then?l.then(u=>t.run(()=>u)):t.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,u)=>o.then(h=>{let p=h?.(...u);return r?.spy?.apply&&r.spy.apply(s,u,p),p})})})});var Bv=class{constructor(e){return e}},Vs=new oe("angularfire2.app.options"),Us=new oe("angularfire2.app.name");function $o(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let o=dn.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>dn.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){let a=!!module.hot;zK("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Bv(o)}var zK=(n,...e)=>{CD()&&typeof console<"u"&&console[n](...e)},WK={provide:Bv,useFactory:$o,deps:[Vs,$e,[new rd,Us]]},VS=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Vs,useValue:t},{provide:Us,useValue:r}]}}constructor(t){dn.registerVersion("angularfire",Ho.full,"core"),dn.registerVersion("angularfire",Ho.full,"app-compat"),dn.registerVersion("angular",SF.full,t.toString())}static \u0275fac=function(r){return new(r||n)(B(vn))};static \u0275mod=vt({type:n});static \u0275inj=yt({providers:[WK]})}return n})();function Ba(n,e,t,r,i){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return GK(i,o)||(lV("error",`${e} was already initialized on the ${t} Firebase App with different settings.${YK?" You may need to reload as Firebase is not HMR aware.":""}`),lV("warn",{is:i,was:o})),s;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function GK(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var YK=typeof module<"u"&&!!module.hot,lV=(n,...e)=>{CD()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Cp=new oe("angularfire2.auth.use-emulator"),bp=new oe("angularfire2.auth.settings"),Ip=new oe("angularfire2.auth.tenant-id"),Dp=new oe("angularfire2.auth.langugage-code"),Sp=new oe("angularfire2.auth.use-device-language"),Tp=new oe("angularfire.auth.persistence"),Ap=(n,e,t,r,i,s,o,a)=>Ba(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),r&&(l.tenantId=r),l.languageCode=i,s&&l.useDeviceLanguage(),o)for(let[u,h]of Object.entries(o))l.settings[u]=h;return a&&l.setPersistence(a),l},[t,r,i,s,o,a]),Zr=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,l,u,h,p,_,w){let E=new _t,S=De(void 0).pipe(Hr(o.outsideAngular),bt(()=>s.runOutsideAngular(()=>import("./chunk-W4CPLMQU.js"))),he(()=>$o(t,s,r)),he(x=>Ap(x,s,a,u,h,p,l,_)),K_({bufferSize:1,refCount:!1}));if(ru(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=De(null);else{S.pipe(_i()).subscribe();let x=S.pipe(bt(q=>q.getRedirectResult().then(Q=>Q,()=>null)),Yt,K_({bufferSize:1,refCount:!1})),H=S.pipe(bt(q=>new He(Q=>({unsubscribe:s.runOutsideAngular(()=>q.onAuthStateChanged(pe=>Q.next(pe),pe=>Q.error(pe),()=>Q.complete()))})))),Y=S.pipe(bt(q=>new He(Q=>({unsubscribe:s.runOutsideAngular(()=>q.onIdTokenChanged(pe=>Q.next(pe),pe=>Q.error(pe),()=>Q.complete()))}))));this.authState=x.pipe(Q_(H),Hi(o.outsideAngular),Hr(o.insideAngular)),this.user=x.pipe(Q_(Y),Hi(o.outsideAngular),Hr(o.insideAngular)),this.idToken=this.user.pipe(bt(q=>q?Ze(q.getIdToken()):De(null))),this.idTokenResult=this.user.pipe(bt(q=>q?Ze(q.getIdTokenResult()):De(null))),this.credential=Lc(x,E,this.authState.pipe(Wn(q=>!q))).pipe(he(q=>q?.user?q:null),Hi(o.outsideAngular),Hr(o.insideAngular))}return uV(this,S,s,{spy:{apply:(x,H,Y)=>{(x.startsWith("signIn")||x.startsWith("createUser"))&&Y.then(q=>E.next(q))}}})}static \u0275fac=function(r){return new(r||n)(B(Vs),B(Us,8),B(vn),B($e),B(Va),B(Cp,8),B(bp,8),B(Ip,8),B(Dp,8),B(Sp,8),B(Tp,8),B(Qi,8))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),cV=(()=>{class n{constructor(){dn.registerVersion("angularfire",Ho.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=vt({type:n});static \u0275inj=yt({providers:[Zr]})}return n})();var dV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hV={};var ja,US;(function(){var n;function e(k,I){function A(){}A.prototype=I.prototype,k.D=I.prototype,k.prototype=new A,k.prototype.constructor=k,k.C=function(P,O,L){for(var M=Array(arguments.length-2),tr=2;tr<arguments.length;tr++)M[tr-2]=arguments[tr];return I.prototype[O].apply(P,M)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,I,A){A||(A=0);var P=Array(16);if(typeof I=="string")for(var O=0;16>O;++O)P[O]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(O=0;16>O;++O)P[O]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=k.g[0],A=k.g[1],O=k.g[2];var L=k.g[3],M=I+(L^A&(O^L))+P[0]+3614090360&4294967295;I=A+(M<<7&4294967295|M>>>25),M=L+(O^I&(A^O))+P[1]+3905402710&4294967295,L=I+(M<<12&4294967295|M>>>20),M=O+(A^L&(I^A))+P[2]+606105819&4294967295,O=L+(M<<17&4294967295|M>>>15),M=A+(I^O&(L^I))+P[3]+3250441966&4294967295,A=O+(M<<22&4294967295|M>>>10),M=I+(L^A&(O^L))+P[4]+4118548399&4294967295,I=A+(M<<7&4294967295|M>>>25),M=L+(O^I&(A^O))+P[5]+1200080426&4294967295,L=I+(M<<12&4294967295|M>>>20),M=O+(A^L&(I^A))+P[6]+2821735955&4294967295,O=L+(M<<17&4294967295|M>>>15),M=A+(I^O&(L^I))+P[7]+4249261313&4294967295,A=O+(M<<22&4294967295|M>>>10),M=I+(L^A&(O^L))+P[8]+1770035416&4294967295,I=A+(M<<7&4294967295|M>>>25),M=L+(O^I&(A^O))+P[9]+2336552879&4294967295,L=I+(M<<12&4294967295|M>>>20),M=O+(A^L&(I^A))+P[10]+4294925233&4294967295,O=L+(M<<17&4294967295|M>>>15),M=A+(I^O&(L^I))+P[11]+2304563134&4294967295,A=O+(M<<22&4294967295|M>>>10),M=I+(L^A&(O^L))+P[12]+1804603682&4294967295,I=A+(M<<7&4294967295|M>>>25),M=L+(O^I&(A^O))+P[13]+4254626195&4294967295,L=I+(M<<12&4294967295|M>>>20),M=O+(A^L&(I^A))+P[14]+2792965006&4294967295,O=L+(M<<17&4294967295|M>>>15),M=A+(I^O&(L^I))+P[15]+1236535329&4294967295,A=O+(M<<22&4294967295|M>>>10),M=I+(O^L&(A^O))+P[1]+4129170786&4294967295,I=A+(M<<5&4294967295|M>>>27),M=L+(A^O&(I^A))+P[6]+3225465664&4294967295,L=I+(M<<9&4294967295|M>>>23),M=O+(I^A&(L^I))+P[11]+643717713&4294967295,O=L+(M<<14&4294967295|M>>>18),M=A+(L^I&(O^L))+P[0]+3921069994&4294967295,A=O+(M<<20&4294967295|M>>>12),M=I+(O^L&(A^O))+P[5]+3593408605&4294967295,I=A+(M<<5&4294967295|M>>>27),M=L+(A^O&(I^A))+P[10]+38016083&4294967295,L=I+(M<<9&4294967295|M>>>23),M=O+(I^A&(L^I))+P[15]+3634488961&4294967295,O=L+(M<<14&4294967295|M>>>18),M=A+(L^I&(O^L))+P[4]+3889429448&4294967295,A=O+(M<<20&4294967295|M>>>12),M=I+(O^L&(A^O))+P[9]+568446438&4294967295,I=A+(M<<5&4294967295|M>>>27),M=L+(A^O&(I^A))+P[14]+3275163606&4294967295,L=I+(M<<9&4294967295|M>>>23),M=O+(I^A&(L^I))+P[3]+4107603335&4294967295,O=L+(M<<14&4294967295|M>>>18),M=A+(L^I&(O^L))+P[8]+1163531501&4294967295,A=O+(M<<20&4294967295|M>>>12),M=I+(O^L&(A^O))+P[13]+2850285829&4294967295,I=A+(M<<5&4294967295|M>>>27),M=L+(A^O&(I^A))+P[2]+4243563512&4294967295,L=I+(M<<9&4294967295|M>>>23),M=O+(I^A&(L^I))+P[7]+1735328473&4294967295,O=L+(M<<14&4294967295|M>>>18),M=A+(L^I&(O^L))+P[12]+2368359562&4294967295,A=O+(M<<20&4294967295|M>>>12),M=I+(A^O^L)+P[5]+4294588738&4294967295,I=A+(M<<4&4294967295|M>>>28),M=L+(I^A^O)+P[8]+2272392833&4294967295,L=I+(M<<11&4294967295|M>>>21),M=O+(L^I^A)+P[11]+1839030562&4294967295,O=L+(M<<16&4294967295|M>>>16),M=A+(O^L^I)+P[14]+4259657740&4294967295,A=O+(M<<23&4294967295|M>>>9),M=I+(A^O^L)+P[1]+2763975236&4294967295,I=A+(M<<4&4294967295|M>>>28),M=L+(I^A^O)+P[4]+1272893353&4294967295,L=I+(M<<11&4294967295|M>>>21),M=O+(L^I^A)+P[7]+4139469664&4294967295,O=L+(M<<16&4294967295|M>>>16),M=A+(O^L^I)+P[10]+3200236656&4294967295,A=O+(M<<23&4294967295|M>>>9),M=I+(A^O^L)+P[13]+681279174&4294967295,I=A+(M<<4&4294967295|M>>>28),M=L+(I^A^O)+P[0]+3936430074&4294967295,L=I+(M<<11&4294967295|M>>>21),M=O+(L^I^A)+P[3]+3572445317&4294967295,O=L+(M<<16&4294967295|M>>>16),M=A+(O^L^I)+P[6]+76029189&4294967295,A=O+(M<<23&4294967295|M>>>9),M=I+(A^O^L)+P[9]+3654602809&4294967295,I=A+(M<<4&4294967295|M>>>28),M=L+(I^A^O)+P[12]+3873151461&4294967295,L=I+(M<<11&4294967295|M>>>21),M=O+(L^I^A)+P[15]+530742520&4294967295,O=L+(M<<16&4294967295|M>>>16),M=A+(O^L^I)+P[2]+3299628645&4294967295,A=O+(M<<23&4294967295|M>>>9),M=I+(O^(A|~L))+P[0]+4096336452&4294967295,I=A+(M<<6&4294967295|M>>>26),M=L+(A^(I|~O))+P[7]+1126891415&4294967295,L=I+(M<<10&4294967295|M>>>22),M=O+(I^(L|~A))+P[14]+2878612391&4294967295,O=L+(M<<15&4294967295|M>>>17),M=A+(L^(O|~I))+P[5]+4237533241&4294967295,A=O+(M<<21&4294967295|M>>>11),M=I+(O^(A|~L))+P[12]+1700485571&4294967295,I=A+(M<<6&4294967295|M>>>26),M=L+(A^(I|~O))+P[3]+2399980690&4294967295,L=I+(M<<10&4294967295|M>>>22),M=O+(I^(L|~A))+P[10]+4293915773&4294967295,O=L+(M<<15&4294967295|M>>>17),M=A+(L^(O|~I))+P[1]+2240044497&4294967295,A=O+(M<<21&4294967295|M>>>11),M=I+(O^(A|~L))+P[8]+1873313359&4294967295,I=A+(M<<6&4294967295|M>>>26),M=L+(A^(I|~O))+P[15]+4264355552&4294967295,L=I+(M<<10&4294967295|M>>>22),M=O+(I^(L|~A))+P[6]+2734768916&4294967295,O=L+(M<<15&4294967295|M>>>17),M=A+(L^(O|~I))+P[13]+1309151649&4294967295,A=O+(M<<21&4294967295|M>>>11),M=I+(O^(A|~L))+P[4]+4149444226&4294967295,I=A+(M<<6&4294967295|M>>>26),M=L+(A^(I|~O))+P[11]+3174756917&4294967295,L=I+(M<<10&4294967295|M>>>22),M=O+(I^(L|~A))+P[2]+718787259&4294967295,O=L+(M<<15&4294967295|M>>>17),M=A+(L^(O|~I))+P[9]+3951481745&4294967295,k.g[0]=k.g[0]+I&4294967295,k.g[1]=k.g[1]+(O+(M<<21&4294967295|M>>>11))&4294967295,k.g[2]=k.g[2]+O&4294967295,k.g[3]=k.g[3]+L&4294967295}r.prototype.u=function(k,I){I===void 0&&(I=k.length);for(var A=I-this.blockSize,P=this.B,O=this.h,L=0;L<I;){if(O==0)for(;L<=A;)i(this,k,L),L+=this.blockSize;if(typeof k=="string"){for(;L<I;)if(P[O++]=k.charCodeAt(L++),O==this.blockSize){i(this,P),O=0;break}}else for(;L<I;)if(P[O++]=k[L++],O==this.blockSize){i(this,P),O=0;break}}this.h=O,this.o+=I},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var I=1;I<k.length-8;++I)k[I]=0;var A=8*this.o;for(I=k.length-8;I<k.length;++I)k[I]=A&255,A/=256;for(this.u(k),k=Array(16),I=A=0;4>I;++I)for(var P=0;32>P;P+=8)k[A++]=this.g[I]>>>P&255;return k};function s(k,I){var A=a;return Object.prototype.hasOwnProperty.call(A,k)?A[k]:A[k]=I(k)}function o(k,I){this.h=I;for(var A=[],P=!0,O=k.length-1;0<=O;O--){var L=k[O]|0;P&&L==I||(A[O]=L,P=!1)}this.g=A}var a={};function l(k){return-128<=k&&128>k?s(k,function(I){return new o([I|0],0>I?-1:0)}):new o([k|0],0>k?-1:0)}function u(k){if(isNaN(k)||!isFinite(k))return p;if(0>k)return x(u(-k));for(var I=[],A=1,P=0;k>=A;P++)I[P]=k/A|0,A*=4294967296;return new o(I,0)}function h(k,I){if(k.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k.charAt(0)=="-")return x(h(k.substring(1),I));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=u(Math.pow(I,8)),P=p,O=0;O<k.length;O+=8){var L=Math.min(8,k.length-O),M=parseInt(k.substring(O,O+L),I);8>L?(L=u(Math.pow(I,L)),P=P.j(L).add(u(M))):(P=P.j(A),P=P.add(u(M)))}return P}var p=l(0),_=l(1),w=l(16777216);n=o.prototype,n.m=function(){if(S(this))return-x(this).m();for(var k=0,I=1,A=0;A<this.g.length;A++){var P=this.i(A);k+=(0<=P?P:4294967296+P)*I,I*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(E(this))return"0";if(S(this))return"-"+x(this).toString(k);for(var I=u(Math.pow(k,6)),A=this,P="";;){var O=Q(A,I).g;A=H(A,O.j(I));var L=((0<A.g.length?A.g[0]:A.h)>>>0).toString(k);if(A=O,E(A))return L+P;for(;6>L.length;)L="0"+L;P=L+P}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function E(k){if(k.h!=0)return!1;for(var I=0;I<k.g.length;I++)if(k.g[I]!=0)return!1;return!0}function S(k){return k.h==-1}n.l=function(k){return k=H(this,k),S(k)?-1:E(k)?0:1};function x(k){for(var I=k.g.length,A=[],P=0;P<I;P++)A[P]=~k.g[P];return new o(A,~k.h).add(_)}n.abs=function(){return S(this)?x(this):this},n.add=function(k){for(var I=Math.max(this.g.length,k.g.length),A=[],P=0,O=0;O<=I;O++){var L=P+(this.i(O)&65535)+(k.i(O)&65535),M=(L>>>16)+(this.i(O)>>>16)+(k.i(O)>>>16);P=M>>>16,L&=65535,M&=65535,A[O]=M<<16|L}return new o(A,A[A.length-1]&-2147483648?-1:0)};function H(k,I){return k.add(x(I))}n.j=function(k){if(E(this)||E(k))return p;if(S(this))return S(k)?x(this).j(x(k)):x(x(this).j(k));if(S(k))return x(this.j(x(k)));if(0>this.l(w)&&0>k.l(w))return u(this.m()*k.m());for(var I=this.g.length+k.g.length,A=[],P=0;P<2*I;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(var O=0;O<k.g.length;O++){var L=this.i(P)>>>16,M=this.i(P)&65535,tr=k.i(O)>>>16,ui=k.i(O)&65535;A[2*P+2*O]+=M*ui,Y(A,2*P+2*O),A[2*P+2*O+1]+=L*ui,Y(A,2*P+2*O+1),A[2*P+2*O+1]+=M*tr,Y(A,2*P+2*O+1),A[2*P+2*O+2]+=L*tr,Y(A,2*P+2*O+2)}for(P=0;P<I;P++)A[P]=A[2*P+1]<<16|A[2*P];for(P=I;P<2*I;P++)A[P]=0;return new o(A,0)};function Y(k,I){for(;(k[I]&65535)!=k[I];)k[I+1]+=k[I]>>>16,k[I]&=65535,I++}function q(k,I){this.g=k,this.h=I}function Q(k,I){if(E(I))throw Error("division by zero");if(E(k))return new q(p,p);if(S(k))return I=Q(x(k),I),new q(x(I.g),x(I.h));if(S(I))return I=Q(k,x(I)),new q(x(I.g),I.h);if(30<k.g.length){if(S(k)||S(I))throw Error("slowDivide_ only works with positive integers.");for(var A=_,P=I;0>=P.l(k);)A=pe(A),P=pe(P);var O=re(A,1),L=re(P,1);for(P=re(P,2),A=re(A,2);!E(P);){var M=L.add(P);0>=M.l(k)&&(O=O.add(A),L=M),P=re(P,1),A=re(A,1)}return I=H(k,O.j(I)),new q(O,I)}for(O=p;0<=k.l(I);){for(A=Math.max(1,Math.floor(k.m()/I.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),L=u(A),M=L.j(I);S(M)||0<M.l(k);)A-=P,L=u(A),M=L.j(I);E(L)&&(L=_),O=O.add(L),k=H(k,M)}return new q(O,k)}n.A=function(k){return Q(this,k).h},n.and=function(k){for(var I=Math.max(this.g.length,k.g.length),A=[],P=0;P<I;P++)A[P]=this.i(P)&k.i(P);return new o(A,this.h&k.h)},n.or=function(k){for(var I=Math.max(this.g.length,k.g.length),A=[],P=0;P<I;P++)A[P]=this.i(P)|k.i(P);return new o(A,this.h|k.h)},n.xor=function(k){for(var I=Math.max(this.g.length,k.g.length),A=[],P=0;P<I;P++)A[P]=this.i(P)^k.i(P);return new o(A,this.h^k.h)};function pe(k){for(var I=k.g.length+1,A=[],P=0;P<I;P++)A[P]=k.i(P)<<1|k.i(P-1)>>>31;return new o(A,k.h)}function re(k,I){var A=I>>5;I%=32;for(var P=k.g.length-A,O=[],L=0;L<P;L++)O[L]=0<I?k.i(L+A)>>>I|k.i(L+A+1)<<32-I:k.i(L+A);return new o(O,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,US=hV.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,ja=hV.Integer=o}).apply(typeof dV<"u"?dV:typeof self<"u"?self:typeof window<"u"?window:{});var jv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qo={};var BS,KK,Sd,jS,Mp,Hv,HS,$S,qS;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,m,v){return d==Array.prototype||d==Object.prototype||(d[m]=v.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof jv=="object"&&jv];for(var m=0;m<d.length;++m){var v=d[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function i(d,m){if(m)e:{var v=r;d=d.split(".");for(var b=0;b<d.length-1;b++){var F=d[b];if(!(F in v))break e;v=v[F]}d=d[d.length-1],b=v[d],m=m(b),m!=b&&m!=null&&e(v,d,{configurable:!0,writable:!0,value:m})}}function s(d,m){d instanceof String&&(d+="");var v=0,b=!1,F={next:function(){if(!b&&v<d.length){var j=v++;return{value:m(j,d[j]),done:!1}}return b=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}i("Array.prototype.values",function(d){return d||function(){return s(this,function(m,v){return v})}});var o=o||{},a=this||self;function l(d){var m=typeof d;return m=m!="object"?m:d?Array.isArray(d)?"array":m:"null",m=="array"||m=="object"&&typeof d.length=="number"}function u(d){var m=typeof d;return m=="object"&&d!=null||m=="function"}function h(d,m,v){return d.call.apply(d.bind,arguments)}function p(d,m,v){if(!d)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,b),d.apply(m,F)}}return function(){return d.apply(m,arguments)}}function _(d,m,v){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,_.apply(null,arguments)}function w(d,m){var v=Array.prototype.slice.call(arguments,1);return function(){var b=v.slice();return b.push.apply(b,arguments),d.apply(this,b)}}function E(d,m){function v(){}v.prototype=m.prototype,d.aa=m.prototype,d.prototype=new v,d.prototype.constructor=d,d.Qb=function(b,F,j){for(var se=Array(arguments.length-2),It=2;It<arguments.length;It++)se[It-2]=arguments[It];return m.prototype[F].apply(b,se)}}function S(d){let m=d.length;if(0<m){let v=Array(m);for(let b=0;b<m;b++)v[b]=d[b];return v}return[]}function x(d,m){for(let v=1;v<arguments.length;v++){let b=arguments[v];if(l(b)){let F=d.length||0,j=b.length||0;d.length=F+j;for(let se=0;se<j;se++)d[F+se]=b[se]}else d.push(b)}}class H{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function Y(d){return/^[\s\xa0]*$/.test(d)}function q(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function Q(d){return Q[" "](d),d}Q[" "]=function(){};var pe=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function re(d,m,v){for(let b in d)m.call(v,d[b],b,d)}function k(d,m){for(let v in d)m.call(void 0,d[v],v,d)}function I(d){let m={};for(let v in d)m[v]=d[v];return m}let A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(d,m){let v,b;for(let F=1;F<arguments.length;F++){b=arguments[F];for(v in b)d[v]=b[v];for(let j=0;j<A.length;j++)v=A[j],Object.prototype.hasOwnProperty.call(b,v)&&(d[v]=b[v])}}function O(d){var m=1;d=d.split(":");let v=[];for(;0<m&&d.length;)v.push(d.shift()),m--;return d.length&&v.push(d.join(":")),v}function L(d){a.setTimeout(()=>{throw d},0)}function M(){var d=Ye;let m=null;return d.g&&(m=d.g,d.g=d.g.next,d.g||(d.h=null),m.next=null),m}class tr{constructor(){this.h=this.g=null}add(m,v){let b=ui.get();b.set(m,v),this.h?this.h.next=b:this.g=b,this.h=b}}var ui=new H(()=>new Ee,d=>d.reset());class Ee{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Me,Ce=!1,Ye=new tr,Lt=()=>{let d=a.Promise.resolve(void 0);Me=()=>{d.then(nr)}};var nr=()=>{for(var d;d=M();){try{d.h.call(d.g)}catch(v){L(v)}var m=ui;m.j(d),100>m.h&&(m.h++,d.next=m.g,m.g=d)}Ce=!1};function St(){this.s=this.s,this.C=this.C}St.prototype.s=!1,St.prototype.ma=function(){this.s||(this.s=!0,this.N())},St.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(d,m){this.type=d,this.g=this.target=m,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var xt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,m=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let v=()=>{};a.addEventListener("test",v,m),a.removeEventListener("test",v,m)}catch{}return d}();function as(d,m){if(ae.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var v=this.type=d.type,b=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=m,m=d.relatedTarget){if(pe){e:{try{Q(m.nodeName);var F=!0;break e}catch{}F=!1}F||(m=null)}}else v=="mouseover"?m=d.fromElement:v=="mouseout"&&(m=d.toElement);this.relatedTarget=m,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:aa[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&as.aa.h.call(this)}}E(as,ae);var aa={2:"touch",3:"pen",4:"mouse"};as.prototype.h=function(){as.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var $t="closure_listenable_"+(1e6*Math.random()|0),Pi=0;function rr(d,m,v,b,F){this.listener=d,this.proxy=null,this.src=m,this.type=v,this.capture=!!b,this.ha=F,this.key=++Pi,this.da=this.fa=!1}function Oi(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ls(d){this.src=d,this.g={},this.h=0}ls.prototype.add=function(d,m,v,b,F){var j=d.toString();d=this.g[j],d||(d=this.g[j]=[],this.h++);var se=nf(d,m,b,F);return-1<se?(m=d[se],v||(m.fa=!1)):(m=new rr(m,this.src,j,!!b,F),m.fa=v,d.push(m)),m};function tf(d,m){var v=m.type;if(v in d.g){var b=d.g[v],F=Array.prototype.indexOf.call(b,m,void 0),j;(j=0<=F)&&Array.prototype.splice.call(b,F,1),j&&(Oi(m),d.g[v].length==0&&(delete d.g[v],d.h--))}}function nf(d,m,v,b){for(var F=0;F<d.length;++F){var j=d[F];if(!j.da&&j.listener==m&&j.capture==!!v&&j.ha==b)return F}return-1}var rf="closure_lm_"+(1e6*Math.random()|0),sf={};function vg(d,m,v,b,F){if(b&&b.once)return gr(d,m,v,b,F);if(Array.isArray(m)){for(var j=0;j<m.length;j++)vg(d,m[j],v,b,F);return null}return v=Sl(v),d&&d[$t]?d.K(m,v,u(b)?!!b.capture:!!b,F):wg(d,m,v,!1,b,F)}function wg(d,m,v,b,F,j){if(!m)throw Error("Invalid event type");var se=u(F)?!!F.capture:!!F,It=jn(d);if(It||(d[rf]=It=new ls(d)),v=It.add(m,v,b,se,j),v.proxy)return v;if(b=Eg(),v.proxy=b,b.src=d,b.listener=v,d.addEventListener)xt||(F=se),F===void 0&&(F=!1),d.addEventListener(m.toString(),b,F);else if(d.attachEvent)d.attachEvent(Cg(m.toString()),b);else if(d.addListener&&d.removeListener)d.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Eg(){function d(v){return m.call(d.src,d.listener,v)}let m=bg;return d}function gr(d,m,v,b,F){if(Array.isArray(m)){for(var j=0;j<m.length;j++)gr(d,m[j],v,b,F);return null}return v=Sl(v),d&&d[$t]?d.L(m,v,u(b)?!!b.capture:!!b,F):wg(d,m,v,!0,b,F)}function tc(d,m,v,b,F){if(Array.isArray(m))for(var j=0;j<m.length;j++)tc(d,m[j],v,b,F);else b=u(b)?!!b.capture:!!b,v=Sl(v),d&&d[$t]?(d=d.i,m=String(m).toString(),m in d.g&&(j=d.g[m],v=nf(j,v,b,F),-1<v&&(Oi(j[v]),Array.prototype.splice.call(j,v,1),j.length==0&&(delete d.g[m],d.h--)))):d&&(d=jn(d))&&(m=d.g[m.toString()],d=-1,m&&(d=nf(m,v,b,F)),(v=-1<d?m[d]:null)&&of(v))}function of(d){if(typeof d!="number"&&d&&!d.da){var m=d.src;if(m&&m[$t])tf(m.i,d);else{var v=d.type,b=d.proxy;m.removeEventListener?m.removeEventListener(v,b,d.capture):m.detachEvent?m.detachEvent(Cg(v),b):m.addListener&&m.removeListener&&m.removeListener(b),(v=jn(m))?(tf(v,d),v.h==0&&(v.src=null,m[rf]=null)):Oi(d)}}}function Cg(d){return d in sf?sf[d]:sf[d]="on"+d}function bg(d,m){if(d.da)d=!0;else{m=new as(m,this);var v=d.listener,b=d.ha||d.src;d.fa&&of(d),d=v.call(b,m)}return d}function jn(d){return d=d[rf],d instanceof ls?d:null}var nc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sl(d){return typeof d=="function"?d:(d[nc]||(d[nc]=function(m){return d.handleEvent(m)}),d[nc])}function un(){St.call(this),this.i=new ls(this),this.M=this,this.F=null}E(un,St),un.prototype[$t]=!0,un.prototype.removeEventListener=function(d,m,v,b){tc(this,d,m,v,b)};function Ke(d,m){var v,b=d.F;if(b)for(v=[];b;b=b.F)v.push(b);if(d=d.M,b=m.type||m,typeof m=="string")m=new ae(m,d);else if(m instanceof ae)m.target=m.target||d;else{var F=m;m=new ae(b,d),P(m,F)}if(F=!0,v)for(var j=v.length-1;0<=j;j--){var se=m.g=v[j];F=Tl(se,b,!0,m)&&F}if(se=m.g=d,F=Tl(se,b,!0,m)&&F,F=Tl(se,b,!1,m)&&F,v)for(j=0;j<v.length;j++)se=m.g=v[j],F=Tl(se,b,!1,m)&&F}un.prototype.N=function(){if(un.aa.N.call(this),this.i){var d=this.i,m;for(m in d.g){for(var v=d.g[m],b=0;b<v.length;b++)Oi(v[b]);delete d.g[m],d.h--}}this.F=null},un.prototype.K=function(d,m,v,b){return this.i.add(String(d),m,!1,v,b)},un.prototype.L=function(d,m,v,b){return this.i.add(String(d),m,!0,v,b)};function Tl(d,m,v,b){if(m=d.i.g[String(m)],!m)return!0;m=m.concat();for(var F=!0,j=0;j<m.length;++j){var se=m[j];if(se&&!se.da&&se.capture==v){var It=se.listener,Tn=se.ha||se.src;se.fa&&tf(d.i,se),F=It.call(Tn,b)!==!1&&F}}return F&&!b.defaultPrevented}function af(d,m,v){if(typeof d=="function")v&&(d=_(d,v));else if(d&&typeof d.handleEvent=="function")d=_(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:a.setTimeout(d,m||0)}function Al(d){d.g=af(()=>{d.g=null,d.i&&(d.i=!1,Al(d))},d.l);let m=d.h;d.h=null,d.m.apply(null,m)}class lf extends St{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Al(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function us(d){St.call(this),this.h=d,this.g={}}E(us,St);var ao=[];function Ml(d){re(d.g,function(m,v){this.g.hasOwnProperty(v)&&of(m)},d),d.g={}}us.prototype.N=function(){us.aa.N.call(this),Ml(this)},us.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var uf=a.JSON.stringify,rc=a.JSON.parse,mC=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function lo(){}lo.prototype.h=null;function uo(d){return d.h||(d.h=d.i())}function ic(){}var cs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fe(){ae.call(this,"d")}E(fe,ae);function cf(){ae.call(this,"c")}E(cf,ae);var co={},ci=null;function Hn(){return ci=ci||new un}co.La="serverreachability";function Je(d){ae.call(this,co.La,d)}E(Je,ae);function ho(d){let m=Hn();Ke(m,new Je(m))}co.STAT_EVENT="statevent";function Ct(d,m){ae.call(this,co.STAT_EVENT,d),this.stat=m}E(Ct,ae);function cn(d){let m=Hn();Ke(m,new Ct(m,d))}co.Ma="timingevent";function Ig(d,m){ae.call(this,co.Ma,d),this.size=m}E(Ig,ae);function ds(d,m){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},m)}function nn(){this.g=!0}nn.prototype.xa=function(){this.g=!1};function Fi(d,m,v,b,F,j){d.info(function(){if(d.g)if(j)for(var se="",It=j.split("&"),Tn=0;Tn<It.length;Tn++){var lt=It[Tn].split("=");if(1<lt.length){var ze=lt[0];lt=lt[1];var On=ze.split("_");se=2<=On.length&&On[1]=="type"?se+(ze+"="+lt+"&"):se+(ze+"=redacted&")}}else se=null;else se=j;return"XMLHTTP REQ ("+b+") [attempt "+F+"]: "+m+`
`+v+`
`+se})}function di(d,m,v,b,F,j,se){d.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+F+"]: "+m+`
`+v+`
`+j+" "+se})}function Vt(d,m,v,b){d.info(function(){return"XMLHTTP TEXT ("+m+"): "+Li(d,v)+(b?" "+b:"")})}function Br(d,m){d.info(function(){return"TIMEOUT: "+m})}nn.prototype.info=function(){};function Li(d,m){if(!d.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(d=0;d<v.length;d++)if(Array.isArray(v[d])){var b=v[d];if(!(2>b.length)){var F=b[1];if(Array.isArray(F)&&!(1>F.length)){var j=F[0];if(j!="noop"&&j!="stop"&&j!="close")for(var se=1;se<F.length;se++)F[se]=""}}}}return uf(v)}catch{return m}}var hi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Dg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},df;function hs(){}E(hs,lo),hs.prototype.g=function(){return new XMLHttpRequest},hs.prototype.i=function(){return{}},df=new hs;function Vi(d,m,v,b){this.j=d,this.i=m,this.l=v,this.R=b||1,this.U=new us(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Sg}function Sg(){this.i=null,this.g="",this.h=!1}var fo={},po={};function sc(d,m,v){d.L=1,d.v=lc(pi(m)),d.m=v,d.P=!0,Tg(d,null)}function Tg(d,m){d.F=Date.now(),Ut(d),d.A=pi(d.v);var v=d.A,b=d.R;Array.isArray(b)||(b=[String(b)]),Ug(v.i,"t",b),d.C=0,v=d.j.J,d.h=new Sg,d.g=e_(d.j,v?m:null,!d.m),0<d.O&&(d.M=new lf(_(d.Y,d,d.g),d.O)),m=d.U,v=d.g,b=d.ca;var F="readystatechange";Array.isArray(F)||(F&&(ao[0]=F.toString()),F=ao);for(var j=0;j<F.length;j++){var se=vg(v,F[j],b||m.handleEvent,!1,m.h||m);if(!se)break;m.g[se.key]=se}m=d.H?I(d.H):{},d.m?(d.u||(d.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,m)):(d.u="GET",d.g.ea(d.A,d.u,null,m)),ho(),Fi(d.i,d.u,d.A,d.l,d.R,d.m)}Vi.prototype.ca=function(d){d=d.target;let m=this.M;m&&_r(d)==3?m.j():this.Y(d)},Vi.prototype.Y=function(d){try{if(d==this.g)e:{let On=_r(this.g);var m=this.g.Ba();let pa=this.g.Z();if(!(3>On)&&(On!=3||this.g&&(this.h.h||this.g.oa()||qg(this.g)))){this.J||On!=4||m==7||(m==8||0>=pa?ho(3):ho(2)),hf(this);var v=this.g.Z();this.X=v;t:if(Ag(this)){var b=qg(this.g);d="";var F=b.length,j=_r(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fs(this),la(this);var se="";break t}this.h.i=new a.TextDecoder}for(m=0;m<F;m++)this.h.h=!0,d+=this.h.i.decode(b[m],{stream:!(j&&m==F-1)});b.length=0,this.h.g+=d,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=v==200,di(this.i,this.u,this.A,this.l,this.R,On,v),this.o){if(this.T&&!this.K){t:{if(this.g){var It,Tn=this.g;if((It=Tn.g?Tn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(It)){var lt=It;break t}}lt=null}if(v=lt)Vt(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ff(this,v);else{this.o=!1,this.s=3,cn(12),fs(this),la(this);break e}}if(this.P){v=!0;let kr;for(;!this.J&&this.C<se.length;)if(kr=gC(this,se),kr==po){On==4&&(this.s=4,cn(14),v=!1),Vt(this.i,this.l,null,"[Incomplete Response]");break}else if(kr==fo){this.s=4,cn(15),Vt(this.i,this.l,se,"[Invalid Chunk]"),v=!1;break}else Vt(this.i,this.l,kr,null),ff(this,kr);if(Ag(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),On!=4||se.length!=0||this.h.h||(this.s=1,cn(16),v=!1),this.o=this.o&&v,!v)Vt(this.i,this.l,se,"[Invalid Chunked Response]"),fs(this),la(this);else if(0<se.length&&!this.W){this.W=!0;var ze=this.j;ze.g==this&&ze.ba&&!ze.M&&(ze.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),ha(ze),ze.M=!0,cn(11))}}else Vt(this.i,this.l,se,null),ff(this,se);On==4&&fs(this),this.o&&!this.J&&(On==4?Qg(this.j,this):(this.o=!1,Ut(this)))}else zg(this.g),v==400&&0<se.indexOf("Unknown SID")?(this.s=3,cn(12)):(this.s=0,cn(13)),fs(this),la(this)}}}catch{}finally{}};function Ag(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function gC(d,m){var v=d.C,b=m.indexOf(`
`,v);return b==-1?po:(v=Number(m.substring(v,b)),isNaN(v)?fo:(b+=1,b+v>m.length?po:(m=m.slice(b,b+v),d.C=b+v,m)))}Vi.prototype.cancel=function(){this.J=!0,fs(this)};function Ut(d){d.S=Date.now()+d.I,oc(d,d.I)}function oc(d,m){if(d.B!=null)throw Error("WatchDog timer not null");d.B=ds(_(d.ba,d),m)}function hf(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Vi.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(Br(this.i,this.A),this.L!=2&&(ho(),cn(17)),fs(this),this.s=2,la(this)):oc(this,this.S-d)};function la(d){d.j.G==0||d.J||Qg(d.j,d)}function fs(d){hf(d);var m=d.M;m&&typeof m.ma=="function"&&m.ma(),d.M=null,Ml(d.U),d.g&&(m=d.g,d.g=null,m.abort(),m.ma())}function ff(d,m){try{var v=d.j;if(v.G!=0&&(v.g==d||pf(v.h,d))){if(!d.K&&pf(v.h,d)&&v.G==3){try{var b=v.Da.g.parse(m)}catch{b=null}if(Array.isArray(b)&&b.length==3){var F=b;if(F[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<d.F)pc(v),jr(v);else break e;vf(v),cn(18)}}else v.za=F[1],0<v.za-v.T&&37500>F[2]&&v.F&&v.v==0&&!v.C&&(v.C=ds(_(v.Za,v),6e3));if(1>=kg(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else _s(v,11)}else if((d.K||v.g==d)&&pc(v),!Y(m))for(F=v.Da.g.parse(m),m=0;m<F.length;m++){let lt=F[m];if(v.T=lt[0],lt=lt[1],v.G==2)if(lt[0]=="c"){v.K=lt[1],v.ia=lt[2];let ze=lt[3];ze!=null&&(v.la=ze,v.j.info("VER="+v.la));let On=lt[4];On!=null&&(v.Aa=On,v.j.info("SVER="+v.Aa));let pa=lt[5];pa!=null&&typeof pa=="number"&&0<pa&&(b=1.5*pa,v.L=b,v.j.info("backChannelRequestTimeoutMs_="+b)),b=v;let kr=d.g;if(kr){let gc=kr.g?kr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gc){var j=b.h;j.g||gc.indexOf("spdy")==-1&&gc.indexOf("quic")==-1&&gc.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(ac(j,j.h),j.h=null))}if(b.D){let wf=kr.g?kr.g.getResponseHeader("X-HTTP-Session-Id"):null;wf&&(b.ya=wf,kt(b.I,b.D,wf))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-d.F,v.j.info("Handshake RTT: "+v.R+"ms")),b=v;var se=d;if(b.qa=Jg(b,b.J?b.ia:null,b.W),se.K){mf(b.h,se);var It=se,Tn=b.L;Tn&&(It.I=Tn),It.B&&(hf(It),Ut(It)),b.g=se}else Kg(b);0<v.i.length&&hc(v)}else lt[0]!="stop"&&lt[0]!="close"||_s(v,7);else v.G==3&&(lt[0]=="stop"||lt[0]=="close"?lt[0]=="stop"?_s(v,7):da(v):lt[0]!="noop"&&v.l&&v.l.ta(lt),v.v=0)}}ho(4)}catch{}}var _C=class{constructor(d,m){this.g=d,this.map=m}};function Mg(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xg(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function kg(d){return d.h?1:d.g?d.g.size:0}function pf(d,m){return d.h?d.h==m:d.g?d.g.has(m):!1}function ac(d,m){d.g?d.g.add(m):d.h=m}function mf(d,m){d.h&&d.h==m?d.h=null:d.g&&d.g.has(m)&&d.g.delete(m)}Mg.prototype.cancel=function(){if(this.i=Rg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function Rg(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let m=d.i;for(let v of d.g.values())m=m.concat(v.D);return m}return S(d.i)}function yC(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var m=[],v=d.length,b=0;b<v;b++)m.push(d[b]);return m}m=[],v=0;for(b in d)m[v++]=d[b];return m}function vC(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var m=[];d=d.length;for(var v=0;v<d;v++)m.push(v);return m}m=[],v=0;for(let b in d)m[v++]=b;return m}}}function gf(d,m){if(d.forEach&&typeof d.forEach=="function")d.forEach(m,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,m,void 0);else for(var v=vC(d),b=yC(d),F=b.length,j=0;j<F;j++)m.call(void 0,b[j],v&&v[j],d)}var Ng=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xl(d,m){if(d){d=d.split("&");for(var v=0;v<d.length;v++){var b=d[v].indexOf("="),F=null;if(0<=b){var j=d[v].substring(0,b);F=d[v].substring(b+1)}else j=d[v];m(j,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function fi(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof fi){this.h=d.h,ps(this,d.j),this.o=d.o,this.g=d.g,xr(this,d.s),this.l=d.l;var m=d.i,v=new Nl;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),Pg(this,v),this.m=d.m}else d&&(m=String(d).match(Ng))?(this.h=!1,ps(this,m[1]||"",!0),this.o=kl(m[2]||""),this.g=kl(m[3]||"",!0),xr(this,m[4]),this.l=kl(m[5]||"",!0),Pg(this,m[6]||"",!0),this.m=kl(m[7]||"")):(this.h=!1,this.i=new Nl(null,this.h))}fi.prototype.toString=function(){var d=[],m=this.j;m&&d.push(Rl(m,Og,!0),":");var v=this.g;return(v||m=="file")&&(d.push("//"),(m=this.o)&&d.push(Rl(m,Og,!0),"@"),d.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&d.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&d.push("/"),d.push(Rl(v,v.charAt(0)=="/"?_f:EC,!0))),(v=this.i.toString())&&d.push("?",v),(v=this.m)&&d.push("#",Rl(v,Fg)),d.join("")};function pi(d){return new fi(d)}function ps(d,m,v){d.j=v?kl(m,!0):m,d.j&&(d.j=d.j.replace(/:$/,""))}function xr(d,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);d.s=m}else d.s=null}function Pg(d,m,v){m instanceof Nl?(d.i=m,bC(d.i,d.h)):(v||(m=Rl(m,CC)),d.i=new Nl(m,d.h))}function kt(d,m,v){d.i.set(m,v)}function lc(d){return kt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function kl(d,m){return d?m?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Rl(d,m,v){return typeof d=="string"?(d=encodeURI(d).replace(m,wC),v&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function wC(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Og=/[#\/\?@]/g,EC=/[#\?:]/g,_f=/[#\?]/g,CC=/[#\?@]/g,Fg=/#/g;function Nl(d,m){this.h=this.g=null,this.i=d||null,this.j=!!m}function ms(d){d.g||(d.g=new Map,d.h=0,d.i&&xl(d.i,function(m,v){d.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}n=Nl.prototype,n.add=function(d,m){ms(this),this.i=null,d=ua(this,d);var v=this.g.get(d);return v||this.g.set(d,v=[]),v.push(m),this.h+=1,this};function Lg(d,m){ms(d),m=ua(d,m),d.g.has(m)&&(d.i=null,d.h-=d.g.get(m).length,d.g.delete(m))}function Vg(d,m){return ms(d),m=ua(d,m),d.g.has(m)}n.forEach=function(d,m){ms(this),this.g.forEach(function(v,b){v.forEach(function(F){d.call(m,F,b,this)},this)},this)},n.na=function(){ms(this);let d=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let b=0;b<m.length;b++){let F=d[b];for(let j=0;j<F.length;j++)v.push(m[b])}return v},n.V=function(d){ms(this);let m=[];if(typeof d=="string")Vg(this,d)&&(m=m.concat(this.g.get(ua(this,d))));else{d=Array.from(this.g.values());for(let v=0;v<d.length;v++)m=m.concat(d[v])}return m},n.set=function(d,m){return ms(this),this.i=null,d=ua(this,d),Vg(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[m]),this.h+=1,this},n.get=function(d,m){return d?(d=this.V(d),0<d.length?String(d[0]):m):m};function Ug(d,m,v){Lg(d,m),0<v.length&&(d.i=null,d.g.set(ua(d,m),S(v)),d.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var b=m[v];let j=encodeURIComponent(String(b)),se=this.V(b);for(b=0;b<se.length;b++){var F=j;se[b]!==""&&(F+="="+encodeURIComponent(String(se[b]))),d.push(F)}}return this.i=d.join("&")};function ua(d,m){return m=String(m),d.j&&(m=m.toLowerCase()),m}function bC(d,m){m&&!d.j&&(ms(d),d.i=null,d.g.forEach(function(v,b){var F=b.toLowerCase();b!=F&&(Lg(this,b),Ug(this,F,v))},d)),d.j=m}function IC(d,m){let v=new nn;if(a.Image){let b=new Image;b.onload=w(gs,v,"TestLoadImage: loaded",!0,m,b),b.onerror=w(gs,v,"TestLoadImage: error",!1,m,b),b.onabort=w(gs,v,"TestLoadImage: abort",!1,m,b),b.ontimeout=w(gs,v,"TestLoadImage: timeout",!1,m,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=d}else m(!1)}function DC(d,m){let v=new nn,b=new AbortController,F=setTimeout(()=>{b.abort(),gs(v,"TestPingServer: timeout",!1,m)},1e4);fetch(d,{signal:b.signal}).then(j=>{clearTimeout(F),j.ok?gs(v,"TestPingServer: ok",!0,m):gs(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(F),gs(v,"TestPingServer: error",!1,m)})}function gs(d,m,v,b,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),b(v)}catch{}}function SC(){this.g=new mC}function TC(d,m,v){let b=v||"";try{gf(d,function(F,j){let se=F;u(F)&&(se=uf(F)),m.push(b+j+"="+encodeURIComponent(se))})}catch(F){throw m.push(b+"type="+encodeURIComponent("_badmap")),F}}function Pl(d){this.l=d.Ub||null,this.j=d.eb||!1}E(Pl,lo),Pl.prototype.g=function(){return new uc(this.l,this.j)},Pl.prototype.i=function(d){return function(){return d}}({});function uc(d,m){un.call(this),this.D=d,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(uc,un),n=uc.prototype,n.open=function(d,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=m,this.readyState=1,go(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(m.body=d),(this.D||a).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mo(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,go(this)),this.g&&(this.readyState=3,go(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bg(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bg(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var m=d.value?d.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!d.done}))&&(this.response=this.responseText+=m)}d.done?mo(this):go(this),this.readyState==3&&Bg(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,mo(this))},n.Qa=function(d){this.g&&(this.response=d,mo(this))},n.ga=function(){this.g&&mo(this)};function mo(d){d.readyState=4,d.l=null,d.j=null,d.v=null,go(d)}n.setRequestHeader=function(d,m){this.u.append(d,m)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,d.push(v[0]+": "+v[1]),v=m.next();return d.join(`\r
`)};function go(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(uc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function jg(d){let m="";return re(d,function(v,b){m+=b,m+=":",m+=v,m+=`\r
`}),m}function cc(d,m,v){e:{for(b in v){var b=!1;break e}b=!0}b||(v=jg(v),typeof d=="string"?v!=null&&encodeURIComponent(String(v)):kt(d,m,v))}function qt(d){un.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(qt,un);var AC=/^https?$/i,MC=["POST","PUT"];n=qt.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,m,v,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);m=m?m.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():df.g(),this.v=this.o?uo(this.o):uo(df),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(m,String(d),!0),this.B=!1}catch(j){Hg(this,j);return}if(d=v||"",v=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var F in b)v.set(F,b[F]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(let j of b.keys())v.set(j,b.get(j));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(v.keys()).find(j=>j.toLowerCase()=="content-type"),F=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(MC,m,void 0))||b||F||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[j,se]of v)this.g.setRequestHeader(j,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ca(this),this.u=!0,this.g.send(d),this.u=!1}catch(j){Hg(this,j)}};function Hg(d,m){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=m,d.m=5,$g(d),Tt(d)}function $g(d){d.A||(d.A=!0,Ke(d,"complete"),Ke(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Ke(this,"complete"),Ke(this,"abort"),Tt(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tt(this,!0)),qt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?yf(this):this.bb())},n.bb=function(){yf(this)};function yf(d){if(d.h&&typeof o<"u"&&(!d.v[1]||_r(d)!=4||d.Z()!=2)){if(d.u&&_r(d)==4)af(d.Ea,0,d);else if(Ke(d,"readystatechange"),_r(d)==4){d.h=!1;try{let se=d.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var b;if(b=se===0){var F=String(d.D).match(Ng)[1]||null;!F&&a.self&&a.self.location&&(F=a.self.location.protocol.slice(0,-1)),b=!AC.test(F?F.toLowerCase():"")}v=b}if(v)Ke(d,"complete"),Ke(d,"success");else{d.m=6;try{var j=2<_r(d)?d.g.statusText:""}catch{j=""}d.l=j+" ["+d.Z()+"]",$g(d)}}finally{Tt(d)}}}}function Tt(d,m){if(d.g){ca(d);let v=d.g,b=d.v[0]?()=>{}:null;d.g=null,d.v=null,m||Ke(d,"ready");try{v.onreadystatechange=b}catch{}}}function ca(d){d.I&&(a.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function _r(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<_r(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var m=this.g.responseText;return d&&m.indexOf(d)==0&&(m=m.substring(d.length)),rc(m)}};function qg(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function zg(d){let m={};d=(d.g&&2<=_r(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<d.length;b++){if(Y(d[b]))continue;var v=O(d[b]);let F=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();let j=m[F]||[];m[F]=j,j.push(v)}k(m,function(b){return b.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ol(d,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[d]||m}function Wg(d){this.Aa=0,this.i=[],this.j=new nn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ol("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ol("baseRetryDelayMs",5e3,d),this.cb=Ol("retryDelaySeedMs",1e4,d),this.Wa=Ol("forwardChannelMaxRetries",2,d),this.wa=Ol("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Mg(d&&d.concurrentRequestLimit),this.Da=new SC,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Wg.prototype,n.la=8,n.G=1,n.connect=function(d,m,v,b){cn(0),this.W=d,this.H=m||{},v&&b!==void 0&&(this.H.OSID=v,this.H.OAID=b),this.F=this.X,this.I=Jg(this,null,this.W),hc(this)};function da(d){if(dc(d),d.G==3){var m=d.U++,v=pi(d.I);if(kt(v,"SID",d.K),kt(v,"RID",m),kt(v,"TYPE","terminate"),_o(d,v),m=new Vi(d,d.j,m),m.L=2,m.v=lc(pi(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&a.Image&&(new Image().src=m.v,v=!0),v||(m.g=e_(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Ut(m)}Xg(d)}function jr(d){d.g&&(ha(d),d.g.cancel(),d.g=null)}function dc(d){jr(d),d.u&&(a.clearTimeout(d.u),d.u=null),pc(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function hc(d){if(!xg(d.h)&&!d.s){d.s=!0;var m=d.Ga;Me||Lt(),Ce||(Me(),Ce=!0),Ye.add(m,d),d.B=0}}function Ui(d,m){return kg(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=m.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=ds(_(d.Ga,d,m),Zg(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let F=new Vi(this,this.j,d),j=this.o;if(this.S&&(j?(j=I(j),P(j,this.S)):j=this.S),this.m!==null||this.O||(F.H=j,j=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var b=this.i[v];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(m+=b,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=Yg(this,F,m),v=pi(this.I),kt(v,"RID",d),kt(v,"CVER",22),this.D&&kt(v,"X-HTTP-Session-Id",this.D),_o(this,v),j&&(this.O?m="headers="+encodeURIComponent(String(jg(j)))+"&"+m:this.m&&cc(v,this.m,j)),ac(this.h,F),this.Ua&&kt(v,"TYPE","init"),this.P?(kt(v,"$req",m),kt(v,"SID","null"),F.T=!0,sc(F,v,null)):sc(F,v,m),this.G=2}}else this.G==3&&(d?Gg(this,d):this.i.length==0||xg(this.h)||Gg(this))};function Gg(d,m){var v;m?v=m.l:v=d.U++;let b=pi(d.I);kt(b,"SID",d.K),kt(b,"RID",v),kt(b,"AID",d.T),_o(d,b),d.m&&d.o&&cc(b,d.m,d.o),v=new Vi(d,d.j,v,d.B+1),d.m===null&&(v.H=d.o),m&&(d.i=m.D.concat(d.i)),m=Yg(d,v,1e3),v.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),ac(d.h,v),sc(v,b,m)}function _o(d,m){d.H&&re(d.H,function(v,b){kt(m,b,v)}),d.l&&gf({},function(v,b){kt(m,b,v)})}function Yg(d,m,v){v=Math.min(d.i.length,v);var b=d.l?_(d.l.Na,d.l,d):null;e:{var F=d.i;let j=-1;for(;;){let se=["count="+v];j==-1?0<v?(j=F[0].g,se.push("ofs="+j)):j=0:se.push("ofs="+j);let It=!0;for(let Tn=0;Tn<v;Tn++){let lt=F[Tn].g,ze=F[Tn].map;if(lt-=j,0>lt)j=Math.max(0,F[Tn].g-100),It=!1;else try{TC(ze,se,"req"+lt+"_")}catch{b&&b(ze)}}if(It){b=se.join("&");break e}}}return d=d.i.splice(0,v),m.D=d,b}function Kg(d){if(!d.g&&!d.u){d.Y=1;var m=d.Fa;Me||Lt(),Ce||(Me(),Ce=!0),Ye.add(m,d),d.v=0}}function vf(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=ds(_(d.Fa,d),Zg(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,fc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=ds(_(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,cn(10),jr(this),fc(this))};function ha(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function fc(d){d.g=new Vi(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var m=pi(d.qa);kt(m,"RID","rpc"),kt(m,"SID",d.K),kt(m,"AID",d.T),kt(m,"CI",d.F?"0":"1"),!d.F&&d.ja&&kt(m,"TO",d.ja),kt(m,"TYPE","xmlhttp"),_o(d,m),d.m&&d.o&&cc(m,d.m,d.o),d.L&&(d.g.I=d.L);var v=d.g;d=d.ia,v.L=1,v.v=lc(pi(m)),v.m=null,v.P=!0,Tg(v,d)}n.Za=function(){this.C!=null&&(this.C=null,jr(this),vf(this),cn(19))};function pc(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function Qg(d,m){var v=null;if(d.g==m){pc(d),ha(d),d.g=null;var b=2}else if(pf(d.h,m))v=m.D,mf(d.h,m),b=1;else return;if(d.G!=0){if(m.o)if(b==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var F=d.B;b=Hn(),Ke(b,new Ig(b,v)),hc(d)}else Kg(d);else if(F=m.s,F==3||F==0&&0<m.X||!(b==1&&Ui(d,m)||b==2&&vf(d)))switch(v&&0<v.length&&(m=d.h,m.i=m.i.concat(v)),F){case 1:_s(d,5);break;case 4:_s(d,10);break;case 3:_s(d,6);break;default:_s(d,2)}}}function Zg(d,m){let v=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(v*=2),v*m}function _s(d,m){if(d.j.info("Error code "+m),m==2){var v=_(d.fb,d),b=d.Xa;let F=!b;b=new fi(b||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ps(b,"https"),lc(b),F?IC(b.toString(),v):DC(b.toString(),v)}else cn(2);d.G=0,d.l&&d.l.sa(m),Xg(d),dc(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),cn(2)):(this.j.info("Failed to ping google.com"),cn(1))};function Xg(d){if(d.G=0,d.ka=[],d.l){let m=Rg(d.h);(m.length!=0||d.i.length!=0)&&(x(d.ka,m),x(d.ka,d.i),d.h.i.length=0,S(d.i),d.i.length=0),d.l.ra()}}function Jg(d,m,v){var b=v instanceof fi?pi(v):new fi(v);if(b.g!="")m&&(b.g=m+"."+b.g),xr(b,b.s);else{var F=a.location;b=F.protocol,m=m?m+"."+F.hostname:F.hostname,F=+F.port;var j=new fi(null);b&&ps(j,b),m&&(j.g=m),F&&xr(j,F),v&&(j.l=v),b=j}return v=d.D,m=d.ya,v&&m&&kt(b,v,m),kt(b,"VER",d.la),_o(d,b),b}function e_(d,m,v){if(m&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=d.Ca&&!d.pa?new qt(new Pl({eb:v})):new qt(d.pa),m.Ha(d.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function t_(){}n=t_.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function mc(){}mc.prototype.g=function(d,m){return new ir(d,m)};function ir(d,m){un.call(this),this.g=new Wg(m),this.l=d,this.h=m&&m.messageUrlParams||null,d=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(d?d["X-WebChannel-Content-Type"]=m.messageContentType:d={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(d?d["X-WebChannel-Client-Profile"]=m.va:d={"X-WebChannel-Client-Profile":m.va}),this.g.S=d,(d=m&&m.Sb)&&!Y(d)&&(this.g.m=d),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!Y(m)&&(this.g.D=m,d=this.h,d!==null&&m in d&&(d=this.h,m in d&&delete d[m])),this.j=new fa(this)}E(ir,un),ir.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ir.prototype.close=function(){da(this.g)},ir.prototype.o=function(d){var m=this.g;if(typeof d=="string"){var v={};v.__data__=d,d=v}else this.u&&(v={},v.__data__=uf(d),d=v);m.i.push(new _C(m.Ya++,d)),m.G==3&&hc(m)},ir.prototype.N=function(){this.g.l=null,delete this.j,da(this.g),delete this.g,ir.aa.N.call(this)};function n_(d){fe.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var m=d.__sm__;if(m){e:{for(let v in m){d=v;break e}d=void 0}(this.i=d)&&(d=this.i,m=m!==null&&d in m?m[d]:void 0),this.data=m}else this.data=d}E(n_,fe);function yo(){cf.call(this),this.status=1}E(yo,cf);function fa(d){this.g=d}E(fa,t_),fa.prototype.ua=function(){Ke(this.g,"a")},fa.prototype.ta=function(d){Ke(this.g,new n_(d))},fa.prototype.sa=function(d){Ke(this.g,new yo)},fa.prototype.ra=function(){Ke(this.g,"b")},mc.prototype.createWebChannel=mc.prototype.g,ir.prototype.send=ir.prototype.o,ir.prototype.open=ir.prototype.m,ir.prototype.close=ir.prototype.close,qS=qo.createWebChannelTransport=function(){return new mc},$S=qo.getStatEventTarget=function(){return Hn()},HS=qo.Event=co,Hv=qo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},hi.NO_ERROR=0,hi.TIMEOUT=8,hi.HTTP_ERROR=6,Mp=qo.ErrorCode=hi,Dg.COMPLETE="complete",jS=qo.EventType=Dg,ic.EventType=cs,cs.OPEN="a",cs.CLOSE="b",cs.ERROR="c",cs.MESSAGE="d",un.prototype.listen=un.prototype.K,Sd=qo.WebChannel=ic,KK=qo.FetchXmlHttpFactory=Pl,qt.prototype.listenOnce=qt.prototype.L,qt.prototype.getLastError=qt.prototype.Ka,qt.prototype.getLastErrorCode=qt.prototype.Ba,qt.prototype.getStatus=qt.prototype.Z,qt.prototype.getResponseJson=qt.prototype.Oa,qt.prototype.getResponseText=qt.prototype.oa,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Ha,BS=qo.XhrIo=qt}).apply(typeof jv<"u"?jv:typeof self<"u"?self:typeof window<"u"?window:{});var fV="@firebase/firestore";var In=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};In.UNAUTHENTICATED=new In(null),In.GOOGLE_CREDENTIALS=new In("google-credentials-uid"),In.FIRST_PARTY=new In("first-party-uid"),In.MOCK_USER=new In("mock-user");var rh="10.14.0";var Ya=new ya("@firebase/firestore");function kd(){return Ya.logLevel}function _2(n){Ya.setLogLevel(n)}function Z(n,...e){if(Ya.logLevel<=gi.DEBUG){let t=e.map(KA);Ya.debug(`Firestore (${rh}): ${n}`,...t)}}function hn(n,...e){if(Ya.logLevel<=gi.ERROR){let t=e.map(KA);Ya.error(`Firestore (${rh}): ${n}`,...t)}}function Xi(n,...e){if(Ya.logLevel<=gi.WARN){let t=e.map(KA);Ya.warn(`Firestore (${rh}): ${n}`,...t)}}function KA(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function _e(n="Unexpected state"){let e=`FIRESTORE (${rh}) INTERNAL ASSERTION FAILED: `+n;throw hn(e),new Error(e)}function Ae(n,e){n||_e()}function y2(n,e){n||_e()}function le(n,e){return n}var $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},K=class extends m_{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Rn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Xv=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},QS=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(In.UNAUTHENTICATED))}shutdown(){}},ZS=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},XS=class{constructor(e){this.t=e,this.currentUser=In.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ae(this.o===void 0);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),s=new Rn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Rn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>N(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},a=l=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Rn)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string"),new Xv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string"),new In(e)}},JS=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=In.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},eT=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new JS(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(In.FIRST_PARTY))}shutdown(){}invalidateToken(){}},tT=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},nT=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ae(this.o===void 0);let r=s=>{s.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,Z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ae(typeof t.token=="string"),this.R=t.token,new tT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function QK(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Jv=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=QK(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function je(n,e){return n<e?-1:n>e?1:0}function Bd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function v2(n){return n+"\0"}var Xt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new K($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new K($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new K($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var xe=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Xt(0,0))}static max(){return new n(new Xt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var e0=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&_e(),r===void 0?r=e.length-t:r>e.length-t&&_e(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ht=class n extends e0{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new K($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},ZK=/^[_a-zA-Z][_a-zA-Z0-9]*$/,fn=class n extends e0{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return ZK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new K($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new K($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new K($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new K($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ue=class n{constructor(e){this.path=e}static fromPath(e){return new n(ht.fromString(e))}static fromName(e){return new n(ht.fromString(e).popFirst(5))}static empty(){return new n(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ht(e.slice()))}};var jd=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function rT(n){return n.fields.find(e=>e.kind===2)}function uu(n){return n.fields.filter(e=>e.kind!==2)}jd.UNKNOWN_ID=-1;var Ld=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var jp=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Ai.min())}};function w2(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=xe.fromTimestamp(r===1e9?new Xt(t+1,0):new Xt(t,r));return new Ai(i,ue.empty(),e)}function E2(n){return new Ai(n.readTime,n.key,-1)}var Ai=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(xe.min(),ue.empty(),-1)}static max(){return new n(xe.max(),ue.empty(),-1)}};function QA(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ue.comparator(n.documentKey,e.documentKey),t!==0?t:je(n.largestBatchId,e.largestBatchId))}var C2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",t0=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function il(n){return N(this,null,function*(){if(n.code!==$.FAILED_PRECONDITION||n.message!==C2)throw n;Z("LocalStore","Unexpectedly lost primary lease")})}var U=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_e(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let l=0;l<s;l++){let u=l;t(e[u]).next(h=>{o[u]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};var n0=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Rn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new mu(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=ZA(r.target.error);this.V.reject(new mu(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(s){throw new mu(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Z("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new sT(t)}},Ka=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Cf())===12.2&&hn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Z("SimpleDb","Removing database:",e),cu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!p_())return!1;if(n.v())return!0;let e=Cf(),t=n.S(e),r=0<t&&t<10,i=b2(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(Z("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;t(o)},i.onblocked=()=>{r(new mu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new K($.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new K($.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new mu(e,o))},i.onupgradeneeded=s=>{Z("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{Z("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return N(this,null,function*(){let s=t==="readonly",o=0;for(;;){++o;try{this.db=yield this.M(e);let a=n0.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),U.reject(u))).toPromise();return l.catch(()=>{}),yield a.m,l}catch(a){let l=a,u=l.name!=="FirebaseError"&&o<3;if(Z("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function b2(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var iT=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return cu(this.B.delete())}},mu=class extends K{constructor(e,t){super($.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function sl(n){return n.name==="IndexedDbTransactionError"}var sT=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Z("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Z("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),cu(r)}add(e){return Z("SimpleDb","ADD",this.store.name,e,e),cu(this.store.add(e))}get(e){return cu(this.store.get(e)).next(t=>(t===void 0&&(t=null),Z("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Z("SimpleDb","DELETE",this.store.name,e),cu(this.store.delete(e))}count(){return Z("SimpleDb","COUNT",this.store.name),cu(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new U((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{let s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new U((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){Z("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new U((r,i)=>{t.onerror=s=>{let o=ZA(s.target.error);i(o)},t.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){let r=[];return new U((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let l=new iT(a),u=t(a.primaryKey,a.value,l);if(u instanceof U){let h=u.catch(p=>(l.done(),U.reject(p)));r.push(h)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>U.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function cu(n){return new U((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=ZA(r.target.error);t(i)}})}var pV=!1;function ZA(n){let e=Ka.S(Cf());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new K("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return pV||(pV=!0,setTimeout(()=>{throw r},0)),r}}return n}var oT=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Z("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{Z("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){sl(t)?Z("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield il(t)}yield this.X(6e4)}))}},aT=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,s=!0;return U.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return Z("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(Z("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{let o=E2(s);QA(o,r)>0&&(r=o)}),new Ai(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Xr=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function lm(n){return n==null}function Hp(n){return n===0&&1/n==-1/0}function I2(n){return typeof n=="number"&&Number.isInteger(n)&&!Hp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function br(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=mV(e)),e=XK(n.get(t),e);return mV(e)}function XK(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function mV(n){return n+""}function Bs(n){let e=n.length;if(Ae(e>=2),e===2)return Ae(n.charAt(0)===""&&n.charAt(1)===""),ht.emptyPath();let t=e-2,r=[],i="";for(let s=0;s<e;){let o=n.indexOf("",s);switch((o<0||o>t)&&_e(),n.charAt(o+1)){case"":let a=n.substring(s,o),l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=n.substring(s,o),i+="\0";break;case"":i+=n.substring(s,o+1);break;default:_e()}s=o+2}return new ht(r)}var gV=["userId","batchId"];function Gv(n,e){return[n,br(e)]}function D2(n,e,t){return[n,br(e),t]}var JK={},eQ=["prefixPath","collectionGroup","readTime","documentId"],tQ=["prefixPath","collectionGroup","documentId"],nQ=["collectionGroup","readTime","prefixPath","documentId"],rQ=["canonicalId","targetId"],iQ=["targetId","path"],sQ=["path","targetId"],oQ=["collectionId","parent"],aQ=["indexId","uid"],lQ=["uid","sequenceNumber"],uQ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],cQ=["indexId","uid","orderedDocumentKey"],dQ=["userId","collectionPath","documentId"],hQ=["userId","collectionPath","largestBatchId"],fQ=["userId","collectionGroup","largestBatchId"],S2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],pQ=[...S2,"documentOverlays"],T2=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],A2=T2,XA=[...A2,"indexConfiguration","indexState","indexEntries"],mQ=XA,gQ=[...XA,"globals"];var $p=class extends t0{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function Nn(n,e){let t=le(n);return Ka.F(t._e,e)}function _V(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Tu(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function M2(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Gt=class n{constructor(e,t){this.comparator=e,this.root=t||Hs.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Hs.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fd(this.root,e,this.comparator,!0)}},Fd=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Hs=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _e();let e=this.left.check();if(e!==this.right.check())throw _e();return e+(this.isRed()?0:1)}};Hs.EMPTY=null,Hs.RED=!0,Hs.BLACK=!1;Hs.EMPTY=new class{constructor(){this.size=0}get key(){throw _e()}get value(){throw _e()}get color(){throw _e()}get left(){throw _e()}get right(){throw _e()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Hs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ot=class n{constructor(e){this.comparator=e,this.data=new Gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new r0(this.data.getIterator())}getIteratorFrom(e){return new r0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},r0=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Td(n){return n.hasNext()?n.getNext():void 0}var Jr=class n{constructor(e){this.fields=e,e.sort(fn.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ot(fn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bd(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var i0=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function x2(){return typeof atob<"u"}var mn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new i0("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};mn.EMPTY_BYTE_STRING=new mn("");var _Q=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Go(n){if(Ae(!!n),typeof n=="string"){let e=0,t=_Q.exec(n);if(Ae(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Kt(n.seconds),nanos:Kt(n.nanos)}}function Kt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Qa(n){return typeof n=="string"?mn.fromBase64String(n):mn.fromUint8Array(n)}function K0(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function JA(n){let e=n.mapValue.fields.__previous_value__;return K0(e)?JA(e):e}function qp(n){let e=Go(n.mapValue.fields.__local_write_time__.timestampValue);return new Xt(e.seconds,e.nanos)}var lT=class{constructor(e,t,r,i,s,o,a,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}},Za=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Wa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Yv={nullValue:"NULL_VALUE"};function gu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?K0(n)?4:k2(n)?9007199254740991:Q0(n)?10:11:_e()}function zs(n,e){if(n===e)return!0;let t=gu(n);if(t!==gu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return qp(n).isEqual(qp(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Go(i.timestampValue),a=Go(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Qa(i.bytesValue).isEqual(Qa(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Kt(i.geoPointValue.latitude)===Kt(s.geoPointValue.latitude)&&Kt(i.geoPointValue.longitude)===Kt(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Kt(i.integerValue)===Kt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Kt(i.doubleValue),a=Kt(s.doubleValue);return o===a?Hp(o)===Hp(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Bd(n.arrayValue.values||[],e.arrayValue.values||[],zs);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(_V(o)!==_V(a))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!zs(o[l],a[l])))return!1;return!0}(n,e);default:return _e()}}function zp(n,e){return(n.values||[]).find(t=>zs(t,e))!==void 0}function Xa(n,e){if(n===e)return 0;let t=gu(n),r=gu(e);if(t!==r)return je(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return je(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Kt(s.integerValue||s.doubleValue),l=Kt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return yV(n.timestampValue,e.timestampValue);case 4:return yV(qp(n),qp(e));case 5:return je(n.stringValue,e.stringValue);case 6:return function(s,o){let a=Qa(s),l=Qa(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){let h=je(a[u],l[u]);if(h!==0)return h}return je(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=je(Kt(s.latitude),Kt(o.latitude));return a!==0?a:je(Kt(s.longitude),Kt(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return vV(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,h;let p=s.fields||{},_=o.fields||{},w=(a=p.value)===null||a===void 0?void 0:a.arrayValue,E=(l=_.value)===null||l===void 0?void 0:l.arrayValue,S=je(((u=w?.values)===null||u===void 0?void 0:u.length)||0,((h=E?.values)===null||h===void 0?void 0:h.length)||0);return S!==0?S:vV(w,E)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Wa.mapValue&&o===Wa.mapValue)return 0;if(s===Wa.mapValue)return 1;if(o===Wa.mapValue)return-1;let a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){let _=je(l[p],h[p]);if(_!==0)return _;let w=Xa(a[l[p]],u[h[p]]);if(w!==0)return w}return je(l.length,h.length)}(n.mapValue,e.mapValue);default:throw _e()}}function yV(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return je(n,e);let t=Go(n),r=Go(e),i=je(t.seconds,r.seconds);return i!==0?i:je(t.nanos,r.nanos)}function vV(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Xa(t[i],r[i]);if(s)return s}return je(t.length,r.length)}function Hd(n){return uT(n)}function uT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Go(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Qa(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ue.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=uT(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${uT(t.fields[o])}`;return i+"}"}(n.mapValue):_e()}function _u(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function cT(n){return!!n&&"integerValue"in n}function Wp(n){return!!n&&"arrayValue"in n}function wV(n){return!!n&&"nullValue"in n}function EV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Kv(n){return!!n&&"mapValue"in n}function Q0(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Fp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Tu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Fp(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Fp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function k2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var R2={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function yQ(n){return"nullValue"in n?Yv:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?_u(Za.empty(),ue.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Q0(n)?R2:{mapValue:{}}:_e()}function vQ(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?_u(Za.empty(),ue.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?R2:"mapValue"in n?Q0(n)?{mapValue:{}}:Wa:_e()}function CV(n,e){let t=Xa(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function bV(n,e){let t=Xa(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var ar=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Kv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fp(t)}setAll(e){let t=fn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Fp(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Kv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Kv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Tu(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Fp(this.value))}};function N2(n){let e=[];return Tu(n.fields,(t,r)=>{let i=new fn([t]);if(Kv(r)){let s=N2(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Jr(e)}var Dn=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,xe.min(),xe.min(),xe.min(),ar.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,xe.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,xe.min(),xe.min(),ar.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,xe.min(),xe.min(),ar.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ar.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ar.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ws=class{constructor(e,t){this.position=e,this.inclusive=t}};function IV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=ue.comparator(ue.fromName(o.referenceValue),t.key):r=Xa(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function DV(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!zs(n.position[t],e.position[t]))return!1;return!0}var yu=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function wQ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var s0=class{},at=class n extends s0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new fT(e,t,r):t==="array-contains"?new gT(e,r):t==="in"?new o0(e,r):t==="not-in"?new _T(e,r):t==="array-contains-any"?new yT(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new pT(e,r):new mT(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Xa(t,this.value)):t!==null&&gu(this.value)===gu(t)&&this.matchesComparison(Xa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},At=class n extends s0{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return $d(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function $d(n){return n.op==="and"}function dT(n){return n.op==="or"}function eM(n){return P2(n)&&$d(n)}function P2(n){for(let e of n.filters)if(e instanceof At)return!1;return!0}function hT(n){if(n instanceof at)return n.field.canonicalString()+n.op.toString()+Hd(n.value);if(eM(n))return n.filters.map(e=>hT(e)).join(",");{let e=n.filters.map(t=>hT(t)).join(",");return`${n.op}(${e})`}}function O2(n,e){return n instanceof at?function(r,i){return i instanceof at&&r.op===i.op&&r.field.isEqual(i.field)&&zs(r.value,i.value)}(n,e):n instanceof At?function(r,i){return i instanceof At&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&O2(o,i.filters[a]),!0):!1}(n,e):void _e()}function F2(n,e){let t=n.filters.concat(e);return At.create(t,n.op)}function L2(n){return n instanceof at?function(t){return`${t.field.canonicalString()} ${t.op} ${Hd(t.value)}`}(n):n instanceof At?function(t){return t.op.toString()+" {"+t.getFilters().map(L2).join(" ,")+"}"}(n):"Filter"}var fT=class extends at{constructor(e,t,r){super(e,t,r),this.key=ue.fromName(r.referenceValue)}matches(e){let t=ue.comparator(e.key,this.key);return this.matchesComparison(t)}},pT=class extends at{constructor(e,t){super(e,"in",t),this.keys=V2("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},mT=class extends at{constructor(e,t){super(e,"not-in",t),this.keys=V2("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function V2(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ue.fromName(r.referenceValue))}var gT=class extends at{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Wp(t)&&zp(t.arrayValue,this.value)}},o0=class extends at{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&zp(this.value.arrayValue,t)}},_T=class extends at{constructor(e,t){super(e,"not-in",t)}matches(e){if(zp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!zp(this.value.arrayValue,t)}},yT=class extends at{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Wp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>zp(this.value.arrayValue,r))}};var vT=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function wT(n,e=null,t=[],r=[],i=null,s=null,o=null){return new vT(n,e,t,r,i,s,o)}function vu(n){let e=le(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>hT(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),lm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Hd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Hd(r)).join(",")),e.ue=t}return e.ue}function um(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!wQ(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!O2(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!DV(n.startAt,e.startAt)&&DV(n.endAt,e.endAt)}function a0(n){return ue.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function l0(n,e){return n.filters.filter(t=>t instanceof at&&t.field.isEqual(e))}function SV(n,e,t){let r=Yv,i=!0;for(let s of l0(n,e)){let o=Yv,a=!0;switch(s.op){case"<":case"<=":o=yQ(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Yv}CV({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];CV({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}function TV(n,e,t){let r=Wa,i=!0;for(let s of l0(n,e)){let o=Wa,a=!0;switch(s.op){case">=":case">":o=vQ(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Wa}bV({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];bV({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}var Ji=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function U2(n,e,t,r,i,s,o,a){return new Ji(n,e,t,r,i,s,o,a)}function ih(n){return new Ji(n)}function AV(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function tM(n){return n.collectionGroup!==null}function Vd(n){let e=le(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ot(fn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new yu(s,r))}),t.has(fn.keyField().canonicalString())||e.ce.push(new yu(fn.keyField(),r))}return e.ce}function Ir(n){let e=le(n);return e.le||(e.le=EQ(e,Vd(n))),e.le}function EQ(n,e){if(n.limitType==="F")return wT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new yu(i.field,s)});let t=n.endAt?new Ws(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ws(n.startAt.position,n.startAt.inclusive):null;return wT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function ET(n,e){let t=n.filters.concat([e]);return new Ji(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function u0(n,e,t){return new Ji(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function cm(n,e){return um(Ir(n),Ir(e))&&n.limitType===e.limitType}function B2(n){return`${vu(Ir(n))}|lt:${n.limitType}`}function Rd(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>L2(i)).join(", ")}]`),lm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Hd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Hd(i)).join(",")),`Target(${r})`}(Ir(n))}; limitType=${n.limitType})`}function dm(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ue.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of Vd(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){let u=IV(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Vd(r),i)||r.endAt&&!function(o,a,l){let u=IV(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Vd(r),i))}(n,e)}function j2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function H2(n){return(e,t)=>{let r=!1;for(let i of Vd(n)){let s=CQ(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function CQ(n,e,t){let r=n.field.isKeyField()?ue.comparator(e.key,t.key):function(s,o,a){let l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Xa(l,u):_e()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return _e()}}var Gs=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Tu(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return M2(this.inner)}size(){return this.innerSize}};var bQ=new Gt(ue.comparator);function Vr(){return bQ}var $2=new Gt(ue.comparator);function Pp(...n){let e=$2;for(let t of n)e=e.insert(t.key,t);return e}function q2(n){let e=$2;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function js(){return Lp()}function z2(){return Lp()}function Lp(){return new Gs(n=>n.toString(),(n,e)=>n.isEqual(e))}var IQ=new Gt(ue.comparator),DQ=new Ot(ue.comparator);function We(...n){let e=DQ;for(let t of n)e=e.add(t);return e}var SQ=new Ot(je);function nM(){return SQ}function rM(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hp(e)?"-0":e}}function W2(n){return{integerValue:""+n}}function G2(n,e){return I2(e)?W2(e):rM(n,e)}var qd=class{constructor(){this._=void 0}};function TQ(n,e,t){return n instanceof Ja?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&K0(s)&&(s=JA(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Yo?K2(n,e):n instanceof Ko?Q2(n,e):function(i,s){let o=Y2(i,s),a=MV(o)+MV(i.Pe);return cT(o)&&cT(i.Pe)?W2(a):rM(i.serializer,a)}(n,e)}function AQ(n,e,t){return n instanceof Yo?K2(n,e):n instanceof Ko?Q2(n,e):t}function Y2(n,e){return n instanceof el?function(r){return cT(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Ja=class extends qd{},Yo=class extends qd{constructor(e){super(),this.elements=e}};function K2(n,e){let t=Z2(e);for(let r of n.elements)t.some(i=>zs(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ko=class extends qd{constructor(e){super(),this.elements=e}};function Q2(n,e){let t=Z2(e);for(let r of n.elements)t=t.filter(i=>!zs(i,r));return{arrayValue:{values:t}}}var el=class extends qd{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function MV(n){return Kt(n.integerValue||n.doubleValue)}function Z2(n){return Wp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var wu=class{constructor(e,t){this.field=e,this.transform=t}};function MQ(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Yo&&i instanceof Yo||r instanceof Ko&&i instanceof Ko?Bd(r.elements,i.elements,zs):r instanceof el&&i instanceof el?zs(r.Pe,i.Pe):r instanceof Ja&&i instanceof Ja}(n.transform,e.transform)}var CT=class{constructor(e,t){this.version=e,this.transformResults=t}},an=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Qv(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var zd=class{};function X2(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new nl(n.key,an.none()):new tl(n.key,n.data,an.none());{let t=n.data,r=ar.empty(),i=new Ot(fn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new es(n.key,r,new Jr(i.toArray()),an.none())}}function xQ(n,e,t){n instanceof tl?function(i,s,o){let a=i.value.clone(),l=kV(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof es?function(i,s,o){if(!Qv(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=kV(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(J2(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Vp(n,e,t,r){return n instanceof tl?function(s,o,a,l){if(!Qv(s.precondition,o))return a;let u=s.value.clone(),h=RV(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof es?function(s,o,a,l){if(!Qv(s.precondition,o))return a;let u=RV(s.fieldTransforms,l,o),h=o.data;return h.setAll(J2(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(s,o,a){return Qv(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function kQ(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=Y2(r.transform,i||null);s!=null&&(t===null&&(t=ar.empty()),t.set(r.field,s))}return t||null}function xV(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Bd(r,i,(s,o)=>MQ(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var tl=class extends zd{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},es=class extends zd{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function J2(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function kV(n,e,t){let r=new Map;Ae(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,AQ(o,a,t[i]))}return r}function RV(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,TQ(s,o,e))}return r}var nl=class extends zd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Gp=class extends zd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Yp=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&xQ(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Vp(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Vp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=z2();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let l=X2(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(xe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),We())}isEqual(e){return this.batchId===e.batchId&&Bd(this.mutations,e.mutations,(t,r)=>xV(t,r))&&Bd(this.baseMutations,e.baseMutations,(t,r)=>xV(t,r))}},bT=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ae(e.mutations.length===r.length);let i=function(){return IQ}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var Kp=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var IT=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Cn,dt;function eU(n){switch(n){default:return _e();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function tU(n){if(n===void 0)return hn("GRPC error has no .code"),$.UNKNOWN;switch(n){case Cn.OK:return $.OK;case Cn.CANCELLED:return $.CANCELLED;case Cn.UNKNOWN:return $.UNKNOWN;case Cn.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Cn.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Cn.INTERNAL:return $.INTERNAL;case Cn.UNAVAILABLE:return $.UNAVAILABLE;case Cn.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Cn.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Cn.NOT_FOUND:return $.NOT_FOUND;case Cn.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Cn.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Cn.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Cn.ABORTED:return $.ABORTED;case Cn.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Cn.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Cn.DATA_LOSS:return $.DATA_LOSS;default:return _e()}}(dt=Cn||(Cn={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";var NV=null;function nU(){return new TextEncoder}var RQ=new ja([4294967295,4294967295],0);function PV(n){let e=nU().encode(n),t=new US;return t.update(e),new Uint8Array(t.digest())}function OV(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ja([t,r],0),new ja([i,s],0)]}var DT=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new pu(`Invalid padding: ${t}`);if(r<0)throw new pu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new pu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new pu(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ja.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(ja.fromNumber(r)));return i.compare(RQ)===1&&(i=new ja([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=PV(e),[r,i]=OV(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=PV(e),[r,i]=OV(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},pu=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Qp=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Zp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(xe.min(),i,new Gt(je),Vr(),We())}},Zp=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,We(),We(),We())}};var Ud=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},c0=class{constructor(e,t){this.targetId=e,this.me=t}},d0=class{constructor(e,t,r=mn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},h0=class{constructor(){this.fe=0,this.ge=LV(),this.pe=mn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=We(),t=We(),r=We();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:_e()}}),new Zp(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=LV()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ae(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},ST=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Vr(),this.qe=FV(),this.Qe=new Gt(je)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:_e()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(a0(s))if(r===0){let o=new ue(s.path);this.Ue(t,o,Dn.newNoDocument(o,xe.min()))}else Ae(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(t);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,u)}NV?.et(function(h,p,_,w,E){var S,x,H,Y,q,Q;let pe={localCacheCount:h,existenceFilterCount:p.count,databaseId:_.database,projectId:_.projectId},re=p.unchangedNames;return re&&(pe.bloomFilter={applied:E===0,hashCount:(S=re?.hashCount)!==null&&S!==void 0?S:0,bitmapLength:(Y=(H=(x=re?.bits)===null||x===void 0?void 0:x.bitmap)===null||H===void 0?void 0:H.length)!==null&&Y!==void 0?Y:0,padding:(Q=(q=re?.bits)===null||q===void 0?void 0:q.padding)!==null&&Q!==void 0?Q:0,mightContain:k=>{var I;return(I=w?.mightContain(k))!==null&&I!==void 0&&I}}),pe}(o,e.me,this.Le.tt(),a,l))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Qa(r).toUint8Array()}catch(l){if(l instanceof i0)return Xi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new DT(o,i,s)}catch(l){return Xi(l instanceof pu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&a0(a.target)){let l=new ue(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Dn.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=We();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{let u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Qp(e,t,this.Qe,this.ke,r);return this.ke=Vr(),this.qe=FV(),this.Qe=new Gt(je),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new h0,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ot(je),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||Z("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new h0),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function FV(){return new Gt(ue.comparator)}function LV(){return new Gt(ue.comparator)}var NQ={asc:"ASCENDING",desc:"DESCENDING"},PQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OQ={and:"AND",or:"OR"},TT=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function AT(n,e){return n.useProto3Json||lm(e)?e:{value:e}}function Wd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rU(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function FQ(n,e){return Wd(n,e.toTimestamp())}function pn(n){return Ae(!!n),xe.fromTimestamp(function(t){let r=Go(t);return new Xt(r.seconds,r.nanos)}(n))}function iM(n,e){return MT(n,e).canonicalString()}function MT(n,e){let t=function(i){return new ht(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function iU(n){let e=ht.fromString(n);return Ae(pU(e)),e}function Xp(n,e){return iM(n.databaseId,e.path)}function $s(n,e){let t=iU(e);if(t.get(1)!==n.databaseId.projectId)throw new K($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new K($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ue(aU(t))}function sU(n,e){return iM(n.databaseId,e)}function oU(n){let e=iU(n);return e.length===4?ht.emptyPath():aU(e)}function xT(n){return new ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function aU(n){return Ae(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function VV(n,e,t){return{name:Xp(n,e),fields:t.value.mapValue.fields}}function lU(n,e,t){let r=$s(n,e.name),i=pn(e.updateTime),s=e.createTime?pn(e.createTime):xe.min(),o=new ar({mapValue:{fields:e.fields}}),a=Dn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function LQ(n,e){return"found"in e?function(r,i){Ae(!!i.found),i.found.name,i.found.updateTime;let s=$s(r,i.found.name),o=pn(i.found.updateTime),a=i.found.createTime?pn(i.found.createTime):xe.min(),l=new ar({mapValue:{fields:i.found.fields}});return Dn.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(r,i){Ae(!!i.missing),Ae(!!i.readTime);let s=$s(r,i.missing),o=pn(i.readTime);return Dn.newNoDocument(s,o)}(n,e):_e()}function VQ(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:_e()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(Ae(h===void 0||typeof h=="string"),mn.fromBase64String(h||"")):(Ae(h===void 0||h instanceof Buffer||h instanceof Uint8Array),mn.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){let h=u.code===void 0?$.UNKNOWN:tU(u.code);return new K(h,u.message||"")}(o);t=new d0(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=$s(n,r.document.name),s=pn(r.document.updateTime),o=r.document.createTime?pn(r.document.createTime):xe.min(),a=new ar({mapValue:{fields:r.document.fields}}),l=Dn.newFoundDocument(i,s,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];t=new Ud(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=$s(n,r.document),s=r.readTime?pn(r.readTime):xe.min(),o=Dn.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Ud([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=$s(n,r.document),s=r.removedTargetIds||[];t=new Ud([],s,i,null)}else{if(!("filter"in e))return _e();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new IT(i,s),a=r.targetId;t=new c0(a,o)}}return t}function Jp(n,e){let t;if(e instanceof tl)t={update:VV(n,e.key,e.value)};else if(e instanceof nl)t={delete:Xp(n,e.key)};else if(e instanceof es)t={update:VV(n,e.key,e.data),updateMask:qQ(e.fieldMask)};else{if(!(e instanceof Gp))return _e();t={verify:Xp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Ja)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Yo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ko)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof el)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw _e()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:FQ(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:_e()}(n,e.precondition)),t}function kT(n,e){let t=e.currentDocument?function(s){return s.updateTime!==void 0?an.updateTime(pn(s.updateTime)):s.exists!==void 0?an.exists(s.exists):an.none()}(e.currentDocument):an.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)Ae(a.setToServerValue==="REQUEST_TIME"),l=new Ja;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];l=new Yo(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];l=new Ko(h)}else"increment"in a?l=new el(o,a.increment):_e();let u=fn.fromServerFormat(a.fieldPath);return new wu(u,l)}(n,i)):[];if(e.update){e.update.name;let i=$s(n,e.update.name),s=new ar({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(l){let u=l.fieldPaths||[];return new Jr(u.map(h=>fn.fromServerFormat(h)))}(e.updateMask);return new es(i,s,o,t,r)}return new tl(i,s,t,r)}if(e.delete){let i=$s(n,e.delete);return new nl(i,t)}if(e.verify){let i=$s(n,e.verify);return new Gp(i,t)}return _e()}function UQ(n,e){return n&&n.length>0?(Ae(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?pn(i.updateTime):pn(s);return o.isEqual(xe.min())&&(o=pn(s)),new CT(o,i.transformResults||[])}(t,e))):[]}function uU(n,e){return{documents:[sU(n,e.path)]}}function cU(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=sU(n,i);let s=function(u){if(u.length!==0)return fU(At.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(u){if(u.length!==0)return u.map(h=>function(_){return{field:Nd(_.field),direction:jQ(_.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=AT(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:i}}function dU(n){let e=oU(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ae(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(p){let _=hU(p);return _ instanceof At&&eM(_)?_.getFilters():[_]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(_=>function(E){return new yu(Pd(E.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(_))}(t.orderBy));let a=null;t.limit&&(a=function(p){let _;return _=typeof p=="object"?p.value:p,lm(_)?null:_}(t.limit));let l=null;t.startAt&&(l=function(p){let _=!!p.before,w=p.values||[];return new Ws(w,_)}(t.startAt));let u=null;return t.endAt&&(u=function(p){let _=!p.before,w=p.values||[];return new Ws(w,_)}(t.endAt)),U2(e,i,o,s,a,"F",l,u)}function BQ(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function hU(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Pd(t.unaryFilter.field);return at.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Pd(t.unaryFilter.field);return at.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Pd(t.unaryFilter.field);return at.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Pd(t.unaryFilter.field);return at.create(o,"!=",{nullValue:"NULL_VALUE"});default:return _e()}}(n):n.fieldFilter!==void 0?function(t){return at.create(Pd(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _e()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return At.create(t.compositeFilter.filters.map(r=>hU(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return _e()}}(t.compositeFilter.op))}(n):_e()}function jQ(n){return NQ[n]}function HQ(n){return PQ[n]}function $Q(n){return OQ[n]}function Nd(n){return{fieldPath:n.canonicalString()}}function Pd(n){return fn.fromServerFormat(n.fieldPath)}function fU(n){return n instanceof at?function(t){if(t.op==="=="){if(EV(t.value))return{unaryFilter:{field:Nd(t.field),op:"IS_NAN"}};if(wV(t.value))return{unaryFilter:{field:Nd(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(EV(t.value))return{unaryFilter:{field:Nd(t.field),op:"IS_NOT_NAN"}};if(wV(t.value))return{unaryFilter:{field:Nd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nd(t.field),op:HQ(t.op),value:t.value}}}(n):n instanceof At?function(t){let r=t.getFilters().map(i=>fU(i));return r.length===1?r[0]:{compositeFilter:{op:$Q(t.op),filters:r}}}(n):_e()}function qQ(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function pU(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Gd=class n{constructor(e,t,r,i,s=xe.min(),o=xe.min(),a=mn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var f0=class{constructor(e){this.ct=e}};function zQ(n,e){let t;if(e.document)t=lU(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=ue.fromSegments(e.noDocument.path),i=Cu(e.noDocument.readTime);t=Dn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return _e();{let r=ue.fromSegments(e.unknownDocument.path),i=Cu(e.unknownDocument.version);t=Dn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let s=new Xt(i[0],i[1]);return xe.fromTimestamp(s)}(e.readTime)),t}function UV(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:p0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Xp(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Wd(s,o.version.toTimestamp()),createTime:Wd(s,o.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Eu(e.version)};else{if(!e.isUnknownDocument())return _e();r.unknownDocument={path:t.path.toArray(),version:Eu(e.version)}}return r}function p0(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Eu(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Cu(n){let e=new Xt(n.seconds,n.nanoseconds);return xe.fromTimestamp(e)}function du(n,e){let t=(e.baseMutations||[]).map(s=>kT(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>kT(n.ct,s)),i=Xt.fromMillis(e.localWriteTimeMs);return new Yp(e.batchId,i,t,r)}function Op(n){let e=Cu(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Cu(n.lastLimboFreeSnapshotVersion):xe.min(),r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return Ae(s.documents.length===1),Ir(ih(oU(s.documents[0])))}(n.query):function(s){return Ir(dU(s))}(n.query),new Gd(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,mn.fromBase64String(n.resumeToken))}function mU(n,e){let t=Eu(e.snapshotVersion),r=Eu(e.lastLimboFreeSnapshotVersion),i;i=a0(e.target)?uU(n.ct,e.target):cU(n.ct,e.target)._t;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:vu(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function sM(n){let e=dU({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?u0(e,e.limit,"L"):e}function zS(n,e){return new Kp(e.largestBatchId,kT(n.ct,e.overlayMutation))}function BV(n,e){let t=e.path.lastSegment();return[n,br(e.path.popLast()),t]}function jV(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Eu(r.readTime),documentKey:br(r.documentKey.path),largestBatchId:r.largestBatchId}}var RT=class{getBundleMetadata(e,t){return HV(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Cu(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return HV(e).put(function(i){return{bundleId:i.id,createTime:Eu(pn(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return $V(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:sM(s.bundledQuery),readTime:Cu(s.readTime)}}(r)})}saveNamedQuery(e,t){return $V(e).put(function(i){return{name:i.name,readTime:Eu(pn(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function HV(n){return Nn(n,"bundles")}function $V(n){return Nn(n,"namedQueries")}var m0=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return xp(e).get(BV(this.userId,t)).next(r=>r?zS(this.serializer,r):null)}getOverlays(e,t){let r=js();return U.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((s,o)=>{let a=new Kp(t,o);i.push(this.ht(e,a))}),U.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(o=>i.add(br(o.getCollectionPath())));let s=[];return i.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(xp(e).j("collectionPathOverlayIndex",a))}),U.waitFor(s)}getOverlaysForCollection(e,t,r){let i=js(),s=br(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return xp(e).U("collectionPathOverlayIndex",o).next(a=>{for(let l of a){let u=zS(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let s=js(),o,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return xp(e).J({index:"collectionGroupOverlayIndex",range:a},(l,u,h)=>{let p=zS(this.serializer,u);s.size()<i||p.largestBatchId===o?(s.set(p.getKey(),p),o=p.largestBatchId):h.done()}).next(()=>s)}ht(e,t){return xp(e).put(function(i,s,o){let[a,l,u]=BV(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Jp(i.ct,o.mutation)}}(this.serializer,this.userId,t))}};function xp(n){return Nn(n,"documentOverlays")}var NT=class{Pt(e){return Nn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?mn.fromUint8Array(r):mn.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var zo=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Kt(e.integerValue));else if("doubleValue"in e){let r=Kt(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Hp(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Go(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Qa(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?k2(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Q0(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):_e()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Kt(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),ue.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};zo.vt=new zo;function WQ(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function qV(n){let e=64-function(r){let i=0;for(let s=0;s<8;++s){let o=WQ(255&r[s]);if(i+=o,o!==8)break}return i}(n);return Math.ceil(e/8)}var PT=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=qV(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=qV(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},OT=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},FT=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},hu=class{constructor(){this.jt=new PT,this.Ht=new OT(this.jt),this.Jt=new FT(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var fu=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Ha(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=zV(n.arrayValue,e.arrayValue),t!==0?t:(t=zV(n.directionalValue,e.directionalValue),t!==0?t:ue.comparator(n.documentKey,e.documentKey)))}function zV(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var g0=class{constructor(e){this.Xt=new Ot((t,r)=>fn.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Ae(e.collectionGroup===this.collectionId),this.nn)return!1;let t=rT(e);if(t!==void 0&&!this.sn(t))return!1;let r=uu(e),i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let l=r[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<r.length;++s){let a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ot(fn.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Ld(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Ld(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Ld(r.field,r.dir==="asc"?0:1)));return new jd(jd.UNKNOWN_ID,this.collectionId,t,jp.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function gU(n){var e,t;if(Ae(n instanceof at||n instanceof At),n instanceof at){if(n instanceof o0){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>at.create(n.field,"==",s)))||[];return At.create(i,"or")}return n}let r=n.filters.map(i=>gU(i));return At.create(r,n.op)}function GQ(n){if(n.getFilters().length===0)return[];let e=UT(gU(n));return Ae(_U(e)),LT(e)||VT(e)?[e]:e.getFilters()}function LT(n){return n instanceof at}function VT(n){return n instanceof At&&eM(n)}function _U(n){return LT(n)||VT(n)||function(t){if(t instanceof At&&dT(t)){for(let r of t.getFilters())if(!LT(r)&&!VT(r))return!1;return!0}return!1}(n)}function UT(n){if(Ae(n instanceof at||n instanceof At),n instanceof at)return n;if(n.filters.length===1)return UT(n.filters[0]);let e=n.filters.map(r=>UT(r)),t=At.create(e,n.op);return t=_0(t),_U(t)?t:(Ae(t instanceof At),Ae($d(t)),Ae(t.filters.length>1),t.filters.reduce((r,i)=>oM(r,i)))}function oM(n,e){let t;return Ae(n instanceof at||n instanceof At),Ae(e instanceof at||e instanceof At),t=n instanceof at?e instanceof at?function(i,s){return At.create([i,s],"and")}(n,e):WV(n,e):e instanceof at?WV(e,n):function(i,s){if(Ae(i.filters.length>0&&s.filters.length>0),$d(i)&&$d(s))return F2(i,s.getFilters());let o=dT(i)?i:s,a=dT(i)?s:i,l=o.filters.map(u=>oM(u,a));return At.create(l,"or")}(n,e),_0(t)}function WV(n,e){if($d(e))return F2(e,n.getFilters());{let t=e.filters.map(r=>oM(n,r));return At.create(t,"or")}}function _0(n){if(Ae(n instanceof at||n instanceof At),n instanceof at)return n;let e=n.getFilters();if(e.length===1)return _0(e[0]);if(P2(n))return n;let t=e.map(i=>_0(i)),r=[];return t.forEach(i=>{i instanceof at?r.push(i):i instanceof At&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:At.create(r,n.op)}var BT=class{constructor(){this.un=new em}addToCollectionParentIndex(e,t){return this.un.add(t),U.resolve()}getCollectionParents(e,t){return U.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return U.resolve()}deleteFieldIndex(e,t){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,t){return U.resolve()}getDocumentsMatchingTarget(e,t){return U.resolve(null)}getIndexType(e,t){return U.resolve(0)}getFieldIndexes(e,t){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,t){return U.resolve(Ai.min())}getMinOffsetFromCollectionGroup(e,t){return U.resolve(Ai.min())}updateCollectionGroup(e,t,r){return U.resolve()}updateIndexEntries(e,t){return U.resolve()}},em=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ot(ht.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ot(ht.comparator)).toArray()}};var $v=new Uint8Array(0),jT=class{constructor(e,t){this.databaseId=t,this.cn=new em,this.ln=new Gs(r=>vu(r),(r,i)=>um(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let s={collectionId:r,parent:br(i)};return GV(e).put(s)}return U.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[v2(t),""],!1,!0);return GV(e).U(i).next(s=>{for(let o of s){if(o.collectionId!==t)break;r.push(Bs(o.parent))}return r})}addFieldIndex(e,t){let r=kp(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(t);delete i.indexId;let s=r.add(i);if(t.indexState){let o=Md(e);return s.next(a=>{o.put(jV(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){let r=kp(e),i=Md(e),s=Ad(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=kp(e),r=Ad(e),i=Md(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return U.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let s=new g0(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){let r=Ad(e),i=!0,s=new Map;return U.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=We(),a=[];return U.forEach(s,(l,u)=>{Z("IndexedDbIndexManager",`Using index ${function(q){return`id=${q.indexId}|cg=${q.collectionGroup}|f=${q.fields.map(Q=>`${Q.fieldPath}:${Q.kind}`).join(",")}`}(l)} to execute ${vu(t)}`);let h=function(q,Q){let pe=rT(Q);if(pe===void 0)return null;for(let re of l0(q,pe.fieldPath))switch(re.op){case"array-contains-any":return re.value.arrayValue.values||[];case"array-contains":return[re.value]}return null}(u,l),p=function(q,Q){let pe=new Map;for(let re of uu(Q))for(let k of l0(q,re.fieldPath))switch(k.op){case"==":case"in":pe.set(re.fieldPath.canonicalString(),k.value);break;case"not-in":case"!=":return pe.set(re.fieldPath.canonicalString(),k.value),Array.from(pe.values())}return null}(u,l),_=function(q,Q){let pe=[],re=!0;for(let k of uu(Q)){let I=k.kind===0?SV(q,k.fieldPath,q.startAt):TV(q,k.fieldPath,q.startAt);pe.push(I.value),re&&(re=I.inclusive)}return new Ws(pe,re)}(u,l),w=function(q,Q){let pe=[],re=!0;for(let k of uu(Q)){let I=k.kind===0?TV(q,k.fieldPath,q.endAt):SV(q,k.fieldPath,q.endAt);pe.push(I.value),re&&(re=I.inclusive)}return new Ws(pe,re)}(u,l),E=this.In(l,u,_),S=this.In(l,u,w),x=this.Tn(l,u,p),H=this.En(l.indexId,h,E,_.inclusive,S,w.inclusive,x);return U.forEach(H,Y=>r.G(Y,t.limit).next(q=>{q.forEach(Q=>{let pe=ue.fromSegments(Q.documentKey);o.has(pe)||(o=o.add(pe),a.push(pe))})}))}).next(()=>a)}return U.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=GQ(At.create(e.filters,"and")).map(r=>wT(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){let l=(t!=null?t.length:1)*Math.max(r.length,s.length),u=l/(t!=null?t.length:1),h=[];for(let p=0;p<l;++p){let _=t?this.dn(t[p/u]):$v,w=this.An(e,_,r[p%u],i),E=this.Rn(e,_,s[p%u],o),S=a.map(x=>this.An(e,_,x,!0));h.push(...this.createRange(w,E,S))}return h}An(e,t,r,i){let s=new fu(e,ue.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){let s=new fu(e,ue.empty(),t,r);return i?s.Zt():s}Pn(e,t){let r=new g0(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2,i=this.hn(t);return U.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new Ot(fn.comparator),h=!1;for(let p of l.filters)for(let _ of p.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?h=!0:u=u.add(_.field));for(let p of l.orderBy)p.field.isKeyField()||(u=u.add(p.field));return u.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new hu;for(let i of uu(e)){let s=t.data.field(i.fieldPath);if(s==null)return null;let o=r.Yt(i.kind);zo.vt.It(s,o)}return r.zt()}dn(e){let t=new hu;return zo.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new hu;return zo.vt.It(_u(this.databaseId,t),r.Yt(function(s){let o=uu(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new hu);let s=0;for(let o of uu(e)){let a=r[s++];for(let l of i)if(this.fn(t,o.fieldPath)&&Wp(a))i=this.gn(i,o,a);else{let u=l.Yt(o.kind);zo.vt.It(a,u)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let a of i){let l=new hu;l.seed(a.zt()),zo.vt.It(o,l.Yt(t.kind)),s.push(l)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof at&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=kp(e),i=Md(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{let o=[];return U.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(h,p){let _=p?new jp(p.sequenceNumber,new Ai(Cu(p.readTime),new ue(Bs(p.documentKey)),p.largestBatchId)):jp.empty(),w=h.fields.map(([E,S])=>new Ld(fn.fromServerFormat(E),S));return new jd(h.indexId,h.collectionGroup,w,_)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:je(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=kp(e),s=Md(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>U.forEach(a,l=>s.put(jV(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){let r=new Map;return U.forEach(t,(i,s)=>{let o=r.get(i.collectionGroup);return(o?U.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),U.forEach(a,l=>this.wn(e,i,l).next(u=>{let h=this.Sn(s,l);return u.isEqual(h)?U.resolve():this.bn(e,s,l,u,h)}))))})}Dn(e,t,r,i){return Ad(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Ad(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Ad(e),s=new Ot(Ha);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new fu(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new Ot(Ha),i=this.Vn(t,e);if(i==null)return r;let s=rT(t);if(s!=null){let o=e.data.field(s.fieldPath);if(Wp(o))for(let a of o.arrayValue.values||[])r=r.add(new fu(t.indexId,e.key,this.dn(a),i))}else r=r.add(new fu(t.indexId,e.key,$v,i));return r}bn(e,t,r,i,s){Z("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let o=[];return function(l,u,h,p,_){let w=l.getIterator(),E=u.getIterator(),S=Td(w),x=Td(E);for(;S||x;){let H=!1,Y=!1;if(S&&x){let q=h(S,x);q<0?Y=!0:q>0&&(H=!0)}else S!=null?Y=!0:H=!0;H?(p(x),x=Td(E)):Y?(_(S),S=Td(w)):(S=Td(w),x=Td(E))}}(i,s,Ha,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),U.waitFor(o)}yn(e){let t=1;return Md(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Ha(o,a)).filter((o,a,l)=>!a||Ha(o,l[a-1])!==0);let i=[];i.push(e);for(let o of r){let a=Ha(o,e),l=Ha(o,t);if(a===0)i[0]=e.Zt();else if(a>0&&l<0)i.push(o),i.push(o.Zt());else if(l>0)break}i.push(t);let s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];let a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,$v,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,$v,[]];s.push(IDBKeyRange.bound(a,l))}return s}Cn(e,t){return Ha(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(YV)}getMinOffset(e,t){return U.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||_e())).next(YV)}};function GV(n){return Nn(n,"collectionParents")}function Ad(n){return Nn(n,"indexEntries")}function kp(n){return Nn(n,"indexConfiguration")}function Md(n){return Nn(n,"indexState")}function YV(n){Ae(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;QA(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ai(e.readTime,e.documentKey,t)}var KV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ti=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function yU(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId),a=0,l=r.J({range:o},(h,p,_)=>(a++,_.delete()));s.push(l.next(()=>{Ae(a===1)}));let u=[];for(let h of t.mutations){let p=D2(e,h.key.path,t.batchId);s.push(i.delete(p)),u.push(h.key)}return U.waitFor(s).next(()=>u)}function y0(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw _e();e=n.noDocument}return JSON.stringify(e).length}Ti.DEFAULT_COLLECTION_PERCENTILE=10,Ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ti.DEFAULT=new Ti(41943040,Ti.DEFAULT_COLLECTION_PERCENTILE,Ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ti.DISABLED=new Ti(-1,0,0);var v0=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Ae(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new n(s,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $a(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let s=Od(e),o=$a(e);return o.add({}).next(a=>{Ae(typeof a=="number");let l=new Yp(a,t,r,i),u=function(w,E,S){let x=S.baseMutations.map(Y=>Jp(w.ct,Y)),H=S.mutations.map(Y=>Jp(w.ct,Y));return{userId:E,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:x,mutations:H}}(this.serializer,this.userId,l),h=[],p=new Ot((_,w)=>je(_.canonicalString(),w.canonicalString()));for(let _ of i){let w=D2(this.userId,_.key.path,a);p=p.add(_.key.path.popLast()),h.push(o.put(u)),h.push(s.put(w,JK))}return p.forEach(_=>{h.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),U.waitFor(h).next(()=>l)})}lookupMutationBatch(e,t){return $a(e).get(t).next(r=>r?(Ae(r.userId===this.userId),du(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?U.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return $a(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(Ae(a.batchId>=r),s=du(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return $a(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $a(e).U("userMutationsIndex",t).next(r=>r.map(i=>du(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Gv(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Od(e).J({range:i},(o,a,l)=>{let[u,h,p]=o,_=Bs(h);if(u===this.userId&&t.path.isEqual(_))return $a(e).get(p).next(w=>{if(!w)throw _e();Ae(w.userId===this.userId),s.push(du(this.serializer,w))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ot(je),i=[];return t.forEach(s=>{let o=Gv(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Od(e).J({range:a},(u,h,p)=>{let[_,w,E]=u,S=Bs(w);_===this.userId&&s.path.isEqual(S)?r=r.add(E):p.done()});i.push(l)}),U.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=Gv(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new Ot(je);return Od(e).J({range:o},(l,u,h)=>{let[p,_,w]=l,E=Bs(_);p===this.userId&&r.isPrefixOf(E)?E.length===i&&(a=a.add(w)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(s=>{i.push($a(e).get(s).next(o=>{if(o===null)throw _e();Ae(o.userId===this.userId),r.push(du(this.serializer,o))}))}),U.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return yU(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),U.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return U.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Od(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){let l=Bs(s[1]);i.push(l)}else a.done()}).next(()=>{Ae(i.length===0)})})}containsKey(e,t){return vU(e,this.userId,t)}Nn(e){return wU(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function vU(n,e,t){let r=Gv(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return Od(n).J({range:s,H:!0},(a,l,u)=>{let[h,p,_]=a;h===e&&p===i&&(o=!0),u.done()}).next(()=>o)}function $a(n){return Nn(n,"mutations")}function Od(n){return Nn(n,"documentMutations")}function wU(n){return Nn(n,"mutationQueues")}var Yd=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var HT=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new Yd(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>xe.fromTimestamp(new Xt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>xd(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Ae(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,s=[];return xd(e).J((o,a)=>{let l=Op(a);l.sequenceNumber<=t&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>U.waitFor(s)).next(()=>i)}forEachTarget(e,t){return xd(e).J((r,i)=>{let s=Op(i);t(s)})}qn(e){return QV(e).get("targetGlobalKey").next(t=>(Ae(t!==null),t))}Qn(e,t){return QV(e).put("targetGlobalKey",t)}Kn(e,t){return xd(e).put(mU(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=vu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return xd(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{let u=Op(a);um(t,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,t,r){let i=[],s=qa(e);return t.forEach(o=>{let a=br(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),U.waitFor(i)}removeMatchingKeys(e,t,r){let i=qa(e);return U.forEach(t,s=>{let o=br(s.path);return U.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){let r=qa(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=qa(e),s=We();return i.J({range:r,H:!0},(o,a,l)=>{let u=Bs(o[1]),h=new ue(u);s=s.add(h)}).next(()=>s)}containsKey(e,t){let r=br(t.path),i=IDBKeyRange.bound([r],[v2(r)],!1,!0),s=0;return qa(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,t){return xd(e).get(t).next(r=>r?Op(r):null)}};function xd(n){return Nn(n,"targets")}function QV(n){return Nn(n,"targetGlobal")}function qa(n){return Nn(n,"targetDocuments")}function ZV([n,e],[t,r]){let i=je(n,t);return i===0?je(e,r):i}var $T=class{constructor(e){this.Un=e,this.buffer=new Ot(ZV),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();ZV(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},qT=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Z("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){sl(t)?Z("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield il(t)}yield this.Hn(3e5)}))}},zT=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return U.resolve(Xr.oe);let r=new $T(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Z("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(KV)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KV):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,l,u,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(u=Date.now(),kd()<=gi.DEBUG&&Z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${p} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}};function YQ(n,e){return new zT(n,e)}var WT=class{constructor(e,t){this.db=e,this.garbageCollector=YQ(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return qv(e,r)}removeReference(e,t,r){return qv(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return qv(e,t)}nr(e,t){return function(i,s){let o=!1;return wU(i).Y(a=>vU(i,a,s).next(l=>(l&&(o=!0),U.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.tr(e,(o,a)=>{if(a<=t){let l=this.nr(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,xe.min()),qa(e).delete(function(p){return[0,br(p.path)]}(o))))});i.push(l)}}).next(()=>U.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return qv(e,t)}tr(e,t){let r=qa(e),i,s=Xr.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==Xr.oe&&t(new ue(Bs(i)),s),s=u,i=l):s=Xr.oe}).next(()=>{s!==Xr.oe&&t(new ue(Bs(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function qv(n,e){return qa(n).put(function(r,i){return{targetId:0,path:br(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var w0=class{constructor(){this.changes=new Gs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?U.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var GT=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return lu(e).put(r)}removeEntry(e,t,r){return lu(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],p0(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Dn.newInvalidDocument(t);return lu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Rp(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:Dn.newInvalidDocument(t)};return lu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Rp(t))},(i,s)=>{r={document:this.ir(t,s),size:y0(s)}}).next(()=>r)}getEntries(e,t){let r=Vr();return this._r(e,t,(i,s)=>{let o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=Vr(),i=new Gt(ue.comparator);return this._r(e,t,(s,o)=>{let a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,y0(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return U.resolve();let i=new Ot(e2);t.forEach(l=>i=i.add(l));let s=IDBKeyRange.bound(Rp(i.first()),Rp(i.last())),o=i.getIterator(),a=o.getNext();return lu(e).J({index:"documentKeyIndex",range:s},(l,u,h)=>{let p=ue.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&e2(a,p)<0;)r(a,null),a=o.getNext();a&&a.isEqual(p)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?h.$(Rp(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){let o=t.path,a=[o.popLast().toArray(),o.lastSegment(),p0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lu(e).U(IDBKeyRange.bound(a,l,!0)).next(u=>{s?.incrementDocumentReadCount(u.length);let h=Vr();for(let p of u){let _=this.ir(ue.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);_.isFoundDocument()&&(dm(t,_)||i.has(_.key))&&(h=h.insert(_.key,_))}return h})}getAllFromCollectionGroup(e,t,r,i){let s=Vr(),o=JV(t,r),a=JV(t,Ai.max());return lu(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,h)=>{let p=this.ir(ue.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(p.key,p),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new YT(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return XV(e).get("remoteDocumentGlobalKey").next(t=>(Ae(!!t),t))}rr(e,t){return XV(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=zQ(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(xe.min())))return r}return Dn.newInvalidDocument(e)}};function EU(n){return new GT(n)}var YT=class extends w0{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Gs(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Ot((s,o)=>je(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){let l=UV(this.cr.serializer,o);i=i.add(s.path.popLast());let u=y0(l);r+=u-a.size,t.push(this.cr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){let l=UV(this.cr.serializer,o.convertToNoDocument(xe.min()));t.push(this.cr.addEntry(e,s,l))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),U.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function XV(n){return Nn(n,"remoteDocumentGlobal")}function lu(n){return Nn(n,"remoteDocumentsV14")}function Rp(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function JV(n,e){let t=e.documentKey.path.toArray();return[n,p0(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function e2(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=je(t[s],r[s]),i)return i;return i=je(t.length,r.length),i||(i=je(t[t.length-2],r[r.length-2]),i||je(t[t.length-1],r[r.length-1]))}var KT=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var E0=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Vp(r.mutation,i,Jr.empty(),Xt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,We()).next(()=>r))}getLocalViewOfDocuments(e,t,r=We()){let i=js();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Pp();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=js();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,We()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Vr(),o=Lp(),a=function(){return Lp()}();return t.forEach((l,u)=>{let h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof es)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Vp(h.mutation,u,h.mutation.getFieldMask(),Xt.now())):o.set(u.key,Jr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),t.forEach((u,h)=>{var p;return a.set(u,new KT(h,(p=o.get(u))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Lp(),i=new Gt((o,a)=>o-a),s=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(l=>{let u=t.get(l);if(u===null)return;let h=r.get(l)||Jr.empty();h=a.applyToLocalView(u,h),r.set(l,h);let p=(i.get(a.batchId)||We()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),u=l.key,h=l.value,p=z2();h.forEach(_=>{if(!s.has(_)){let w=X2(t.get(_),r.get(_));w!==null&&p.set(_,w),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return ue.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):tM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):U.resolve(js()),a=-1,l=s;return o.next(u=>U.forEach(u,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(_=>{l=l.insert(h,_)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,We())).next(h=>({batchId:a,changes:q2(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ue(t)).next(r=>{let i=Pp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Pp();return this.indexManager.getCollectionParents(e,s).next(a=>U.forEach(a,l=>{let u=function(p,_){return new Ji(_,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((p,_)=>{o=o.insert(p,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,u)=>{let h=u.getKey();o.get(h)===null&&(o=o.insert(h,Dn.newInvalidDocument(h)))});let a=Pp();return o.forEach((l,u)=>{let h=s.get(l);h!==void 0&&Vp(h.mutation,u,Jr.empty(),Xt.now()),dm(t,u)&&(a=a.insert(l,u))}),a})}};var QT=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return U.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:pn(i.createTime)}}(t)),U.resolve()}getNamedQuery(e,t){return U.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:sM(i.bundledQuery),readTime:pn(i.readTime)}}(t)),U.resolve()}};var ZT=class{constructor(){this.overlays=new Gt(ue.comparator),this.Ir=new Map}getOverlay(e,t){return U.resolve(this.overlays.get(t))}getOverlays(e,t){let r=js();return U.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),U.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,t,r){let i=js(),s=t.length+1,o=new ue(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return U.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Gt((u,h)=>u-h),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=js(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}let a=js(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return U.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Kp(t,r));let s=this.Ir.get(t);s===void 0&&(s=We(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var XT=class{constructor(){this.sessionToken=mn.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,U.resolve()}};var tm=class{constructor(){this.Tr=new Ot(bn.Er),this.dr=new Ot(bn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new bn(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new bn(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new ue(new ht([])),r=new bn(t,e),i=new bn(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new ue(new ht([])),r=new bn(t,e),i=new bn(t,e+1),s=We();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new bn(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},bn=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ue.comparator(e.key,t.key)||je(e.wr,t.wr)}static Ar(e,t){return je(e.wr,t.wr)||ue.comparator(e.key,t.key)}};var JT=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ot(bn.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Yp(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new bn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,t){return U.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new bn(t,0),i=new bn(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ot(je);return t.forEach(i=>{let s=new bn(i,0),o=new bn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;ue.isDocumentKey(s)||(s=s.child(""));let o=new bn(new ue(s),0),a=new Ot(je);return this.br.forEachWhile(l=>{let u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),U.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ae(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(t.mutations,i=>{let s=new bn(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new bn(t,0),i=this.br.firstAfterOrEqual(r);return U.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var eA=class{constructor(e){this.Mr=e,this.docs=function(){return new Gt(ue.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return U.resolve(r?r.document.mutableCopy():Dn.newInvalidDocument(t))}getEntries(e,t){let r=Vr();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Dn.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Vr(),o=t.path,a=new ue(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||QA(E2(h),r)<=0||(i.has(h.key)||dm(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,t,r,i){_e()}Or(e,t){return U.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new tA(this)}getSize(e){return U.resolve(this.size)}},tA=class extends w0{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),U.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var nA=class{constructor(e){this.persistence=e,this.Nr=new Gs(t=>vu(t),um),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new tm,this.targetCount=0,this.kr=Yd.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),U.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Yd(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,U.resolve()}updateTargetData(e,t){return this.Kn(t),U.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),U.waitFor(s).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return U.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),U.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),U.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return U.resolve(r)}containsKey(e,t){return U.resolve(this.Br.containsKey(t))}};var C0=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Xr(0),this.Kr=!1,this.Kr=!0,this.$r=new XT,this.referenceDelegate=e(this),this.Ur=new nA(this),this.indexManager=new BT,this.remoteDocumentCache=function(i){return new eA(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new f0(t),this.Gr=new QT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ZT,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new JT(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){Z("MemoryPersistence","Starting transaction:",e);let i=new rA(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},rA=class extends t0{constructor(e){super(),this.currentSequenceNumber=e}},b0=class n{constructor(e){this.persistence=e,this.Jr=new tm,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw _e()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),U.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{let i=ue.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,xe.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return U.or([()=>U.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var iA=class{constructor(e){this.serializer=e}O(e,t,r,i){let s=new n0("createOrUpgrade",t);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gV,{unique:!0}),l.createObjectStore("documentMutations")}(e),t2(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=U.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),t2(e)),o=o.next(()=>function(l){let u=l.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:xe.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store("mutations").U().next(h=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gV,{unique:!0});let p=u.store("mutations"),_=h.map(w=>p.put(w));return U.waitFor(_)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){let u=l.createObjectStore("documentOverlays",{keyPath:dQ});u.createIndex("collectionPathOverlayIndex",hQ,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",fQ,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){let u=l.createObjectStore("remoteDocumentsV14",{keyPath:eQ});u.createIndex("documentKeyIndex",tQ),u.createIndex("collectionGroupIndex",nQ)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:aQ}).createIndex("sequenceNumberIndex",lQ,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:uQ}).createIndex("documentKeyIndex",cQ,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=y0(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>U.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>U.forEach(a,l=>{Ae(l.userId===s.userId);let u=du(this.serializer,l);return yU(e,s.userId,u).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let s=[];return r.J((o,a)=>{let l=new ht(o),u=function(p){return[0,br(p)]}(l);s.push(t.get(u).next(h=>h?U.resolve():(p=>t.put({targetId:0,path:br(p),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>U.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:oQ});let r=t.store("collectionParents"),i=new em,s=o=>{if(i.add(o)){let a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:br(l)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{let l=new ht(o);return s(l.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,l],u)=>{let h=Bs(a);return s(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let s=Op(i),o=mU(this.serializer,s);return t.put(o)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{let a=t.store("remoteDocumentsV14"),l=function(p){return p.document?new ue(ht.fromString(p.document.name).popFirst(5)):p.noDocument?ue.fromSegments(p.noDocument.path):p.unknownDocument?ue.fromSegments(p.unknownDocument.path):_e()}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>U.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=EU(this.serializer),s=new C0(b0.Zr,this.serializer.ct);return r.U().next(o=>{let a=new Map;return o.forEach(l=>{var u;let h=(u=a.get(l.userId))!==null&&u!==void 0?u:We();du(this.serializer,l).keys().forEach(p=>h=h.add(p)),a.set(l.userId,h)}),U.forEach(a,(l,u)=>{let h=new In(u),p=m0.lt(this.serializer,h),_=s.getIndexManager(h),w=v0.lt(h,this.serializer,_,s.referenceDelegate);return new E0(i,w,p,_).recalculateAndSaveOverlaysForDocumentKeys(new $p(t,Xr.oe),l).next()})})}};function t2(n){n.createObjectStore("targetDocuments",{keyPath:iQ}).createIndex("documentTargetsIndex",sQ,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",rQ,{unique:!0}),n.createObjectStore("targetGlobal")}var WS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",sA=class n{constructor(e,t,r,i,s,o,a,l,u,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=u,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=_=>Promise.resolve(),!n.D())throw new K($.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new WT(this,i),this.Ai=t+"main",this.serializer=new f0(l),this.Ri=new Ka(this.Ai,this.hi,new iA(this.serializer)),this.$r=new NT,this.Ur=new HT(this.referenceDelegate,this.serializer),this.remoteDocumentCache=EU(this.serializer),this.Gr=new RT,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&hn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new K($.FAILED_PRECONDITION,WS);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Xr(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>N(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>N(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>zv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(sl(e))return Z("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Z("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Np(e).get("owner").next(t=>U.resolve(this.vi(t)))}Ci(e){return zv(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=Nn(t,"clientMetadata");return r.U().next(i=>{let s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return U.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?U.resolve(!0):Np(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new K($.FAILED_PRECONDITION,WS);return!1}}return!(!this.networkEnabled||!this.inForeground)||zv(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&Z("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new $p(e,Xr.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>zv(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return v0.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new jT(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return m0.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){Z("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",s=function(l){return l===17?gQ:l===16?mQ:l===15?XA:l===14?A2:l===13?T2:l===12?pQ:l===11?S2:void _e()}(this.hi),o;return this.Ri.runTransaction(e,i,s,a=>(o=new $p(a,this.Qr?this.Qr.next():Xr.oe),t==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw hn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new K($.FAILED_PRECONDITION,C2);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return Np(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new K($.FAILED_PRECONDITION,WS)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Np(e).put("owner",t)}static D(){return Ka.D()}bi(e){let t=Np(e);return t.get("owner").next(r=>this.vi(r)?(Z("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):U.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(hn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;jC()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return Z("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return hn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){hn("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Np(n){return Nn(n,"owner")}function zv(n){return Nn(n,"clientMetadata")}function aM(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var oA=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=We(),i=We();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var aA=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var I0=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return jC()?8:b2(Cf())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new aA;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(kd()<=gi.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",Rd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(kd()<=gi.DEBUG&&Z("QueryEngine","Query:",Rd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(kd()<=gi.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",Rd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ir(t))):U.resolve())}Yi(e,t){if(AV(t))return U.resolve(null);let r=Ir(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=u0(t,null,"F"),r=Ir(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=We(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{let u=this.ts(t,a);return this.ns(t,u,o,l.readTime)?this.Yi(e,u0(t,null,"F")):this.rs(e,u,t,l)}))})))}Zi(e,t,r,i){return AV(t)||i.isEqual(xe.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?U.resolve(null):(kd()<=gi.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Rd(t)),this.rs(e,o,t,w2(i,-1)).next(a=>a))})}ts(e,t){let r=new Ot(H2(e));return t.forEach((i,s)=>{dm(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return kd()<=gi.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",Rd(t)),this.Ji.getDocumentsMatchingQuery(e,t,Ai.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var lA=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Gt(je),this._s=new Gs(s=>vu(s),um),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new E0(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function CU(n,e,t,r){return new lA(n,e,t,r)}function bU(n,e){return N(this,null,function*(){let t=le(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],l=We();for(let u of i){o.push(u.batchId);for(let h of u.mutations)l=l.add(h.key)}for(let u of s){a.push(u.batchId);for(let h of u.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})})}function KQ(n,e){let t=le(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){let p=u.batch,_=p.keys(),w=U.resolve();return _.forEach(E=>{w=w.next(()=>h.getEntry(l,E)).next(S=>{let x=u.docVersions.get(E);Ae(x!==null),S.version.compareTo(x)<0&&(p.applyToRemoteDocument(S,u),S.isValidDocument()&&(S.setReadTime(u.commitVersion),h.addEntry(S)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=We();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function IU(n){let e=le(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function QQ(n,e){let t=le(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let _=i.get(p);if(!_)return;a.push(t.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(s,h.addedDocuments,p)));let w=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(mn.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):h.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(h.resumeToken,r)),i=i.insert(p,w),function(S,x,H){return S.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(_,w,h)&&a.push(t.Ur.updateTargetData(s,w))});let l=Vr(),u=We();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(DU(s,o,e.documentUpdates).next(h=>{l=h.Ps,u=h.Is})),!r.isEqual(xe.min())){let h=t.Ur.getLastRemoteSnapshotVersion(s).next(p=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return U.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(t.os=i,s))}function DU(n,e,t){let r=We(),i=We();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Vr();return t.forEach((a,l)=>{let u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(xe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Z("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function ZQ(n,e){let t=le(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Kd(n,e){let t=le(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,U.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Gd(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Qd(n,e,t){return N(this,null,function*(){let r=le(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!sl(o))throw o;Z("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function D0(n,e,t){let r=le(n),i=xe.min(),s=We();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){let p=le(l),_=p._s.get(h);return _!==void 0?U.resolve(p.os.get(_)):p.Ur.getTargetData(u,h)}(r,o,Ir(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:xe.min(),t?s:We())).next(a=>(AU(r,j2(e),a),{documents:a,Ts:s})))}function SU(n,e){let t=le(n),r=le(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function TU(n,e){let t=le(n),r=t.us.get(e)||xe.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,w2(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(AU(t,e,i),i))}function AU(n,e,t){let r=n.us.get(e)||xe.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function XQ(n,e,t,r){return N(this,null,function*(){let i=le(n),s=We(),o=Vr();for(let u of t){let h=e.Es(u.metadata.name);u.document&&(s=s.add(h));let p=e.ds(u);p.setReadTime(e.As(u.metadata.readTime)),o=o.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),l=yield Kd(i,function(h){return Ir(ih(ht.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>DU(u,a,o).next(h=>(a.apply(u),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(u,l.targetId).next(()=>i.Ur.addMatchingKeys(u,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,h.Ps,h.Is)).next(()=>h.Ps)))})}function JQ(r,i){return N(this,arguments,function*(n,e,t=We()){let s=yield Kd(n,Ir(sM(e.bundledQuery))),o=le(n);return o.persistence.runTransaction("Save named query","readwrite",a=>{let l=pn(e.readTime);if(s.snapshotVersion.compareTo(l)>=0)return o.Gr.saveNamedQuery(a,e);let u=s.withResumeToken(mn.EMPTY_BYTE_STRING,l);return o.os=o.os.insert(u.targetId,u),o.Ur.updateTargetData(a,u).next(()=>o.Ur.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.Ur.addMatchingKeys(a,t,s.targetId)).next(()=>o.Gr.saveNamedQuery(a,e))})})}function n2(n,e){return`firestore_clients_${n}_${e}`}function r2(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function GS(n,e){return`firestore_targets_${n}_${e}`}var S0=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new K(i.error.code,i.error.message))),o?new n(e,t,i.state,s):(hn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Up=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new K(r.error.code,r.error.message))),s?new n(e,r.state,i):(hn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},T0=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=nM();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=I2(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new n(e,s):(hn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},uA=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(hn("SharedClientState",`Failed to parse online state: ${e}`),null)}},nm=class{constructor(){this.activeTargetIds=nM()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Bp=class{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Gt(je),this.started=!1,this.bs=[];let o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=n2(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new nm),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(n2(this.persistenceKey,r));if(i){let s=T0.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(GS(this.persistenceKey,e));if(i){let s=Up.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(GS(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return Z("SharedClientState","READ",e,t),t}setItem(e,t){Z("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Z("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(Z("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void hn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(s){let o=Xr.oe;if(s!=null)try{let a=JSON.parse(s);Ae(typeof a=="number"),o=a}catch(a){hn("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(t.newValue);r!==Xr.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new S0(this.currentUser,e,t,r),s=r2(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){let t=r2(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=GS(this.persistenceKey,e),s=new Up(e,t,r);this.setItem(i,s.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return T0.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return S0.Rs(new In(s),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return Up.Rs(i,t)}Ls(e){return uA.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);Z("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=nM();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},A0=class{constructor(){this.so=new nm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new nm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var cA=class{_o(e){}shutdown(){}};var M0=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){Z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Wv=null;function YS(){return Wv===null?Wv=function(){return 268435456+Math.round(2147483648*Math.random())}():Wv++,"0x"+Wv.toString(16)}var eZ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var dA=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var or="WebChannelConnection",hA=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=YS(),l=this.xo(t,r.toUriEncodedString());Z("RestConnection",`Sending RPC '${t}' ${a}:`,l,i);let u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(t,l,u,i).then(h=>(Z("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Xi("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+rh}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=eZ[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=YS();return new Promise((o,a)=>{let l=new BS;l.setWithCredentials(!0),l.listenOnce(jS.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Mp.NO_ERROR:let h=l.getResponseJson();Z(or,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Mp.TIMEOUT:Z(or,`RPC '${e}' ${s} timed out`),a(new K($.DEADLINE_EXCEEDED,"Request time out"));break;case Mp.HTTP_ERROR:let p=l.getStatus();if(Z(or,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let _=l.getResponseJson();Array.isArray(_)&&(_=_[0]);let w=_?.error;if(w&&w.status&&w.message){let E=function(x){let H=x.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(H)>=0?H:$.UNKNOWN}(w.status);a(new K(E,w.message))}else a(new K($.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new K($.UNAVAILABLE,"Connection failed."));break;default:_e()}}finally{Z(or,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(i);Z(or,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",u,r,15)})}Bo(e,t,r){let i=YS(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=qS(),a=$S(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let h=s.join("");Z(or,`Creating RPC '${e}' stream ${i}: ${h}`,l);let p=o.createWebChannel(h,l),_=!1,w=!1,E=new dA({Io:x=>{w?Z(or,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(_||(Z(or,`Opening RPC '${e}' stream ${i} transport.`),p.open(),_=!0),Z(or,`RPC '${e}' stream ${i} sending:`,x),p.send(x))},To:()=>p.close()}),S=(x,H,Y)=>{x.listen(H,q=>{try{Y(q)}catch(Q){setTimeout(()=>{throw Q},0)}})};return S(p,Sd.EventType.OPEN,()=>{w||(Z(or,`RPC '${e}' stream ${i} transport opened.`),E.yo())}),S(p,Sd.EventType.CLOSE,()=>{w||(w=!0,Z(or,`RPC '${e}' stream ${i} transport closed`),E.So())}),S(p,Sd.EventType.ERROR,x=>{w||(w=!0,Xi(or,`RPC '${e}' stream ${i} transport errored:`,x),E.So(new K($.UNAVAILABLE,"The operation could not be completed")))}),S(p,Sd.EventType.MESSAGE,x=>{var H;if(!w){let Y=x.data[0];Ae(!!Y);let q=Y,Q=q.error||((H=q[0])===null||H===void 0?void 0:H.error);if(Q){Z(or,`RPC '${e}' stream ${i} received error:`,Q);let pe=Q.status,re=function(A){let P=Cn[A];if(P!==void 0)return tU(P)}(pe),k=Q.message;re===void 0&&(re=$.INTERNAL,k="Unknown error status: "+pe+" with message "+Q.message),w=!0,E.So(new K(re,k)),p.close()}else Z(or,`RPC '${e}' stream ${i} received:`,Y),E.bo(Y)}}),S(a,HS.STAT_EVENT,x=>{x.stat===Hv.PROXY?Z(or,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===Hv.NOPROXY&&Z(or,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}};function MU(){return typeof window<"u"?window:null}function Zv(){return typeof document<"u"?document:null}function hm(n){return new TT(n,!0)}var rm=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&Z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var x0=class{constructor(e,t,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new rm(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===$.RESOURCE_EXHAUSTED?(hn(t.toString()),hn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new K($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return Z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},fA=class extends x0{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=VQ(this.serializer,e),r=function(s){if(!("targetChange"in s))return xe.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?xe.min():o.readTime?pn(o.readTime):xe.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=xT(this.serializer),t.addTarget=function(s,o){let a,l=o.target;if(a=a0(l)?{documents:uU(s,l)}:{query:cU(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=rU(s,o.resumeToken);let u=AT(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(xe.min())>0){a.readTime=Wd(s,o.snapshotVersion.toTimestamp());let u=AT(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=BQ(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=xT(this.serializer),t.removeTarget=e,this.a_(t)}},pA=class extends x0{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=UQ(e.writeResults,e.commitTime),r=pn(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=xT(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Jp(this.serializer,r))};this.a_(t)}};var mA=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new K($.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,MT(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K($.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,MT(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K($.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},gA=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(hn(t),this.D_=!1):Z("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var _A=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>N(this,null,function*(){ol(this)&&(Z("RemoteStore","Restarting streams for network reachability change."),yield function(l){return N(this,null,function*(){let u=le(l);u.L_.add(4),yield sh(u),u.q_.set("Unknown"),u.L_.delete(4),yield fm(u)})}(this))}))}),this.q_=new gA(r,i)}};function fm(n){return N(this,null,function*(){if(ol(n))for(let e of n.B_)yield e(!0)})}function sh(n){return N(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Z0(n,e){let t=le(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),cM(t)?uM(t):ah(t).r_()&&lM(t,e))}function Zd(n,e){let t=le(n),r=ah(t);t.N_.delete(e),r.r_()&&xU(t,e),t.N_.size===0&&(r.r_()?r.o_():ol(t)&&t.q_.set("Unknown"))}function lM(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ah(n).A_(e)}function xU(n,e){n.Q_.xe(e),ah(n).R_(e)}function uM(n){n.Q_=new ST({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),ah(n).start(),n.q_.v_()}function cM(n){return ol(n)&&!ah(n).n_()&&n.N_.size>0}function ol(n){return le(n).L_.size===0}function kU(n){n.Q_=void 0}function tZ(n){return N(this,null,function*(){n.q_.set("Online")})}function nZ(n){return N(this,null,function*(){n.N_.forEach((e,t)=>{lM(n,e)})})}function rZ(n,e){return N(this,null,function*(){kU(n),cM(n)?(n.q_.M_(e),uM(n)):n.q_.set("Unknown")})}function iZ(n,e,t){return N(this,null,function*(){if(n.q_.set("Online"),e instanceof d0&&e.state===2&&e.cause)try{yield function(i,s){return N(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){Z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield k0(n,r)}else if(e instanceof Ud?n.Q_.Ke(e):e instanceof c0?n.Q_.He(e):n.Q_.We(e),!t.isEqual(xe.min()))try{let r=yield IU(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let h=s.N_.get(u);h&&s.N_.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{let h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(mn.EMPTY_BYTE_STRING,h.snapshotVersion)),xU(s,l);let p=new Gd(h.target,l,u,h.sequenceNumber);lM(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Z("RemoteStore","Failed to raise snapshot:",r),yield k0(n,r)}})}function k0(n,e,t){return N(this,null,function*(){if(!sl(e))throw e;n.L_.add(1),yield sh(n),n.q_.set("Offline"),t||(t=()=>IU(n.localStore)),n.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){Z("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield fm(n)}))})}function RU(n,e){return e().catch(t=>k0(n,t,e))}function oh(n){return N(this,null,function*(){let e=le(n),t=rl(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;sZ(e);)try{let i=yield ZQ(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,oZ(e,i)}catch(i){yield k0(e,i)}NU(e)&&PU(e)})}function sZ(n){return ol(n)&&n.O_.length<10}function oZ(n,e){n.O_.push(e);let t=rl(n);t.r_()&&t.V_&&t.m_(e.mutations)}function NU(n){return ol(n)&&!rl(n).n_()&&n.O_.length>0}function PU(n){rl(n).start()}function aZ(n){return N(this,null,function*(){rl(n).p_()})}function lZ(n){return N(this,null,function*(){let e=rl(n);for(let t of n.O_)e.m_(t.mutations)})}function uZ(n,e,t){return N(this,null,function*(){let r=n.O_.shift(),i=bT.from(r,e,t);yield RU(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield oh(n)})}function cZ(n,e){return N(this,null,function*(){e&&rl(n).V_&&(yield function(r,i){return N(this,null,function*(){if(function(o){return eU(o)&&o!==$.ABORTED}(i.code)){let s=r.O_.shift();rl(r).s_(),yield RU(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield oh(r)}})}(n,e)),NU(n)&&PU(n)})}function i2(n,e){return N(this,null,function*(){let t=le(n);t.asyncQueue.verifyOperationInProgress(),Z("RemoteStore","RemoteStore received new credentials");let r=ol(t);t.L_.add(3),yield sh(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield fm(t)})}function yA(n,e){return N(this,null,function*(){let t=le(n);e?(t.L_.delete(2),yield fm(t)):e||(t.L_.add(2),yield sh(t),t.q_.set("Unknown"))})}function ah(n){return n.K_||(n.K_=function(t,r,i){let s=le(t);return s.w_(),new fA(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:tZ.bind(null,n),Ro:nZ.bind(null,n),mo:rZ.bind(null,n),d_:iZ.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.K_.s_(),cM(n)?uM(n):n.q_.set("Unknown")):(yield n.K_.stop(),kU(n))}))),n.K_}function rl(n){return n.U_||(n.U_=function(t,r,i){let s=le(t);return s.w_(),new pA(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:aZ.bind(null,n),mo:cZ.bind(null,n),f_:lZ.bind(null,n),g_:uZ.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.U_.s_(),yield oh(n)):(yield n.U_.stop(),n.O_.length>0&&(Z("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var vA=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function lh(n,e){if(hn("AsyncQueue",`${e}: ${n}`),sl(n))return new K($.UNAVAILABLE,`${e}: ${n}`);throw n}var R0=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ue.comparator(t.key,r.key):(t,r)=>ue.comparator(t.key,r.key),this.keyedMap=Pp(),this.sortedSet=new Gt(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var N0=class{constructor(){this.W_=new Gt(ue.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):_e():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Xd=class n{constructor(e,t,r,i,s,o,a,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,R0.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var wA=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},EA=class{constructor(){this.queries=s2(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=le(t),s=i.queries;i.queries=s2(),s.forEach((o,a)=>{for(let l of a.j_)l.onError(r)})})(this,new K($.ABORTED,"Firestore shutting down"))}};function s2(){return new Gs(n=>B2(n),cm)}function dM(n,e){return N(this,null,function*(){let t=le(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new wA,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=lh(o,`Initialization of query '${Rd(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&fM(t)})}function hM(n,e){return N(this,null,function*(){let t=le(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function dZ(n,e){let t=le(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&fM(t)}function hZ(n,e,t){let r=le(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function fM(n){n.Y_.forEach(e=>{e.next()})}var CA,o2;(o2=CA||(CA={})).ea="default",o2.Cache="cache";var im=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Xd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Xd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==CA.Cache}};var bA=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var P0=class{constructor(e){this.serializer=e}Es(e){return $s(this.serializer,e)}ds(e){return e.metadata.exists?lU(this.serializer,e.document,!1):Dn.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return pn(e)}},IA=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=OU(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=ht.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new P0(this.serializer);for(let i of e)if(i.metadata.queries){let s=r.Es(i.metadata.name);for(let o of i.metadata.queries){let a=(t.get(o)||We()).add(s);t.set(o,a)}}return t}complete(){return N(this,null,function*(){let e=yield XQ(this.localStore,new P0(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield JQ(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function OU(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var O0=class{constructor(e){this.key=e}},F0=class{constructor(e){this.key=e}},L0=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=We(),this.mutatedKeys=We(),this.Aa=H2(e),this.Ra=new R0(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new N0,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let _=i.get(h),w=dm(this.query,p)?p:null,E=!!_&&this.mutatedKeys.has(_.key),S=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations),x=!1;_&&w?_.data.isEqual(w.data)?E!==S&&(r.track({type:3,doc:w}),x=!0):this.ga(_,w)||(r.track({type:2,doc:w}),x=!0,(l&&this.Aa(w,l)>0||u&&this.Aa(w,u)<0)&&(a=!0)):!_&&w?(r.track({type:0,doc:w}),x=!0):_&&!w&&(r.track({type:1,doc:_}),x=!0,(l||u)&&(a=!0)),x&&(w?(o=o.add(w),s=S?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(w,E){let S=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e()}};return S(w)-S(E)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new Xd(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new N0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=We(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new F0(r))}),this.da.forEach(r=>{e.has(r)||t.push(new O0(r))}),t}ba(e){this.Ta=e.Ts,this.da=We();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Xd.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},DA=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},SA=class{constructor(e){this.key=e,this.va=!1}},TA=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Gs(a=>B2(a),cm),this.Ma=new Map,this.xa=new Set,this.Oa=new Gt(ue.comparator),this.Na=new Map,this.La=new tm,this.Ba={},this.ka=new Map,this.qa=Yd.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function fZ(n,e,t=!0){return N(this,null,function*(){let r=X0(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield FU(r,e,t,!0),i})}function pZ(n,e){return N(this,null,function*(){let t=X0(n);yield FU(t,e,!0,!1)})}function FU(n,e,t,r){return N(this,null,function*(){let i=yield Kd(n.localStore,Ir(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield pM(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&Z0(n.remoteStore,i),a})}function pM(n,e,t,r,i){return N(this,null,function*(){n.Ka=(p,_,w)=>function(S,x,H,Y){return N(this,null,function*(){let q=x.view.ma(H);q.ns&&(q=yield D0(S.localStore,x.query,!1).then(({documents:k})=>x.view.ma(k,q)));let Q=Y&&Y.targetChanges.get(x.targetId),pe=Y&&Y.targetMismatches.get(x.targetId)!=null,re=x.view.applyChanges(q,S.isPrimaryClient,Q,pe);return AA(S,x.targetId,re.wa),re.snapshot})}(n,p,_,w);let s=yield D0(n.localStore,e,!0),o=new L0(e,s.Ts),a=o.ma(s.documents),l=Zp.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=o.applyChanges(a,n.isPrimaryClient,l);AA(n,t,u.wa);let h=new DA(e,t,o);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),u.snapshot})}function mZ(n,e,t){return N(this,null,function*(){let r=le(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!cm(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Qd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Zd(r.remoteStore,i.targetId),Jd(r,i.targetId)}).catch(il))):(Jd(r,i.targetId),yield Qd(r.localStore,i.targetId,!0))})}function gZ(n,e){return N(this,null,function*(){let t=le(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Zd(t.remoteStore,r.targetId))})}function _Z(n,e,t){return N(this,null,function*(){let r=yM(n);try{let i=yield function(o,a){let l=le(o),u=Xt.now(),h=a.reduce((w,E)=>w.add(E.key),We()),p,_;return l.persistence.runTransaction("Locally write mutations","readwrite",w=>{let E=Vr(),S=We();return l.cs.getEntries(w,h).next(x=>{E=x,E.forEach((H,Y)=>{Y.isValidDocument()||(S=S.add(H))})}).next(()=>l.localDocuments.getOverlayedDocuments(w,E)).next(x=>{p=x;let H=[];for(let Y of a){let q=kQ(Y,p.get(Y.key).overlayedDocument);q!=null&&H.push(new es(Y.key,q,N2(q.value.mapValue),an.exists(!0)))}return l.mutationQueue.addMutationBatch(w,u,H,a)}).next(x=>{_=x;let H=x.applyToLocalDocumentSet(p,S);return l.documentOverlayCache.saveOverlays(w,x.batchId,H)})}).then(()=>({batchId:_.batchId,changes:q2(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new Gt(je)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,t),yield Xo(r,i.changes),yield oh(r.remoteStore)}catch(i){let s=lh(i,"Failed to persist write");t.reject(s)}})}function LU(n,e){return N(this,null,function*(){let t=le(n);try{let r=yield QQ(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(Ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ae(o.va):i.removedDocuments.size>0&&(Ae(o.va),o.va=!1))}),yield Xo(t,r,e)}catch(r){yield il(r)}})}function a2(n,e,t){let r=le(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let l=le(o);l.onlineState=a;let u=!1;l.queries.forEach((h,p)=>{for(let _ of p.j_)_.Z_(a)&&(u=!0)}),u&&fM(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function yZ(n,e,t){return N(this,null,function*(){let r=le(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Gt(ue.comparator);o=o.insert(s,Dn.newNoDocument(s,xe.min()));let a=We().add(s),l=new Qp(xe.min(),new Map,new Gt(je),o,a);yield LU(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),_M(r)}else yield Qd(r.localStore,e,!1).then(()=>Jd(r,e,t)).catch(il)})}function vZ(n,e){return N(this,null,function*(){let t=le(n),r=e.batch.batchId;try{let i=yield KQ(t.localStore,e);gM(t,r,null),mM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Xo(t,i)}catch(i){yield il(i)}})}function wZ(n,e,t){return N(this,null,function*(){let r=le(n);try{let i=yield function(o,a){let l=le(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(p=>(Ae(p!==null),h=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);gM(r,e,t),mM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Xo(r,i)}catch(i){yield il(i)}})}function EZ(n,e){return N(this,null,function*(){let t=le(n);ol(t.remoteStore)||Z("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(o){let a=le(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=lh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function mM(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function gM(n,e,t){let r=le(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Jd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||VU(n,r)})}function VU(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Zd(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),_M(n))}function AA(n,e,t){for(let r of t)r instanceof O0?(n.La.addReference(r.key,e),CZ(n,r)):r instanceof F0?(Z("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||VU(n,r.key)):_e()}function CZ(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(Z("SyncEngine","New document in limbo: "+t),n.xa.add(r),_M(n))}function _M(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new ue(ht.fromString(e)),r=n.qa.next();n.Na.set(r,new SA(t)),n.Oa=n.Oa.insert(t,r),Z0(n.remoteStore,new Gd(Ir(ih(t.path)),r,"TargetPurposeLimboResolution",Xr.oe))}}function Xo(n,e,t){return N(this,null,function*(){let r=le(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,t).then(u=>{var h;if((u||t)&&r.isPrimaryClient){let p=u?!u.fromCache:(h=t?.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){i.push(u);let p=oA.Wi(l.targetId,u);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(l,u){return N(this,null,function*(){let h=le(l);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>U.forEach(u,_=>U.forEach(_.$i,w=>h.persistence.referenceDelegate.addReference(p,_.targetId,w)).next(()=>U.forEach(_.Ui,w=>h.persistence.referenceDelegate.removeReference(p,_.targetId,w)))))}catch(p){if(!sl(p))throw p;Z("LocalStore","Failed to update sequence numbers: "+p)}for(let p of u){let _=p.targetId;if(!p.fromCache){let w=h.os.get(_),E=w.snapshotVersion,S=w.withLastLimboFreeSnapshotVersion(E);h.os=h.os.insert(_,S)}}})}(r.localStore,s))})}function bZ(n,e){return N(this,null,function*(){let t=le(n);if(!t.currentUser.isEqual(e)){Z("SyncEngine","User change. New user:",e.toKey());let r=yield bU(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new K($.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Xo(t,r.hs)}})}function IZ(n,e){let t=le(n),r=t.Na.get(e);if(r&&r.va)return We().add(r.key);{let i=We(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function DZ(n,e){return N(this,null,function*(){let t=le(n),r=yield D0(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&AA(t,e.targetId,i.wa),i})}function SZ(n,e){return N(this,null,function*(){let t=le(n);return TU(t.localStore,e).then(r=>Xo(t,r))})}function TZ(n,e,t,r){return N(this,null,function*(){let i=le(n),s=yield function(a,l){let u=le(a),h=le(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,l).next(_=>_?u.localDocuments.getDocuments(p,_):U.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?yield oh(i.remoteStore):t==="acknowledged"||t==="rejected"?(gM(i,e,r||null),mM(i,e),function(a,l){le(le(a).mutationQueue).On(l)}(i.localStore,e)):_e(),yield Xo(i,s)):Z("SyncEngine","Cannot apply mutation batch with id: "+e)})}function AZ(n,e){return N(this,null,function*(){let t=le(n);if(X0(t),yM(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield l2(t,r.toArray());t.Qa=!0,yield yA(t.remoteStore,!0);for(let s of i)Z0(t.remoteStore,s)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Jd(t,o),Qd(t.localStore,o,!0))),Zd(t.remoteStore,o)}),yield i,yield l2(t,r),function(o){let a=le(o);a.Na.forEach((l,u)=>{Zd(a.remoteStore,u)}),a.La.pr(),a.Na=new Map,a.Oa=new Gt(ue.comparator)}(t),t.Qa=!1,yield yA(t.remoteStore,!1)}})}function l2(n,e,t){return N(this,null,function*(){let r=le(n),i=[],s=[];for(let o of e){let a,l=r.Ma.get(o);if(l&&l.length!==0){a=yield Kd(r.localStore,Ir(l[0]));for(let u of l){let h=r.Fa.get(u),p=yield DZ(r,h);p.snapshot&&s.push(p.snapshot)}}else{let u=yield SU(r.localStore,o);a=yield Kd(r.localStore,u),yield pM(r,UU(u),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})}function UU(n){return U2(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function MZ(n){return function(t){return le(le(t).persistence).Qi()}(le(n).localStore)}function xZ(n,e,t,r){return N(this,null,function*(){let i=le(n);if(i.Qa)return void Z("SyncEngine","Ignoring unexpected query state notification.");let s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{let o=yield TU(i.localStore,j2(s[0])),a=Qp.createSynthesizedRemoteEventForCurrentChange(e,t==="current",mn.EMPTY_BYTE_STRING);yield Xo(i,o,a);break}case"rejected":yield Qd(i.localStore,e,!0),Jd(i,e,r);break;default:_e()}})}function kZ(n,e,t){return N(this,null,function*(){let r=X0(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Z("SyncEngine","Adding an already active target "+i);continue}let s=yield SU(r.localStore,i),o=yield Kd(r.localStore,s);yield pM(r,UU(s),o.targetId,!1,o.resumeToken),Z0(r.remoteStore,o)}for(let i of t)r.Ma.has(i)&&(yield Qd(r.localStore,i,!1).then(()=>{Zd(r.remoteStore,i),Jd(r,i)}).catch(il))}})}function X0(n){let e=le(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=LU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IZ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yZ.bind(null,e),e.Ca.d_=dZ.bind(null,e.eventManager),e.Ca.$a=hZ.bind(null,e.eventManager),e}function yM(n){let e=le(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vZ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wZ.bind(null,e),e}function RZ(n,e,t){let r=le(n);(function(s,o,a){return N(this,null,function*(){try{let l=yield o.getMetadata();if(yield function(w,E){let S=le(w),x=pn(E.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",H=>S.Gr.getBundleMetadata(H,E.id)).then(H=>!!H&&H.createTime.compareTo(x)>=0)}(s.localStore,l))return yield o.close(),a._completeWith(function(w){return{taskState:"Success",documentsLoaded:w.totalDocuments,bytesLoaded:w.totalBytes,totalDocuments:w.totalDocuments,totalBytes:w.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(OU(l));let u=new IA(l,s.localStore,o.serializer),h=yield o.Ua();for(;h;){let _=yield u.la(h);_&&a._updateProgress(_),h=yield o.Ua()}let p=yield u.complete();return yield Xo(s,p.Ia,void 0),yield function(w,E){let S=le(w);return S.persistence.runTransaction("Save bundle","readwrite",x=>S.Gr.saveBundleMetadata(x,E))}(s.localStore,l),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(l){return Xi("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var MA=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return N(this,null,function*(){this.serializer=hm(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return CU(this.persistence,new I0,t.initialUser,this.serializer)}Ga(t){return new C0(b0.Zr,this.serializer)}Wa(t){return new A0}terminate(){return N(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var V0=class n extends MA{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield UC(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield yM(this.Ja.syncEngine),yield oh(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return CU(this.persistence,new I0,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new qT(r,e.asyncQueue,t)}Ha(e,t){let r=new aT(t,this.persistence);return new oT(e.asyncQueue,r)}Ga(e){let t=aM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Ti.withCacheSize(this.cacheSizeBytes):Ti.DEFAULT;return new sA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,MU(),Zv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new A0}},xA=class n extends V0{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield UC(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof Bp&&(this.sharedClientState.syncEngine={no:TZ.bind(null,t),ro:xZ.bind(null,t),io:kZ.bind(null,t),Qi:MZ.bind(null,t),eo:SZ.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield AZ(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=MU();if(!Bp.D(t))throw new K($.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=aM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Bp(t,e.asyncQueue,r,e.clientId,e.initialUser)}},vM=(()=>{class n{initialize(t,r){return N(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>a2(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=bZ.bind(null,this.syncEngine),yield yA(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new EA}()}createDatastore(t){let r=hm(t.databaseInfo.databaseId),i=function(o){return new hA(o)}(t.databaseInfo);return function(o,a,l,u){return new mA(o,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,l){return new _A(i,s,o,a,l)}(this.localStore,this.datastore,t.asyncQueue,r=>a2(this.syncEngine,r,0),function(){return M0.D()?new M0:new cA}())}createSyncEngine(t,r){return function(s,o,a,l,u,h,p){let _=new TA(s,o,a,l,u,h);return p&&(_.Qa=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return N(this,null,function*(){var t,r;yield function(s){return N(this,null,function*(){let o=le(s);Z("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield sh(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function u2(n,e=10240){let t=0;return{read(){return N(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var eh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):hn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var kA=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Rn,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return N(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new bA(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return N(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return N(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var RA=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new K($.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,s){return N(this,null,function*(){let o=le(i),a={documents:s.map(p=>Xp(o.serializer,p))},l=yield o.Lo("BatchGetDocuments",o.serializer.databaseId,ht.emptyPath(),a,s.length),u=new Map;l.forEach(p=>{let _=LQ(o.serializer,p);u.set(_.key.toString(),_)});let h=[];return s.forEach(p=>{let _=u.get(p.toString());Ae(!!_),h.push(_)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new nl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=ue.fromPath(r);this.mutations.push(new Gp(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let s=le(r),o={writes:i.map(a=>Jp(s.serializer,a))};yield s.Mo("Commit",s.serializer.databaseId,ht.emptyPath(),o)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw _e();t=xe.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new K($.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(xe.min())?an.exists(!1):an.updateTime(t):an.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(xe.min()))throw new K($.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return an.updateTime(t)}return an.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var NA=class{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new rm(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>N(this,null,function*(){let e=new RA(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!lm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!eU(t)}return!1}};var PA=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=In.UNAUTHENTICATED,this.clientId=Jv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>N(this,null,function*(){Z("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(Z("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=lh(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function KS(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),Z("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield bU(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function c2(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield wM(n);Z("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>i2(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>i2(e.remoteStore,i)),n._onlineComponents=e})}function wM(n){return N(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Z("FirestoreClient","Using user provided OfflineComponentProvider");try{yield KS(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Xi("Error using user provided cache. Falling back to memory cache: "+t),yield KS(n,new MA)}}else Z("FirestoreClient","Using default OfflineComponentProvider"),yield KS(n,new MA);return n._offlineComponents})}function J0(n){return N(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(Z("FirestoreClient","Using user provided OnlineComponentProvider"),yield c2(n,n._uninitializedComponentsProvider._online)):(Z("FirestoreClient","Using default OnlineComponentProvider"),yield c2(n,new vM))),n._onlineComponents})}function BU(n){return wM(n).then(e=>e.persistence)}function EM(n){return wM(n).then(e=>e.localStore)}function jU(n){return J0(n).then(e=>e.remoteStore)}function CM(n){return J0(n).then(e=>e.syncEngine)}function NZ(n){return J0(n).then(e=>e.datastore)}function th(n){return N(this,null,function*(){let e=yield J0(n),t=e.eventManager;return t.onListen=fZ.bind(null,e.syncEngine),t.onUnlisten=mZ.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=pZ.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=gZ.bind(null,e.syncEngine),t})}function PZ(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield BU(n),t=yield jU(n);return e.setNetworkEnabled(!0),function(i){let s=le(i);return s.L_.delete(0),fm(s)}(t)}))}function OZ(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield BU(n),t=yield jU(n);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let s=le(i);s.L_.add(0),yield sh(s),s.q_.set("Offline")})}(t)}))}function FZ(n,e){let t=new Rn;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,s,o){return N(this,null,function*(){try{let a=yield function(u,h){let p=le(u);return p.persistence.runTransaction("read document","readonly",_=>p.localDocuments.getDocument(_,h))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new K($.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let l=lh(a,`Failed to get document '${s} from cache`);o.reject(l)}})}(yield EM(n),e,t)})),t.promise}function HU(n,e,t={}){let r=new Rn;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(s,o,a,l,u){let h=new eh({next:_=>{h.Za(),o.enqueueAndForget(()=>hM(s,p));let w=_.docs.has(a);!w&&_.fromCache?u.reject(new K($.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&_.fromCache&&l&&l.source==="server"?u.reject(new K($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(_)},error:_=>u.reject(_)}),p=new im(ih(a.path),h,{includeMetadataChanges:!0,_a:!0});return dM(s,p)}(yield th(n),n.asyncQueue,e,t,r)})),r.promise}function LZ(n,e){let t=new Rn;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,s,o){return N(this,null,function*(){try{let a=yield D0(i,s,!0),l=new L0(s,a.Ts),u=l.ma(a.documents),h=l.applyChanges(u,!1);o.resolve(h.snapshot)}catch(a){let l=lh(a,`Failed to execute query '${s} against cache`);o.reject(l)}})}(yield EM(n),e,t)})),t.promise}function $U(n,e,t={}){let r=new Rn;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(s,o,a,l,u){let h=new eh({next:_=>{h.Za(),o.enqueueAndForget(()=>hM(s,p)),_.fromCache&&l.source==="server"?u.reject(new K($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(_)},error:_=>u.reject(_)}),p=new im(a,h,{includeMetadataChanges:!0,_a:!0});return dM(s,p)}(yield th(n),n.asyncQueue,e,t,r)})),r.promise}function VZ(n,e){let t=new eh(e);return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,s){le(i).Y_.add(s),s.next()}(yield th(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,s){le(i).Y_.delete(s)}(yield th(n),t)}))}}function UZ(n,e,t,r){let i=function(o,a){let l;return l=typeof o=="string"?nU().encode(o):o,function(h,p){return new kA(h,p)}(function(h,p){if(h instanceof Uint8Array)return u2(h,p);if(h instanceof ArrayBuffer)return u2(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(t,hm(e));n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){RZ(yield CM(n),i,r)}))}function BZ(n,e){return n.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let s=le(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield EM(n),e)}))}function qU(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var d2=new Map;function bM(n,e,t){if(!t)throw new K($.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function IM(n,e,t,r){if(e===!0&&r===!0)throw new K($.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function h2(n){if(!ue.isDocumentKey(n))throw new K($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function f2(n){if(ue.isDocumentKey(n))throw new K($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ew(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":_e()}function mt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new K($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=ew(n);throw new K($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function zU(n,e){if(e<=0)throw new K($.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var U0=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qU((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},bu=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new U0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new U0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new QS;switch(r.type){case"firstParty":return new eT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return N(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=d2.get(t);r&&(Z("ComponentProvider","Removing Datastore"),d2.delete(t),r.terminate())}(this),Promise.resolve()}};function WU(n,e,t,r={}){var i;let s=(n=mt(n,bu))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Xi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=In.MOCK_USER;else{a=bc(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new K($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new In(u)}n._authCredentials=new ZS(new Xv(a,l))}}var Kn=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},jt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},qs=class n extends Kn{constructor(e,t,r){super(e,t,ih(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new ue(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function DM(n,e,...t){if(n=Le(n),bM("collection","path",e),n instanceof bu){let r=ht.fromString(e,...t);return f2(r),new qs(n,null,r)}{if(!(n instanceof jt||n instanceof qs))throw new K($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ht.fromString(e,...t));return f2(r),new qs(n.firestore,null,r)}}function GU(n,e){if(n=mt(n,bu),bM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new K($.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Kn(n,null,function(r){return new Ji(ht.emptyPath(),r)}(e))}function pm(n,e,...t){if(n=Le(n),arguments.length===1&&(e=Jv.newId()),bM("doc","path",e),n instanceof bu){let r=ht.fromString(e,...t);return h2(r),new jt(n,null,new ue(r))}{if(!(n instanceof jt||n instanceof qs))throw new K($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ht.fromString(e,...t));return h2(r),new jt(n.firestore,n instanceof qs?n.converter:null,new ue(r))}}function SM(n,e){return n=Le(n),e=Le(e),(n instanceof jt||n instanceof qs)&&(e instanceof jt||e instanceof qs)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function TM(n,e){return n=Le(n),e=Le(e),n instanceof Kn&&e instanceof Kn&&n.firestore===e.firestore&&cm(n._query,e._query)&&n.converter===e.converter}var B0=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new rm(this,"async_queue_retry"),this.Vu=()=>{let r=Zv();r&&Z("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Zv();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Zv();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Rn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return N(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!sl(e))throw e;Z("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw hn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=vA.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&_e()}verifyOperationInProgress(){}wu(){return N(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function OA(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var FA=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Rn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var YU=-1,Jt=class extends bu{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new B0,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return N(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new B0(e),this._firestoreClient=void 0,yield e}})}};function Qn(n){if(n._terminated)throw new K($.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||KU(n),n._firestoreClient}function KU(n){var e,t,r;let i=n._freezeSettings(),s=function(a,l,u,h){return new lT(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,qU(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new PA(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(n._componentsProvider))}function QU(n,e){Xi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return XU(n,vM.provider,{build:r=>new V0(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function ZU(n){return N(this,null,function*(){Xi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();XU(n,vM.provider,{build:t=>new xA(t,e.cacheSizeBytes)})})}function XU(n,e,t){if((n=mt(n,Jt))._firestoreClient||n._terminated)throw new K($.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new K($.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},KU(n)}function JU(n){if(n._initialized&&!n._terminated)throw new K($.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Rn;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!Ka.D())return Promise.resolve();let i=r+"main";yield Ka.delete(i)})}(aM(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function eB(n){return function(t){let r=new Rn;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return EZ(yield CM(t),r)})),r.promise}(Qn(n=mt(n,Jt)))}function tB(n){return PZ(Qn(n=mt(n,Jt)))}function nB(n){return OZ(Qn(n=mt(n,Jt)))}function rB(n,e){let t=Qn(n=mt(n,Jt)),r=new FA;return UZ(t,n._databaseId,e,r),r}function iB(n,e){return BZ(Qn(n=mt(n,Jt)),e).then(t=>t?new Kn(n,null,t.query):null)}var Ys=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(mn.fromBase64String(e))}catch(t){throw new K($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ts=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new K($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Qo=class{constructor(e){this._methodName=e}};var Iu=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new K($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new K($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}};var sm=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var jZ=/^__.*__$/,LA=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new es(e,this.data,this.fieldMask,t,this.fieldTransforms):new tl(e,this.data,t,this.fieldTransforms)}},j0=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new es(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function sB(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e()}}var H0=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return $0(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(sB(this.Cu)&&jZ.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},VA=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||hm(e)}Qu(e,t,r,i=!1){return new H0({Cu:e,methodName:t,qu:r,path:fn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Au(n){let e=n._freezeSettings(),t=hm(n._databaseId);return new VA(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tw(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);xM("Data must be an object, but it was:",o,r);let a=lB(r,o),l,u;if(s.merge)l=new Jr(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let _=$A(e,p,t);if(!o.contains(_))throw new K($.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);cB(h,_)||h.push(_)}l=new Jr(h),u=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=o.fieldTransforms;return new LA(new ar(a),l,u)}var om=class n extends Qo{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function oB(n,e,t){return new H0({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var UA=class n extends Qo{_toFieldTransform(e){return new wu(e.path,new Ja)}isEqual(e){return e instanceof n}},BA=class n extends Qo{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=oB(this,e,!0),r=this.Ku.map(s=>Mu(s,t)),i=new Yo(r);return new wu(e.path,i)}isEqual(e){return e instanceof n&&HC(this.Ku,e.Ku)}},jA=class n extends Qo{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=oB(this,e,!0),r=this.Ku.map(s=>Mu(s,t)),i=new Ko(r);return new wu(e.path,i)}isEqual(e){return e instanceof n&&HC(this.Ku,e.Ku)}},HA=class n extends Qo{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new el(e.serializer,G2(e.serializer,this.$u));return new wu(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function AM(n,e,t,r){let i=n.Qu(1,e,t);xM("Data must be an object, but it was:",i,r);let s=[],o=ar.empty();Tu(r,(l,u)=>{let h=kM(e,l,t);u=Le(u);let p=i.Nu(h);if(u instanceof om)s.push(h);else{let _=Mu(u,p);_!=null&&(s.push(h),o.set(h,_))}});let a=new Jr(s);return new j0(o,a,i.fieldTransforms)}function MM(n,e,t,r,i,s){let o=n.Qu(1,e,t),a=[$A(e,r,t)],l=[i];if(s.length%2!=0)throw new K($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)a.push($A(e,s[_])),l.push(s[_+1]);let u=[],h=ar.empty();for(let _=a.length-1;_>=0;--_)if(!cB(u,a[_])){let w=a[_],E=l[_];E=Le(E);let S=o.Nu(w);if(E instanceof om)u.push(w);else{let x=Mu(E,S);x!=null&&(u.push(w),h.set(w,x))}}let p=new Jr(u);return new j0(h,p,o.fieldTransforms)}function aB(n,e,t,r=!1){return Mu(t,n.Qu(r?4:3,e))}function Mu(n,e){if(uB(n=Le(n)))return xM("Unsupported field value:",e,n),lB(n,e);if(n instanceof Qo)return function(r,i){if(!sB(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let l=Mu(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Le(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return G2(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Xt.fromDate(r);return{timestampValue:Wd(i.serializer,s)}}if(r instanceof Xt){let s=new Xt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wd(i.serializer,s)}}if(r instanceof Iu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ys)return{bytesValue:rU(i.serializer,r._byteString)};if(r instanceof jt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:iM(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof sm)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return rM(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${ew(r)}`)}(n,e)}function lB(n,e){let t={};return M2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Tu(n,(r,i)=>{let s=Mu(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function uB(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Xt||n instanceof Iu||n instanceof Ys||n instanceof jt||n instanceof Qo||n instanceof sm)}function xM(n,e,t){if(!uB(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=ew(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function $A(n,e,t){if((e=Le(e))instanceof ts)return e._internalPath;if(typeof e=="string")return kM(n,e);throw $0("Field path arguments must be of type string or ",n,!1,void 0,t)}var HZ=new RegExp("[~\\*/\\[\\]]");function kM(n,e,t){if(e.search(HZ)>=0)throw $0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ts(...e.split("."))._internalPath}catch{throw $0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $0(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new K($.INVALID_ARGUMENT,a+n+l)}function cB(n,e){return n.some(t=>t.isEqual(e))}var Du=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new qA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(nw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},qA=class extends Du{data(){return super.data()}};function nw(n,e){return typeof e=="string"?kM(n,e):e instanceof ts?e._internalPath:e._delegate._internalPath}function dB(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new K($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var am=class{},Su=class extends am{};function Jo(n,e,...t){let r=[];e instanceof am&&r.push(e),r=r.concat(t),function(s){let o=s.filter(l=>l instanceof zA).length,a=s.filter(l=>l instanceof q0).length;if(o>1||o>0&&a>0)throw new K($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var q0=class n extends Su{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return EB(e._query,t),new Kn(e.firestore,e.converter,ET(e._query,t))}_parse(e){let t=Au(e.firestore);return function(s,o,a,l,u,h,p){let _;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new K($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){m2(p,h);let w=[];for(let E of p)w.push(p2(l,s,E));_={arrayValue:{values:w}}}else _=p2(l,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||m2(p,h),_=aB(a,o,p,h==="in"||h==="not-in");return at.create(u,h,_)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function hB(n,e,t){let r=e,i=nw("where",n);return q0._create(i,r,t)}var zA=class n extends am{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:At.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let l of a)EB(o,l),o=ET(o,l)}(e._query,t),new Kn(e.firestore,e.converter,ET(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var WA=class n extends Su{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,s,o){if(i.startAt!==null)throw new K($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new K($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yu(s,o)}(e._query,this._field,this._direction);return new Kn(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new Ji(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function fB(n,e="asc"){let t=e,r=nw("orderBy",n);return WA._create(r,t)}var z0=class n extends Su{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Kn(e.firestore,e.converter,u0(e._query,this._limit,this._limitType))}};function pB(n){return zU("limit",n),z0._create("limit",n,"F")}function mB(n){return zU("limitToLast",n),z0._create("limitToLast",n,"L")}var W0=class n extends Su{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=wB(e,this.type,this._docOrFields,this._inclusive);return new Kn(e.firestore,e.converter,function(i,s){return new Ji(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}};function gB(...n){return W0._create("startAt",n,!0)}function _B(...n){return W0._create("startAfter",n,!1)}var G0=class n extends Su{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=wB(e,this.type,this._docOrFields,this._inclusive);return new Kn(e.firestore,e.converter,function(i,s){return new Ji(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,t))}};function yB(...n){return G0._create("endBefore",n,!1)}function vB(...n){return G0._create("endAt",n,!0)}function wB(n,e,t,r){if(t[0]=Le(t[0]),t[0]instanceof Du)return function(s,o,a,l,u){if(!l)throw new K($.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of Vd(s))if(p.field.isKeyField())h.push(_u(o,l.key));else{let _=l.data.field(p.field);if(K0(_))throw new K($.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(_===null){let w=p.field.canonicalString();throw new K($.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}h.push(_)}return new Ws(h,u)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Au(n.firestore);return function(o,a,l,u,h,p){let _=o.explicitOrderBy;if(h.length>_.length)throw new K($.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let w=[];for(let E=0;E<h.length;E++){let S=h[E];if(_[E].field.isKeyField()){if(typeof S!="string")throw new K($.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof S}`);if(!tM(o)&&S.indexOf("/")!==-1)throw new K($.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${S}' contains a slash.`);let x=o.path.child(ht.fromString(S));if(!ue.isDocumentKey(x))throw new K($.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);let H=new ue(x);w.push(_u(a,H))}else{let x=aB(l,u,S);w.push(x)}}return new Ws(w,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function p2(n,e,t){if(typeof(t=Le(t))=="string"){if(t==="")throw new K($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tM(e)&&t.indexOf("/")!==-1)throw new K($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ht.fromString(t));if(!ue.isDocumentKey(r))throw new K($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _u(n,new ue(r))}if(t instanceof jt)return _u(n,t._key);throw new K($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ew(t)}.`)}function m2(n,e){if(!Array.isArray(n)||n.length===0)throw new K($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function EB(n,e){let t=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new K($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var nh=class{convertValue(e,t="none"){switch(gu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw _e()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Tu(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Kt(o.doubleValue));return new sm(s)}convertGeoPoint(e){return new Iu(Kt(e.latitude),Kt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=JA(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(qp(e));default:return null}}convertTimestamp(e){let t=Go(e);return new Xt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ht.fromString(e);Ae(pU(r));let i=new Za(r.get(1),r.get(3)),s=new ue(r.popFirst(5));return i.isEqual(t)||hn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function rw(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var GA=class extends nh{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ys(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,t)}};var Wo=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Mi=class extends Du{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ga(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(nw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Ga=class extends Mi{data(e={}){return super.data(e)}},ns=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Wo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ga(this._firestore,this._userDataWriter,r.key,r,new Wo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new K($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let l=new Ga(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let l=new Ga(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:$Z(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function $Z(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e()}}function RM(n,e){return n instanceof Mi&&e instanceof Mi?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ns&&e instanceof ns&&n._firestore===e._firestore&&TM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function CB(n){n=mt(n,jt);let e=mt(n.firestore,Jt);return HU(Qn(e),n._key).then(t=>FM(e,n,t))}var Zo=class extends nh{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ys(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,t)}};function bB(n){n=mt(n,jt);let e=mt(n.firestore,Jt),t=Qn(e),r=new Zo(e);return FZ(t,n._key).then(i=>new Mi(e,r,n._key,i,new Wo(i!==null&&i.hasLocalMutations,!0),n.converter))}function IB(n){n=mt(n,jt);let e=mt(n.firestore,Jt);return HU(Qn(e),n._key,{source:"server"}).then(t=>FM(e,n,t))}function DB(n){n=mt(n,Kn);let e=mt(n.firestore,Jt),t=Qn(e),r=new Zo(e);return dB(n._query),$U(t,n._query).then(i=>new ns(e,r,n,i))}function SB(n){n=mt(n,Kn);let e=mt(n.firestore,Jt),t=Qn(e),r=new Zo(e);return LZ(t,n._query).then(i=>new ns(e,r,n,i))}function TB(n){n=mt(n,Kn);let e=mt(n.firestore,Jt),t=Qn(e),r=new Zo(e);return $U(t,n._query,{source:"server"}).then(i=>new ns(e,r,n,i))}function NM(n,e,t){n=mt(n,jt);let r=mt(n.firestore,Jt),i=rw(n.converter,e,t);return uh(r,[tw(Au(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,an.none())])}function PM(n,e,t,...r){n=mt(n,jt);let i=mt(n.firestore,Jt),s=Au(i),o;return o=typeof(e=Le(e))=="string"||e instanceof ts?MM(s,"updateDoc",n._key,e,t,r):AM(s,"updateDoc",n._key,e),uh(i,[o.toMutation(n._key,an.exists(!0))])}function AB(n){return uh(mt(n.firestore,Jt),[new nl(n._key,an.none())])}function MB(n,e){let t=mt(n.firestore,Jt),r=pm(n),i=rw(n.converter,e);return uh(t,[tw(Au(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,an.exists(!1))]).then(()=>r)}function OM(n,...e){var t,r,i;n=Le(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||OA(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(OA(e[o])){let p=e[o];e[o]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let l,u,h;if(n instanceof jt)u=mt(n.firestore,Jt),h=ih(n._key.path),l={next:p=>{e[o]&&e[o](FM(u,n,p))},error:e[o+1],complete:e[o+2]};else{let p=mt(n,Kn);u=mt(p.firestore,Jt),h=p._query;let _=new Zo(u);l={next:w=>{e[o]&&e[o](new ns(u,_,p,w))},error:e[o+1],complete:e[o+2]},dB(n._query)}return function(_,w,E,S){let x=new eh(S),H=new im(w,x,E);return _.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return dM(yield th(_),H)})),()=>{x.Za(),_.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return hM(yield th(_),H)}))}}(Qn(u),h,a,l)}function xB(n,e){return VZ(Qn(n=mt(n,Jt)),OA(e)?e:{next:e})}function uh(n,e){return function(r,i){let s=new Rn;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return _Z(yield CM(r),i,s)})),s.promise}(Qn(n),e)}function FM(n,e,t){let r=t.docs.get(e._key),i=new Zo(n);return new Mi(n,i,e._key,r,new Wo(t.hasPendingWrites,t.fromCache),e.converter)}var qZ={maxAttempts:5};var Y0=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Au(e)}set(e,t,r){this._verifyNotCommitted();let i=za(e,this._firestore),s=rw(i.converter,t,r),o=tw(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,an.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let s=za(e,this._firestore),o;return o=typeof(t=Le(t))=="string"||t instanceof ts?MM(this._dataReader,"WriteBatch.update",s._key,t,r,i):AM(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,an.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=za(e,this._firestore);return this._mutations=this._mutations.concat(new nl(t._key,an.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new K($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function za(n,e){if((n=Le(n)).firestore!==e)throw new K($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var YA=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Au(t)}get(t){let r=za(t,this._firestore),i=new GA(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return _e();let o=s[0];if(o.isFoundDocument())return new Du(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Du(this._firestore,i,r._key,null,r.converter);throw _e()})}set(t,r,i){let s=za(t,this._firestore),o=rw(s.converter,r,i),a=tw(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){let o=za(t,this._firestore),a;return a=typeof(r=Le(r))=="string"||r instanceof ts?MM(this._dataReader,"Transaction.update",o._key,r,i,s):AM(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){let r=za(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=za(e,this._firestore),r=new Zo(this._firestore);return super.get(e).then(i=>new Mi(this._firestore,r,t._key,i._document,new Wo(!1,!1),t.converter))}};function kB(n,e,t){n=mt(n,Jt);let r=Object.assign(Object.assign({},qZ),t);return function(s){if(s.maxAttempts<1)throw new K($.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){let l=new Rn;return s.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let u=yield NZ(s);new NA(s.asyncQueue,u,a,o,l).au()})),l.promise}(Qn(n),i=>e(new YA(n,i)),r)}function RB(){return new om("deleteField")}function NB(){return new UA("serverTimestamp")}function PB(...n){return new BA("arrayUnion",n)}function OB(...n){return new jA("arrayRemove",n)}function FB(n){return new HA("increment",n)}(function(e,t=!0){(function(i){rh=i})(Ic),bo(new $n("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Jt(new XS(r.getProvider("auth-internal")),new nT(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new K($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Za(u.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Nr(fV,"4.7.3",e),Nr(fV,"4.7.3","esm2017")})();var zZ="@firebase/firestore-compat",WZ="0.3.38";function HM(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new K("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function LB(){if(typeof Uint8Array>"u")throw new K("unimplemented","Uint8Arrays are not available in this environment.")}function VB(){if(!x2())throw new K("unimplemented","Blobs are unavailable in Firestore in this environment.")}var iw=class n{constructor(e){this._delegate=e}static fromBase64String(e){return VB(),new n(Ys.fromBase64String(e))}static fromUint8Array(e){return LB(),new n(Ys.fromUint8Array(e))}toBase64(){return VB(),this._delegate.toBase64()}toUint8Array(){return LB(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function LM(n){return GZ(n,["next","error","complete"])}function GZ(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var VM=class{enableIndexedDbPersistence(e,t){return QU(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return ZU(e._delegate)}clearIndexedDbPersistence(e){return JU(e._delegate)}},sw=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Za||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Xi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){WU(this._delegate,e,t,r)}enableNetwork(){return tB(this._delegate)}disableNetwork(){return nB(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,IM("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return eB(this._delegate)}onSnapshotsInSync(e){return xB(this._delegate,e)}get app(){if(!this._appCompat)throw new K("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new hh(this,DM(this._delegate,e))}catch(t){throw Dr(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ks(this,pm(this._delegate,e))}catch(t){throw Dr(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Nu(this,GU(this._delegate,e))}catch(t){throw Dr(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return kB(this._delegate,t=>e(new ow(this,t)))}batch(){return Qn(this._delegate),new aw(new Y0(this._delegate,e=>uh(this._delegate,e)))}loadBundle(e){return rB(this._delegate,e)}namedQuery(e){return iB(this._delegate,e).then(t=>t?new Nu(this,t):null)}},ch=class extends nh{constructor(e){super(),this.firestore=e}convertBytes(e){return new iw(new Ys(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Ks.forKey(t,this.firestore,null)}};function YZ(n){_2(n)}var ow=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ch(e)}get(e){let t=xu(e);return this._delegate.get(t).then(r=>new ku(this._firestore,new Mi(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=xu(e);return r?(HM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let s=xu(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){let t=xu(e);return this._delegate.delete(t),this}},aw=class{constructor(e){this._delegate=e}set(e,t,r){let i=xu(e);return r?(HM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let s=xu(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){let t=xu(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},dh=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Ga(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ru(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new n(e,new ch(e),t),i.set(t,s)),s}};dh.INSTANCES=new WeakMap;var Ks=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ch(e)}static forPath(e,t,r){if(e.length%2!==0)throw new K("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new jt(t._delegate,r,new ue(e)))}static forKey(e,t,r){return new n(t,new jt(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new hh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new hh(this.firestore,DM(this._delegate,e))}catch(t){throw Dr(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Le(e),e instanceof jt?SM(this._delegate,e):!1}set(e,t){t=HM("DocumentReference.set",t);try{return t?NM(this._delegate,e,t):NM(this._delegate,e)}catch(r){throw Dr(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?PM(this._delegate,e):PM(this._delegate,e,t,...r)}catch(i){throw Dr(i,"updateDoc()","DocumentReference.update()")}}delete(){return AB(this._delegate)}onSnapshot(...e){let t=UB(e),r=BB(e,i=>new ku(this.firestore,new Mi(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return OM(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=bB(this._delegate):e?.source==="server"?t=IB(this._delegate):t=CB(this._delegate),t.then(r=>new ku(this.firestore,new Mi(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(dh.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Dr(n,e,t){return n.message=n.message.replace(e,t),n}function UB(n){for(let e of n)if(typeof e=="object"&&!LM(e))return e;return{}}function BB(n,e){var t,r;let i;return LM(n[0])?i=n[0]:LM(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var ku=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ks(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return RM(this._delegate,e._delegate)}},Ru=class extends ku{data(e){let t=this._delegate.data(e);return this._delegate._converter||y2(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Nu=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ch(e)}where(e,t,r){try{return new n(this.firestore,Jo(this._delegate,hB(e,t,r)))}catch(i){throw Dr(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Jo(this._delegate,fB(e,t)))}catch(r){throw Dr(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Jo(this._delegate,pB(e)))}catch(t){throw Dr(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Jo(this._delegate,mB(e)))}catch(t){throw Dr(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Jo(this._delegate,gB(...e)))}catch(t){throw Dr(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Jo(this._delegate,_B(...e)))}catch(t){throw Dr(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Jo(this._delegate,yB(...e)))}catch(t){throw Dr(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Jo(this._delegate,vB(...e)))}catch(t){throw Dr(t,"endAt()","Query.endAt()")}}isEqual(e){return TM(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=SB(this._delegate):e?.source==="server"?t=TB(this._delegate):t=DB(this._delegate),t.then(r=>new mm(this.firestore,new ns(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=UB(e),r=BB(e,i=>new mm(this.firestore,new ns(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return OM(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(dh.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},UM=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ru(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},mm=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Nu(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ru(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new UM(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Ru(this._firestore,r))})}isEqual(e){return RM(this._delegate,e._delegate)}},hh=class n extends Nu{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Ks(this.firestore,e):null}doc(e){try{return e===void 0?new Ks(this.firestore,pm(this._delegate)):new Ks(this.firestore,pm(this._delegate,e))}catch(t){throw Dr(t,"doc()","CollectionReference.doc()")}}add(e){return MB(this._delegate,e).then(t=>new Ks(this.firestore,t))}isEqual(e){return SM(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(dh.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function xu(n){return mt(n,jt)}var BM=class n{constructor(...e){this._delegate=new ts(...e)}static documentId(){return new n(fn.keyField().canonicalString())}isEqual(e){return e=Le(e),e instanceof ts?this._delegate._internalPath.isEqual(e._internalPath):!1}};var jM=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=NB();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=RB();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=PB(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=OB(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=FB(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var KZ={Firestore:sw,GeoPoint:Iu,Timestamp:Xt,Blob:iw,Transaction:ow,WriteBatch:aw,DocumentReference:Ks,DocumentSnapshot:ku,Query:Nu,QueryDocumentSnapshot:Ru,QuerySnapshot:mm,CollectionReference:hh,FieldPath:BM,FieldValue:jM,setLogLevel:YZ,CACHE_SIZE_UNLIMITED:YU};function QZ(n,e){n.INTERNAL.registerComponent(new $n("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},KZ)))}function ZZ(n){QZ(n,(e,t)=>new sw(e,t,new VM)),n.registerVersion(zZ,WZ)}ZZ(dn);function XZ(n,e=So){return new He(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function jB(n,e){return XZ(n,e)}function JZ(n,e){return jB(n,e).pipe(ql(void 0),kf(),he(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function zM(n,e){return jB(n,e).pipe(he(t=>({payload:t,type:"query"})))}var lw=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:s}=qB(r,t);return new cw(i,s,this.afs)}snapshotChanges(){return JZ(this.ref,this.afs.schedulers.outsideAngular).pipe(Yt)}valueChanges(e={}){return this.snapshotChanges().pipe(he(({payload:t})=>e.idField?de(V({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Ze(this.ref.get(e)).pipe(Yt)}};function uw(n,e){return zM(n,e).pipe(ql(void 0),kf(),he(t=>{let[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,l)=>{let u=s.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),o}))}function HB(n,e,t){return uw(n,t).pipe(ws((r,i)=>eX(r,i.map(s=>s.payload),e),[]),xf(),he(r=>r.map(i=>({type:i.type,payload:i}))))}function eX(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=tX(n,r))}),n}function $M(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function tX(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return $M(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return $M(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return $M(n,e.oldIndex,1);break}return n}function $B(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var cw=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=uw(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(he(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ql(void 0),kf(),Wn(([r,i])=>i.length>0||!r),he(([,r])=>r),Yt)}auditTrail(e){return this.stateChanges(e).pipe(ws((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=$B(e);return HB(this.query,t,this.afs.schedulers.outsideAngular).pipe(Yt)}valueChanges(e={}){return zM(this.query,this.afs.schedulers.outsideAngular).pipe(he(t=>t.payload.docs.map(r=>e.idField?de(V({},r.data()),{[e.idField]:r.id}):r.data())),Yt)}get(e){return Ze(this.query.get(e)).pipe(Yt)}add(e){return this.ref.add(e)}doc(e){return new lw(this.ref.doc(e),this.afs)}},qM=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?uw(this.query,this.afs.schedulers.outsideAngular).pipe(Yt):uw(this.query,this.afs.schedulers.outsideAngular).pipe(he(t=>t.filter(r=>e.indexOf(r.type)>-1)),Wn(t=>t.length>0),Yt)}auditTrail(e){return this.stateChanges(e).pipe(ws((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=$B(e);return HB(this.query,t,this.afs.schedulers.outsideAngular).pipe(Yt)}valueChanges(e={}){return zM(this.query,this.afs.schedulers.outsideAngular).pipe(he(r=>r.payload.docs.map(i=>e.idField?V({[e.idField]:i.id},i.data()):i.data())),Yt)}get(e){return Ze(this.query.get(e)).pipe(Yt)}},nX=new oe("angularfire2.enableFirestorePersistence"),rX=new oe("angularfire2.firestore.persistenceSettings"),iX=new oe("angularfire2.firestore.settings"),sX=new oe("angularfire2.firestore.use-emulator");function qB(n,e=t=>t){return{query:e(n),ref:n}}var Ur=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,l,u,h,p,_,w,E,S,x,H,Y){this.schedulers=l;let q=$o(t,a,r),Q=h;p&&Ap(q,a,_,E,S,x,w,H),[this.firestore,this.persistenceEnabled$]=Ba(`${q.name}.firestore`,"AngularFirestore",q.name,()=>{let pe=a.runOutsideAngular(()=>q.firestore());if(s&&pe.settings(s),Q&&pe.useEmulator(...Q),i&&!ru(o)){let re=()=>{try{return Ze(pe.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(k){return typeof console<"u"&&console.warn(k),De(!1)}};return[pe,a.runOutsideAngular(re)]}else return[pe,De(!1)]},[s,Q,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:s,query:o}=qB(i,r),a=this.schedulers.ngZone.run(()=>s);return new cw(a,o,this)}collectionGroup(t,r){let i=r||(o=>o),s=this.firestore.collectionGroup(t);return new qM(i(s),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new lw(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(B(Vs),B(Us,8),B(nX,8),B(iX,8),B(vn),B($e),B(Va),B(rX,8),B(sX,8),B(Zr,8),B(Cp,8),B(bp,8),B(Ip,8),B(Dp,8),B(Sp,8),B(Tp,8),B(Qi,8))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var Ge=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(Ge||{}),Qs="*";function zB(n,e){return{type:Ge.Trigger,name:n,definitions:e,options:{}}}function WM(n,e=null){return{type:Ge.Animate,styles:e,timings:n}}function WB(n,e=null){return{type:Ge.Sequence,steps:n,options:e}}function Ou(n){return{type:Ge.Style,styles:n,offset:null}}function dw(n,e,t){return{type:Ge.State,name:n,styles:e,options:t}}function GM(n,e,t=null){return{type:Ge.Transition,expr:n,animation:e,options:t}}var al=class{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},gm=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},hw="!";var GB=["toast-component",""];function oX(n,e){if(n&1){let t=Wt();D(0,"button",5),me("click",function(){Se(t);let i=ke();return Te(i.remove())}),D(1,"span",6),G(2,"\xD7"),T()()}}function aX(n,e){if(n&1&&(iv(0),G(1),sv()),n&2){let t=ke(2);z(),Lr("[",t.duplicatesCount+1,"]")}}function lX(n,e){if(n&1&&(D(0,"div"),G(1),zt(2,aX,2,1,"ng-container",4),T()),n&2){let t=ke();Ii(t.options.titleClass),Ns("aria-label",t.title),z(),Lr(" ",t.title," "),z(),Re("ngIf",t.duplicatesCount)}}function uX(n,e){if(n&1&&ce(0,"div",7),n&2){let t=ke();Ii(t.options.messageClass),Re("innerHTML",t.message,ZI)}}function cX(n,e){if(n&1&&(D(0,"div",8),G(1),T()),n&2){let t=ke();Ii(t.options.messageClass),Ns("aria-label",t.message),z(),Lr(" ",t.message," ")}}function dX(n,e){if(n&1&&(D(0,"div"),ce(1,"div",9),T()),n&2){let t=ke();z(),tu("width",t.width()+"%")}}function hX(n,e){if(n&1){let t=Wt();D(0,"button",5),me("click",function(){Se(t);let i=ke();return Te(i.remove())}),D(1,"span",6),G(2,"\xD7"),T()()}}function fX(n,e){if(n&1&&(iv(0),G(1),sv()),n&2){let t=ke(2);z(),Lr("[",t.duplicatesCount+1,"]")}}function pX(n,e){if(n&1&&(D(0,"div"),G(1),zt(2,fX,2,1,"ng-container",4),T()),n&2){let t=ke();Ii(t.options.titleClass),Ns("aria-label",t.title),z(),Lr(" ",t.title," "),z(),Re("ngIf",t.duplicatesCount)}}function mX(n,e){if(n&1&&ce(0,"div",7),n&2){let t=ke();Ii(t.options.messageClass),Re("innerHTML",t.message,ZI)}}function gX(n,e){if(n&1&&(D(0,"div",8),G(1),T()),n&2){let t=ke();Ii(t.options.messageClass),Ns("aria-label",t.message),z(),Lr(" ",t.message," ")}}function _X(n,e){if(n&1&&(D(0,"div"),ce(1,"div",9),T()),n&2){let t=ke();z(),tu("width",t.width()+"%")}}var YM=class{_attachedHost;component;viewContainerRef;injector;constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){let e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},KM=class{_attachedPortal;_disposeFn;attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}},QM=class{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new _t;_activate=new _t;_manualClose=new _t;_resetTimeout=new _t;_countDuplicate=new _t;constructor(e){this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}},fh=class{toastId;config;message;title;toastType;toastRef;_onTap=new _t;_onAction=new _t;constructor(e,t,r,i,s,o){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=s,this.toastRef=o,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}},YB={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},KB=new oe("ToastConfig"),ZM=class extends KM{_hostDomElement;_componentFactoryResolver;_appRef;constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){let r=this._componentFactoryResolver.resolveComponentFactory(e.component),i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}},yX=(()=>{class n{_document=J(wn);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),XM=class{_portalHost;constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}},vX=(()=>{class n{_overlayContainer=J(yX);_componentFactoryResolver=J(Aa);_appRef=J(Di);_document=J(wn);_paneElements=new Map;create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){let i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new ZM(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new XM(this._createPortalHost(t))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lr=(()=>{class n{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(t,r,i,s,o){this.overlay=r,this._injector=i,this.sanitizer=s,this.ngZone=o,this.toastrConfig=V(V({},t.default),t.config),t.config.iconClasses&&(this.toastrConfig.iconClasses=V(V({},t.default.iconClasses),t.config.iconClasses))}show(t,r,i={},s=""){return this._preBuildNotification(s,t,r,this.applyConfig(i))}success(t,r,i={}){let s=this.toastrConfig.iconClasses.success||"";return this._preBuildNotification(s,t,r,this.applyConfig(i))}error(t,r,i={}){let s=this.toastrConfig.iconClasses.error||"";return this._preBuildNotification(s,t,r,this.applyConfig(i))}info(t,r,i={}){let s=this.toastrConfig.iconClasses.info||"";return this._preBuildNotification(s,t,r,this.applyConfig(i))}warning(t,r,i={}){let s=this.toastrConfig.iconClasses.warning||"";return this._preBuildNotification(s,t,r,this.applyConfig(i))}clear(t){for(let r of this.toasts)if(t!==void 0){if(r.toastId===t){r.toastRef.manualClose();return}}else r.toastRef.manualClose()}remove(t){let r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){let i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,s){let{includeTitleDuplicates:o}=this.toastrConfig;for(let a of this.toasts){let l=o&&a.title===t;if((!o||l)&&a.message===r)return a.toastRef.onDuplicate(i,s),a}return null}applyConfig(t={}){return V(V({},this.toastrConfig),t)}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,s)):this._buildNotification(t,r,i,s)}_buildNotification(t,r,i,s){if(!s.toastComponent)throw new Error("toastComponent required");let o=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&o!==null)return o;this.previousToastMessage=r;let a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));let l=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let u=r;r&&s.enableHtml&&(u=this.sanitizer.sanitize(Wr.HTML,r));let h=new QM(l),p=new fh(this.index,s,u,i,t,h),_=[{provide:fh,useValue:p}],w=Gn.create({providers:_,parent:this._injector}),E=new YM(s.toastComponent,w),S=l.attach(E,s.newestOnTop);h.componentInstance=S.instance;let x={toastId:this.index,title:i||"",message:r||"",toastRef:h,onShown:h.afterActivate(),onHidden:h.afterClosed(),onTap:p.onTap(),onAction:p.onAction(),portal:S};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{x.toastRef.activate()})),this.toasts.push(x),x}static \u0275fac=function(r){return new(r||n)(B(KB),B(vX),B(Gn),B(HD),B($e))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wX=(()=>{class n{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=Rs(-1);toastClasses="";state;get _state(){return this.state()}get displayStyle(){if(this.state().value==="inactive")return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s}),this.state=Rs({value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.update(t=>de(V({},t),{value:"active"})),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(this.width()===0||this.width()===100||!this.options.timeOut)return;let t=new Date().getTime(),r=this.hideTime-t;this.width.set(r/this.options.timeOut*100),this.options.progressAnimation==="increasing"&&this.width.update(i=>100-i),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.update(t=>de(V({},t),{value:"active"})),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){this.state().value!=="removed"&&(clearTimeout(this.timeout),this.state.update(t=>de(V({},t),{value:"removed"})),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){this.state().value!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state().value!=="removed"&&this.options.disableTimeOut!=="extendedTimeOut"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state().value==="removed"||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}static \u0275fac=function(r){return new(r||n)(te(lr),te(fh),te($e))};static \u0275cmp=pt({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(r,i){r&1&&me("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),r&2&&(mD("@flyInOut",i._state),Ii(i.toastClasses),tu("display",i.displayStyle))},standalone:!0,features:[Yf],attrs:GB,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(r,i){r&1&&zt(0,oX,3,0,"button",0)(1,lX,3,5,"div",1)(2,uX,1,3,"div",2)(3,cX,2,4,"div",3)(4,dX,2,2,"div",4),r&2&&(Re("ngIf",i.options.closeButton),z(),Re("ngIf",i.title),z(),Re("ngIf",i.message&&i.options.enableHtml),z(),Re("ngIf",i.message&&!i.options.enableHtml),z(),Re("ngIf",i.options.progressBar))},dependencies:[Yr],encapsulation:2,data:{animation:[zB("flyInOut",[dw("inactive",Ou({opacity:0})),dw("active",Ou({opacity:1})),dw("removed",Ou({opacity:0})),GM("inactive => active",WM("{{ easeTime }}ms {{ easing }}")),GM("active => removed",WM("{{ easeTime }}ms {{ easing }}"))])]},changeDetection:0})}return n})(),EX=de(V({},YB),{toastComponent:wX}),CX=(n={})=>Ly([{provide:KB,useValue:{default:EX,config:n}}]),QB=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[CX(t)]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=vt({type:n});static \u0275inj=yt({})}return n})();var bX=(()=>{class n{toastrService;toastPackage;appRef;message;title;options;duplicatesCount;originalTimeout;width=Rs(-1);toastClasses="";get displayStyle(){return this.state()==="inactive"?"none":null}state=Rs("inactive");timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.appRef=i,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.set("active"),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(this.width()===0||this.width()===100||!this.options.timeOut)return;let t=new Date().getTime(),r=this.hideTime-t;this.width.set(r/this.options.timeOut*100),this.options.progressAnimation==="increasing"&&this.width.update(i=>100-i),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.set("active"),this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=new Date().getTime()+(this.originalTimeout||0),this.width.set(-1),this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){this.state()!=="removed"&&(clearTimeout(this.timeout),this.state.set("removed"),this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){this.state()!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state()!=="removed"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state()==="removed"||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}static \u0275fac=function(r){return new(r||n)(te(lr),te(fh),te(Di))};static \u0275cmp=pt({type:n,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(r,i){r&1&&me("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),r&2&&(Ii(i.toastClasses),tu("display",i.displayStyle))},standalone:!0,features:[Yf],attrs:GB,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(r,i){r&1&&zt(0,hX,3,0,"button",0)(1,pX,3,5,"div",1)(2,mX,1,3,"div",2)(3,gX,2,4,"div",3)(4,_X,2,2,"div",4),r&2&&(Re("ngIf",i.options.closeButton),z(),Re("ngIf",i.title),z(),Re("ngIf",i.message&&i.options.enableHtml),z(),Re("ngIf",i.message&&!i.options.enableHtml),z(),Re("ngIf",i.options.progressBar))},dependencies:[Yr],encapsulation:2,changeDetection:0})}return n})(),Jme=de(V({},YB),{toastComponent:bX});var ln=class n{constructor(e,t,r,i){this.afAuth=e;this.firestore=t;this.router=r;this.toastr=i}getUserId(){return this.afAuth.currentUser.then(e=>e?.uid||null)}login(e,t,r=!1){return N(this,null,function*(){try{let i=yield this.afAuth.signInWithEmailAndPassword(e,t);r&&(yield this.afAuth.setPersistence("local"));let s=i.user;return s?(yield this.firestore.collection("users").doc(s.uid).get().toPromise())?.data()?(localStorage.setItem("userLoggedIn","true"),!0):(this.router.navigate(["/dados-usuario"]),!1):!1}catch{return this.toastr.info("Usu\xE1rio ou senha incorretos. Por favor, tente novamente.","Erro",{timeOut:3e3}),!1}})}logout(){return N(this,null,function*(){yield this.afAuth.signOut(),localStorage.removeItem("userLoggedIn")})}isLoggedIn(){return N(this,null,function*(){return new Promise((e,t)=>{this.afAuth.authState.subscribe(r=>{e(r!==null)},t)})})}static \u0275fac=function(t){return new(t||n)(B(Zr),B(Ur),B(En),B(lr))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})};var oj=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(te(bi),te(Fr))}}static{this.\u0275dir=Pt({type:n})}}return n})(),bm=(()=>{class n extends oj{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ks(n)))(i||n)}})()}static{this.\u0275dir=Pt({type:n,features:[Gr]})}}return n})(),ll=new oe(""),IX={provide:ll,useExisting:zr(()=>ex),multi:!0},ex=(()=>{class n extends bm{writeValue(t){this.setProperty("checked",t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ks(n)))(i||n)}})()}static{this.\u0275dir=Pt({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&me("change",function(o){return i.onChange(o.target.checked)})("blur",function(){return i.onTouched()})},features:[Yi([IX]),Gr]})}}return n})(),DX={provide:ll,useExisting:zr(()=>Vn),multi:!0};function SX(){let n=Os()?Os().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var tx=new oe(""),Vn=(()=>{class n extends oj{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!SX())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(te(bi),te(Fr),te(tx,8))}}static{this.\u0275dir=Pt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&me("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Yi([DX]),Gr]})}}return n})();function TX(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var nx=new oe(""),aj=new oe("");function AX(n){return TX(n.value)?{required:!0}:null}function ZB(n){return null}function lj(n){return n!=null}function uj(n){return nu(n)?Ze(n):n}function cj(n){let e={};return n.forEach(t=>{e=t!=null?V(V({},e),t):e}),Object.keys(e).length===0?null:e}function dj(n,e){return e.map(t=>t(n))}function MX(n){return!n.validate}function hj(n){return n.map(e=>MX(e)?e:t=>e.validate(t))}function xX(n){if(!n)return null;let e=n.filter(lj);return e.length==0?null:function(t){return cj(dj(t,e))}}function rx(n){return n!=null?xX(hj(n)):null}function kX(n){if(!n)return null;let e=n.filter(lj);return e.length==0?null:function(t){let r=dj(t,e).map(uj);return cb(r).pipe(he(cj))}}function ix(n){return n!=null?kX(hj(n)):null}function XB(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function RX(n){return n._rawValidators}function NX(n){return n._rawAsyncValidators}function JM(n){return n?Array.isArray(n)?n:[n]:[]}function pw(n,e){return Array.isArray(n)?n.includes(e):n===e}function JB(n,e){let t=JM(e);return JM(n).forEach(i=>{pw(t,i)||t.push(i)}),t}function ej(n,e){return JM(e).filter(t=>!pw(n,t))}var mw=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=rx(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ix(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},gh=class extends mw{get formDirective(){return null}get path(){return null}},Cm=class extends mw{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},gw=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},PX={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},_ge=de(V({},PX),{"[class.ng-submitted]":"isSubmitted"}),ur=(()=>{class n extends gw{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(te(Cm,2))}}static{this.\u0275dir=Pt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Ps("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Gr]})}}return n})(),cr=(()=>{class n extends gw{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(te(gh,10))}}static{this.\u0275dir=Pt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Ps("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Gr]})}}return n})();var _m="VALID",fw="INVALID",ph="PENDING",ym="DISABLED",_h=class{},_w=class extends _h{constructor(e,t){super(),this.value=e,this.source=t}},wm=class extends _h{constructor(e,t){super(),this.pristine=e,this.source=t}},Em=class extends _h{constructor(e,t){super(),this.touched=e,this.source=t}},mh=class extends _h{constructor(e,t){super(),this.status=e,this.source=t}};function fj(n){return(ww(n)?n.validators:n)||null}function OX(n){return Array.isArray(n)?rx(n):n||null}function pj(n,e){return(ww(e)?e.asyncValidators:n)||null}function FX(n){return Array.isArray(n)?ix(n):n||null}function ww(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function LX(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new X(1e3,"");if(!r[t])throw new X(1001,"")}function VX(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new X(1002,"")})}var yw=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Qf(()=>this.statusReactive()),this.statusReactive=Rs(void 0),this._pristine=Qf(()=>this.pristineReactive()),this.pristineReactive=Rs(!0),this._touched=Qf(()=>this.touchedReactive()),this.touchedReactive=Rs(!1),this._events=new _t,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Lo(this.statusReactive)}set status(e){Lo(()=>this.statusReactive.set(e))}get valid(){return this.status===_m}get invalid(){return this.status===fw}get pending(){return this.status==ph}get disabled(){return this.status===ym}get enabled(){return this.status!==ym}get pristine(){return Lo(this.pristineReactive)}set pristine(e){Lo(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Lo(this.touchedReactive)}set touched(e){Lo(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(JB(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(JB(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ej(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ej(e,this._rawAsyncValidators))}hasValidator(e){return pw(this._rawValidators,e)}hasAsyncValidator(e){return pw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(de(V({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Em(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Em(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(de(V({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new wm(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new wm(!0,r))}markAsPending(e={}){this.status=ph;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new mh(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(de(V({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ym,this.errors=null,this._forEachChild(i=>{i.disable(de(V({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new _w(this.value,r)),this._events.next(new mh(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(de(V({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=_m,this._forEachChild(r=>{r.enable(de(V({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(de(V({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_m||this.status===ph)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new _w(this.value,t)),this._events.next(new mh(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(de(V({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ym:_m}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ph,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=uj(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new mh(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Xe,this.statusChanges=new Xe}_calculateStatus(){return this._allControlsDisabled()?ym:this.errors?fw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ph)?ph:this._anyControlsHaveStatus(fw)?fw:_m}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new wm(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Em(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ww(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=OX(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=FX(this._rawAsyncValidators)}},vw=class extends yw{constructor(e,t,r){super(fj(t),pj(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){VX(this,!0,e),Object.keys(e).forEach(r=>{LX(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var sx=new oe("CallSetDisabledState",{providedIn:"root",factory:()=>ox}),ox="always";function UX(n,e){return[...e.path,n]}function mj(n,e,t=ox){gj(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),jX(n,e),$X(n,e),HX(n,e),BX(n,e)}function tj(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function BX(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function gj(n,e){let t=RX(n);e.validator!==null?n.setValidators(XB(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=NX(n);e.asyncValidator!==null?n.setAsyncValidators(XB(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();tj(e._rawValidators,i),tj(e._rawAsyncValidators,i)}function jX(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&_j(n,e)})}function HX(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&_j(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function _j(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function $X(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function qX(n,e){n==null,gj(n,e)}function zX(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function WX(n){return Object.getPrototypeOf(n.constructor)===bm}function GX(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function YX(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Vn?t=s:WX(s)?r=s:i=s}),i||r||t||null}var KX={provide:gh,useExisting:zr(()=>Zn)},vm=Promise.resolve(),Zn=(()=>{class n extends gh{get submitted(){return Lo(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Qf(()=>this.submittedReactive()),this.submittedReactive=Rs(!1),this._directives=new Set,this.ngSubmit=new Xe,this.form=new vw({},rx(t),ix(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){vm.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),mj(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){vm.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){vm.then(()=>{let r=this._findContainer(t.path),i=new vw({});qX(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){vm.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){vm.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),GX(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(te(nx,10),te(aj,10),te(sx,8))}}static{this.\u0275dir=Pt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&me("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Yi([KX]),Gr]})}}return n})();function nj(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function rj(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var QX=class extends yw{constructor(e=null,t,r){super(fj(t),pj(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ww(t)&&(t.nonNullable||t.initialValueIsDefault)&&(rj(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){nj(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){nj(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){rj(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var ZX={provide:Cm,useExisting:zr(()=>Xn)},ij=Promise.resolve(),Xn=(()=>{class n extends Cm{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new QX,this._registered=!1,this.name="",this.update=new Xe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=YX(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),zX(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){mj(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){ij.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Pa(r);ij.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?UX(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(te(gh,9),te(nx,10),te(aj,10),te(ll,10),te(Na,8),te(sx,8))}}static{this.\u0275dir=Pt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Yi([ZX]),Gr,xs]})}}return n})(),dr=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Pt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),XX={provide:ll,useExisting:zr(()=>ea),multi:!0},ea=(()=>{class n extends bm{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ks(n)))(i||n)}})()}static{this.\u0275dir=Pt({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&me("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[Yi([XX]),Gr]})}}return n})();var JX={provide:ll,useExisting:zr(()=>ul),multi:!0};function yj(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function eJ(n){return n.split(":")[0]}var ul=(()=>{class n extends bm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=yj(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=eJ(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ks(n)))(i||n)}})()}static{this.\u0275dir=Pt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&me("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Yi([JX]),Gr]})}}return n})(),yh=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(yj(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(te(Fr),te(bi),te(ul,9))}}static{this.\u0275dir=Pt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),tJ={provide:ll,useExisting:zr(()=>vj),multi:!0};function sj(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function nJ(n){return n.split(":")[0]}var vj=(()=>{class n extends bm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let l=o[a],u=this._getOptionValue(l.value);i.push(u)}}else{let o=r.options;for(let a=0;a<o.length;a++){let l=o[a];if(l.selected){let u=this._getOptionValue(l.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=nJ(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ks(n)))(i||n)}})()}static{this.\u0275dir=Pt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&me("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Yi([tJ]),Gr]})}}return n})(),vh=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(sj(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(sj(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(te(Fr),te(bi),te(vj,9))}}static{this.\u0275dir=Pt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();var rJ=(()=>{class n{constructor(){this._validator=ZB}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):ZB,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Pt({type:n,features:[xs]})}}return n})();var iJ={provide:nx,useExisting:zr(()=>Jn),multi:!0};var Jn=(()=>{class n extends rJ{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Pa,this.createValidator=t=>AX}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ks(n)))(i||n)}})()}static{this.\u0275dir=Pt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Ns("required",i._enabled?"":null)},inputs:{required:"required"},features:[Yi([iJ]),Gr]})}}return n})();var sJ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=vt({type:n})}static{this.\u0275inj=yt({})}}return n})();var wh=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:sx,useValue:t.callSetDisabledState??ox}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=vt({type:n})}static{this.\u0275inj=yt({imports:[sJ]})}}return n})();var Ew=class n{constructor(e,t,r){this.authService=e;this.router=t;this.toastr=r}userLoggedIn=!1;ngOnInit(){this.checkUserLoggedIn()}checkUserLoggedIn(){return N(this,null,function*(){(yield this.authService.isLoggedIn())&&this.router.navigate([""])})}onSubmit(e){return N(this,null,function*(){let t=e.value.user,r=e.value.senha;try{(yield this.authService.isLoggedIn())||((yield this.authService.login(t,r))?this.router.navigate([""]):this.toastr.error("Usu\xE1rio ou senha incorretos ou dados incompletos. Por favor, verifique.","Erro",{timeOut:3e3}))}catch{this.toastr.error("Erro ao processar o login.","Erro")}})}static \u0275fac=function(t){return new(t||n)(te(ln),te(En),te(lr))};static \u0275cmp=pt({type:n,selectors:[["login-component"]],decls:23,vars:0,consts:[["loginForm","ngForm"],[1,"main"],[1,"right_side"],["src","../../assets/img/LOGO_YELLOW.png","alt","",1,"logo"],[1,"left_side"],[1,"form_login"],[1,"title_container"],[1,"title"],["height","5","width","218","xmlns","http://www.w3.org/2000/svg"],["x1","0","y1","10","x2","250","y2","10",2,"stroke","#3c3f3b","stroke-width","12"],["action","#","id","form_login",3,"ngSubmit"],[1,"form__group","field"],["type","input","placeholder","Usu\xE1rio","name","user","id","user","required","","ngModel","",1,"form__field"],["for","user",1,"form__label"],["type","password","placeholder","Senha","name","senha","id","senha","required","","ngModel","",1,"form__field"],["for","senha",1,"form__label"],[1,"form__button"],["type","submit"]],template:function(t,r){if(t&1){let i=Wt();D(0,"div",1)(1,"div",2),ce(2,"img",3),T(),D(3,"div",4)(4,"div",5)(5,"div",6)(6,"span",7),G(7,"Bem-vindo ao SSR Travel!"),T(),xn(),D(8,"svg",8),ce(9,"line",9),T()(),kn(),D(10,"form",10,0),me("ngSubmit",function(){Se(i);let o=ld(11);return Te(r.onSubmit(o))}),D(12,"div",11),ce(13,"input",12),D(14,"label",13),G(15,"Usu\xE1rio"),T()(),D(16,"div",11),ce(17,"input",14),D(18,"label",15),G(19,"Senha"),T()(),D(20,"div",16)(21,"button",17),G(22,"Enviar"),T()()()()()()}},dependencies:[dr,Vn,ur,cr,Jn,Xn,Zn],styles:[`login-component .main{display:flex;height:100vh}login-component .main .right_side{flex:1;background-color:#3c3f3b;display:flex;justify-content:center;align-items:center}login-component .main .right_side .logo{max-width:80%}login-component .main .left_side{flex:1;display:flex}login-component .main .left_side .form_login{flex:1;display:flex;justify-content:center;align-items:center;flex-direction:column}login-component .main .left_side .form_login .title_container{display:flex;flex-direction:column;justify-content:center;align-items:center;padding-bottom:50px}login-component .main .left_side .form_login .title_container .title{font-size:24px;color:#3c3f3b}login-component .main .left_side .form_login #form_login{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}login-component .main .left_side .form_login #form_login input:-webkit-autofill,login-component .main .left_side .form_login #form_login input:-webkit-autofill:hover,login-component .main .left_side .form_login #form_login input:-webkit-autofill:focus,login-component .main .left_side .form_login #form_login input:-webkit-autofill:active{-webkit-box-shadow:0 0 0 30px white inset!important;-webkit-text-fill-color:#3c3f3b}login-component .main .left_side .form_login #form_login .form__group{position:relative;padding:15px 0 0;margin-top:10px;width:50%}login-component .main .left_side .form_login #form_login .form__field{width:100%;border:0;border-bottom:1px solid #3c3f3b;outline:0;font-size:24px;color:#3c3f3b!important;padding:7px 0;background:transparent;transition:border-color .2s}login-component .main .left_side .form_login #form_login .form__field::placeholder{color:transparent}login-component .main .left_side .form_login #form_login .form__field:placeholder-shown~.form__label{font-size:24px;cursor:text;top:20px}login-component .main .left_side .form_login #form_login .form__label{position:absolute;top:0;display:block;transition:.2s;font-size:16px;color:#3c3f3b}login-component .main .left_side .form_login #form_login .form__field:focus{border-width:1px;border-color:#3c3f3b;border-image-slice:1}login-component .main .left_side .form_login #form_login .form__field:focus~.form__label{position:absolute;top:0;display:block;transition:.2s;font-size:16px;color:#3c3f3b}login-component .main .left_side .form_login #form_login .form__field:required,login-component .main .left_side .form_login #form_login .form__field:invalid{box-shadow:none}login-component .main .left_side .form_login #form_login .form__button{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}login-component .main .left_side .form_login #form_login .form__button button{width:50%;margin-top:40px;border:none;border-radius:10px;padding:15px 0;color:#fec870;text-transform:uppercase;font-size:24px;background-color:#3c3f3b;cursor:pointer}
`],encapsulation:2})};var bj=Ec(Lu());var Ch=class n{constructor(e,t){this.afAuth=e;this.firestore=t}saveUserData(e){return this.afAuth.authState.pipe(bt(t=>t?this.firestore.collection("users").doc(t.uid).set(e,{merge:!0}):De(null)))}getUserData(){return this.afAuth.authState.pipe(bt(e=>e?this.firestore.collection("users").doc(e.uid).valueChanges():new He(t=>t.next(null))))}isUserDataComplete(){return this.afAuth.authState.pipe(bt(e=>e?this.firestore.collection("users").doc(e.uid).get().pipe(he(t=>{let r=t.data();return!!(r&&r.name&&r.cpf&&r.email&&r.phone&&r.birthDate&&r.address&&r.role&&(r.role==="dono"&&r.agencyName&&r.cnpj||r.role==="agente"))})):De(!1)))}static \u0275fac=function(t){return new(t||n)(B(Zr),B(Ur))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})};var lx=Ec(Lu());var Xs=class n{constructor(e,t){this.firestore=e;this.authService=t}getLembretesDoMes(e){return N(this,null,function*(){let t=null;if((yield this.authService.isLoggedIn())&&(t=yield this.authService.getUserId()),t){let r=(0,lx.default)(e,"MM-YYYY").startOf("month").format("YYYY-MM-DD"),i=(0,lx.default)(e,"MM-YYYY").endOf("month").format("YYYY-MM-DD");return Ze(this.firestore.collection(`lembretes/${t}/itens`,s=>s.where("data",">=",r).where("data","<=",i)).snapshotChanges().pipe(he(s=>s.map(o=>{let a=o.payload.doc.data(),l=o.payload.doc.id;return V({id:l},a)}))))}else throw new Error("Usu\xE1rio n\xE3o autenticado")})}adicionarLembrete(e){return N(this,null,function*(){let t=yield this.authService.getUserId();if(t)return this.firestore.collection(`lembretes/${t}/itens`).add(e);throw new Error("Usu\xE1rio n\xE3o autenticado")})}marcarComoLido(e){return N(this,null,function*(){let t=yield this.authService.getUserId(),r="";e.status=="NaoLido"?r="Lido":r="NaoLido",this.firestore.collection(`lembretes/${t}/itens`).doc(e.id).update({status:r}).then(()=>{e.lido=!0,console.log(`${e.titulo} foi marcado como Lido no Firestore!`)}).catch(i=>{console.error("Erro ao marcar como Lido: ",i)})})}marcarComoConcluido(e){return N(this,null,function*(){let t=yield this.authService.getUserId(),r="";e.status=="NaoLido"||e.status=="Lido"?r="Conclu\xEDdo":r="NaoLido",this.firestore.collection(`lembretes/${t}/itens`).doc(e.id).update({status:r}).then(()=>{e.concluido=!0,console.log(`${e.titulo} foi marcado como Conclu\xEDdo no Firestore!`)}).catch(i=>{console.error("Erro ao marcar como Conclu\xEDdo: ",i)})})}updateLembrete(e){return N(this,null,function*(){let t=yield this.authService.getUserId();yield this.firestore.collection(`lembretes/${t}/itens`).doc(e.id).update(e)})}deleteLembrete(e){return N(this,null,function*(){let t=yield this.authService.getUserId();yield this.firestore.collection(`lembretes/${t}/itens`).doc(e).delete()})}static \u0275fac=function(t){return new(t||n)(B(Ur),B(ln))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})};var Vu=Ec(Lu()),Oge=Ec(Cj());var bw=class n{lembrete;close=new Xe;save=new Xe;delete=new Xe;onSave(){this.save.emit(this.lembrete),this.closeModal()}onDelete(){this.delete.emit(this.lembrete.id),this.closeModal()}closeModal(){this.close.emit()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=pt({type:n,selectors:[["app-modal-editar-lembrete"]],inputs:{lembrete:"lembrete"},outputs:{close:"close",save:"save",delete:"delete"},decls:44,vars:5,consts:[[1,"modal"],[1,"modal-content"],[1,"underline"],["height","5","width","150"],["x1","0","y1","0","x2","150","y2","0",2,"stroke","#3c3f3b","stroke-width","5"],[1,"formEditarLembrete",3,"ngSubmit"],[1,"info"],[1,"left-info"],["type","text","name","titulo","placeholder","T\xEDtulo do Lembrete","d","","required","",3,"ngModelChange","ngModel"],["type","date","name","data","required","",3,"ngModelChange","ngModel"],["name","prioridade","required","",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],["value","Alta"],["value","M\xE9dia"],["value","Baixa"],["name","categoria",3,"ngModelChange","ngModel"],["value","Pagamento"],["value","ViagemIda"],["value","ViagemVolta"],["value","Retorno"],["value","Outro"],[1,"right-info"],["name","mensagem","placeholder","Mensagem do Lembrete","required","",3,"ngModelChange","ngModel"],[1,"modal-actions"],["type","submit",1,"btn","btn-primary"],[1,"fa-solid","fa-calendar-plus"],["type","button",1,"delete-button",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(t,r){t&1&&(D(0,"div",0)(1,"div",1)(2,"h2"),G(3,"Editar Lembrete"),T(),D(4,"div",2),xn(),D(5,"svg",3),ce(6,"line",4),T()(),kn(),D(7,"form",5),me("ngSubmit",function(){return r.onSave()}),D(8,"div",6)(9,"div",7)(10,"input",8),ve("ngModelChange",function(s){return be(r.lembrete.titulo,s)||(r.lembrete.titulo=s),s}),T(),D(11,"input",9),ve("ngModelChange",function(s){return be(r.lembrete.data,s)||(r.lembrete.data=s),s}),T(),D(12,"select",10),ve("ngModelChange",function(s){return be(r.lembrete.prioridade,s)||(r.lembrete.prioridade=s),s}),D(13,"option",11),G(14,"Selecione a Prioridade"),T(),D(15,"option",12),G(16,"Alta"),T(),D(17,"option",13),G(18,"M\xE9dia"),T(),D(19,"option",14),G(20,"Baixa"),T()(),D(21,"select",15),ve("ngModelChange",function(s){return be(r.lembrete.categoria,s)||(r.lembrete.categoria=s),s}),D(22,"option",11),G(23,"Selecione a Categoria"),T(),D(24,"option",16),G(25,"Pagamento"),T(),D(26,"option",17),G(27,"Viagem (Ida)"),T(),D(28,"option",18),G(29,"Viagem (Volta)"),T(),D(30,"option",19),G(31,"Retorno"),T(),D(32,"option",20),G(33,"Outro"),T()()(),D(34,"div",21)(35,"textarea",22),ve("ngModelChange",function(s){return be(r.lembrete.mensagem,s)||(r.lembrete.mensagem=s),s}),T()()(),D(36,"div",23)(37,"button",24),ce(38,"i",25),G(39," Salvar "),T(),D(40,"button",26),me("click",function(){return r.onDelete()}),G(41," Excluir "),T(),D(42,"button",27),me("click",function(){return r.closeModal()}),G(43," Cancelar "),T()()()()()),t&2&&(z(10),ye("ngModel",r.lembrete.titulo),z(),ye("ngModel",r.lembrete.data),z(),ye("ngModel",r.lembrete.prioridade),z(9),ye("ngModel",r.lembrete.categoria),z(14),ye("ngModel",r.lembrete.mensagem))},dependencies:[dr,yh,vh,Vn,ul,ur,cr,Jn,Xn,Zn],styles:[`app-modal-editar-lembrete .modal{position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;background-color:#00000080;display:flex;align-items:center;justify-content:center}app-modal-editar-lembrete .modal-content{background-color:#fff;padding:20px;border-radius:10px;width:30%;box-shadow:0 4px 8px #0003;text-align:center}app-modal-editar-lembrete .modal-content .underline{margin-bottom:10px}app-modal-editar-lembrete .modal-content .formEditarLembrete{display:flex;flex-direction:column;align-items:center}app-modal-editar-lembrete .modal-content .formEditarLembrete .info{display:flex;flex-direction:row;gap:10px;width:100%;margin-bottom:20px}app-modal-editar-lembrete .modal-content .formEditarLembrete .info .left-info{flex:4;display:flex;flex-direction:column;gap:10px}app-modal-editar-lembrete .modal-content .formEditarLembrete .info .left-info input,app-modal-editar-lembrete .modal-content .formEditarLembrete .info .left-info select{font-family:Nunito Sans,sans-serif;height:30px;padding:5px}app-modal-editar-lembrete .modal-content .formEditarLembrete .info .right-info{flex:8}app-modal-editar-lembrete .modal-content .formEditarLembrete .info .right-info textarea{font-family:Nunito Sans,sans-serif;width:100%;height:100%;resize:none;padding:10px}app-modal-editar-lembrete .modal-content .formEditarLembrete .modal-actions{width:100%;display:flex;gap:20px}app-modal-editar-lembrete .modal-content .formEditarLembrete .modal-actions button{background-color:#3c3f3b;border:none;padding:10px;color:#fec870;text-transform:uppercase;cursor:pointer;width:50%}app-modal-editar-lembrete .modal-content .formEditarLembrete .modal-actions button i{margin-right:10px}
`],encapsulation:2})};function aJ(n,e){if(n&1&&(D(0,"div",25),G(1),T()),n&2){let t=e.$implicit;z(),Lr(" ",t," ")}}function lJ(n,e){if(n&1&&(D(0,"div",32),G(1," \u25CF "),T()),n&2){let t=e.$implicit,r=ke(4);Ii(r.getEventoClass(t))}}function uJ(n,e){if(n&1&&(D(0,"div",30),zt(1,lJ,2,2,"div",31),T()),n&2){let t=ke().$implicit,r=ke(2);z(),Re("ngForOf",r.getEventosCalendario(t))}}function cJ(n,e){if(n&1){let t=Wt();D(0,"div",27),me("click",function(){let i=Se(t).$implicit,s=ke(2);return Te(s.selectDate(i))}),D(1,"div",28),G(2),T(),zt(3,uJ,2,1,"div",29),T()}if(n&2){let t=e.$implicit,r=ke(2);Ps("current-month",r.isCurrentMonth(t))("selected",r.isSelected(t))("prev-month",r.isPrevMonth(t))("next-month",r.isNextMonth(t))("today",r.isToday(t)),z(2),on(t.format("D")),z(),Re("ngIf",r.hasCompromissos(t))}}function dJ(n,e){if(n&1&&(D(0,"div",9),zt(1,cJ,4,12,"div",26),T()),n&2){let t=e.$implicit;z(),Re("ngForOf",t)}}function hJ(n,e){if(n&1){let t=Wt();D(0,"li")(1,"div",33)(2,"div",34)(3,"p",35),G(4),T(),D(5,"p",36),G(6),T()(),D(7,"div",37)(8,"span",38),ce(9,"i",39),T(),D(10,"span",40),me("click",function(){let i=Se(t).$implicit,s=ke();return Te(s.marcarComoLido(i))}),ce(11,"i",41),T(),D(12,"span",40),me("click",function(){let i=Se(t).$implicit,s=ke();return Te(s.marcarComoConcluido(i))}),ce(13,"i",42),T(),D(14,"button",43),me("click",function(){let i=Se(t).$implicit,s=ke();return Te(s.openEditModal(i))}),ce(15,"i",44),G(16,"Editar "),T()()()()}if(n&2){let t=e.$implicit,r=ke();z(),Re("ngClass",r.retornaClasseStatus(t.status)),z(3),on(t.titulo),z(2),on(t.mensagem),z(2),Ii(r.getEventoClass(t)),z(),Re("ngClass",r.getCategoryIcon(t.categoria)),z(),Ps("disabled",t.status=="Lido")("disabledConcluido",t.status=="Conclu\xEDdo"),z(2),Ps("colorRemark",t.status=="Lido")("disabledConcluido",t.status=="Conclu\xEDdo")}}function fJ(n,e){if(n&1){let t=Wt();D(0,"app-modal-editar-lembrete",45),me("close",function(){Se(t);let i=ke();return Te(i.showModal=!1)})("save",function(i){Se(t);let s=ke();return Te(s.onSaveLembrete(i))})("delete",function(i){Se(t);let s=ke();return Te(s.onDeleteLembrete(i))}),T()}if(n&2){let t=ke();Re("lembrete",t.lembreteAtual)}}var Iw=class n{constructor(e){this.calendarioService=e;Vu.default.locale("pt-br")}currentDate=(0,Vu.default)();selectedDate=(0,Vu.default)();weeks=[];lembretes=[];lembreteAtual;showModal=!1;dayNames=["Domingo","Segunda","Ter\xE7a","Quarta","Quinta","Sexta","S\xE1bado"];ngOnInit(){this.getLembretesDoMes(),this.generateCalendar()}getLembretesDoMes(){return N(this,null,function*(){let e=this.currentDate.format("MM");(yield this.calendarioService.getLembretesDoMes(e)).subscribe(r=>{this.lembretes=r})})}generateCalendar(){let e=this.currentDate.clone().startOf("month").startOf("week"),t=this.currentDate.clone().endOf("month").endOf("week"),r=e.clone(),i=[];for(this.weeks=[];r.isSameOrBefore(t);)i.push(r.clone()),r.weekday()===6&&(this.weeks.push(i),i=[]),r.add(1,"day");i.length>0&&this.weeks.push(i)}prevMonth(){this.currentDate.subtract(1,"month"),this.generateCalendar(),this.getLembretesDoMes()}nextMonth(){this.currentDate.add(1,"month"),this.generateCalendar(),this.getLembretesDoMes()}isPrevMonth(e){return e.month()<this.currentDate.month()}isNextMonth(e){return e.month()>this.currentDate.month()}isToday(e){return e.isSame((0,Vu.default)(),"day")}isCurrentMonth(e){return e.month()===this.currentDate.month()}isSelected(e){return e.isSame(this.selectedDate,"day")}selectDate(e){this.selectedDate=e}hasCompromissos(e){return this.getEventosDoDia(e).length>0}getEventosDoDia(e){return this.lembretes.filter(t=>(0,Vu.default)(t.data).format("YYYY-MM-DD")===e.format("YYYY-MM-DD"))}getEventosCalendario(e){let t=this.lembretes.filter(i=>(0,Vu.default)(i.data).format("YYYY-MM-DD")===e.format("YYYY-MM-DD")),r=[];return t.forEach(i=>{r.some(o=>o.data===i.data&&o.prioridade===i.prioridade)||r.push({data:i.data,prioridade:i.prioridade})}),r}getEventoClass(e){switch(e.prioridade){case"Alta":return"compromisso-alta";case"M\xE9dia":return"compromisso-media";case"Baixa":return"compromisso-baixa";default:return""}}getCategoryIcon(e){switch(e){case"Pagamento":return"fas fa-dollar-sign";case"ViagemIda":return"fas fa-plane-departure";case"ViagemVolta":return"fas fa-plane-arrival";case"Retorno":return"fas fa-undo";case"Outro":return"fas fa-ellipsis-h";default:return"fas fa-question"}}getLembretesDoDia(e){return this.getEventosDoDia(e)}marcarComoLido(e){return N(this,null,function*(){yield this.calendarioService.marcarComoLido(e)})}marcarComoConcluido(e){return N(this,null,function*(){yield this.calendarioService.marcarComoConcluido(e)})}retornaClasseStatus(e){switch(e){case"Lido":return"lido";case"Conclu\xEDdo":return"concluido"}}openEditModal(e){this.lembreteAtual=V({},e),this.showModal=!0}onSaveLembrete(e){return N(this,null,function*(){try{yield this.calendarioService.updateLembrete(e),this.showModal=!1}catch(t){console.error("Erro ao excluir o lembrete:",t)}})}onDeleteLembrete(e){return N(this,null,function*(){try{yield this.calendarioService.deleteLembrete(e),this.showModal=!1}catch(t){console.error("Erro ao excluir o lembrete:",t)}})}static \u0275fac=function(t){return new(t||n)(te(Xs))};static \u0275cmp=pt({type:n,selectors:[["app-calendario"]],decls:43,vars:6,consts:[[1,"calendario-container"],[1,"calendario-esquerda"],[1,"calendar"],[1,"header"],[3,"click"],[1,"fa-solid","fa-calendar-minus"],[1,"month-name"],[1,"fa-solid","fa-calendar-plus"],[1,"days"],[1,"week"],["class","day-name",4,"ngFor","ngForOf"],["class","week",4,"ngFor","ngForOf"],[1,"calendario-direita"],["height","5","width","175","xmlns","http://www.w3.org/2000/svg"],["x1","0","y1","10","x2","250","y2","10",2,"stroke","#3c3f3b","stroke-width","12"],[1,"lista-lembretes"],[4,"ngFor","ngForOf"],[1,"legenda-categorias"],[1,"legenda-lista"],[1,"fas","fa-dollar-sign"],[1,"fas","fa-plane-departure"],[1,"fas","fa-plane-arrival"],[1,"fas","fa-undo"],[1,"fas","fa-ellipsis-h"],[3,"lembrete","close","save","delete",4,"ngIf"],[1,"day-name"],["class","day",3,"current-month","selected","prev-month","next-month","today","click",4,"ngFor","ngForOf"],[1,"day",3,"click"],[1,"day-number"],["class","eventos-line",4,"ngIf"],[1,"eventos-line"],["class","evento-indicador",3,"class",4,"ngFor","ngForOf"],[1,"evento-indicador"],[1,"lembrete-item",3,"ngClass"],[1,"lembrete-content"],[1,"lembrete-content__title"],[1,"lembrete-content__mensagem"],[1,"lembrete-icon"],[1,"prioridade"],[3,"ngClass"],[1,"lembrete-action",3,"click"],[1,"fas","fa-eye"],[1,"fas","fa-check"],[1,"btnEditar",3,"click"],[1,"fa-solid","fa-pencil"],[3,"close","save","delete","lembrete"]],template:function(t,r){t&1&&(D(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),me("click",function(){return r.prevMonth()}),ce(5,"i",5),G(6," Anterior "),T(),D(7,"div",6),G(8),T(),D(9,"button",4),me("click",function(){return r.nextMonth()}),ce(10,"i",7),G(11," Pr\xF3ximo "),T()(),D(12,"div",8)(13,"div",9),zt(14,aJ,2,1,"div",10),T(),zt(15,dJ,2,1,"div",11),T()()(),D(16,"div",12)(17,"h3"),G(18),T(),xn(),D(19,"svg",13),ce(20,"line",14),T(),kn(),D(21,"ul",15),zt(22,hJ,17,14,"li",16),T()()(),D(23,"div",17)(24,"h4"),G(25,"Legenda das Categorias"),T(),D(26,"ul",18)(27,"li"),ce(28,"i",19),G(29,": Pagamento"),T(),D(30,"li"),ce(31,"i",20),G(32,": Viagem (Ida)"),T(),D(33,"li"),ce(34,"i",21),G(35,": Viagem (Volta)"),T(),D(36,"li"),ce(37,"i",22),G(38,": Retorno"),T(),D(39,"li"),ce(40,"i",23),G(41,": Outros"),T()()(),zt(42,fJ,1,1,"app-modal-editar-lembrete",24)),t&2&&(z(8),on(r.currentDate.format("MMMM | YYYY")),z(6),Re("ngForOf",r.dayNames),z(),Re("ngForOf",r.weeks),z(3),Lr("Lembretes do Dia: ",r.selectedDate.format("LL"),""),z(4),Re("ngForOf",r.getLembretesDoDia(r.selectedDate)),z(20),Re("ngIf",r.showModal))},dependencies:[KF,cd,Yr,bw],styles:[`app-calendario .calendario-container{display:flex;justify-content:space-between;padding:20px}app-calendario .calendario-esquerda{flex:1;padding-right:20px;border-right:1px solid #ccc}app-calendario .calendario-direita{flex:1;padding-left:20px;text-align:center}app-calendario .calendario-direita svg{margin-bottom:10px}app-calendario .calendar{font-family:Nunito Sans,sans-serif;border-radius:5px;padding:10px;background-color:#3c3f3b;margin-bottom:20px}app-calendario .calendar .header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;padding-bottom:10px;border-bottom:1px solid #fec870}app-calendario .calendar .header .month-name{text-transform:capitalize;color:#ffd694}app-calendario .calendar .header button{padding:5px;font-family:Nunito Sans,sans-serif;color:#fec870;background-color:#3c3f3b;border:1px solid #fec870;box-shadow:1px 1px 1px #ffd694;text-transform:uppercase;border-radius:3px}app-calendario .calendar .day-name{text-align:center;font-family:Nunito Sans,sans-serif;color:#ffd694}app-calendario .calendar .days{display:grid;gap:5px}app-calendario .calendar .days .week{display:grid;grid-template-columns:repeat(7,1fr);gap:5px}app-calendario .calendar .days .week .day{text-align:center;padding:10px;border:1px solid #fec870;border-radius:5px;cursor:pointer;height:60px;display:flex;flex-direction:column;justify-content:space-between;align-items:center}app-calendario .calendar .days .week .day.current-month{background-color:#fec870}app-calendario .calendar .days .week .day.prev-month,app-calendario .calendar .days .week .day.next-month{background-color:#e9ecef;color:#999}app-calendario .calendar .days .week .day.selected{background-color:#f2e3bc;border-color:#fec870}app-calendario .calendar .days .week .day.today{background-color:#f2e3bc}app-calendario .calendar .days .week .day .day-number{font-weight:700}app-calendario .calendar .days .week .day .eventos-line{font-size:12px;display:flex}app-calendario .lista-lembretes{font-family:Nunito Sans,sans-serif;list-style:none;padding:0}app-calendario .lista-lembretes .lembrete-item{display:flex;margin-bottom:10px;padding:10px 25px;color:#fec870;background-color:#3c3f3b;border-radius:15px;border:1px solid #3c3f3b;align-items:center}app-calendario .lista-lembretes .lembrete-item.lido{background-color:#e7e7e7!important;color:#3c3f3b}app-calendario .lista-lembretes .lembrete-item.concluido{background-color:#e7e7e7!important;opacity:.5;color:#3c3f3b}app-calendario .lista-lembretes .lembrete-item .lembrete-content{flex:9;text-align:left}app-calendario .lista-lembretes .lembrete-item .lembrete-content__title{font-size:18px}app-calendario .lista-lembretes .lembrete-item .lembrete-content__mensagem{font-size:14px}app-calendario .lista-lembretes .lembrete-item .lembrete-icon{flex:3;display:flex;text-align:right}app-calendario .lista-lembretes .lembrete-item .lembrete-icon .btnEditar{border:none;color:#2d2f2d;background-color:#fec870;border-radius:5px;cursor:pointer;padding:0 10px;margin:0 0 0 20px}app-calendario .lista-lembretes .lembrete-item .lembrete-icon .btnEditar i{margin-right:10px}app-calendario .lista-lembretes .lembrete-item .lembrete-icon .lembrete-action{margin-left:10px;cursor:pointer;font-size:16px;color:#fff;transition:color .3s}app-calendario .lista-lembretes .lembrete-item .lembrete-icon .lembrete-action.disabled{color:#3c3f3b;opacity:.5}app-calendario .lista-lembretes .lembrete-item .lembrete-icon .lembrete-action.colorRemark{color:#3c3f3b}app-calendario .lista-lembretes .lembrete-item .lembrete-icon .lembrete-action.disabledConcluido{pointer-events:none;color:#3c3f3b}app-calendario .lista-lembretes .lembrete-item .lembrete-icon .lembrete-action:hover{color:#fec870}app-calendario .compromisso-alta{color:#961512}app-calendario .compromisso-media{color:#de9226}app-calendario .compromisso-baixa{color:#47832d}app-calendario .legenda-categorias{margin-top:20px;padding:10px;background-color:#e7e7e7;border:1px solid #ddd;border-radius:5px;width:45%;text-align:center;color:#3c3f3b}app-calendario .legenda-categorias h4{margin-bottom:10px;font-size:16px;font-weight:700}app-calendario .legenda-categorias .legenda-lista{list-style-type:none;padding:0;display:flex;flex-wrap:wrap;gap:15px;justify-content:center}app-calendario .legenda-categorias .legenda-lista li{display:flex;align-items:center;border-right:1px solid #3c3f3b;padding:0 10px 0 0}app-calendario .legenda-categorias .legenda-lista li:last-child{border-right:none}app-calendario .legenda-categorias .legenda-lista li i{margin-right:5px;font-size:18px}
`],encapsulation:2})};var Dw=class n{constructor(e,t,r,i,s){this.router=e;this.authService=t;this.userService=r;this.toastr=i;this.calendarioService=s}currentDate=(0,bj.default)();userLoggedIn=!1;lembretes=[];newLembrete="";lembreteData="";lembretePrioridade="";lembreteCategoria="";showLembreteForm=!1;ngOnInit(){this.checkUserLoggedIn(),this.userService.isUserDataComplete().subscribe(e=>{e||(this.toastr.info("Por favor, complete seus dados antes de continuar.","Aten\xE7\xE3o"),this.router.navigate(["/dados-usuario"]))})}checkUserLoggedIn(){return N(this,null,function*(){this.userLoggedIn=yield this.authService.isLoggedIn(),this.userLoggedIn||this.router.navigate(["/login"])})}static \u0275fac=function(t){return new(t||n)(te(En),te(ln),te(Ch),te(lr),te(Xs))};static \u0275cmp=pt({type:n,selectors:[["app-dashboard"]],decls:11,vars:1,consts:[[1,"dashboard-content"],[1,"title-dashboard"],[1,"title"],["height","5","width","175","xmlns","http://www.w3.org/2000/svg"],["x1","0","y1","10","x2","250","y2","10",2,"stroke","#3c3f3b","stroke-width","12"],[1,"sub-title"],[1,"content-container"],[1,"calendario-container"]],template:function(t,r){t&1&&(D(0,"div",0)(1,"div",1)(2,"span",2),G(3,"RESUMO DO M\xCAS"),T(),xn(),D(4,"svg",3),ce(5,"line",4),T(),kn(),D(6,"span",5),G(7),T()(),D(8,"div",6)(9,"div",7),ce(10,"app-calendario"),T()()()),t&2&&(z(7),on(r.currentDate.format("MMMM")))},dependencies:[Iw],styles:[`app-dashboard .dashboard-content{display:flex;flex-direction:column;height:100%;justify-content:center;background-image:url("./media/LOGO_YELLOW_DASH-LFV5PFJ3.png");background-size:45%;background-repeat:no-repeat;background-position:center}app-dashboard .dashboard-content .title-dashboard{display:flex;flex-direction:column;align-items:center;padding-bottom:2.7vh}app-dashboard .dashboard-content .title-dashboard .title{font-style:normal;font-weight:400;font-size:36px;color:#3c3f3b}app-dashboard .dashboard-content .title-dashboard .sub-title{text-transform:uppercase;font-style:normal;font-weight:400;font-size:64px;color:#3c3f3b}app-dashboard .dashboard-content .content-container{display:flex;padding:0 35px;gap:30px}app-dashboard .dashboard-content .content-container .calendario-container{flex:1;max-width:100%}app-dashboard .floating-button{position:fixed;bottom:30px;right:30px;width:60px;height:60px;background-color:#007bff;color:#fff;border:none;border-radius:50%;box-shadow:0 4px 6px #0003;cursor:pointer;font-size:24px;display:flex;justify-content:center;align-items:center;transition:background-color .3s}app-dashboard .floating-button:hover{background-color:#0056b3}app-dashboard .floating-button i{font-size:24px}app-dashboard .lembrete-modal{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center}app-dashboard .lembrete-modal-content{background-color:#fff;padding:20px;border-radius:10px;box-shadow:0 4px 8px #0000001a;width:400px;max-width:90%;position:relative}app-dashboard .close{position:absolute;top:10px;right:15px;font-size:24px;cursor:pointer}
`],encapsulation:2})};var Rj="firebasestorage.googleapis.com",Nj="storageBucket",mJ=2*60*1e3,gJ=10*60*1e3,_J=1e3;var en=class n extends m_{constructor(e,t,r=0){super(cx(e),`Firebase Storage: ${t} (${cx(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return cx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Qt=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Qt||{});function cx(n){return"storage/"+n}function yx(){let n="An unknown error occurred, please check the error payload for server response.";return new en(Qt.UNKNOWN,n)}function yJ(n){return new en(Qt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function vJ(n){return new en(Qt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function wJ(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new en(Qt.UNAUTHENTICATED,n)}function EJ(){return new en(Qt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function CJ(n){return new en(Qt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function Pj(){return new en(Qt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Oj(){return new en(Qt.CANCELED,"User canceled the upload/download.")}function bJ(n){return new en(Qt.INVALID_URL,"Invalid URL '"+n+"'.")}function IJ(n){return new en(Qt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function DJ(){return new en(Qt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Nj+"' property when initializing the app?")}function Fj(){return new en(Qt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function SJ(){return new en(Qt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function TJ(){return new en(Qt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function AJ(n){return new en(Qt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Uu(n){return new en(Qt.INVALID_ARGUMENT,n)}function Lj(){return new en(Qt.APP_DELETED,"The Firebase app was deleted.")}function vx(n){return new en(Qt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Dm(n,e){return new en(Qt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Im(n){throw new en(Qt.INTERNAL_ERROR,"Internal error: "+n)}var Sr=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw IJ(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(Q){Q.path.charAt(Q.path.length-1)==="/"&&(Q.path_=Q.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(Q){Q.path_=decodeURIComponent(Q.path)}let h="v[A-Za-z0-9_]+",p=t.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",w=new RegExp(`^https?://${p}/${h}/b/${i}/o${_}`,"i"),E={bucket:1,path:3},S=t===Rj?"(?:storage.googleapis.com|storage.cloud.google.com)":t,x="([^?#]*)",H=new RegExp(`^https?://${S}/${i}/${x}`,"i"),q=[{regex:a,indices:l,postModify:s},{regex:w,indices:E,postModify:u},{regex:H,indices:{bucket:1,path:2},postModify:u}];for(let Q=0;Q<q.length;Q++){let pe=q[Q],re=pe.regex.exec(e);if(re){let k=re[pe.indices.bucket],I=re[pe.indices.path];I||(I=""),r=new n(k,I),pe.postModify(r);break}}if(r==null)throw bJ(e);return r}},hx=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function MJ(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...x){u||(u=!0,e.apply(null,x))}function p(x){i=setTimeout(()=>{i=null,n(w,l())},x)}function _(){s&&clearTimeout(s)}function w(x,...H){if(u){_();return}if(x){_(),h.call(null,x,...H);return}if(l()||o){_(),h.call(null,x,...H);return}r<64&&(r*=2);let q;a===1?(a=2,q=0):q=(r+Math.random())*1e3,p(q)}let E=!1;function S(x){E||(E=!0,_(),!u&&(i!==null?(x||(a=2),clearTimeout(i),p(0)):x||(a=1)))}return p(0),s=setTimeout(()=>{o=!0,S(!0)},t),S}function xJ(n){n(!1)}function kJ(n){return n!==void 0}function RJ(n){return typeof n=="function"}function NJ(n){return typeof n=="object"&&!Array.isArray(n)}function Aw(n){return typeof n=="string"||n instanceof String}function Ij(n){return wx()&&n instanceof Blob}function wx(){return typeof Blob<"u"}function fx(n,e,t,r){if(r<e)throw Uu(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Uu(`Invalid value for '${n}'. Expected ${t} or less.`)}function dl(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Vj(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Dh=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Dh||{});function Uj(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}var px=class{constructor(e,t,r,i,s,o,a,l,u,h,p,_=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=p,this.retry=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,E)=>{this.resolve_=w,this.reject_=E,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Ih(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===Dh.NO_ERROR,l=s.getStatus();if(!a||Uj(l,this.additionalRetryCodes_)&&this.retry){let h=s.getErrorCode()===Dh.ABORT;r(!1,new Ih(!1,null,h));return}let u=this.successCodes_.indexOf(l)!==-1;r(!0,new Ih(u,s))})},t=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let l=this.callback_(a,a.getResponse());kJ(l)?s(l):s()}catch(l){o(l)}else if(a!==null){let l=yx();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){let l=this.appDelete_?Lj():Oj();o(l)}else{let l=Pj();o(l)}};this.canceled_?t(!1,new Ih(!1,null,!0)):this.backoffId_=MJ(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&xJ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Ih=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function PJ(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function OJ(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function FJ(n,e){e&&(n["X-Firebase-GMPID"]=e)}function LJ(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function VJ(n,e,t,r,i,s,o=!0){let a=Vj(n.urlParams),l=n.url+a,u=Object.assign({},n.headers);return FJ(u,e),PJ(u,t),OJ(u,s),LJ(u,r),new px(l,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}function UJ(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function BJ(...n){let e=UJ();if(e!==void 0){let t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(wx())return new Blob(n);throw new en(Qt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function jJ(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function HJ(n){if(typeof atob>"u")throw AJ("base-64");return atob(n)}var ti={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Sm=class{constructor(e,t){this.data=e,this.contentType=t||null}};function Ex(n,e){switch(n){case ti.RAW:return new Sm(Bj(e));case ti.BASE64:case ti.BASE64URL:return new Sm(jj(n,e));case ti.DATA_URL:return new Sm(qJ(e),zJ(e))}throw yx()}function Bj(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let s=r,o=n.charCodeAt(++t);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function $J(n){let e;try{e=decodeURIComponent(n)}catch{throw Dm(ti.DATA_URL,"Malformed data URL.")}return Bj(e)}function jj(n,e){switch(n){case ti.BASE64:{let i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Dm(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ti.BASE64URL:{let i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Dm(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=HJ(e)}catch(i){throw i.message.includes("polyfill")?i:Dm(n,"Invalid character found")}let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}var Tw=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw Dm(ti.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;r!=null&&(this.base64=WJ(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function qJ(n){let e=new Tw(n);return e.base64?jj(ti.BASE64,e.rest):$J(e.rest)}function zJ(n){return new Tw(n).contentType}function WJ(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var Sh=class n{constructor(e,t){let r=0,i="";Ij(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Ij(this.data_)){let r=this.data_,i=jJ(r,e,t);return i===null?null:new n(i)}else{let r=new Uint8Array(this.data_.buffer,e,t-e);return new n(r,!0)}}static getBlob(...e){if(wx()){let t=e.map(r=>r instanceof n?r.data_:r);return new n(BJ.apply(null,t))}else{let t=e.map(o=>Aw(o)?Ex(ti.RAW,o).data:o.data_),r=0;t.forEach(o=>{r+=o.byteLength});let i=new Uint8Array(r),s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new n(i,!0)}}uploadData(){return this.data_}};function Cx(n){let e;try{e=JSON.parse(n)}catch{return null}return NJ(e)?e:null}function GJ(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function YJ(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function Hj(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function KJ(n,e){return e}var er=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||KJ}},Sw=null;function QJ(n){return!Aw(n)||n.length<2?n:Hj(n)}function Mw(){if(Sw)return Sw;let n=[];n.push(new er("bucket")),n.push(new er("generation")),n.push(new er("metageneration")),n.push(new er("name","fullPath",!0));function e(s,o){return QJ(o)}let t=new er("name");t.xform=e,n.push(t);function r(s,o){return o!==void 0?Number(o):o}let i=new er("size");return i.xform=r,n.push(i),n.push(new er("timeCreated")),n.push(new er("updated")),n.push(new er("md5Hash",null,!0)),n.push(new er("cacheControl",null,!0)),n.push(new er("contentDisposition",null,!0)),n.push(new er("contentEncoding",null,!0)),n.push(new er("contentLanguage",null,!0)),n.push(new er("contentType",null,!0)),n.push(new er("metadata","customMetadata",!0)),Sw=n,Sw}function ZJ(n,e){function t(){let r=n.bucket,i=n.fullPath,s=new Sr(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function XJ(n,e,t){let r={};r.type="file";let i=t.length;for(let s=0;s<i;s++){let o=t[s];r[o.local]=o.xform(r,e[o.server])}return ZJ(r,n),r}function $j(n,e,t){let r=Cx(e);return r===null?null:XJ(n,r,t)}function JJ(n,e,t,r){let i=Cx(e);if(i===null||!Aw(i.downloadTokens))return null;let s=i.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(u=>{let h=n.bucket,p=n.fullPath,_="/b/"+o(h)+"/o/"+o(p),w=dl(_,t,r),E=Vj({alt:"media",token:u});return w+E})[0]}function bx(n,e){let t={},r=e.length;for(let i=0;i<r;i++){let s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}var Dj="prefixes",Sj="items";function eee(n,e,t){let r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Dj])for(let i of t[Dj]){let s=i.replace(/\/$/,""),o=n._makeStorageReference(new Sr(e,s));r.prefixes.push(o)}if(t[Sj])for(let i of t[Sj]){let s=n._makeStorageReference(new Sr(e,i.name));r.items.push(s)}return r}function tee(n,e,t){let r=Cx(t);return r===null?null:eee(n,e,r)}var rs=class{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function eo(n){if(!n)throw yx()}function xw(n,e){function t(r,i){let s=$j(n,i,e);return eo(s!==null),s}return t}function nee(n,e){function t(r,i){let s=tee(n,e,i);return eo(s!==null),s}return t}function ree(n,e){function t(r,i){let s=$j(n,i,e);return eo(s!==null),JJ(s,i,n.host,n._protocol)}return t}function Mh(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=EJ():i=wJ():t.getStatus()===402?i=vJ(n.bucket):t.getStatus()===403?i=CJ(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function kw(n){let e=Mh(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=yJ(n.path)),s.serverResponse=i.serverResponse,s}return t}function qj(n,e,t){let r=e.fullServerUrl(),i=dl(r,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,a=new rs(i,s,xw(n,t),o);return a.errorHandler=kw(e),a}function iee(n,e,t,r,i){let s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);let o=e.bucketOnlyServerUrl(),a=dl(o,n.host,n._protocol),l="GET",u=n.maxOperationRetryTime,h=new rs(a,l,nee(n,e.bucket),u);return h.urlParams=s,h.errorHandler=Mh(e),h}function see(n,e,t){let r=e.fullServerUrl(),i=dl(r,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,a=new rs(i,s,ree(n,t),o);return a.errorHandler=kw(e),a}function oee(n,e,t,r){let i=e.fullServerUrl(),s=dl(i,n.host,n._protocol),o="PATCH",a=bx(t,r),l={"Content-Type":"application/json; charset=utf-8"},u=n.maxOperationRetryTime,h=new rs(s,o,xw(n,r),u);return h.headers=l,h.body=a,h.errorHandler=kw(e),h}function aee(n,e){let t=e.fullServerUrl(),r=dl(t,n.host,n._protocol),i="DELETE",s=n.maxOperationRetryTime;function o(l,u){}let a=new rs(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=kw(e),a}function lee(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function zj(n,e,t){let r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=lee(null,e)),r}function uee(n,e,t,r,i){let s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let q="";for(let Q=0;Q<2;Q++)q=q+Math.random().toString().slice(2);return q}let l=a();o["Content-Type"]="multipart/related; boundary="+l;let u=zj(e,r,i),h=bx(u,t),p="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,_=`\r
--`+l+"--",w=Sh.getBlob(p,r,_);if(w===null)throw Fj();let E={name:u.fullPath},S=dl(s,n.host,n._protocol),x="POST",H=n.maxUploadRetryTime,Y=new rs(S,x,xw(n,t),H);return Y.urlParams=E,Y.headers=o,Y.body=w.uploadData(),Y.errorHandler=Mh(e),Y}var Th=class{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}};function Ix(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{eo(!1)}return eo(!!t&&(e||["active"]).indexOf(t)!==-1),t}function cee(n,e,t,r,i){let s=e.bucketOnlyServerUrl(),o=zj(e,r,i),a={name:o.fullPath},l=dl(s,n.host,n._protocol),u="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},p=bx(o,t),_=n.maxUploadRetryTime;function w(S){Ix(S);let x;try{x=S.getResponseHeader("X-Goog-Upload-URL")}catch{eo(!1)}return eo(Aw(x)),x}let E=new rs(l,u,w,_);return E.urlParams=a,E.headers=h,E.body=p,E.errorHandler=Mh(e),E}function dee(n,e,t,r){let i={"X-Goog-Upload-Command":"query"};function s(u){let h=Ix(u,["active","final"]),p=null;try{p=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{eo(!1)}p||eo(!1);let _=Number(p);return eo(!isNaN(_)),new Th(_,r.size(),h==="final")}let o="POST",a=n.maxUploadRetryTime,l=new rs(t,o,s,a);return l.headers=i,l.errorHandler=Mh(e),l}var Tj=256*1024;function hee(n,e,t,r,i,s,o,a){let l=new Th(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw SJ();let u=l.total-l.current,h=u;i>0&&(h=Math.min(h,i));let p=l.current,_=p+h,w="";h===0?w="finalize":u===h?w="upload, finalize":w="upload";let E={"X-Goog-Upload-Command":w,"X-Goog-Upload-Offset":`${l.current}`},S=r.slice(p,_);if(S===null)throw Fj();function x(Q,pe){let re=Ix(Q,["active","final"]),k=l.current+h,I=r.size(),A;return re==="final"?A=xw(e,s)(Q,pe):A=null,new Th(k,I,re==="final",A)}let H="POST",Y=e.maxUploadRetryTime,q=new rs(t,H,x,Y);return q.headers=E,q.body=S.uploadData(),q.progressCallback=a||null,q.errorHandler=Mh(n),q}var Wj={STATE_CHANGED:"state_changed"},hr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function dx(n){switch(n){case"running":case"pausing":case"canceling":return hr.RUNNING;case"paused":return hr.PAUSED;case"success":return hr.SUCCESS;case"canceled":return hr.CANCELED;case"error":return hr.ERROR;default:return hr.ERROR}}var mx=class{constructor(e,t,r){if(RJ(e)||t!=null||r!=null)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{let s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}};function bh(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}var Aj=null,gx=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Dh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Dh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Dh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Im("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(let s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Im("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Im("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Im("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Im("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},_x=class extends gx{initXhr(){this.xhr_.responseType="text"}};function Js(){return Aj?Aj():new _x}var Tm=class{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Mw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Qt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let s=this.isExponentialBackoffExpired();if(Uj(i.status,[]))if(s)i=Pj();else{this.sleepTime=Math.max(this.sleepTime*2,_J),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Qt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){let e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{let r=cee(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Js,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((t,r)=>{let i=dee(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Js,t,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=Tj*this._chunkMultiplier,t=new Th(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=hee(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}let a=this._ref.storage._makeRequest(o,Js,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Tj*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{let r=qj(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Js,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{let r=uee(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Js,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Oj(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=dx(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){let s=new mx(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(dx(this._state)){case hr.SUCCESS:bh(this._resolve.bind(null,this.snapshot))();break;case hr.CANCELED:case hr.ERROR:let t=this._reject;bh(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(dx(this._state)){case hr.RUNNING:case hr.PAUSED:e.next&&bh(e.next.bind(e,this.snapshot))();break;case hr.SUCCESS:e.complete&&bh(e.complete.bind(e))();break;case hr.CANCELED:case hr.ERROR:e.error&&bh(e.error.bind(e,this._error))();break;default:e.error&&bh(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var Ah=class n{constructor(e,t){this._service=e,t instanceof Sr?this._location=t:this._location=Sr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new Sr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Hj(this._location.path)}get storage(){return this._service}get parent(){let e=GJ(this._location.path);if(e===null)return null;let t=new Sr(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw vx(e)}};function fee(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Tm(n,new Sh(e),t)}function pee(n){let e={prefixes:[],items:[]};return Gj(n,e).then(()=>e)}function Gj(n,e,t){return N(this,null,function*(){let i=yield Yj(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&(yield Gj(n,e,i.nextPageToken))})}function Yj(n,e){e!=null&&typeof e.maxResults=="number"&&fx("options.maxResults",1,1e3,e.maxResults);let t=e||{},r=iee(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Js)}function mee(n){n._throwIfRoot("getMetadata");let e=qj(n.storage,n._location,Mw());return n.storage.makeRequestWithTokens(e,Js)}function gee(n,e){n._throwIfRoot("updateMetadata");let t=oee(n.storage,n._location,e,Mw());return n.storage.makeRequestWithTokens(t,Js)}function _ee(n){n._throwIfRoot("getDownloadURL");let e=see(n.storage,n._location,Mw());return n.storage.makeRequestWithTokens(e,Js).then(t=>{if(t===null)throw TJ();return t})}function yee(n){n._throwIfRoot("deleteObject");let e=aee(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Js)}function Kj(n,e){let t=YJ(n._location.path,e),r=new Sr(n._location.bucket,t);return new Ah(n.storage,r)}function vee(n){return/^[A-Za-z]+:\/\//.test(n)}function wee(n,e){return new Ah(n,e)}function Qj(n,e){if(n instanceof Am){let t=n;if(t._bucket==null)throw DJ();let r=new Ah(t,t._bucket);return e!=null?Qj(r,e):r}else return e!==void 0?Kj(n,e):n}function Eee(n,e){if(e&&vee(e)){if(n instanceof Am)return wee(n,e);throw Uu("To use ref(service, url), the first argument must be a Storage instance.")}else return Qj(n,e)}function Mj(n,e){let t=e?.[Nj];return t==null?null:Sr.makeFromBucketSpec(t,n)}function Cee(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:bc(i,n.app.options.projectId))}var Am=class{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Rj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=mJ,this._maxUploadRetryTime=gJ,this._requests=new Set,i!=null?this._bucket=Sr.makeFromBucketSpec(i,this._host):this._bucket=Mj(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Sr.makeFromBucketSpec(this._url,e):this._bucket=Mj(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){fx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){fx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return N(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return N(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ah(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new hx(Lj());{let o=VJ(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){return N(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},xj="@firebase/storage",kj="0.13.2";var bee="storage";function Zj(n,e,t){return n=Le(n),fee(n,e,t)}function Xj(n){return n=Le(n),mee(n)}function Jj(n,e){return n=Le(n),gee(n,e)}function e3(n,e){return n=Le(n),Yj(n,e)}function t3(n){return n=Le(n),pee(n)}function n3(n){return n=Le(n),_ee(n)}function r3(n){return n=Le(n),yee(n)}function Dx(n,e){return n=Le(n),Eee(n,e)}function i3(n,e){return Kj(n,e)}function s3(n,e,t,r={}){Cee(n,e,t,r)}function Iee(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Am(t,r,i,e,Ic)}function Dee(){bo(new $n(bee,Iee,"PUBLIC").setMultipleInstances(!0)),Nr(xj,kj,""),Nr(xj,kj,"esm2017")}Dee();var xh=class{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}};var Rw=class{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new xh(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new xh(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(typeof t=="function"?s=o=>t(new xh(o,this,this._ref)):s={next:t.next?o=>t.next(new xh(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}},Nw=class{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Bu(e,this._service))}get items(){return this._delegate.items.map(e=>new Bu(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}};var Bu=class n{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){let t=i3(this._delegate,e);return new n(t,this.storage)}get root(){return new n(this._delegate.root,this.storage)}get parent(){let e=this._delegate.parent;return e==null?null:new n(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Rw(Zj(this._delegate,e,t),this)}putString(e,t=ti.RAW,r){this._throwIfRoot("putString");let i=Ex(t,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new Rw(new Tm(this._delegate,new Sh(i.data,!0),s),this)}listAll(){return t3(this._delegate).then(e=>new Nw(e,this.storage))}list(e){return e3(this._delegate,e||void 0).then(t=>new Nw(t,this.storage))}getMetadata(){return Xj(this._delegate)}updateMetadata(e){return Jj(this._delegate,e)}getDownloadURL(){return n3(this._delegate)}delete(){return this._throwIfRoot("delete"),r3(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw vx(e)}};var Pw=class{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(o3(e))throw Uu("ref() expected a child path but got a URL, use refFromURL instead.");return new Bu(Dx(this._delegate,e),this)}refFromURL(e){if(!o3(e))throw Uu("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Sr.makeFromUrl(e,this._delegate.host)}catch{throw Uu("refFromUrl() expected a valid full URL but got an invalid one.")}return new Bu(Dx(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){s3(this._delegate,e,t,r)}};function o3(n){return/^[A-Za-z]+:\/\//.test(n)}var See="@firebase/storage-compat",Tee="0.3.12";var Aee="storage-compat";function Mee(n,{instanceIdentifier:e}){let t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new Pw(t,r)}function xee(n){let e={TaskState:hr,TaskEvent:Wj,StringFormat:ti,Storage:Pw,Reference:Bu};n.INTERNAL.registerComponent(new $n(Aee,Mee,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion(See,Tee)}xee(dn);function kee(n){return new He(e=>{let t=o=>e.next(o),r=o=>e.error(o),i=()=>e.complete();t(n.snapshot);let s=n.on("state_changed",t);return n.then(o=>{t(o),i()},o=>{t(n.snapshot),r(o)}),function(){s()}}).pipe(db(0))}function a3(n){let e=kee(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(he(t=>t.bytesTransferred/t.totalBytes*100))}}function Ow(n){return{getDownloadURL:()=>De(void 0).pipe(MS,bt(()=>n.getDownloadURL()),Yt),getMetadata:()=>De(void 0).pipe(MS,bt(()=>n.getMetadata()),Yt),delete:()=>Ze(n.delete()),child:e=>Ow(n.child(e)),updateMetadata:e=>Ze(n.updateMetadata(e)),put:(e,t)=>{let r=n.put(e,t);return a3(r)},putString:(e,t,r)=>{let i=n.putString(e,t,r);return a3(i)},list:e=>Ze(n.list(e)),listAll:()=>Ze(n.listAll())}}var Ree=new oe("angularfire2.storageBucket"),Nee=new oe("angularfire2.storage.maxUploadRetryTime"),Pee=new oe("angularfire2.storage.maxOperationRetryTime"),Oee=new oe("angularfire2.storage.use-emulator"),l3=(()=>{class n{storage;constructor(t,r,i,s,o,a,l,u,h,p){let _=$o(t,o,r);this.storage=Ba(`${_.name}.storage.${i}`,"AngularFireStorage",_.name,()=>{let w=o.runOutsideAngular(()=>_.storage(i||void 0)),E=h;return E&&w.useEmulator(...E),l&&w.setMaxUploadRetryTime(l),u&&w.setMaxOperationRetryTime(u),w},[l,u])}ref(t){return Ow(this.storage.ref(t))}refFromURL(t){return Ow(this.storage.refFromURL(t))}upload(t,r,i){let s=this.storage.ref(t);return Ow(s).put(r,i)}static \u0275fac=function(r){return new(r||n)(B(Vs),B(Us,8),B(Ree,8),B(vn),B($e),B(Va),B(Nee,8),B(Pee,8),B(Oee,8),B(Qi,8))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function ni(n){return typeof n=="string"||n instanceof String}function Sx(n){var e;return typeof n=="object"&&n!=null&&(n==null||(e=n.constructor)==null?void 0:e.name)==="Object"}function Tx(n,e){return Array.isArray(e)?Tx(n,(t,r)=>e.includes(r)):Object.entries(n).reduce((t,r)=>{let[i,s]=r;return e(s,i)&&(t[i]=s),t},{})}var we={NONE:"NONE",LEFT:"LEFT",FORCE_LEFT:"FORCE_LEFT",RIGHT:"RIGHT",FORCE_RIGHT:"FORCE_RIGHT"};function Ax(n){switch(n){case we.LEFT:return we.FORCE_LEFT;case we.RIGHT:return we.FORCE_RIGHT;default:return n}}function Fw(n){return n.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}function kh(n,e){if(e===n)return!0;let t=Array.isArray(e),r=Array.isArray(n),i;if(t&&r){if(e.length!=n.length)return!1;for(i=0;i<e.length;i++)if(!kh(e[i],n[i]))return!1;return!0}if(t!=r)return!1;if(e&&n&&typeof e=="object"&&typeof n=="object"){let s=e instanceof Date,o=n instanceof Date;if(s&&o)return e.getTime()==n.getTime();if(s!=o)return!1;let a=e instanceof RegExp,l=n instanceof RegExp;if(a&&l)return e.toString()==n.toString();if(a!=l)return!1;let u=Object.keys(e);for(i=0;i<u.length;i++)if(!Object.prototype.hasOwnProperty.call(n,u[i]))return!1;for(i=0;i<u.length;i++)if(!kh(n[u[i]],e[u[i]]))return!1;return!0}else if(e&&n&&typeof e=="function"&&typeof n=="function")return e.toString()===n.toString();return!1}var Lw=class{constructor(e){for(Object.assign(this,e);this.value.slice(0,this.startChangePos)!==this.oldValue.slice(0,this.startChangePos);)--this.oldSelection.start;if(this.insertedCount)for(;this.value.slice(this.cursorPos)!==this.oldValue.slice(this.oldSelection.end);)this.value.length-this.cursorPos<this.oldValue.length-this.oldSelection.end?++this.oldSelection.end:++this.cursorPos}get startChangePos(){return Math.min(this.cursorPos,this.oldSelection.start)}get insertedCount(){return this.cursorPos-this.startChangePos}get inserted(){return this.value.substr(this.startChangePos,this.insertedCount)}get removedCount(){return Math.max(this.oldSelection.end-this.startChangePos||this.oldValue.length-this.value.length,0)}get removed(){return this.oldValue.substr(this.startChangePos,this.removedCount)}get head(){return this.value.substring(0,this.startChangePos)}get tail(){return this.value.substring(this.startChangePos+this.insertedCount)}get removeDirection(){return!this.removedCount||this.insertedCount?we.NONE:(this.oldSelection.end===this.cursorPos||this.oldSelection.start===this.cursorPos)&&this.oldSelection.end===this.oldSelection.start?we.RIGHT:we.LEFT}};function Ie(n,e){return new Ie.InputMask(n,e)}function Mx(n){if(n==null)throw new Error("mask property should be defined");return n instanceof RegExp?Ie.MaskedRegExp:ni(n)?Ie.MaskedPattern:n===Date?Ie.MaskedDate:n===Number?Ie.MaskedNumber:Array.isArray(n)||n===Array?Ie.MaskedDynamic:Ie.Masked&&n.prototype instanceof Ie.Masked?n:Ie.Masked&&n instanceof Ie.Masked?n.constructor:n instanceof Function?Ie.MaskedFunction:(console.warn("Mask not found for mask",n),Ie.Masked)}function ta(n){if(!n)throw new Error("Options in not defined");if(Ie.Masked){if(n.prototype instanceof Ie.Masked)return{mask:n};let e=n instanceof Ie.Masked?{mask:n}:Sx(n)&&n.mask instanceof Ie.Masked?n:{},{mask:t=void 0}=e,r=Bt(e,["mask"]);if(t){let i=t.mask;return V(de(V({},Tx(t,(s,o)=>!o.startsWith("_"))),{mask:t.constructor,_mask:i}),r)}}return Sx(n)?V({},n):{mask:n}}function fr(n){if(Ie.Masked&&n instanceof Ie.Masked)return n;let e=ta(n),t=Mx(e.mask);if(!t)throw new Error("Masked class is not found for provided mask "+e.mask+", appropriate module needs to be imported manually before creating mask.");return e.mask===t&&delete e.mask,e._mask&&(e.mask=e._mask,delete e._mask),new t(e)}Ie.createMask=fr;var hl=class{get selectionStart(){let e;try{e=this._unsafeSelectionStart}catch{}return e??this.value.length}get selectionEnd(){let e;try{e=this._unsafeSelectionEnd}catch{}return e??this.value.length}select(e,t){if(!(e==null||t==null||e===this.selectionStart&&t===this.selectionEnd))try{this._unsafeSelect(e,t)}catch{}}get isActive(){return!1}};Ie.MaskElement=hl;var u3=90,Lee=89,na=class extends hl{constructor(e){super(),this.input=e,this._onKeydown=this._onKeydown.bind(this),this._onInput=this._onInput.bind(this),this._onBeforeinput=this._onBeforeinput.bind(this),this._onCompositionEnd=this._onCompositionEnd.bind(this)}get rootElement(){var e,t,r;return(e=(t=(r=this.input).getRootNode)==null?void 0:t.call(r))!=null?e:document}get isActive(){return this.input===this.rootElement.activeElement}bindEvents(e){this.input.addEventListener("keydown",this._onKeydown),this.input.addEventListener("input",this._onInput),this.input.addEventListener("beforeinput",this._onBeforeinput),this.input.addEventListener("compositionend",this._onCompositionEnd),this.input.addEventListener("drop",e.drop),this.input.addEventListener("click",e.click),this.input.addEventListener("focus",e.focus),this.input.addEventListener("blur",e.commit),this._handlers=e}_onKeydown(e){if(this._handlers.redo&&(e.keyCode===u3&&e.shiftKey&&(e.metaKey||e.ctrlKey)||e.keyCode===Lee&&e.ctrlKey))return e.preventDefault(),this._handlers.redo(e);if(this._handlers.undo&&e.keyCode===u3&&(e.metaKey||e.ctrlKey))return e.preventDefault(),this._handlers.undo(e);e.isComposing||this._handlers.selectionChange(e)}_onBeforeinput(e){if(e.inputType==="historyUndo"&&this._handlers.undo)return e.preventDefault(),this._handlers.undo(e);if(e.inputType==="historyRedo"&&this._handlers.redo)return e.preventDefault(),this._handlers.redo(e)}_onCompositionEnd(e){this._handlers.input(e)}_onInput(e){e.isComposing||this._handlers.input(e)}unbindEvents(){this.input.removeEventListener("keydown",this._onKeydown),this.input.removeEventListener("input",this._onInput),this.input.removeEventListener("beforeinput",this._onBeforeinput),this.input.removeEventListener("compositionend",this._onCompositionEnd),this.input.removeEventListener("drop",this._handlers.drop),this.input.removeEventListener("click",this._handlers.click),this.input.removeEventListener("focus",this._handlers.focus),this.input.removeEventListener("blur",this._handlers.commit),this._handlers={}}};Ie.HTMLMaskElement=na;var Mm=class extends na{constructor(e){super(e),this.input=e}get _unsafeSelectionStart(){return this.input.selectionStart!=null?this.input.selectionStart:this.value.length}get _unsafeSelectionEnd(){return this.input.selectionEnd}_unsafeSelect(e,t){this.input.setSelectionRange(e,t)}get value(){return this.input.value}set value(e){this.input.value=e}};Ie.HTMLMaskElement=na;var Rh=class extends na{get _unsafeSelectionStart(){let e=this.rootElement,t=e.getSelection&&e.getSelection(),r=t&&t.anchorOffset,i=t&&t.focusOffset;return i==null||r==null||r<i?r:i}get _unsafeSelectionEnd(){let e=this.rootElement,t=e.getSelection&&e.getSelection(),r=t&&t.anchorOffset,i=t&&t.focusOffset;return i==null||r==null||r>i?r:i}_unsafeSelect(e,t){if(!this.rootElement.createRange)return;let r=this.rootElement.createRange();r.setStart(this.input.firstChild||this.input,e),r.setEnd(this.input.lastChild||this.input,t);let i=this.rootElement,s=i.getSelection&&i.getSelection();s&&(s.removeAllRanges(),s.addRange(r))}get value(){return this.input.textContent||""}set value(e){this.input.textContent=e}};Ie.HTMLContenteditableMaskElement=Rh;var c3=(()=>{class n{constructor(){this.states=[],this.currentIndex=0}get currentState(){return this.states[this.currentIndex]}get isEmpty(){return this.states.length===0}push(t){this.currentIndex<this.states.length-1&&(this.states.length=this.currentIndex+1),this.states.push(t),this.states.length>n.MAX_LENGTH&&this.states.shift(),this.currentIndex=this.states.length-1}go(t){return this.currentIndex=Math.min(Math.max(this.currentIndex+t,0),this.states.length-1),this.currentState}undo(){return this.go(-1)}redo(){return this.go(1)}clear(){this.states.length=0,this.currentIndex=0}}return n.MAX_LENGTH=100,n})();var Vw=class{constructor(e,t){this.el=e instanceof hl?e:e.isContentEditable&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"?new Rh(e):new Mm(e),this.masked=fr(t),this._listeners={},this._value="",this._unmaskedValue="",this._rawInputValue="",this.history=new c3,this._saveSelection=this._saveSelection.bind(this),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onDrop=this._onDrop.bind(this),this._onFocus=this._onFocus.bind(this),this._onClick=this._onClick.bind(this),this._onUndo=this._onUndo.bind(this),this._onRedo=this._onRedo.bind(this),this.alignCursor=this.alignCursor.bind(this),this.alignCursorFriendly=this.alignCursorFriendly.bind(this),this._bindEvents(),this.updateValue(),this._onChange()}maskEquals(e){var t;return e==null||((t=this.masked)==null?void 0:t.maskEquals(e))}get mask(){return this.masked.mask}set mask(e){if(this.maskEquals(e))return;if(!(e instanceof Ie.Masked)&&this.masked.constructor===Mx(e)){this.masked.updateOptions({mask:e});return}let t=e instanceof Ie.Masked?e:fr({mask:e});t.unmaskedValue=this.masked.unmaskedValue,this.masked=t}get value(){return this._value}set value(e){this.value!==e&&(this.masked.value=e,this.updateControl("auto"))}get unmaskedValue(){return this._unmaskedValue}set unmaskedValue(e){this.unmaskedValue!==e&&(this.masked.unmaskedValue=e,this.updateControl("auto"))}get rawInputValue(){return this._rawInputValue}set rawInputValue(e){this.rawInputValue!==e&&(this.masked.rawInputValue=e,this.updateControl(),this.alignCursor())}get typedValue(){return this.masked.typedValue}set typedValue(e){this.masked.typedValueEquals(e)||(this.masked.typedValue=e,this.updateControl("auto"))}get displayValue(){return this.masked.displayValue}_bindEvents(){this.el.bindEvents({selectionChange:this._saveSelection,input:this._onInput,drop:this._onDrop,click:this._onClick,focus:this._onFocus,commit:this._onChange,undo:this._onUndo,redo:this._onRedo})}_unbindEvents(){this.el&&this.el.unbindEvents()}_fireEvent(e,t){let r=this._listeners[e];r&&r.forEach(i=>i(t))}get selectionStart(){return this._cursorChanging?this._changingCursorPos:this.el.selectionStart}get cursorPos(){return this._cursorChanging?this._changingCursorPos:this.el.selectionEnd}set cursorPos(e){!this.el||!this.el.isActive||(this.el.select(e,e),this._saveSelection())}_saveSelection(){this.displayValue!==this.el.value&&console.warn("Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly."),this._selection={start:this.selectionStart,end:this.cursorPos}}updateValue(){this.masked.value=this.el.value,this._value=this.masked.value,this._unmaskedValue=this.masked.unmaskedValue,this._rawInputValue=this.masked.rawInputValue}updateControl(e){let t=this.masked.unmaskedValue,r=this.masked.value,i=this.masked.rawInputValue,s=this.displayValue,o=this.unmaskedValue!==t||this.value!==r||this._rawInputValue!==i;this._unmaskedValue=t,this._value=r,this._rawInputValue=i,this.el.value!==s&&(this.el.value=s),e==="auto"?this.alignCursor():e!=null&&(this.cursorPos=e),o&&this._fireChangeEvents(),!this._historyChanging&&(o||this.history.isEmpty)&&this.history.push({unmaskedValue:t,selection:{start:this.selectionStart,end:this.cursorPos}})}updateOptions(e){let o=e,{mask:t}=o,r=Bt(o,["mask"]),i=!this.maskEquals(t),s=this.masked.optionsIsChanged(r);i&&(this.mask=t),s&&this.masked.updateOptions(r),(i||s)&&this.updateControl()}updateCursor(e){e!=null&&(this.cursorPos=e,this._delayUpdateCursor(e))}_delayUpdateCursor(e){this._abortUpdateCursor(),this._changingCursorPos=e,this._cursorChanging=setTimeout(()=>{this.el&&(this.cursorPos=this._changingCursorPos,this._abortUpdateCursor())},10)}_fireChangeEvents(){this._fireEvent("accept",this._inputEvent),this.masked.isComplete&&this._fireEvent("complete",this._inputEvent)}_abortUpdateCursor(){this._cursorChanging&&(clearTimeout(this._cursorChanging),delete this._cursorChanging)}alignCursor(){this.cursorPos=this.masked.nearestInputPos(this.masked.nearestInputPos(this.cursorPos,we.LEFT))}alignCursorFriendly(){this.selectionStart===this.cursorPos&&this.alignCursor()}on(e,t){return this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t),this}off(e,t){if(!this._listeners[e])return this;if(!t)return delete this._listeners[e],this;let r=this._listeners[e].indexOf(t);return r>=0&&this._listeners[e].splice(r,1),this}_onInput(e){this._inputEvent=e,this._abortUpdateCursor();let t=new Lw({value:this.el.value,cursorPos:this.cursorPos,oldValue:this.displayValue,oldSelection:this._selection}),r=this.masked.rawInputValue,i=this.masked.splice(t.startChangePos,t.removed.length,t.inserted,t.removeDirection,{input:!0,raw:!0}).offset,s=r===this.masked.rawInputValue?t.removeDirection:we.NONE,o=this.masked.nearestInputPos(t.startChangePos+i,s);s!==we.NONE&&(o=this.masked.nearestInputPos(o,we.NONE)),this.updateControl(o),delete this._inputEvent}_onChange(){this.displayValue!==this.el.value&&this.updateValue(),this.masked.doCommit(),this.updateControl(),this._saveSelection()}_onDrop(e){e.preventDefault(),e.stopPropagation()}_onFocus(e){this.alignCursorFriendly()}_onClick(e){this.alignCursorFriendly()}_onUndo(){this._applyHistoryState(this.history.undo())}_onRedo(){this._applyHistoryState(this.history.redo())}_applyHistoryState(e){e&&(this._historyChanging=!0,this.unmaskedValue=e.unmaskedValue,this.el.select(e.selection.start,e.selection.end),this._saveSelection(),this._historyChanging=!1)}destroy(){this._unbindEvents(),this._listeners.length=0,delete this.el}};Ie.InputMask=Vw;var Ne=class n{static normalize(e){return Array.isArray(e)?e:[e,new n]}constructor(e){Object.assign(this,{inserted:"",rawInserted:"",tailShift:0,skip:!1},e)}aggregate(e){return this.inserted+=e.inserted,this.rawInserted+=e.rawInserted,this.tailShift+=e.tailShift,this.skip=this.skip||e.skip,this}get offset(){return this.tailShift+this.inserted.length}get consumed(){return!!this.rawInserted||this.skip}equals(e){return this.inserted===e.inserted&&this.tailShift===e.tailShift&&this.rawInserted===e.rawInserted&&this.skip===e.skip}};Ie.ChangeDetails=Ne;var pr=class{constructor(e,t,r){e===void 0&&(e=""),t===void 0&&(t=0),this.value=e,this.from=t,this.stop=r}toString(){return this.value}extend(e){this.value+=String(e)}appendTo(e){return e.append(this.toString(),{tail:!0}).aggregate(e._appendPlaceholder())}get state(){return{value:this.value,from:this.from,stop:this.stop}}set state(e){Object.assign(this,e)}unshift(e){if(!this.value.length||e!=null&&this.from>=e)return"";let t=this.value[0];return this.value=this.value.slice(1),t}shift(){if(!this.value.length)return"";let e=this.value[this.value.length-1];return this.value=this.value.slice(0,-1),e}};var Sn=class n{constructor(e){this._value="",this._update(V(V({},n.DEFAULTS),e)),this._initialized=!0}updateOptions(e){this.optionsIsChanged(e)&&this.withValueRefresh(this._update.bind(this,e))}_update(e){Object.assign(this,e)}get state(){return{_value:this.value,_rawInputValue:this.rawInputValue}}set state(e){this._value=e._value}reset(){this._value=""}get value(){return this._value}set value(e){this.resolve(e,{input:!0})}resolve(e,t){t===void 0&&(t={input:!0}),this.reset(),this.append(e,t,""),this.doCommit()}get unmaskedValue(){return this.value}set unmaskedValue(e){this.resolve(e,{})}get typedValue(){return this.parse?this.parse(this.value,this):this.unmaskedValue}set typedValue(e){this.format?this.value=this.format(e,this):this.unmaskedValue=String(e)}get rawInputValue(){return this.extractInput(0,this.displayValue.length,{raw:!0})}set rawInputValue(e){this.resolve(e,{raw:!0})}get displayValue(){return this.value}get isComplete(){return!0}get isFilled(){return this.isComplete}nearestInputPos(e,t){return e}totalInputPositions(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length),Math.min(this.displayValue.length,t-e)}extractInput(e,t,r){return e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length),this.displayValue.slice(e,t)}extractTail(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length),new pr(this.extractInput(e,t),e)}appendTail(e){return ni(e)&&(e=new pr(String(e))),e.appendTo(this)}_appendCharRaw(e,t){return e?(this._value+=e,new Ne({inserted:e,rawInserted:e})):new Ne}_appendChar(e,t,r){t===void 0&&(t={});let i=this.state,s;if([e,s]=this.doPrepareChar(e,t),e&&(s=s.aggregate(this._appendCharRaw(e,t)),!s.rawInserted&&this.autofix==="pad")){let o=this.state;this.state=i;let a=this.pad(t),l=this._appendCharRaw(e,t);a=a.aggregate(l),l.rawInserted||a.equals(s)?s=a:this.state=o}if(s.inserted){let o,a=this.doValidate(t)!==!1;if(a&&r!=null){let l=this.state;if(this.overwrite===!0){o=r.state;for(let h=0;h<s.rawInserted.length;++h)r.unshift(this.displayValue.length-s.tailShift)}let u=this.appendTail(r);if(a=u.rawInserted.length===r.toString().length,!(a&&u.inserted)&&this.overwrite==="shift"){this.state=l,o=r.state;for(let h=0;h<s.rawInserted.length;++h)r.shift();u=this.appendTail(r),a=u.rawInserted.length===r.toString().length}a&&u.inserted&&(this.state=l)}a||(s=new Ne,this.state=i,r&&o&&(r.state=o))}return s}_appendPlaceholder(){return new Ne}_appendEager(){return new Ne}append(e,t,r){if(!ni(e))throw new Error("value should be string");let i=ni(r)?new pr(String(r)):r;t!=null&&t.tail&&(t._beforeTailState=this.state);let s;[e,s]=this.doPrepare(e,t);for(let o=0;o<e.length;++o){let a=this._appendChar(e[o],t,i);if(!a.rawInserted&&!this.doSkipInvalid(e[o],t,i))break;s.aggregate(a)}return(this.eager===!0||this.eager==="append")&&t!=null&&t.input&&e&&s.aggregate(this._appendEager()),i!=null&&(s.tailShift+=this.appendTail(i).tailShift),s}remove(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length),this._value=this.displayValue.slice(0,e)+this.displayValue.slice(t),new Ne}withValueRefresh(e){if(this._refreshing||!this._initialized)return e();this._refreshing=!0;let t=this.rawInputValue,r=this.value,i=e();return this.rawInputValue=t,this.value&&this.value!==r&&r.indexOf(this.value)===0&&(this.append(r.slice(this.displayValue.length),{},""),this.doCommit()),delete this._refreshing,i}runIsolated(e){if(this._isolated||!this._initialized)return e(this);this._isolated=!0;let t=this.state,r=e(this);return this.state=t,delete this._isolated,r}doSkipInvalid(e,t,r){return!!this.skipInvalid}doPrepare(e,t){return t===void 0&&(t={}),Ne.normalize(this.prepare?this.prepare(e,this,t):e)}doPrepareChar(e,t){return t===void 0&&(t={}),Ne.normalize(this.prepareChar?this.prepareChar(e,this,t):e)}doValidate(e){return(!this.validate||this.validate(this.value,this,e))&&(!this.parent||this.parent.doValidate(e))}doCommit(){this.commit&&this.commit(this.value,this)}splice(e,t,r,i,s){r===void 0&&(r=""),i===void 0&&(i=we.NONE),s===void 0&&(s={input:!0});let o=e+t,a=this.extractTail(o),l=this.eager===!0||this.eager==="remove",u;l&&(i=Ax(i),u=this.extractInput(0,o,{raw:!0}));let h=e,p=new Ne;if(i!==we.NONE&&(h=this.nearestInputPos(e,t>1&&e!==0&&!l?we.NONE:i),p.tailShift=h-e),p.aggregate(this.remove(h)),l&&i!==we.NONE&&u===this.rawInputValue)if(i===we.FORCE_LEFT){let _;for(;u===this.rawInputValue&&(_=this.displayValue.length);)p.aggregate(new Ne({tailShift:-1})).aggregate(this.remove(_-1))}else i===we.FORCE_RIGHT&&a.unshift();return p.aggregate(this.append(r,s,a))}maskEquals(e){return this.mask===e}optionsIsChanged(e){return!kh(this,e)}typedValueEquals(e){let t=this.typedValue;return e===t||n.EMPTY_VALUES.includes(e)&&n.EMPTY_VALUES.includes(t)||(this.format?this.format(e,this)===this.format(this.typedValue,this):!1)}pad(e){return new Ne}};Sn.DEFAULTS={skipInvalid:!0};Sn.EMPTY_VALUES=[void 0,null,""];Ie.Masked=Sn;var Nh=class n{constructor(e,t){e===void 0&&(e=[]),t===void 0&&(t=0),this.chunks=e,this.from=t}toString(){return this.chunks.map(String).join("")}extend(e){if(!String(e))return;e=ni(e)?new pr(String(e)):e;let t=this.chunks[this.chunks.length-1],r=t&&(t.stop===e.stop||e.stop==null)&&e.from===t.from+t.toString().length;if(e instanceof pr)r?t.extend(e.toString()):this.chunks.push(e);else if(e instanceof n){if(e.stop==null){let i;for(;e.chunks.length&&e.chunks[0].stop==null;)i=e.chunks.shift(),i.from+=e.from,this.extend(i)}e.toString()&&(e.stop=e.blockIndex,this.chunks.push(e))}}appendTo(e){if(!(e instanceof Ie.MaskedPattern))return new pr(this.toString()).appendTo(e);let t=new Ne;for(let r=0;r<this.chunks.length;++r){let i=this.chunks[r],s=e._mapPosToBlock(e.displayValue.length),o=i.stop,a;if(o!=null&&(!s||s.index<=o)&&((i instanceof n||e._stops.indexOf(o)>=0)&&t.aggregate(e._appendPlaceholder(o)),a=i instanceof n&&e._blocks[o]),a){let l=a.appendTail(i);t.aggregate(l);let u=i.toString().slice(l.rawInserted.length);u&&t.aggregate(e.append(u,{tail:!0}))}else t.aggregate(e.append(i.toString(),{tail:!0}))}return t}get state(){return{chunks:this.chunks.map(e=>e.state),from:this.from,stop:this.stop,blockIndex:this.blockIndex}}set state(e){let i=e,{chunks:t}=i,r=Bt(i,["chunks"]);Object.assign(this,r),this.chunks=t.map(s=>{let o="chunks"in s?new n:new pr;return o.state=s,o})}unshift(e){if(!this.chunks.length||e!=null&&this.from>=e)return"";let t=e!=null?e-this.from:e,r=0;for(;r<this.chunks.length;){let i=this.chunks[r],s=i.unshift(t);if(i.toString()){if(!s)break;++r}else this.chunks.splice(r,1);if(s)return s}return""}shift(){if(!this.chunks.length)return"";let e=this.chunks.length-1;for(;0<=e;){let t=this.chunks[e],r=t.shift();if(t.toString()){if(!r)break;--e}else this.chunks.splice(e,1);if(r)return r}return""}};var Uw=class{constructor(e,t){this.masked=e,this._log=[];let{offset:r,index:i}=e._mapPosToBlock(t)||(t<0?{index:0,offset:0}:{index:this.masked._blocks.length,offset:0});this.offset=r,this.index=i,this.ok=!1}get block(){return this.masked._blocks[this.index]}get pos(){return this.masked._blockStartPos(this.index)+this.offset}get state(){return{index:this.index,offset:this.offset,ok:this.ok}}set state(e){Object.assign(this,e)}pushState(){this._log.push(this.state)}popState(){let e=this._log.pop();return e&&(this.state=e),e}bindBlock(){this.block||(this.index<0&&(this.index=0,this.offset=0),this.index>=this.masked._blocks.length&&(this.index=this.masked._blocks.length-1,this.offset=this.block.displayValue.length))}_pushLeft(e){for(this.pushState(),this.bindBlock();0<=this.index;--this.index,this.offset=((t=this.block)==null?void 0:t.displayValue.length)||0){var t;if(e())return this.ok=!0}return this.ok=!1}_pushRight(e){for(this.pushState(),this.bindBlock();this.index<this.masked._blocks.length;++this.index,this.offset=0)if(e())return this.ok=!0;return this.ok=!1}pushLeftBeforeFilled(){return this._pushLeft(()=>{if(!(this.block.isFixed||!this.block.value)&&(this.offset=this.block.nearestInputPos(this.offset,we.FORCE_LEFT),this.offset!==0))return!0})}pushLeftBeforeInput(){return this._pushLeft(()=>{if(!this.block.isFixed)return this.offset=this.block.nearestInputPos(this.offset,we.LEFT),!0})}pushLeftBeforeRequired(){return this._pushLeft(()=>{if(!(this.block.isFixed||this.block.isOptional&&!this.block.value))return this.offset=this.block.nearestInputPos(this.offset,we.LEFT),!0})}pushRightBeforeFilled(){return this._pushRight(()=>{if(!(this.block.isFixed||!this.block.value)&&(this.offset=this.block.nearestInputPos(this.offset,we.FORCE_RIGHT),this.offset!==this.block.value.length))return!0})}pushRightBeforeInput(){return this._pushRight(()=>{if(!this.block.isFixed)return this.offset=this.block.nearestInputPos(this.offset,we.NONE),!0})}pushRightBeforeRequired(){return this._pushRight(()=>{if(!(this.block.isFixed||this.block.isOptional&&!this.block.value))return this.offset=this.block.nearestInputPos(this.offset,we.NONE),!0})}};var Ph=class{constructor(e){Object.assign(this,e),this._value="",this.isFixed=!0}get value(){return this._value}get unmaskedValue(){return this.isUnmasking?this.value:""}get rawInputValue(){return this._isRawInput?this.value:""}get displayValue(){return this.value}reset(){this._isRawInput=!1,this._value=""}remove(e,t){return e===void 0&&(e=0),t===void 0&&(t=this._value.length),this._value=this._value.slice(0,e)+this._value.slice(t),this._value||(this._isRawInput=!1),new Ne}nearestInputPos(e,t){t===void 0&&(t=we.NONE);let r=0,i=this._value.length;switch(t){case we.LEFT:case we.FORCE_LEFT:return r;case we.NONE:case we.RIGHT:case we.FORCE_RIGHT:default:return i}}totalInputPositions(e,t){return e===void 0&&(e=0),t===void 0&&(t=this._value.length),this._isRawInput?t-e:0}extractInput(e,t,r){return e===void 0&&(e=0),t===void 0&&(t=this._value.length),r===void 0&&(r={}),r.raw&&this._isRawInput&&this._value.slice(e,t)||""}get isComplete(){return!0}get isFilled(){return!!this._value}_appendChar(e,t){if(t===void 0&&(t={}),this.isFilled)return new Ne;let r=this.eager===!0||this.eager==="append",s=this.char===e&&(this.isUnmasking||t.input||t.raw)&&(!t.raw||!r)&&!t.tail,o=new Ne({inserted:this.char,rawInserted:s?this.char:""});return this._value=this.char,this._isRawInput=s&&(t.raw||t.input),o}_appendEager(){return this._appendChar(this.char,{tail:!0})}_appendPlaceholder(){let e=new Ne;return this.isFilled||(this._value=e.inserted=this.char),e}extractTail(){return new pr("")}appendTail(e){return ni(e)&&(e=new pr(String(e))),e.appendTo(this)}append(e,t,r){let i=this._appendChar(e[0],t);return r!=null&&(i.tailShift+=this.appendTail(r).tailShift),i}doCommit(){}get state(){return{_value:this._value,_rawInputValue:this.rawInputValue}}set state(e){this._value=e._value,this._isRawInput=!!e._rawInputValue}pad(e){return this._appendPlaceholder()}};var xm=(()=>{class n{constructor(t){let h=t,{parent:r,isOptional:i,placeholderChar:s,displayChar:o,lazy:a,eager:l}=h,u=Bt(h,["parent","isOptional","placeholderChar","displayChar","lazy","eager"]);this.masked=fr(u),Object.assign(this,{parent:r,isOptional:i,placeholderChar:s,displayChar:o,lazy:a,eager:l})}reset(){this.isFilled=!1,this.masked.reset()}remove(t,r){return t===void 0&&(t=0),r===void 0&&(r=this.value.length),t===0&&r>=1?(this.isFilled=!1,this.masked.remove(t,r)):new Ne}get value(){return this.masked.value||(this.isFilled&&!this.isOptional?this.placeholderChar:"")}get unmaskedValue(){return this.masked.unmaskedValue}get rawInputValue(){return this.masked.rawInputValue}get displayValue(){return this.masked.value&&this.displayChar||this.value}get isComplete(){return!!this.masked.value||this.isOptional}_appendChar(t,r){if(r===void 0&&(r={}),this.isFilled)return new Ne;let i=this.masked.state,s=this.masked._appendChar(t,this.currentMaskFlags(r));return s.inserted&&this.doValidate(r)===!1&&(s=new Ne,this.masked.state=i),!s.inserted&&!this.isOptional&&!this.lazy&&!r.input&&(s.inserted=this.placeholderChar),s.skip=!s.inserted&&!this.isOptional,this.isFilled=!!s.inserted,s}append(t,r,i){return this.masked.append(t,this.currentMaskFlags(r),i)}_appendPlaceholder(){return this.isFilled||this.isOptional?new Ne:(this.isFilled=!0,new Ne({inserted:this.placeholderChar}))}_appendEager(){return new Ne}extractTail(t,r){return this.masked.extractTail(t,r)}appendTail(t){return this.masked.appendTail(t)}extractInput(t,r,i){return t===void 0&&(t=0),r===void 0&&(r=this.value.length),this.masked.extractInput(t,r,i)}nearestInputPos(t,r){r===void 0&&(r=we.NONE);let i=0,s=this.value.length,o=Math.min(Math.max(t,i),s);switch(r){case we.LEFT:case we.FORCE_LEFT:return this.isComplete?o:i;case we.RIGHT:case we.FORCE_RIGHT:return this.isComplete?o:s;case we.NONE:default:return o}}totalInputPositions(t,r){return t===void 0&&(t=0),r===void 0&&(r=this.value.length),this.value.slice(t,r).length}doValidate(t){return this.masked.doValidate(this.currentMaskFlags(t))&&(!this.parent||this.parent.doValidate(this.currentMaskFlags(t)))}doCommit(){this.masked.doCommit()}get state(){return{_value:this.value,_rawInputValue:this.rawInputValue,masked:this.masked.state,isFilled:this.isFilled}}set state(t){this.masked.state=t.masked,this.isFilled=t.isFilled}currentMaskFlags(t){var r;return de(V({},t),{_beforeTailState:(t==null||(r=t._beforeTailState)==null?void 0:r.masked)||t?._beforeTailState})}pad(t){return new Ne}}return n.DEFAULT_DEFINITIONS={0:/\d/,a:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,"*":/./},n})();var Bw=class extends Sn{updateOptions(e){super.updateOptions(e)}_update(e){let t=e.mask;t&&(e.validate=r=>r.search(t)>=0),super._update(e)}};Ie.MaskedRegExp=Bw;var Pn=class n extends Sn{constructor(e){super(de(V(V({},n.DEFAULTS),e),{definitions:Object.assign({},xm.DEFAULT_DEFINITIONS,e?.definitions)}))}updateOptions(e){super.updateOptions(e)}_update(e){e.definitions=Object.assign({},this.definitions,e.definitions),super._update(e),this._rebuildMask()}_rebuildMask(){let e=this.definitions;this._blocks=[],this.exposeBlock=void 0,this._stops=[],this._maskedBlocks={};let t=this.mask;if(!t||!e)return;let r=!1,i=!1;for(let o=0;o<t.length;++o){if(this.blocks){let h=t.slice(o),p=Object.keys(this.blocks).filter(w=>h.indexOf(w)===0);p.sort((w,E)=>E.length-w.length);let _=p[0];if(_){let s=ta(this.blocks[_]),{expose:w,repeat:E}=s,S=Bt(s,["expose","repeat"]),x=de(V({lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar,overwrite:this.overwrite,autofix:this.autofix},S),{repeat:E,parent:this}),H=E!=null?new Ie.RepeatBlock(x):fr(x);H&&(this._blocks.push(H),w&&(this.exposeBlock=H),this._maskedBlocks[_]||(this._maskedBlocks[_]=[]),this._maskedBlocks[_].push(this._blocks.length-1)),o+=_.length-1;continue}}let a=t[o],l=a in e;if(a===n.STOP_CHAR){this._stops.push(this._blocks.length);continue}if(a==="{"||a==="}"){r=!r;continue}if(a==="["||a==="]"){i=!i;continue}if(a===n.ESCAPE_CHAR){if(++o,a=t[o],!a)break;l=!1}let u=l?new xm(de(V({isOptional:i,lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar},ta(e[a])),{parent:this})):new Ph({char:a,eager:this.eager,isUnmasking:r});this._blocks.push(u)}}get state(){return de(V({},super.state),{_blocks:this._blocks.map(e=>e.state)})}set state(e){if(!e){this.reset();return}let i=e,{_blocks:t}=i,r=Bt(i,["_blocks"]);this._blocks.forEach((s,o)=>s.state=t[o]),super.state=r}reset(){super.reset(),this._blocks.forEach(e=>e.reset())}get isComplete(){return this.exposeBlock?this.exposeBlock.isComplete:this._blocks.every(e=>e.isComplete)}get isFilled(){return this._blocks.every(e=>e.isFilled)}get isFixed(){return this._blocks.every(e=>e.isFixed)}get isOptional(){return this._blocks.every(e=>e.isOptional)}doCommit(){this._blocks.forEach(e=>e.doCommit()),super.doCommit()}get unmaskedValue(){return this.exposeBlock?this.exposeBlock.unmaskedValue:this._blocks.reduce((e,t)=>e+=t.unmaskedValue,"")}set unmaskedValue(e){if(this.exposeBlock){let t=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.unmaskedValue=e,this.appendTail(t),this.doCommit()}else super.unmaskedValue=e}get value(){return this.exposeBlock?this.exposeBlock.value:this._blocks.reduce((e,t)=>e+=t.value,"")}set value(e){if(this.exposeBlock){let t=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.value=e,this.appendTail(t),this.doCommit()}else super.value=e}get typedValue(){return this.exposeBlock?this.exposeBlock.typedValue:super.typedValue}set typedValue(e){if(this.exposeBlock){let t=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.typedValue=e,this.appendTail(t),this.doCommit()}else super.typedValue=e}get displayValue(){return this._blocks.reduce((e,t)=>e+=t.displayValue,"")}appendTail(e){return super.appendTail(e).aggregate(this._appendPlaceholder())}_appendEager(){var e;let t=new Ne,r=(e=this._mapPosToBlock(this.displayValue.length))==null?void 0:e.index;if(r==null)return t;this._blocks[r].isFilled&&++r;for(let i=r;i<this._blocks.length;++i){let s=this._blocks[i]._appendEager();if(!s.inserted)break;t.aggregate(s)}return t}_appendCharRaw(e,t){t===void 0&&(t={});let r=this._mapPosToBlock(this.displayValue.length),i=new Ne;if(!r)return i;for(let o=r.index,a;a=this._blocks[o];++o){var s;let l=a._appendChar(e,de(V({},t),{_beforeTailState:(s=t._beforeTailState)==null||(s=s._blocks)==null?void 0:s[o]}));if(i.aggregate(l),l.consumed)break}return i}extractTail(e,t){e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length);let r=new Nh;return e===t||this._forEachBlocksInRange(e,t,(i,s,o,a)=>{let l=i.extractTail(o,a);l.stop=this._findStopBefore(s),l.from=this._blockStartPos(s),l instanceof Nh&&(l.blockIndex=s),r.extend(l)}),r}extractInput(e,t,r){if(e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length),r===void 0&&(r={}),e===t)return"";let i="";return this._forEachBlocksInRange(e,t,(s,o,a,l)=>{i+=s.extractInput(a,l,r)}),i}_findStopBefore(e){let t;for(let r=0;r<this._stops.length;++r){let i=this._stops[r];if(i<=e)t=i;else break}return t}_appendPlaceholder(e){let t=new Ne;if(this.lazy&&e==null)return t;let r=this._mapPosToBlock(this.displayValue.length);if(!r)return t;let i=r.index,s=e??this._blocks.length;return this._blocks.slice(i,s).forEach(o=>{if(!o.lazy||e!=null){var a;t.aggregate(o._appendPlaceholder((a=o._blocks)==null?void 0:a.length))}}),t}_mapPosToBlock(e){let t="";for(let r=0;r<this._blocks.length;++r){let i=this._blocks[r],s=t.length;if(t+=i.displayValue,e<=t.length)return{index:r,offset:e-s}}}_blockStartPos(e){return this._blocks.slice(0,e).reduce((t,r)=>t+=r.displayValue.length,0)}_forEachBlocksInRange(e,t,r){t===void 0&&(t=this.displayValue.length);let i=this._mapPosToBlock(e);if(i){let s=this._mapPosToBlock(t),o=s&&i.index===s.index,a=i.offset,l=s&&o?s.offset:this._blocks[i.index].displayValue.length;if(r(this._blocks[i.index],i.index,a,l),s&&!o){for(let u=i.index+1;u<s.index;++u)r(this._blocks[u],u,0,this._blocks[u].displayValue.length);r(this._blocks[s.index],s.index,0,s.offset)}}}remove(e,t){e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length);let r=super.remove(e,t);return this._forEachBlocksInRange(e,t,(i,s,o,a)=>{r.aggregate(i.remove(o,a))}),r}nearestInputPos(e,t){if(t===void 0&&(t=we.NONE),!this._blocks.length)return 0;let r=new Uw(this,e);if(t===we.NONE)return r.pushRightBeforeInput()||(r.popState(),r.pushLeftBeforeInput())?r.pos:this.displayValue.length;if(t===we.LEFT||t===we.FORCE_LEFT){if(t===we.LEFT){if(r.pushRightBeforeFilled(),r.ok&&r.pos===e)return e;r.popState()}if(r.pushLeftBeforeInput(),r.pushLeftBeforeRequired(),r.pushLeftBeforeFilled(),t===we.LEFT){if(r.pushRightBeforeInput(),r.pushRightBeforeRequired(),r.ok&&r.pos<=e||(r.popState(),r.ok&&r.pos<=e))return r.pos;r.popState()}return r.ok?r.pos:t===we.FORCE_LEFT?0:(r.popState(),r.ok||(r.popState(),r.ok)?r.pos:0)}return t===we.RIGHT||t===we.FORCE_RIGHT?(r.pushRightBeforeInput(),r.pushRightBeforeRequired(),r.pushRightBeforeFilled()?r.pos:t===we.FORCE_RIGHT?this.displayValue.length:(r.popState(),r.ok||(r.popState(),r.ok)?r.pos:this.nearestInputPos(e,we.LEFT))):e}totalInputPositions(e,t){e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length);let r=0;return this._forEachBlocksInRange(e,t,(i,s,o,a)=>{r+=i.totalInputPositions(o,a)}),r}maskedBlock(e){return this.maskedBlocks(e)[0]}maskedBlocks(e){let t=this._maskedBlocks[e];return t?t.map(r=>this._blocks[r]):[]}pad(e){let t=new Ne;return this._forEachBlocksInRange(0,this.displayValue.length,r=>t.aggregate(r.pad(e))),t}};Pn.DEFAULTS=de(V({},Sn.DEFAULTS),{lazy:!0,placeholderChar:"_"});Pn.STOP_CHAR="`";Pn.ESCAPE_CHAR="\\";Pn.InputDefinition=xm;Pn.FixedDefinition=Ph;Ie.MaskedPattern=Pn;var fl=class extends Pn{get _matchFrom(){return this.maxLength-String(this.from).length}constructor(e){super(e)}updateOptions(e){super.updateOptions(e)}_update(e){let h=e,{to:t=this.to||0,from:r=this.from||0,maxLength:i=this.maxLength||0,autofix:s=this.autofix}=h,o=Bt(h,["to","from","maxLength","autofix"]);this.to=t,this.from=r,this.maxLength=Math.max(String(t).length,i),this.autofix=s;let a=String(this.from).padStart(this.maxLength,"0"),l=String(this.to).padStart(this.maxLength,"0"),u=0;for(;u<l.length&&l[u]===a[u];)++u;o.mask=l.slice(0,u).replace(/0/g,"\\0")+"0".repeat(this.maxLength-u),super._update(o)}get isComplete(){return super.isComplete&&!!this.value}boundaries(e){let t="",r="",[,i,s]=e.match(/^(\D*)(\d*)(\D*)/)||[];return s&&(t="0".repeat(i.length)+s,r="9".repeat(i.length)+s),t=t.padEnd(this.maxLength,"0"),r=r.padEnd(this.maxLength,"9"),[t,r]}doPrepareChar(e,t){t===void 0&&(t={});let r;return[e,r]=super.doPrepareChar(e.replace(/\D/g,""),t),e||(r.skip=!this.isComplete),[e,r]}_appendCharRaw(e,t){if(t===void 0&&(t={}),!this.autofix||this.value.length+1>this.maxLength)return super._appendCharRaw(e,t);let r=String(this.from).padStart(this.maxLength,"0"),i=String(this.to).padStart(this.maxLength,"0"),[s,o]=this.boundaries(this.value+e);return Number(o)<this.from?super._appendCharRaw(r[this.value.length],t):Number(s)>this.to?!t.tail&&this.autofix==="pad"&&this.value.length+1<this.maxLength?super._appendCharRaw(r[this.value.length],t).aggregate(this._appendCharRaw(e,t)):super._appendCharRaw(i[this.value.length],t):super._appendCharRaw(e,t)}doValidate(e){let t=this.value;if(t.search(/[^0]/)===-1&&t.length<=this._matchFrom)return!0;let[i,s]=this.boundaries(t);return this.from<=Number(s)&&Number(i)<=this.to&&super.doValidate(e)}pad(e){let t=new Ne;if(this.value.length===this.maxLength)return t;let r=this.value,i=this.maxLength-this.value.length;if(i){this.reset();for(let s=0;s<i;++s)t.aggregate(super._appendCharRaw("0",e));r.split("").forEach(s=>this._appendCharRaw(s))}return t}};Ie.MaskedRange=fl;var Vee="d{.}`m{.}`Y",Oh=class n extends Pn{static extractPatternOptions(e){let s=e,{mask:t,pattern:r}=s,i=Bt(s,["mask","pattern"]);return de(V({},i),{mask:ni(t)?t:r})}constructor(e){super(n.extractPatternOptions(V(V({},n.DEFAULTS),e)))}updateOptions(e){super.updateOptions(e)}_update(e){let a=V(V({},n.DEFAULTS),e),{mask:t,pattern:r,blocks:i}=a,s=Bt(a,["mask","pattern","blocks"]),o=Object.assign({},n.GET_DEFAULT_BLOCKS());e.min&&(o.Y.from=e.min.getFullYear()),e.max&&(o.Y.to=e.max.getFullYear()),e.min&&e.max&&o.Y.from===o.Y.to&&(o.m.from=e.min.getMonth()+1,o.m.to=e.max.getMonth()+1,o.m.from===o.m.to&&(o.d.from=e.min.getDate(),o.d.to=e.max.getDate())),Object.assign(o,this.blocks,i),super._update(de(V({},s),{mask:ni(t)?t:r,blocks:o}))}doValidate(e){let t=this.date;return super.doValidate(e)&&(!this.isComplete||this.isDateExist(this.value)&&t!=null&&(this.min==null||this.min<=t)&&(this.max==null||t<=this.max))}isDateExist(e){return this.format(this.parse(e,this),this).indexOf(e)>=0}get date(){return this.typedValue}set date(e){this.typedValue=e}get typedValue(){return this.isComplete?super.typedValue:null}set typedValue(e){super.typedValue=e}maskEquals(e){return e===Date||super.maskEquals(e)}optionsIsChanged(e){return super.optionsIsChanged(n.extractPatternOptions(e))}};Oh.GET_DEFAULT_BLOCKS=()=>({d:{mask:fl,from:1,to:31,maxLength:2},m:{mask:fl,from:1,to:12,maxLength:2},Y:{mask:fl,from:1900,to:9999}});Oh.DEFAULTS=de(V({},Pn.DEFAULTS),{mask:Date,pattern:Vee,format:(n,e)=>{if(!n)return"";let t=String(n.getDate()).padStart(2,"0"),r=String(n.getMonth()+1).padStart(2,"0"),i=n.getFullYear();return[t,r,i].join(".")},parse:(n,e)=>{let[t,r,i]=n.split(".").map(Number);return new Date(i,r-1,t)}});Ie.MaskedDate=Oh;var km=class n extends Sn{constructor(e){super(V(V({},n.DEFAULTS),e)),this.currentMask=void 0}updateOptions(e){super.updateOptions(e)}_update(e){super._update(e),"mask"in e&&(this.exposeMask=void 0,this.compiledMasks=Array.isArray(e.mask)?e.mask.map(t=>{let o=ta(t),{expose:r}=o,i=Bt(o,["expose"]),s=fr(V({overwrite:this._overwrite,eager:this._eager,skipInvalid:this._skipInvalid},i));return r&&(this.exposeMask=s),s}):[])}_appendCharRaw(e,t){t===void 0&&(t={});let r=this._applyDispatch(e,t);return this.currentMask&&r.aggregate(this.currentMask._appendChar(e,this.currentMaskFlags(t))),r}_applyDispatch(e,t,r){e===void 0&&(e=""),t===void 0&&(t={}),r===void 0&&(r="");let i=t.tail&&t._beforeTailState!=null?t._beforeTailState._value:this.value,s=this.rawInputValue,o=t.tail&&t._beforeTailState!=null?t._beforeTailState._rawInputValue:s,a=s.slice(o.length),l=this.currentMask,u=new Ne,h=l?.state;return this.currentMask=this.doDispatch(e,V({},t),r),this.currentMask&&(this.currentMask!==l?(this.currentMask.reset(),o&&(this.currentMask.append(o,{raw:!0}),u.tailShift=this.currentMask.value.length-i.length),a&&(u.tailShift+=this.currentMask.append(a,{raw:!0,tail:!0}).tailShift)):h&&(this.currentMask.state=h)),u}_appendPlaceholder(){let e=this._applyDispatch();return this.currentMask&&e.aggregate(this.currentMask._appendPlaceholder()),e}_appendEager(){let e=this._applyDispatch();return this.currentMask&&e.aggregate(this.currentMask._appendEager()),e}appendTail(e){let t=new Ne;return e&&t.aggregate(this._applyDispatch("",{},e)),t.aggregate(this.currentMask?this.currentMask.appendTail(e):super.appendTail(e))}currentMaskFlags(e){var t,r;return de(V({},e),{_beforeTailState:((t=e._beforeTailState)==null?void 0:t.currentMaskRef)===this.currentMask&&((r=e._beforeTailState)==null?void 0:r.currentMask)||e._beforeTailState})}doDispatch(e,t,r){return t===void 0&&(t={}),r===void 0&&(r=""),this.dispatch(e,this,t,r)}doValidate(e){return super.doValidate(e)&&(!this.currentMask||this.currentMask.doValidate(this.currentMaskFlags(e)))}doPrepare(e,t){t===void 0&&(t={});let[r,i]=super.doPrepare(e,t);if(this.currentMask){let s;[r,s]=super.doPrepare(r,this.currentMaskFlags(t)),i=i.aggregate(s)}return[r,i]}doPrepareChar(e,t){t===void 0&&(t={});let[r,i]=super.doPrepareChar(e,t);if(this.currentMask){let s;[r,s]=super.doPrepareChar(r,this.currentMaskFlags(t)),i=i.aggregate(s)}return[r,i]}reset(){var e;(e=this.currentMask)==null||e.reset(),this.compiledMasks.forEach(t=>t.reset())}get value(){return this.exposeMask?this.exposeMask.value:this.currentMask?this.currentMask.value:""}set value(e){this.exposeMask?(this.exposeMask.value=e,this.currentMask=this.exposeMask,this._applyDispatch()):super.value=e}get unmaskedValue(){return this.exposeMask?this.exposeMask.unmaskedValue:this.currentMask?this.currentMask.unmaskedValue:""}set unmaskedValue(e){this.exposeMask?(this.exposeMask.unmaskedValue=e,this.currentMask=this.exposeMask,this._applyDispatch()):super.unmaskedValue=e}get typedValue(){return this.exposeMask?this.exposeMask.typedValue:this.currentMask?this.currentMask.typedValue:""}set typedValue(e){if(this.exposeMask){this.exposeMask.typedValue=e,this.currentMask=this.exposeMask,this._applyDispatch();return}let t=String(e);this.currentMask&&(this.currentMask.typedValue=e,t=this.currentMask.unmaskedValue),this.unmaskedValue=t}get displayValue(){return this.currentMask?this.currentMask.displayValue:""}get isComplete(){var e;return!!((e=this.currentMask)!=null&&e.isComplete)}get isFilled(){var e;return!!((e=this.currentMask)!=null&&e.isFilled)}remove(e,t){let r=new Ne;return this.currentMask&&r.aggregate(this.currentMask.remove(e,t)).aggregate(this._applyDispatch()),r}get state(){var e;return de(V({},super.state),{_rawInputValue:this.rawInputValue,compiledMasks:this.compiledMasks.map(t=>t.state),currentMaskRef:this.currentMask,currentMask:(e=this.currentMask)==null?void 0:e.state})}set state(e){let o=e,{compiledMasks:t,currentMaskRef:r,currentMask:i}=o,s=Bt(o,["compiledMasks","currentMaskRef","currentMask"]);t&&this.compiledMasks.forEach((a,l)=>a.state=t[l]),r!=null&&(this.currentMask=r,this.currentMask.state=i),super.state=s}extractInput(e,t,r){return this.currentMask?this.currentMask.extractInput(e,t,r):""}extractTail(e,t){return this.currentMask?this.currentMask.extractTail(e,t):super.extractTail(e,t)}doCommit(){this.currentMask&&this.currentMask.doCommit(),super.doCommit()}nearestInputPos(e,t){return this.currentMask?this.currentMask.nearestInputPos(e,t):super.nearestInputPos(e,t)}get overwrite(){return this.currentMask?this.currentMask.overwrite:this._overwrite}set overwrite(e){this._overwrite=e}get eager(){return this.currentMask?this.currentMask.eager:this._eager}set eager(e){this._eager=e}get skipInvalid(){return this.currentMask?this.currentMask.skipInvalid:this._skipInvalid}set skipInvalid(e){this._skipInvalid=e}get autofix(){return this.currentMask?this.currentMask.autofix:this._autofix}set autofix(e){this._autofix=e}maskEquals(e){return Array.isArray(e)?this.compiledMasks.every((t,r)=>{if(!e[r])return;let o=e[r],{mask:i}=o,s=Bt(o,["mask"]);return kh(t,s)&&t.maskEquals(i)}):super.maskEquals(e)}typedValueEquals(e){var t;return!!((t=this.currentMask)!=null&&t.typedValueEquals(e))}};km.DEFAULTS=de(V({},Sn.DEFAULTS),{dispatch:(n,e,t,r)=>{if(!e.compiledMasks.length)return;let i=e.rawInputValue,s=e.compiledMasks.map((o,a)=>{let l=e.currentMask===o,u=l?o.displayValue.length:o.nearestInputPos(o.displayValue.length,we.FORCE_LEFT);return o.rawInputValue!==i?(o.reset(),o.append(i,{raw:!0})):l||o.remove(u),o.append(n,e.currentMaskFlags(t)),o.appendTail(r),{index:a,weight:o.rawInputValue.length,totalInputPositions:o.totalInputPositions(0,Math.max(u,o.nearestInputPos(o.displayValue.length,we.FORCE_LEFT)))}});return s.sort((o,a)=>a.weight-o.weight||a.totalInputPositions-o.totalInputPositions),e.compiledMasks[s[0].index]}});Ie.MaskedDynamic=km;var Rm=class n extends Pn{constructor(e){super(V(V({},n.DEFAULTS),e))}updateOptions(e){super.updateOptions(e)}_update(e){let i=e,{enum:t}=i,r=Bt(i,["enum"]);if(t){let s=t.map(l=>l.length),o=Math.min(...s),a=Math.max(...s)-o;r.mask="*".repeat(o),a&&(r.mask+="["+"*".repeat(a)+"]"),this.enum=t}super._update(r)}_appendCharRaw(e,t){t===void 0&&(t={});let r=Math.min(this.nearestInputPos(0,we.FORCE_RIGHT),this.value.length),i=this.enum.filter(s=>this.matchValue(s,this.unmaskedValue+e,r));if(i.length){i.length===1&&this._forEachBlocksInRange(0,this.value.length,(o,a)=>{let l=i[0][a];a>=this.value.length||l===o.value||(o.reset(),o._appendChar(l,t))});let s=super._appendCharRaw(i[0][this.value.length],t);return i.length===1&&i[0].slice(this.unmaskedValue.length).split("").forEach(o=>s.aggregate(super._appendCharRaw(o))),s}return new Ne({skip:!this.isComplete})}extractTail(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length),new pr("",e)}remove(e,t){if(e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length),e===t)return new Ne;let r=Math.min(super.nearestInputPos(0,we.FORCE_RIGHT),this.value.length),i;for(i=e;i>=0&&!(this.enum.filter(a=>this.matchValue(a,this.value.slice(r,i),r)).length>1);--i);let s=super.remove(i,t);return s.tailShift+=i-e,s}get isComplete(){return this.enum.indexOf(this.value)>=0}};Rm.DEFAULTS=de(V({},Pn.DEFAULTS),{matchValue:(n,e,t)=>n.indexOf(e,t)===t});Ie.MaskedEnum=Rm;var jw=class extends Sn{updateOptions(e){super.updateOptions(e)}_update(e){super._update(de(V({},e),{validate:e.mask}))}};Ie.MaskedFunction=jw;var d3,pl=class n extends Sn{constructor(e){super(V(V({},n.DEFAULTS),e))}updateOptions(e){super.updateOptions(e)}_update(e){super._update(e),this._updateRegExps()}_updateRegExps(){let e="^"+(this.allowNegative?"[+|\\-]?":""),t="\\d*",r=(this.scale?"("+Fw(this.radix)+"\\d{0,"+this.scale+"})?":"")+"$";this._numberRegExp=new RegExp(e+t+r),this._mapToRadixRegExp=new RegExp("["+this.mapToRadix.map(Fw).join("")+"]","g"),this._thousandsSeparatorRegExp=new RegExp(Fw(this.thousandsSeparator),"g")}_removeThousandsSeparators(e){return e.replace(this._thousandsSeparatorRegExp,"")}_insertThousandsSeparators(e){let t=e.split(this.radix);return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandsSeparator),t.join(this.radix)}doPrepareChar(e,t){t===void 0&&(t={});let[r,i]=super.doPrepareChar(this._removeThousandsSeparators(this.scale&&this.mapToRadix.length&&(t.input&&t.raw||!t.input&&!t.raw)?e.replace(this._mapToRadixRegExp,this.radix):e),t);return e&&!r&&(i.skip=!0),r&&!this.allowPositive&&!this.value&&r!=="-"&&i.aggregate(this._appendChar("-")),[r,i]}_separatorsCount(e,t){t===void 0&&(t=!1);let r=0;for(let i=0;i<e;++i)this._value.indexOf(this.thousandsSeparator,i)===i&&(++r,t&&(e+=this.thousandsSeparator.length));return r}_separatorsCountFromSlice(e){return e===void 0&&(e=this._value),this._separatorsCount(this._removeThousandsSeparators(e).length,!0)}extractInput(e,t,r){return e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length),[e,t]=this._adjustRangeWithSeparators(e,t),this._removeThousandsSeparators(super.extractInput(e,t,r))}_appendCharRaw(e,t){t===void 0&&(t={});let r=t.tail&&t._beforeTailState?t._beforeTailState._value:this._value,i=this._separatorsCountFromSlice(r);this._value=this._removeThousandsSeparators(this.value);let s=this._value;this._value+=e;let o=this.number,a=!isNaN(o),l=!1;if(a){let _;this.min!=null&&this.min<0&&this.number<this.min&&(_=this.min),this.max!=null&&this.max>0&&this.number>this.max&&(_=this.max),_!=null&&(this.autofix?(this._value=this.format(_,this).replace(n.UNMASKED_RADIX,this.radix),l||(l=s===this._value&&!t.tail)):a=!1),a&&(a=!!this._value.match(this._numberRegExp))}let u;a?u=new Ne({inserted:this._value.slice(s.length),rawInserted:l?"":e,skip:l}):(this._value=s,u=new Ne),this._value=this._insertThousandsSeparators(this._value);let h=t.tail&&t._beforeTailState?t._beforeTailState._value:this._value,p=this._separatorsCountFromSlice(h);return u.tailShift+=(p-i)*this.thousandsSeparator.length,u}_findSeparatorAround(e){if(this.thousandsSeparator){let t=e-this.thousandsSeparator.length+1,r=this.value.indexOf(this.thousandsSeparator,t);if(r<=e)return r}return-1}_adjustRangeWithSeparators(e,t){let r=this._findSeparatorAround(e);r>=0&&(e=r);let i=this._findSeparatorAround(t);return i>=0&&(t=i+this.thousandsSeparator.length),[e,t]}remove(e,t){e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length),[e,t]=this._adjustRangeWithSeparators(e,t);let r=this.value.slice(0,e),i=this.value.slice(t),s=this._separatorsCount(r.length);this._value=this._insertThousandsSeparators(this._removeThousandsSeparators(r+i));let o=this._separatorsCountFromSlice(r);return new Ne({tailShift:(o-s)*this.thousandsSeparator.length})}nearestInputPos(e,t){if(!this.thousandsSeparator)return e;switch(t){case we.NONE:case we.LEFT:case we.FORCE_LEFT:{let r=this._findSeparatorAround(e-1);if(r>=0){let i=r+this.thousandsSeparator.length;if(e<i||this.value.length<=i||t===we.FORCE_LEFT)return r}break}case we.RIGHT:case we.FORCE_RIGHT:{let r=this._findSeparatorAround(e);if(r>=0)return r+this.thousandsSeparator.length}}return e}doCommit(){if(this.value){let e=this.number,t=e;this.min!=null&&(t=Math.max(t,this.min)),this.max!=null&&(t=Math.min(t,this.max)),t!==e&&(this.unmaskedValue=this.format(t,this));let r=this.value;this.normalizeZeros&&(r=this._normalizeZeros(r)),this.padFractionalZeros&&this.scale>0&&(r=this._padFractionalZeros(r)),this._value=r}super.doCommit()}_normalizeZeros(e){let t=this._removeThousandsSeparators(e).split(this.radix);return t[0]=t[0].replace(/^(\D*)(0*)(\d*)/,(r,i,s,o)=>i+o),e.length&&!/\d$/.test(t[0])&&(t[0]=t[0]+"0"),t.length>1&&(t[1]=t[1].replace(/0*$/,""),t[1].length||(t.length=1)),this._insertThousandsSeparators(t.join(this.radix))}_padFractionalZeros(e){if(!e)return e;let t=e.split(this.radix);return t.length<2&&t.push(""),t[1]=t[1].padEnd(this.scale,"0"),t.join(this.radix)}doSkipInvalid(e,t,r){t===void 0&&(t={});let i=this.scale===0&&e!==this.thousandsSeparator&&(e===this.radix||e===n.UNMASKED_RADIX||this.mapToRadix.includes(e));return super.doSkipInvalid(e,t,r)&&!i}get unmaskedValue(){return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix,n.UNMASKED_RADIX)}set unmaskedValue(e){super.unmaskedValue=e}get typedValue(){return this.parse(this.unmaskedValue,this)}set typedValue(e){this.rawInputValue=this.format(e,this).replace(n.UNMASKED_RADIX,this.radix)}get number(){return this.typedValue}set number(e){this.typedValue=e}get allowNegative(){return this.min!=null&&this.min<0||this.max!=null&&this.max<0}get allowPositive(){return this.min!=null&&this.min>0||this.max!=null&&this.max>0}typedValueEquals(e){return(super.typedValueEquals(e)||n.EMPTY_VALUES.includes(e)&&n.EMPTY_VALUES.includes(this.typedValue))&&!(e===0&&this.value==="")}};d3=pl;pl.UNMASKED_RADIX=".";pl.EMPTY_VALUES=[...Sn.EMPTY_VALUES,0];pl.DEFAULTS=de(V({},Sn.DEFAULTS),{mask:Number,radix:",",thousandsSeparator:"",mapToRadix:[d3.UNMASKED_RADIX],min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,scale:2,normalizeZeros:!0,padFractionalZeros:!1,parse:Number,format:n=>n.toLocaleString("en-US",{useGrouping:!1,maximumFractionDigits:20})});Ie.MaskedNumber=pl;var Nm={MASKED:"value",UNMASKED:"unmaskedValue",TYPED:"typedValue"};function xx(n,e,t){e===void 0&&(e=Nm.MASKED),t===void 0&&(t=Nm.MASKED);let r=fr(n);return i=>r.runIsolated(s=>(s[e]=i,s[t]))}function Hw(n,e,t,r){return xx(e,t,r)(n)}Ie.PIPE_TYPE=Nm;Ie.createPipe=xx;Ie.pipe=Hw;var $w=class extends Pn{get repeatFrom(){var e;return(e=Array.isArray(this.repeat)?this.repeat[0]:this.repeat===1/0?0:this.repeat)!=null?e:0}get repeatTo(){var e;return(e=Array.isArray(this.repeat)?this.repeat[1]:this.repeat)!=null?e:1/0}constructor(e){super(e)}updateOptions(e){super.updateOptions(e)}_update(e){var t,r,i;let l=ta(e),{repeat:s}=l,o=Bt(l,["repeat"]);this._blockOpts=Object.assign({},this._blockOpts,o);let a=fr(this._blockOpts);this.repeat=(t=(r=s??a.repeat)!=null?r:this.repeat)!=null?t:1/0,super._update({mask:"m".repeat(Math.max(this.repeatTo===1/0&&((i=this._blocks)==null?void 0:i.length)||0,this.repeatFrom)),blocks:{m:a},eager:a.eager,overwrite:a.overwrite,skipInvalid:a.skipInvalid,lazy:a.lazy,placeholderChar:a.placeholderChar,displayChar:a.displayChar})}_allocateBlock(e){if(e<this._blocks.length)return this._blocks[e];if(this.repeatTo===1/0||this._blocks.length<this.repeatTo)return this._blocks.push(fr(this._blockOpts)),this.mask+="m",this._blocks[this._blocks.length-1]}_appendCharRaw(e,t){t===void 0&&(t={});let r=new Ne;for(let l=(i=(s=this._mapPosToBlock(this.displayValue.length))==null?void 0:s.index)!=null?i:Math.max(this._blocks.length-1,0),u,h;u=(o=this._blocks[l])!=null?o:h=!h&&this._allocateBlock(l);++l){var i,s,o,a;let p=u._appendChar(e,de(V({},t),{_beforeTailState:(a=t._beforeTailState)==null||(a=a._blocks)==null?void 0:a[l]}));if(p.skip&&h){this._blocks.pop(),this.mask=this.mask.slice(1);break}if(r.aggregate(p),p.consumed)break}return r}_trimEmptyTail(e,t){var r,i;e===void 0&&(e=0);let s=Math.max(((r=this._mapPosToBlock(e))==null?void 0:r.index)||0,this.repeatFrom,0),o;t!=null&&(o=(i=this._mapPosToBlock(t))==null?void 0:i.index),o==null&&(o=this._blocks.length-1);let a=0;for(let l=o;s<=l&&!this._blocks[l].unmaskedValue;--l,++a);a&&(this._blocks.splice(o-a+1,a),this.mask=this.mask.slice(a))}reset(){super.reset(),this._trimEmptyTail()}remove(e,t){e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length);let r=super.remove(e,t);return this._trimEmptyTail(e,t),r}totalInputPositions(e,t){return e===void 0&&(e=0),t==null&&this.repeatTo===1/0?1/0:super.totalInputPositions(e,t)}get state(){return super.state}set state(e){this._blocks.length=e._blocks.length,this.mask=this.mask.slice(0,this._blocks.length),super.state=e}};Ie.RepeatBlock=$w;try{globalThis.IMask=Ie}catch{}var Uee=(()=>{class n{create(t,r){return Ie(t,r)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Bee=new oe("IMASK_FACTORY",{providedIn:"root",factory:()=>J(Uee)}),jee={provide:ll,useExisting:zr(()=>ra),multi:!0},h3=n=>n.nativeElement,ra=(()=>{class n{constructor(){this.onTouched=()=>{},this.onChange=()=>{},this._viewInitialized=!1,this._composing=!1,this._writing=!1,this._elementRef=J(Fr),this._renderer=J(bi),this._factory=J(Bee),this._platformId=J(vn),this._compositionMode=J(tx,{optional:!0})??!this._isAndroid(),this.imaskElement=h3,this.accept=new Xe,this.complete=new Xe}get element(){return this.imaskElement(this._elementRef,this)}get maskValue(){return this.maskRef?this.unmask==="typed"?this.maskRef.typedValue:this.unmask?this.maskRef.unmaskedValue:this.maskRef.value:this.element?.value||""}set maskValue(t){this.maskRef?this.unmask==="typed"?this.maskRef.typedValue=t:this.unmask?this.maskRef.unmaskedValue=t:this.maskRef.value=t:this._renderer.setProperty(this.element,"value",t)}ngAfterViewInit(){this.imask&&this.initMask(),this._viewInitialized=!0}ngOnChanges(t){t.elementRef&&!this.imaskElement&&(this.imaskElement=h3),!(!t.imask||!this._viewInitialized)&&(this.imask?this.maskRef?this.maskRef.updateOptions(this.imask):(this.initMask(),this.onChange(this.maskValue)):this.destroyMask())}destroyMask(){this.maskRef&&(this.maskRef.destroy(),delete this.maskRef)}ngOnDestroy(){this.destroyMask(),this.accept.complete(),this.complete.complete()}beginWrite(t){this._writing=!0,this._writingValue=t}endWrite(){return this._writing=!1,this._writingValue}writeValue(t){t=t==null&&this.unmask!=="typed"?"":t,this.maskRef?(this.beginWrite(t),this.maskValue=t,this.endWrite()):(this._renderer.setProperty(this.element,"value",t),this._initialValue=t)}_onAccept(){let t=this.maskValue;this._writing&&t===this.endWrite()||(this.onChange(t),this.accept.emit(t))}_onComplete(){this.complete.emit(this.maskValue)}initMask(){this.maskRef=this._factory.create(this.element,this.imask).on("accept",this._onAccept.bind(this)).on("complete",this._onComplete.bind(this)),this._initialValue!=null&&this.writeValue(this._initialValue),delete this._initialValue}setDisabledState(t){this._renderer.setProperty(this.element,"disabled",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}_handleInput(t){this.maskRef||(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this._handleInput(t)}_isAndroid(){return ND(this._platformId)&&/android (\d+)/.test(navigator.userAgent.toLowerCase())}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Pt({type:n,selectors:[["","imask",""]],hostBindings:function(r,i){r&1&&me("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},inputs:{imask:"imask",unmask:"unmask",imaskElement:"imaskElement"},outputs:{accept:"accept",complete:"complete"},exportAs:["imask"],standalone:!0,features:[Yi([jee]),xs]})}}return n})();var f3=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=vt({type:n})}static{this.\u0275inj=yt({})}}return n})();var zw=class n{constructor(e,t,r,i,s){this.afAuth=e;this.firestore=t;this.storage=r;this.toastr=i;this.router=s}userData={name:"",cpf:"",email:"",phone:"",birthDate:"",address:"",agencyName:"",cnpj:"",agencyPhone:"",agencyEmail:"",agencyAddress:"",tourismRegister:"",role:"",experience:"",specialization:""};selectedFile=null;ngOnInit(){this.afAuth.authState.subscribe(e=>{e?this.loadUserData(e.uid):(this.toastr.warning("Usu\xE1rio n\xE3o autenticado."),this.router.navigate(["/login"]))})}loadUserData(e){this.firestore.collection("users").doc(e).valueChanges().subscribe(t=>{t&&(this.userData=V(V({},this.userData),t))})}onFileSelected(e){this.selectedFile=e.target.files[0]}onSubmit(e){return N(this,null,function*(){let t=yield this.afAuth.currentUser;if(t)try{if(this.selectedFile){let r=`logos/${t.uid}/${this.selectedFile.name}`,i=this.storage.ref(r);this.storage.upload(r,this.selectedFile).snapshotChanges().pipe($l(()=>{i.getDownloadURL().subscribe(o=>{this.userData.logoUrl=o,this.saveUserData(t.uid)})})).subscribe()}else this.saveUserData(t.uid)}catch(r){this.toastr.error("Erro ao salvar os dados do usu\xE1rio."),console.error("Erro ao adicionar dados do usu\xE1rio:",r)}else this.toastr.warning("Usu\xE1rio n\xE3o autenticado.")})}saveUserData(e){this.firestore.collection("users").doc(e).set(this.userData,{merge:!0}).then(()=>{this.toastr.success("Dados do usu\xE1rio atualizados com sucesso!"),this.router.navigate([""])}).catch(t=>{this.toastr.error("Erro ao salvar os dados do usu\xE1rio."),console.error("Erro ao adicionar dados do usu\xE1rio:",t)})}static \u0275fac=function(t){return new(t||n)(te(Zr),te(Ur),te(l3),te(lr),te(En))};static \u0275cmp=pt({type:n,selectors:[["app-dados-usuario"]],decls:59,vars:15,consts:[["userDataForm","ngForm"],[1,"container"],[1,"underline"],["height","5","width","450"],["x1","0","y1","0","x2","450","y2","0",2,"stroke","#3c3f3b","stroke-width","5"],[3,"ngSubmit"],[1,"form-row"],[1,"form-group"],["type","text","id","name","name","name","placeholder","Nome Completo","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","id","cpf","name","cpf","placeholder","CPF","imask","000.000.000-00","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","onfocus","(this.type='date')","id","birthDate","name","birthDate","placeholder","Data de Nascimento","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","email","id","email","name","email","placeholder","E-mail Pessoal","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","tel","id","phone","name","phone","placeholder","Telefone","imask","(00) 00000-0000","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","id","address","name","address","placeholder","Endere\xE7o Pessoal",1,"form-control",3,"ngModelChange","ngModel"],["type","text","id","agencyName","name","agencyName","placeholder","Nome da Ag\xEAncia",1,"form-control",3,"ngModelChange","ngModel"],["type","text","id","cnpj","name","cnpj","placeholder","CNPJ da Ag\xEAncia","imask","00.000.000/0000-00",1,"form-control",3,"ngModelChange","ngModel"],["type","tel","id","agencyPhone","name","agencyPhone","placeholder","Telefone Comercial","imask","(00) 00000-0000",1,"form-control",3,"ngModelChange","ngModel"],["type","email","id","agencyEmail","name","agencyEmail","placeholder","E-mail Comercial",1,"form-control",3,"ngModelChange","ngModel"],["type","text","id","agencyAddress","name","agencyAddress","placeholder","Endere\xE7o Comercial",1,"form-control",3,"ngModelChange","ngModel"],["type","text","id","tourismRegister","name","tourismRegister","placeholder","Registro de Turismo",1,"form-control",3,"ngModelChange","ngModel"],["id","role","name","role",1,"form-control",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],["value","agente"],["value","dono"],["type","number","id","experience","name","experience","placeholder","Anos de Experi\xEAncia",1,"form-control",3,"ngModelChange","ngModel"],["type","text","id","specialization","name","specialization","placeholder","Especializa\xE7\xF5es",1,"form-control",3,"ngModelChange","ngModel"],["type","file","id","logo","placeholder","Logo da Ag\xEAncia",1,"form-control",3,"change"],["type","submit",1,"btn","btn-primary"]],template:function(t,r){if(t&1){let i=Wt();D(0,"div",1)(1,"h2"),G(2," Dados do Agente e da Ag\xEAncia "),D(3,"div",2),xn(),D(4,"svg",3),ce(5,"line",4),T()()(),kn(),D(6,"h3"),G(7,"Dados do Agente"),T(),D(8,"form",5,0),me("ngSubmit",function(){Se(i);let o=ld(9);return Te(r.onSubmit(o))}),D(10,"div",6)(11,"div",7)(12,"input",8),ve("ngModelChange",function(o){return Se(i),be(r.userData.name,o)||(r.userData.name=o),Te(o)}),T()(),D(13,"div",7)(14,"input",9),ve("ngModelChange",function(o){return Se(i),be(r.userData.cpf,o)||(r.userData.cpf=o),Te(o)}),T()(),D(15,"div",7)(16,"input",10),ve("ngModelChange",function(o){return Se(i),be(r.userData.birthDate,o)||(r.userData.birthDate=o),Te(o)}),T()()(),D(17,"div",6)(18,"div",7)(19,"input",11),ve("ngModelChange",function(o){return Se(i),be(r.userData.email,o)||(r.userData.email=o),Te(o)}),T()(),D(20,"div",7)(21,"input",12),ve("ngModelChange",function(o){return Se(i),be(r.userData.phone,o)||(r.userData.phone=o),Te(o)}),T()(),D(22,"div",7)(23,"input",13),ve("ngModelChange",function(o){return Se(i),be(r.userData.address,o)||(r.userData.address=o),Te(o)}),T()()(),D(24,"h3"),G(25,"Informa\xE7\xF5es da Ag\xEAncia (se aplic\xE1vel)"),T(),D(26,"div",6)(27,"div",7)(28,"input",14),ve("ngModelChange",function(o){return Se(i),be(r.userData.agencyName,o)||(r.userData.agencyName=o),Te(o)}),T()(),D(29,"div",7)(30,"input",15),ve("ngModelChange",function(o){return Se(i),be(r.userData.cnpj,o)||(r.userData.cnpj=o),Te(o)}),T()(),D(31,"div",7)(32,"input",16),ve("ngModelChange",function(o){return Se(i),be(r.userData.agencyPhone,o)||(r.userData.agencyPhone=o),Te(o)}),T()()(),D(33,"div",6)(34,"div",7)(35,"input",17),ve("ngModelChange",function(o){return Se(i),be(r.userData.agencyEmail,o)||(r.userData.agencyEmail=o),Te(o)}),T()(),D(36,"div",7)(37,"input",18),ve("ngModelChange",function(o){return Se(i),be(r.userData.agencyAddress,o)||(r.userData.agencyAddress=o),Te(o)}),T()(),D(38,"div",7)(39,"input",19),ve("ngModelChange",function(o){return Se(i),be(r.userData.tourismRegister,o)||(r.userData.tourismRegister=o),Te(o)}),T()()(),D(40,"div",6)(41,"div",7)(42,"select",20),ve("ngModelChange",function(o){return Se(i),be(r.userData.role,o)||(r.userData.role=o),Te(o)}),D(43,"option",21),G(44,"Selecione sua Fun\xE7\xE3o"),T(),D(45,"option",22),G(46,"Agente de Viagens"),T(),D(47,"option",23),G(48,"Dono/Gerente de Ag\xEAncia"),T()()(),D(49,"div",7)(50,"input",24),ve("ngModelChange",function(o){return Se(i),be(r.userData.experience,o)||(r.userData.experience=o),Te(o)}),T()(),D(51,"div",7)(52,"input",25),ve("ngModelChange",function(o){return Se(i),be(r.userData.specialization,o)||(r.userData.specialization=o),Te(o)}),T()()(),D(53,"h3"),G(54,"Logo da Empresa (n\xE3o obrigat\xF3rio)"),T(),D(55,"div",7)(56,"input",26),me("change",function(o){return Se(i),Te(r.onFileSelected(o))}),T()(),D(57,"button",27),G(58,"Salvar Dados"),T()()()}t&2&&(z(12),ye("ngModel",r.userData.name),z(2),ye("ngModel",r.userData.cpf),z(2),ye("ngModel",r.userData.birthDate),z(3),ye("ngModel",r.userData.email),z(2),ye("ngModel",r.userData.phone),z(2),ye("ngModel",r.userData.address),z(5),ye("ngModel",r.userData.agencyName),z(2),ye("ngModel",r.userData.cnpj),z(2),ye("ngModel",r.userData.agencyPhone),z(3),ye("ngModel",r.userData.agencyEmail),z(2),ye("ngModel",r.userData.agencyAddress),z(2),ye("ngModel",r.userData.tourismRegister),z(3),ye("ngModel",r.userData.role),z(8),ye("ngModel",r.userData.experience),z(2),ye("ngModel",r.userData.specialization))},dependencies:[dr,yh,vh,Vn,ea,ul,ur,cr,Jn,Xn,Zn,ra],styles:[`app-dados-usuario .container{display:flex;max-width:800px;height:100%;margin:0 auto;flex-direction:column;justify-content:center;background-image:url("./media/LOGO_YELLOW_DASH-LFV5PFJ3.png");background-size:45%;background-repeat:no-repeat;background-position:center}app-dados-usuario h2{text-transform:uppercase;font-size:36px;text-align:center;margin-bottom:20px;color:#3c3f3b;position:relative}app-dados-usuario h2 .underline{margin:10px auto 0;width:450px;height:5px;display:block}app-dados-usuario h2 svg{display:block;margin:0 auto}app-dados-usuario h3{font-size:20px;text-align:center;margin-bottom:20px;color:#3c3f3b}app-dados-usuario .form-row{display:flex;justify-content:space-between;flex-wrap:wrap}app-dados-usuario .form-group{flex-basis:calc(33.33% - 10px);margin-bottom:15px}app-dados-usuario .form-control{width:100%;padding:10px;font-size:16px;border:1px solid #3c3f3b;color:#3c3f3b;border-radius:5px;transition:border-color .3s ease-in-out}app-dados-usuario .form-control::placeholder{color:#3c3f3b;font-size:14px}app-dados-usuario .form-control:focus{outline:none}app-dados-usuario button[type=submit]{width:30%;padding:12px;font-size:16px;background-color:#3c3f3b;color:#fec870;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease-in-out}app-dados-usuario button[type=submit]:focus{outline:none}
`],encapsulation:2})};var p3=Ec(Lu());var ml=class n{constructor(e,t){this.firestore=e;this.authService=t}adicionarPassageiro(e){return N(this,null,function*(){let t=null;if((yield this.authService.isLoggedIn())&&(t=yield this.authService.getUserId()),!t)throw new Error("Usu\xE1rio n\xE3o autenticado");let r=this.firestore.collection(`passageiros/${t}/itens`),i=yield r.ref.orderBy("id","desc").limit(1).get(),s=i.empty?0:i.docs[0].data().id,o=de(V({},e),{idPassageiro:s+1});yield r.add(o)})}getPassageiros(){return N(this,null,function*(){let e=null;if((yield this.authService.isLoggedIn())&&(e=yield this.authService.getUserId()),!e)throw new Error("Usu\xE1rio n\xE3o autenticado");return this.firestore.collection(`passageiros/${e}/itens`).snapshotChanges().pipe(he(t=>t.map(r=>{let i=r.payload.doc.data(),s=r.payload.doc.id;return V({id:s},i)})))})}getPassageiroById(e){return N(this,null,function*(){let t=null;if((yield this.authService.isLoggedIn())&&(t=yield this.authService.getUserId()),!t)throw new Error("Usu\xE1rio n\xE3o autenticado");return this.firestore.collection(`passageiros/${t}/itens`).snapshotChanges().pipe(he(r=>r.map(i=>{let s=i.payload.doc.data(),o=i.payload.doc.id;return V({id:o},s)}).filter(i=>i.id==e)))})}updatePassageiro(e){return N(this,null,function*(){let t=yield this.authService.getUserId();yield this.firestore.collection(`passageiros/${t}/itens`).doc(e.id).update(e)})}deletePassageiro(e){return N(this,null,function*(){let t=yield this.authService.getUserId();yield this.firestore.collection(`passageiros/${t}/itens`).doc(e).delete()})}static \u0275fac=function(t){return new(t||n)(B(Ur),B(ln))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ww=class n{passageiro;close=new Xe;save=new Xe;delete=new Xe;telefoneMask={mask:"(00) 00000-0000"};cpfMask={mask:"000.000.000-00"};onSave(){this.save.emit(this.passageiro),this.closeModal()}onDelete(){this.delete.emit(this.passageiro.id),this.closeModal()}closeModal(){this.close.emit()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=pt({type:n,selectors:[["app-modal-editar-passageiro"]],inputs:{passageiro:"passageiro"},outputs:{close:"close",save:"save",delete:"delete"},decls:25,vars:11,consts:[[1,"modal"],[1,"modal-content"],[3,"ngSubmit"],[1,"contentForm"],[1,"contentDivider"],["type","text","id","nome","placeholder","Nome do Passageiro","name","nome","required","",3,"ngModelChange","ngModel"],["type","text","id","cpf","placeholder","CPF","name","cpf","required","",3,"ngModelChange","ngModel","imask"],["type","text","id","rg","placeholder","RG","name","rg","required","",3,"ngModelChange","ngModel"],["type","number","id","numPassaporte","placeholder","N\xFAmero do Passaporte","name","numPassaporte","required","",3,"ngModelChange","ngModel"],["type","text","id","endereco","placeholder","Endere\xE7o","name","endereco","required","",3,"ngModelChange","ngModel"],["type","email","id","email","placeholder","E-mail","name","email","required","",3,"ngModelChange","ngModel"],["type","tel","id","telefone","placeholder","Telefone","name","telefone","required","",3,"ngModelChange","ngModel","imask"],["type","date","id","nascimento","placeholder","Data de Nascimento","name","nascimento","required","",3,"ngModelChange","ngModel"],["name","observacoes","id","observacoes","placeholder","Observa\xE7\xF5es","required","",3,"ngModelChange","ngModel"],[1,"modal-actions"],["type","submit",1,"btn","btn-primary"],[1,"fa-solid","fa-calendar-plus"],["type","button",1,"delete-button",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(t,r){t&1&&(D(0,"div",0)(1,"div",1)(2,"h3"),G(3,"Editar Passageiro"),T(),D(4,"form",2),me("ngSubmit",function(){return r.onSave()}),D(5,"div",3)(6,"div",4)(7,"input",5),ve("ngModelChange",function(s){return be(r.passageiro.nome,s)||(r.passageiro.nome=s),s}),T(),D(8,"input",6),ve("ngModelChange",function(s){return be(r.passageiro.cpf,s)||(r.passageiro.cpf=s),s}),T(),D(9,"input",7),ve("ngModelChange",function(s){return be(r.passageiro.rg,s)||(r.passageiro.rg=s),s}),T(),D(10,"input",8),ve("ngModelChange",function(s){return be(r.passageiro.numPassaporte,s)||(r.passageiro.numPassaporte=s),s}),T()(),D(11,"div",4)(12,"input",9),ve("ngModelChange",function(s){return be(r.passageiro.endereco,s)||(r.passageiro.endereco=s),s}),T(),D(13,"input",10),ve("ngModelChange",function(s){return be(r.passageiro.email,s)||(r.passageiro.email=s),s}),T(),D(14,"input",11),ve("ngModelChange",function(s){return be(r.passageiro.telefone,s)||(r.passageiro.telefone=s),s}),T(),D(15,"input",12),ve("ngModelChange",function(s){return be(r.passageiro.nascimento,s)||(r.passageiro.nascimento=s),s}),T()()(),D(16,"textarea",13),ve("ngModelChange",function(s){return be(r.passageiro.obs,s)||(r.passageiro.obs=s),s}),T(),D(17,"div",14)(18,"button",15),ce(19,"i",16),G(20," Salvar "),T(),D(21,"button",17),me("click",function(){return r.onDelete()}),G(22," Excluir "),T(),D(23,"button",18),me("click",function(){return r.closeModal()}),G(24," Cancelar "),T()()()()()),t&2&&(z(7),ye("ngModel",r.passageiro.nome),z(),ye("ngModel",r.passageiro.cpf),Re("imask",r.cpfMask),z(),ye("ngModel",r.passageiro.rg),z(),ye("ngModel",r.passageiro.numPassaporte),z(2),ye("ngModel",r.passageiro.endereco),z(),ye("ngModel",r.passageiro.email),z(),ye("ngModel",r.passageiro.telefone),Re("imask",r.telefoneMask),z(),ye("ngModel",r.passageiro.nascimento),z(),ye("ngModel",r.passageiro.obs))},dependencies:[dr,Vn,ea,ur,cr,Jn,Xn,Zn,ra],styles:["[_nghost-%COMP%]     .modal{position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;background-color:#00000080;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]     .modal .modal-content{background-color:#fff;padding:20px;border-radius:10px;width:30%;box-shadow:0 4px 8px #0003;text-align:center}[_nghost-%COMP%]     .modal .modal-content h3{margin-bottom:20px;text-align:center}[_nghost-%COMP%]     .modal .modal-content label{display:block;margin-bottom:5px}[_nghost-%COMP%]     .modal .modal-content input{width:100%;padding:8px;margin-bottom:15px;border:1px solid #ccc;border-radius:4px;height:36px}[_nghost-%COMP%]     .modal .modal-content textarea{width:100%;padding:8px;margin-bottom:15px;border:1px solid #ccc;border-radius:4px;resize:none;height:100px}[_nghost-%COMP%]     .modal .modal-content .modal-actions{width:100%;display:flex;gap:20px}[_nghost-%COMP%]     .modal .modal-content .modal-actions button{background-color:#3c3f3b;border:none;padding:10px;color:#fec870;text-transform:uppercase;cursor:pointer;width:50%}[_nghost-%COMP%]     .modal .modal-content .modal-actions button i{margin-right:10px}[_nghost-%COMP%]     .contentForm{display:flex;flex:1;width:100%;gap:10px}[_nghost-%COMP%]     .contentForm .contentDivider{flex:6}"]})};function $ee(n,e){if(n&1){let t=Wt();D(0,"tr")(1,"td"),G(2),T(),D(3,"td"),G(4),T(),D(5,"td"),G(6),T(),D(7,"td"),G(8),T(),D(9,"td"),G(10),T(),D(11,"td",8)(12,"div",9)(13,"button",10),me("click",function(){let i=Se(t).$implicit,s=ke();return Te(s.openEditModal(i))}),ce(14,"i",11),T(),D(15,"button",10),me("click",function(){let i=Se(t).$implicit,s=ke();return Te(s.criarCotacao(i))}),ce(16,"i",12),T(),D(17,"button",10),me("click",function(){let i=Se(t).$implicit,s=ke();return Te(s.verInformacoes(i))}),ce(18,"i",13),T()()()()}if(n&2){let t=e.$implicit,r=ke();z(2),on(t.idPassageiro),z(2),on(t.nome),z(2),on(t.email),z(2),on(t.telefone),z(2),on(r.formataData(t.nascimento))}}function qee(n,e){if(n&1){let t=Wt();D(0,"app-modal-editar-passageiro",14),me("close",function(){Se(t);let i=ke();return Te(i.showModal=!1)})("save",function(i){Se(t);let s=ke();return Te(s.onSavePassageiro(i))})("delete",function(i){Se(t);let s=ke();return Te(s.onDeletePassageiro(i))}),T()}if(n&2){let t=ke();Re("passageiro",t.passageiroAtual)}}var Gw=class n{constructor(e,t,r,i){this.passageiroService=e;this.authService=t;this.toastr=r;this.router=i}passageiros=[];userLoggedIn=!1;showModal=!1;passageiroAtual;ngOnInit(){this.getListaPassageiros()}checkUserLoggedIn(){return N(this,null,function*(){this.userLoggedIn=yield this.authService.isLoggedIn(),this.userLoggedIn||this.router.navigate(["/login"])})}getListaPassageiros(){return N(this,null,function*(){(yield yield this.passageiroService.getPassageiros()).subscribe(t=>{this.passageiros=t})})}formataData(e){return(0,p3.default)(e).format("DD/MM/YYYY")}openEditModal(e){this.passageiroAtual=V({},e),this.showModal=!0}onSavePassageiro(e){return N(this,null,function*(){try{yield this.passageiroService.updatePassageiro(e).then(()=>{this.toastr.success("Passageiro atualizado com sucesso!")}),this.showModal=!1}catch(t){console.error("Erro ao excluir o lembrete:",t)}})}onDeletePassageiro(e){return N(this,null,function*(){try{yield this.passageiroService.deletePassageiro(e).then(()=>{this.toastr.success("Passageiro excluido com sucesso!")}),this.showModal=!1}catch(t){console.error("Erro ao excluir o lembrete:",t)}})}criarCotacao(e){}verInformacoes(e){}static \u0275fac=function(t){return new(t||n)(te(ml),te(ln),te(lr),te(En))};static \u0275cmp=pt({type:n,selectors:[["app-lista-passageiros"]],decls:25,vars:2,consts:[[1,"passageiros-tabela"],[1,"title-passageiros"],["height","5","width","175","xmlns","http://www.w3.org/2000/svg"],["x1","0","y1","10","x2","250","y2","10",2,"stroke","#3c3f3b","stroke-width","12"],[1,"table-passageiros"],[2,"max-width","70px"],[4,"ngFor","ngForOf"],[3,"passageiro","close","save","delete",4,"ngIf"],[1,"actions"],[1,"innerActions"],[3,"click"],[1,"fa-solid","fa-pencil"],[1,"fa-solid","fa-file-circle-plus"],[1,"fa-solid","fa-circle-info"],[3,"close","save","delete","passageiro"]],template:function(t,r){t&1&&(D(0,"div",0)(1,"div",1)(2,"span"),G(3,"Passageiros"),T(),xn(),D(4,"svg",2),ce(5,"line",3),T()(),kn(),D(6,"div",4)(7,"table")(8,"thead")(9,"tr")(10,"th",5),G(11,"C\xF3d. Passageiro"),T(),D(12,"th"),G(13,"Nome Passageiro"),T(),D(14,"th"),G(15,"E-mail"),T(),D(16,"th"),G(17,"Telefone"),T(),D(18,"th"),G(19,"Dt. Nasc"),T(),D(20,"th"),G(21,"Actions"),T()()(),D(22,"tbody"),zt(23,$ee,19,5,"tr",6),T()()()(),zt(24,qee,1,1,"app-modal-editar-passageiro",7)),t&2&&(z(23),Re("ngForOf",r.passageiros),z(),Re("ngIf",r.showModal))},dependencies:[cd,Yr,Ww],styles:[`app-lista-passageiros .title-passageiros{display:flex;flex-direction:column;align-items:center;padding-bottom:2.7vh;font-style:normal;font-weight:400;font-size:36px;color:#3c3f3b}app-lista-passageiros .passageiros-tabela{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding:42px 0;background-image:url("./media/LOGO_YELLOW_DASH-LFV5PFJ3.png");background-size:45%;background-repeat:no-repeat;background-position:center}app-lista-passageiros .passageiros-tabela .table-passageiros{width:100%;padding:0 53px;border-collapse:collapse}app-lista-passageiros .passageiros-tabela .table-passageiros table{width:100%;border-collapse:collapse;border:1px solid #fff;border-radius:8px;overflow:hidden;box-shadow:0 2px 4px -2px #0000001a}app-lista-passageiros .passageiros-tabela .table-passageiros table thead{background-color:#f5a623;color:#000}app-lista-passageiros .passageiros-tabela .table-passageiros table thead th{padding:12px;font-weight:700;text-align:left;border:1px solid #3c3f3b}app-lista-passageiros .passageiros-tabela .table-passageiros table tbody tr{border:1px solid #3c3f3b}app-lista-passageiros .passageiros-tabela .table-passageiros table tbody tr:nth-child(2n){background-color:#f9f9f9}app-lista-passageiros .passageiros-tabela .table-passageiros table tbody td{padding:12px;text-align:left;border:1px solid #3c3f3b}app-lista-passageiros .passageiros-tabela .table-passageiros table tbody td .action-icons{display:flex;gap:10px}app-lista-passageiros .passageiros-tabela .table-passageiros table tbody td .action-icons i{cursor:pointer;font-size:18px}app-lista-passageiros .passageiros-tabela .table-passageiros table tbody td .action-icons i:hover{color:#f5a623}app-lista-passageiros .actions{padding:0!important}app-lista-passageiros .actions .innerActions{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:center;gap:10px}app-lista-passageiros .actions .innerActions button{background-color:transparent;border:none;font-size:16px;cursor:pointer}
`],encapsulation:2})};var m3=Ec(Lu());var Yw=class n{constructor(e,t){this.firestore=e;this.authService=t}getFollowUp(){return N(this,null,function*(){let e=null;if((yield this.authService.isLoggedIn())&&(e=yield this.authService.getUserId()),!e)throw new Error("Usu\xE1rio n\xE3o autenticado");return this.firestore.collection(`followUp/${e}/itens`).snapshotChanges().pipe(he(t=>t.map(r=>{let i=r.payload.doc.data(),s=r.payload.doc.id;return V({id:s},i)})))})}adicionarFollowUp(e){return N(this,null,function*(){let t=null;if((yield this.authService.isLoggedIn())&&(t=yield this.authService.getUserId()),!t)throw new Error("Usu\xE1rio n\xE3o autenticado");let r=this.firestore.collection(`followUp/${t}/itens`),i=V({},e);yield r.add(i)})}static \u0275fac=function(t){return new(t||n)(B(Ur),B(ln))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})};var Kw=class n{constructor(e,t){this.firestore=e;this.authService=t}getCotacao(){return N(this,null,function*(){let e=null;if((yield this.authService.isLoggedIn())&&(e=yield this.authService.getUserId()),!e)throw new Error("Usu\xE1rio n\xE3o autenticado");return this.firestore.collection(`cotacao/${e}/itens`).snapshotChanges().pipe(he(t=>t.map(r=>{let i=r.payload.doc.data(),s=r.payload.doc.id;return V({id:s},i)})))})}getCotacaoById(e){return N(this,null,function*(){let t=null;if((yield this.authService.isLoggedIn())&&(t=yield this.authService.getUserId()),!t)throw new Error("Usu\xE1rio n\xE3o autenticado");return this.firestore.collection(`cotacao/${t}/itens`).snapshotChanges().pipe(he(r=>r.map(i=>{let s=i.payload.doc.data(),o=i.payload.doc.id;return V({id:o},s)}).filter(i=>i.codCotacao==e)))})}static \u0275fac=function(t){return new(t||n)(B(Ur),B(ln))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})};function Gee(n,e){n&1&&(D(0,"button",18),ce(1,"i",19),G(2," Incluir "),T())}function Yee(n,e){n&1&&(D(0,"button",18),ce(1,"i",19),G(2," Salvar "),T())}function Kee(n,e){if(n&1){let t=Wt();D(0,"button",20),me("click",function(){Se(t);let i=ke();return Te(i.onDelete())}),G(1," Excluir "),T()}}var Qw=class n{constructor(e,t){this.passageiroService=e;this.cotacaoService=t}followUpModel;close=new Xe;save=new Xe;update=new Xe;delete=new Xe;tipoModal;ngOnInit(){this.followUpModel||(this.followUpModel=[])}preencheCotacao(e){return N(this,null,function*(){let t=yield this.buscaCotacao(e),r=yield this.buscaPassageiro(t.idPassageiro);if(this.followUpModel.nomePassageiro=r.nome,this.followUpModel.hotel=t.hotel,this.followUpModel.dtIda=t.dtIda,this.followUpModel.dtVolta=t.dtVolta,this.followUpModel.valorFaturamento=t.valoraFaturamento,!t.possuiConexao)this.followUpModel.aereo=`${t.aeroportoIda} -> ${t.aeroportoVolta}`;else{let i=`${t.aeroportoIda} -> `;t.conexoes.forEach(s=>{i+=`${s} -> `}),i+=`${t.aeroportoVolta}`}})}buscaPassageiro(e){return N(this,null,function*(){try{let t=yield this.passageiroService.getPassageiroById(e);return yield new Promise((i,s)=>{t.subscribe({next:o=>{let a=o.length>0?o[0]:null;i(a)},error:o=>s(o)})})}catch(t){throw console.error("Erro ao obter o passageiro:",t),t}})}buscaCotacao(e){return N(this,null,function*(){try{let t=yield this.cotacaoService.getCotacaoById(e);return yield new Promise((i,s)=>{t.subscribe({next:o=>{let a=o.length>0?o[0]:null;i(a)},error:o=>s(o)})})}catch(t){throw console.error("Erro ao obter a cota\xE7\xE3o:",t),t}})}onSave(){this.save.emit(this.followUpModel)}onDelete(){this.delete.emit(this.followUpModel.id)}onUpdate(){this.update.emit(this.followUpModel)}closeModal(){this.close.emit()}static \u0275fac=function(t){return new(t||n)(te(ml),te(Kw))};static \u0275cmp=pt({type:n,selectors:[["app-modal-follow-up"]],inputs:{followUpModel:"followUpModel",tipoModal:"tipoModal"},outputs:{close:"close",save:"save",update:"update",delete:"delete"},decls:25,vars:13,consts:[[1,"modal"],[1,"modal-content"],[3,"ngSubmit"],[1,"contentForm"],[1,"contentDivider"],["type","number","id","codCotacao","placeholder","C\xF3d. Cota\xE7\xE3o","name","nome","required","",2,"flex","2",3,"ngModelChange","ngModel"],["type","text","id","nome","placeholder","Nome do Passageiro","name","nome","readonly","",2,"flex","10",3,"ngModelChange","ngModel"],["type","text","id","cotacaoHotel","placeholder","Hotel","name","cotacaoHotel","readonly","",3,"ngModelChange","ngModel"],["type","text","id","cotacaoAereo","placeholder","A\xE9reo","name","cotacaoAereo","readonly","",3,"ngModelChange","ngModel"],["type","text","id","dtIda","placeholder","Data de Ida","name","cotacaoHotel","readonly","",3,"ngModelChange","ngModel"],["type","text","id","dtVolta","placeholder","Data de Volta","name","cotacaoAereo","readonly","",3,"ngModelChange","ngModel"],["type","text","id","valorFechamento","placeholder","Valor de Fechamento","name","cotacaoAereo","readonly","",3,"ngModelChange","ngModel"],["type","text","onfocus","(this.type='date')","id","dtReisao","placeholder","Data para Revis\xE3o","name","nome","required","",3,"ngModelChange","ngModel"],["name","observacoes","id","observacoes","placeholder","Mensagem","required","",3,"ngModelChange","ngModel"],[1,"modal-actions"],["type","submit","class","btn btn-primary",4,"ngIf"],["type","button","class","delete-button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],[1,"fa-solid","fa-plus"],["type","button",1,"delete-button",3,"click"]],template:function(t,r){t&1&&(D(0,"div",0)(1,"div",1)(2,"h3"),G(3),T(),D(4,"form",2),me("ngSubmit",function(){return r.onSave()}),D(5,"div",3)(6,"div",4)(7,"input",5),ve("ngModelChange",function(s){return be(r.followUpModel.codCotacao,s)||(r.followUpModel.codCotacao=s),s}),me("ngModelChange",function(s){return r.preencheCotacao(s)}),T(),D(8,"input",6),ve("ngModelChange",function(s){return be(r.followUpModel.nomePassageiro,s)||(r.followUpModel.nomePassageiro=s),s}),T()(),D(9,"div",4)(10,"input",7),ve("ngModelChange",function(s){return be(r.followUpModel.hotel,s)||(r.followUpModel.hotel=s),s}),T(),D(11,"input",8),ve("ngModelChange",function(s){return be(r.followUpModel.aereo,s)||(r.followUpModel.aereo=s),s}),T()(),D(12,"div",4)(13,"input",9),ve("ngModelChange",function(s){return be(r.followUpModel.dtIda,s)||(r.followUpModel.dtIda=s),s}),T(),D(14,"input",10),ve("ngModelChange",function(s){return be(r.followUpModel.dtVolta,s)||(r.followUpModel.dtVolta=s),s}),T(),D(15,"input",11),ve("ngModelChange",function(s){return be(r.followUpModel.valorFechamento,s)||(r.followUpModel.valorFechamento=s),s}),T()(),D(16,"div",4)(17,"input",12),ve("ngModelChange",function(s){return be(r.followUpModel.dtRevisao,s)||(r.followUpModel.dtRevisao=s),s}),T()()(),D(18,"textarea",13),ve("ngModelChange",function(s){return be(r.followUpModel.mensagem,s)||(r.followUpModel.mensagem=s),s}),T(),D(19,"div",14),zt(20,Gee,3,0,"button",15)(21,Yee,3,0,"button",15)(22,Kee,2,0,"button",16),D(23,"button",17),me("click",function(){return r.closeModal()}),G(24," Cancelar "),T()()()()()),t&2&&(z(3),Lr("",r.tipoModal," Follow Up"),z(4),ye("ngModel",r.followUpModel.codCotacao),z(),ye("ngModel",r.followUpModel.nomePassageiro),z(2),ye("ngModel",r.followUpModel.hotel),z(),ye("ngModel",r.followUpModel.aereo),z(2),ye("ngModel",r.followUpModel.dtIda),z(),ye("ngModel",r.followUpModel.dtVolta),z(),ye("ngModel",r.followUpModel.valorFechamento),z(2),ye("ngModel",r.followUpModel.dtRevisao),z(),ye("ngModel",r.followUpModel.mensagem),z(2),Re("ngIf",r.tipoModal=="incluir"),z(),Re("ngIf",r.tipoModal=="editar"),z(),Re("ngIf",r.tipoModal=="editar"))},dependencies:[Yr,dr,Vn,ea,ur,cr,Jn,Xn,Zn],styles:["[_nghost-%COMP%]     .modal{position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;background-color:#00000080;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]     .modal .modal-content{background-color:#fff;padding:20px;border-radius:10px;width:50%;box-shadow:0 4px 8px #0003;text-align:center}[_nghost-%COMP%]     .modal .modal-content h3{margin-bottom:20px;text-align:center;text-transform:capitalize}[_nghost-%COMP%]     .modal .modal-content label{display:block;margin-bottom:5px}[_nghost-%COMP%]     .modal .modal-content input{width:100%;padding:8px;margin-bottom:15px;border:1px solid #ccc;border-radius:4px;height:36px}[_nghost-%COMP%]     .modal .modal-content textarea{width:100%;padding:8px;margin-bottom:15px;border:1px solid #ccc;border-radius:4px;resize:none;height:100px}[_nghost-%COMP%]     .modal .modal-content .modal-actions{width:100%;display:flex;gap:20px}[_nghost-%COMP%]     .modal .modal-content .modal-actions button{background-color:#3c3f3b;border:none;padding:10px;color:#fec870;text-transform:uppercase;cursor:pointer;width:50%}[_nghost-%COMP%]     .modal .modal-content .modal-actions button i{margin-right:10px}[_nghost-%COMP%]     .contentForm{display:flex;flex-direction:column;flex:1;width:100%;gap:10px}[_nghost-%COMP%]     .contentForm .contentDivider{display:flex;width:100%;gap:15px}"]})};function Zee(n,e){if(n&1){let t=Wt();D(0,"tr")(1,"td"),G(2),T(),D(3,"td"),G(4),T(),D(5,"td"),G(6),T(),D(7,"td"),G(8),T(),D(9,"td"),G(10),T(),D(11,"td",11)(12,"div",12)(13,"button",13),me("click",function(){let i=Se(t).$implicit,s=ke();return Te(s.openEditModal(i))}),ce(14,"i",14),T(),D(15,"button",13),me("click",function(){let i=Se(t).$implicit,s=ke();return Te(s.marcarComoFinalizado(i))}),ce(16,"i",15),T()()()()}if(n&2){let t=e.$implicit,r=ke();z(2),on(r.formataData(t.nascimento)),z(2),on(t.nome),z(2),on(t.status),z(2),on(t.codCotacao),z(2),on(t.mensagem)}}function Xee(n,e){if(n&1){let t=Wt();D(0,"app-modal-follow-up",16),me("close",function(){Se(t);let i=ke();return Te(i.showModal=!1)})("save",function(i){Se(t);let s=ke();return Te(s.onIncluirFollowUp(i))})("update",function(i){Se(t);let s=ke();return Te(s.onSaveFollowUp(i))})("delete",function(i){Se(t);let s=ke();return Te(s.onDeleteFollowUp(i))}),T()}if(n&2){let t=ke();Re("followUpModel",t.followUpAtual)("tipoModal",t.tipoModal)}}var Zw=class n{constructor(e,t,r,i){this.followUpService=e;this.toastr=t;this.authService=r;this.router=i}followUps=[];userLoggedIn=!1;showModal=!1;tipoModal="";followUpAtual;ngOnInit(){this.openIncluirModal()}formataData(e){return(0,m3.default)(e).format("DD/MM/YYYY")}openEditModal(e){this.followUpAtual=V({},e),this.tipoModal="editar",this.showModal=!0}openIncluirModal(){this.tipoModal="incluir",this.showModal=!0}marcarComoFinalizado(e){}onSaveFollowUp(e){return N(this,null,function*(){try{console.log(e),this.showModal=!1}catch(t){console.error("Erro ao excluir o lembrete:",t)}})}onIncluirFollowUp(e){return N(this,null,function*(){try{this.validaForm(e)&&(e.status=0,this.showModal=!1)}catch(t){console.error("Erro ao excluir o lembrete:",t)}})}validaForm(e){return e.dtRevisao&&e.codCotacao&&e.mensagem?(console.log("BOM"),!0):(this.toastr.warning("Preencha todos os campos."),!1)}onDeleteFollowUp(e){return N(this,null,function*(){try{this.showModal=!1}catch(t){console.error("Erro ao excluir o lembrete:",t)}})}static \u0275fac=function(t){return new(t||n)(te(Yw),te(lr),te(ln),te(En))};static \u0275cmp=pt({type:n,selectors:[["app-follow-up"]],decls:30,vars:2,consts:[[1,"followUp-tabela"],[1,"title-followUp"],[1,"titleContent"],["height","5","width","175","xmlns","http://www.w3.org/2000/svg"],["x1","0","y1","10","x2","250","y2","10",2,"stroke","#3c3f3b","stroke-width","12"],[1,"buttonIncluir"],[1,"btnAdicionar",3,"click"],[1,"fa-solid","fa-user-plus"],[1,"table-followUp"],[4,"ngFor","ngForOf"],[3,"followUpModel","tipoModal","close","save","update","delete",4,"ngIf"],[1,"actions"],[1,"innerActions"],[3,"click"],[1,"fa-solid","fa-pencil"],[1,"fa-solid","fa-check"],[3,"close","save","update","delete","followUpModel","tipoModal"]],template:function(t,r){t&1&&(D(0,"div",0)(1,"div",1)(2,"div",2)(3,"span"),G(4,"Follow Up"),T(),xn(),D(5,"svg",3),ce(6,"line",4),T()(),kn(),D(7,"div",5)(8,"button",6),me("click",function(){return r.openIncluirModal()}),ce(9,"i",7),G(10," Adicionar "),T()()(),D(11,"div",8)(12,"table")(13,"thead")(14,"tr")(15,"th"),G(16,"Dt. revis\xE3o"),T(),D(17,"th"),G(18,"Nome Passageiro"),T(),D(19,"th"),G(20,"Status"),T(),D(21,"th"),G(22,"Cod. Cota\xE7\xE3o"),T(),D(23,"th"),G(24,"Mensagem"),T(),D(25,"th"),G(26,"Actions"),T()()(),D(27,"tbody"),zt(28,Zee,17,5,"tr",9),T()()()(),zt(29,Xee,1,2,"app-modal-follow-up",10)),t&2&&(z(28),Re("ngForOf",r.followUps),z(),Re("ngIf",r.showModal))},dependencies:[cd,Yr,Qw],styles:['[_nghost-%COMP%]     .title-followUp{display:flex;flex-direction:row;align-items:center;padding-bottom:2.7vh;font-style:normal;font-weight:400;font-size:36px;color:#3c3f3b;width:93%}[_nghost-%COMP%]     .title-followUp .titleContent{display:flex;flex-direction:column;flex:1;align-content:center;flex-wrap:wrap}[_nghost-%COMP%]     .title-followUp .buttonIncluir{display:flex;flex-direction:row;flex:1;position:absolute;right:53px}[_nghost-%COMP%]     .title-followUp .buttonIncluir .btnAdicionar{display:flex;font-size:16px;background-color:#3c3f3b;color:#fec870;padding:17px 20px;border-radius:10px;border:none;cursor:pointer;gap:10px}[_nghost-%COMP%]     .followUp-tabela{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding:42px 0;background-image:url("./media/LOGO_YELLOW_DASH-LFV5PFJ3.png");background-size:45%;background-repeat:no-repeat;background-position:center}[_nghost-%COMP%]     .followUp-tabela .table-followUp{width:100%;padding:0 53px;border-collapse:collapse}[_nghost-%COMP%]     .followUp-tabela .table-followUp table{width:100%;border-collapse:collapse;border:1px solid #fff;border-radius:8px;overflow:hidden;box-shadow:0 2px 4px -2px #0000001a}[_nghost-%COMP%]     .followUp-tabela .table-followUp table thead{background-color:#f5a623;color:#000}[_nghost-%COMP%]     .followUp-tabela .table-followUp table thead th{padding:12px;font-weight:700;text-align:left;border:1px solid #3c3f3b}[_nghost-%COMP%]     .followUp-tabela .table-followUp table tbody tr{border:1px solid #3c3f3b}[_nghost-%COMP%]     .followUp-tabela .table-followUp table tbody tr:nth-child(2n){background-color:#f9f9f9}[_nghost-%COMP%]     .followUp-tabela .table-followUp table tbody td{padding:12px;text-align:left;border:1px solid #3c3f3b}[_nghost-%COMP%]     .followUp-tabela .table-followUp table tbody td .action-icons{display:flex;gap:10px}[_nghost-%COMP%]     .followUp-tabela .table-followUp table tbody td .action-icons i{cursor:pointer;font-size:18px}[_nghost-%COMP%]     .followUp-tabela .table-followUp table tbody td .action-icons i:hover{color:#f5a623}[_nghost-%COMP%]     .actions{padding:0!important}[_nghost-%COMP%]     .actions .innerActions{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:center;gap:10px}[_nghost-%COMP%]     .actions .innerActions button{background-color:transparent;border:none;font-size:16px;cursor:pointer}']})};var Xw=class n{telefoneMask={mask:"(00) 00000-0000"};cpfMask={mask:"000.000.000-00"};cotacao={passageiroId:"",hotel:"",aeroportoSaida:"",aeroportoChegada:"",conexao:!1,conexoes:[],dtIda:"",dtVolta:"",valorHotel:"",valorAereo:"",comissao:"",taxas:""};onSubmit(e){return N(this,null,function*(){})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=pt({type:n,selectors:[["app-cotacao"]],decls:35,vars:7,consts:[["userDataForm","ngForm"],["nomePassageiro",""],[1,"container"],[1,"underline"],["height","5","width","150"],["x1","0","y1","0","x2","150","y2","0",2,"stroke","#3c3f3b","stroke-width","5"],[3,"ngSubmit"],[1,"form-row"],[1,"form-group-passageiro"],["type","text","id","idPassageiro","name","idPassageiro","hidden","","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","readonly","","id","nomePassageiro","name","nomePassageiro","placeholder","Nome do passageiro","imask","000.000.000-00","required","",1,"form-control"],[1,"button-passageiro"],[1,"buscaPassageiro"],[1,"fa-solid","fa-address-book"],[1,"fa-solid","fa-user-plus"],["height","3","width","150"],["x1","0","y1","0","x2","150","y2","0",2,"stroke","#3c3f3b","stroke-width","3"],[1,"form-row","pb20"],["type","text","id","hotel","name","hotel","placeholder","Hotel","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","id","aeroportoSaida","name","aeroportoSaida","placeholder","Aeroporto de sa\xEDda","required","",1,"form-control",2,"flex","5",3,"ngModelChange","ngModel"],["type","text","id","aeroportoChegada","name","aeroportoChegada","placeholder","Aeroporto de chegada","required","",1,"form-control",2,"flex","5",3,"ngModelChange","ngModel"],[1,"conexao-check"],["type","checkbox","name","possuiConexao","id","conexao","label","Aeroporto de chegada",3,"ngModelChange","ngModel"],["for","possuiConexao"],["type","text","id","dtIda","name","dtIda","placeholder","Data de Ida","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","id","aeroportoChegada","name","aeroportoChegada","placeholder","Aeroporto de chegada","required","",1,"form-control",3,"ngModelChange","ngModel"]],template:function(t,r){if(t&1){let i=Wt();D(0,"div",2)(1,"h2"),G(2," Cota\xE7\xE3o "),D(3,"div",3),xn(),D(4,"svg",4),ce(5,"line",5),T()()(),kn(),D(6,"form",6,0),me("ngSubmit",function(){Se(i);let o=ld(7);return Te(r.onSubmit(o))}),D(8,"div",7)(9,"div",8)(10,"input",9),ve("ngModelChange",function(o){return Se(i),be(r.cotacao.passageiroId,o)||(r.cotacao.passageiroId=o),Te(o)}),T(),ce(11,"input",10,1),D(13,"div",11)(14,"button",12),ce(15,"i",13),T(),D(16,"button",12),ce(17,"i",14),T()()()(),D(18,"h3")(19,"div",3),G(20," DETALHES DA VIAGEM "),xn(),D(21,"svg",15),ce(22,"line",16),T()()(),kn(),D(23,"div",17)(24,"input",18),ve("ngModelChange",function(o){return Se(i),be(r.cotacao.hotel,o)||(r.cotacao.hotel=o),Te(o)}),T()(),D(25,"div",7)(26,"input",19),ve("ngModelChange",function(o){return Se(i),be(r.cotacao.aeroportoSaida,o)||(r.cotacao.aeroportoSaida=o),Te(o)}),T(),D(27,"input",20),ve("ngModelChange",function(o){return Se(i),be(r.cotacao.aeroportoChegada,o)||(r.cotacao.aeroportoChegada=o),Te(o)}),T(),D(28,"div",21)(29,"input",22),ve("ngModelChange",function(o){return Se(i),be(r.cotacao.aeroportoChegada,o)||(r.cotacao.aeroportoChegada=o),Te(o)}),T(),D(30,"label",23),G(31," Possui conex\xE3o?"),T()()(),D(32,"div",7)(33,"input",24),ve("ngModelChange",function(o){return Se(i),be(r.cotacao.dtIda,o)||(r.cotacao.dtIda=o),Te(o)}),T(),D(34,"input",25),ve("ngModelChange",function(o){return Se(i),be(r.cotacao.aeroportoChegada,o)||(r.cotacao.aeroportoChegada=o),Te(o)}),T()()()()}t&2&&(z(10),ye("ngModel",r.cotacao.passageiroId),z(14),ye("ngModel",r.cotacao.hotel),z(2),ye("ngModel",r.cotacao.aeroportoSaida),z(),ye("ngModel",r.cotacao.aeroportoChegada),z(2),ye("ngModel",r.cotacao.aeroportoChegada),z(4),ye("ngModel",r.cotacao.dtIda),z(),ye("ngModel",r.cotacao.aeroportoChegada))},dependencies:[dr,Vn,ex,ur,cr,Jn,Xn,Zn,ra],styles:['[_nghost-%COMP%]     .container{font-family:Nunito Sans,sans-serif;display:flex;max-width:70%;height:100%;margin:0 auto;padding:42px 0;flex-direction:column;justify-content:flex-start;background-image:url("./media/LOGO_YELLOW_DASH-LFV5PFJ3.png");background-size:45%;background-repeat:no-repeat;background-position:center}[_nghost-%COMP%]     .container h2{text-transform:uppercase;font-size:36px;text-align:center;margin-bottom:20px;color:#3c3f3b;position:relative}[_nghost-%COMP%]     .container h2 .underline{margin:10px auto 0;width:150px;height:5px;display:block}[_nghost-%COMP%]     .container h2 svg{display:block;margin:0 auto}[_nghost-%COMP%]     .container h3{font-size:20px;text-align:center;margin:32px 0;color:#3c3f3b}[_nghost-%COMP%]     .container h3 .underline{margin:0 auto;display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]     .container .form-row{display:flex;justify-content:space-between;flex-wrap:nowrap;gap:25px}[_nghost-%COMP%]     .container .form-row .form-group{display:flex;margin-bottom:15px}[_nghost-%COMP%]     .container .form-row .form-group-passageiro{display:flex;gap:20px;flex:1}[_nghost-%COMP%]     .container .form-row .form-group-passageiro .button-passageiro{display:flex;gap:20px}[_nghost-%COMP%]     .container .form-row .form-group-passageiro .button-passageiro button{padding:6px;background-color:transparent;border:1px solid #3c3f3b;border-radius:5px}[_nghost-%COMP%]     .container .form-row .form-group-passageiro .button-passageiro button i{width:35px;font-size:20px;color:#3c3f3b}[_nghost-%COMP%]     .container .form-row .form-control{width:100%;padding:15px;font-size:16px;border:1px solid #3c3f3b;color:#3c3f3b;border-radius:5px;transition:border-color .3s ease-in-out;background-color:#ffffff80}[_nghost-%COMP%]     .container .form-row .form-control::placeholder{color:#3c3f3b;font-size:16px}[_nghost-%COMP%]     .container .form-row .form-control:focus{outline:none}[_nghost-%COMP%]     .container .conexao-check{display:flex;flex:2;align-items:center;gap:10px}[_nghost-%COMP%]     .container button[type=submit]{width:30%;padding:12px;font-size:16px;background-color:#3c3f3b;color:#fec870;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease-in-out}[_nghost-%COMP%]     .container button[type=submit]:focus{outline:none}[_nghost-%COMP%]     .pb20{padding-bottom:20px}']})};var Jee=[{path:"",component:Dw},{path:"login",component:Ew},{path:"dados-usuario",component:zw},{path:"passageiros",component:Gw},{path:"follow-up",component:Zw},{path:"cotacao",component:Xw}],Jw=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=vt({type:n});static \u0275inj=yt({imports:[wp.forRoot(Jee),wp]})};var eE=class n{constructor(e,t){this.userService=e;this.authFunction=t}userName="Agente";logoUrl="/assets/img/LOGO_YELLOW.png";ngOnInit(){this.getUserDetails()}getUserDetails(){this.userService.getUserData().subscribe(e=>{e&&(e.name&&(this.userName=e.name),e.logoUrl&&(this.logoUrl=e.logoUrl))})}logoutFunction(){this.authFunction.logout()}static \u0275fac=function(t){return new(t||n)(te(Ch),te(ln))};static \u0275cmp=pt({type:n,selectors:[["app-menu"]],decls:44,vars:2,consts:[[1,"sidebar"],[1,"user-info"],["routerLink","/dados-usuario"],[1,"menu"],["routerLink","/"],[1,"fa","fa-home"],["routerLink","/passageiros"],[1,"fa-solid","fa-address-book"],["routerLink","/cotacao"],[1,"fa","fa-pencil-alt"],[1,"disabled"],[1,"fa-solid","fa-umbrella-beach"],[1,""],["routerLink","/follow-up"],[1,"fa-solid","fa-list-check"],[1,"fa-solid","fa-hand-holding-dollar"],[1,"btnLogout"],[3,"click"],[1,"fa-solid","fa-arrow-right-from-bracket"],[1,"logo"],["alt","Logo da Ag\xEAncia",3,"src"],[1,"copyright"]],template:function(t,r){t&1&&(D(0,"div",0)(1,"div",1)(2,"p"),G(3,"Bem-Vindo(a),"),T(),D(4,"h2")(5,"a",2),G(6),T()()(),D(7,"nav",3)(8,"ul")(9,"li")(10,"a",4),ce(11,"i",5),G(12," Home "),T()(),D(13,"li")(14,"a",6),ce(15,"i",7),G(16," Passageiros "),T()(),D(17,"li")(18,"a",8),ce(19,"i",9),G(20," Cota\xE7\xE3o "),T()(),D(21,"li",10)(22,"a",4),ce(23,"i",11),G(24," Reservas "),T()(),D(25,"li",12)(26,"a",13),ce(27,"i",14),G(28," Follow-Up "),T()(),D(29,"li",10)(30,"a",4),ce(31,"i",15),G(32," Faturamento "),T()(),D(33,"li",16)(34,"a",17),me("click",function(){return r.logoutFunction()}),ce(35,"i",18),G(36," Sair "),T()()()(),D(37,"div",19),ce(38,"img",20),T(),D(39,"div",21)(40,"p"),G(41,"\xA9 2024-2024 SSR Travel. Todos os direitos reservados."),T(),D(42,"p"),G(43,"Vers\xE3o: 1.0"),T()()()),t&2&&(z(6),on(r.userName),z(32),Re("src",r.logoUrl,XI))},dependencies:[WL],styles:[".sidebar[_ngcontent-%COMP%]{background-color:#3c3f3b;color:#f0f0f0;height:100vh;display:flex;flex-direction:column;justify-content:space-between}.sidebar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{text-align:center;padding:20px 15px;text-align:left}.sidebar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#fff6ed;font-weight:400}.sidebar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:28px;margin:0;font-weight:400}.sidebar[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff6ed;text-decoration:none}.sidebar[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.sidebar[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-bottom:1px solid #fec870}.sidebar[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;text-decoration:none;color:#fff;padding:10px;font-size:18px;transition:background-color .3s,border-color .3s}.sidebar[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px;width:20px;text-align:center;font-size:18px}.sidebar[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{border-top:1px solid #fec870}.sidebar[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .btnLogout[_ngcontent-%COMP%]{cursor:pointer}.sidebar[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{text-align:center;margin-top:auto}.sidebar[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:auto;border-radius:8px}.sidebar[_ngcontent-%COMP%]   .copyright[_ngcontent-%COMP%]{margin:5px 0}.sidebar[_ngcontent-%COMP%]   .copyright[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:10px;text-align:center}.sidebar[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%]{pointer-events:none}.sidebar[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{opacity:.1}"]})};var tE=class n{constructor(e){this.calendarioService=e}novoLembrete={data:"",titulo:"",mensagem:"",prioridade:"M\xE9dia",status:"NaoLido",categoria:""};fecharModalLembrete=new Xe;adicionarLembrete(){return N(this,null,function*(){try{yield this.calendarioService.adicionarLembrete(this.novoLembrete),this.fecharModalLembrete.emit(),this.resetLembreteForm()}catch(e){console.error("Erro ao adicionar lembrete:",e)}})}resetLembreteForm(){this.novoLembrete={data:"",titulo:"",mensagem:"",prioridade:"M\xE9dia",status:"NaoLido",categoria:""}}static \u0275fac=function(t){return new(t||n)(te(Xs))};static \u0275cmp=pt({type:n,selectors:[["app-modal-incluir-lembrete"]],outputs:{fecharModalLembrete:"fecharModalLembrete"},decls:42,vars:5,consts:[[1,"modal"],[1,"modal-content"],[1,"underline"],["height","5","width","150"],["x1","0","y1","0","x2","150","y2","0",2,"stroke","#3c3f3b","stroke-width","5"],[1,"formAdicionarLembrete",3,"ngSubmit"],[1,"info"],[1,"left-info"],["type","text","name","titulo","placeholder","T\xEDtulo do Lembrete","d","","required","",3,"ngModelChange","ngModel"],["type","text","onfocus","(this.type='date')","placeholder","Data Lembrete","name","data","required","",3,"ngModelChange","ngModel"],["name","prioridade","required","",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],["value","Alta"],["value","M\xE9dia"],["value","Baixa"],["name","categoria",3,"ngModelChange","ngModel"],["value","Pagamento"],["value","ViagemIda"],["value","ViagemVolta"],["value","Retorno"],["value","Outro"],[1,"right-info"],["name","mensagem","placeholder","Mensagem do Lembrete","required","",3,"ngModelChange","ngModel"],[1,"modal-actions"],["type","submit",1,"btn","btn-primary"],[1,"fa-solid","fa-calendar-plus"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(t,r){t&1&&(D(0,"div",0)(1,"div",1)(2,"h2"),G(3,"Incluir Lembrete"),T(),D(4,"div",2),xn(),D(5,"svg",3),ce(6,"line",4),T()(),kn(),D(7,"form",5),me("ngSubmit",function(){return r.adicionarLembrete()}),D(8,"div",6)(9,"div",7)(10,"input",8),ve("ngModelChange",function(s){return be(r.novoLembrete.titulo,s)||(r.novoLembrete.titulo=s),s}),T(),D(11,"input",9),ve("ngModelChange",function(s){return be(r.novoLembrete.data,s)||(r.novoLembrete.data=s),s}),T(),D(12,"select",10),ve("ngModelChange",function(s){return be(r.novoLembrete.prioridade,s)||(r.novoLembrete.prioridade=s),s}),D(13,"option",11),G(14,"Selecione a Prioridade"),T(),D(15,"option",12),G(16,"Alta"),T(),D(17,"option",13),G(18,"M\xE9dia"),T(),D(19,"option",14),G(20,"Baixa"),T()(),D(21,"select",15),ve("ngModelChange",function(s){return be(r.novoLembrete.categoria,s)||(r.novoLembrete.categoria=s),s}),D(22,"option",11),G(23,"Selecione a Categoria"),T(),D(24,"option",16),G(25,"Pagamento"),T(),D(26,"option",17),G(27,"Viagem (Ida)"),T(),D(28,"option",18),G(29,"Viagem (Volta)"),T(),D(30,"option",19),G(31,"Retorno"),T(),D(32,"option",20),G(33,"Outro"),T()()(),D(34,"div",21)(35,"textarea",22),ve("ngModelChange",function(s){return be(r.novoLembrete.mensagem,s)||(r.novoLembrete.mensagem=s),s}),T()()(),D(36,"div",23)(37,"button",24),ce(38,"i",25),G(39," Adicionar "),T(),D(40,"button",26),me("click",function(){return r.fecharModalLembrete.emit()}),G(41," Cancelar "),T()()()()()),t&2&&(z(10),ye("ngModel",r.novoLembrete.titulo),z(),ye("ngModel",r.novoLembrete.data),z(),ye("ngModel",r.novoLembrete.prioridade),z(9),ye("ngModel",r.novoLembrete.categoria),z(14),ye("ngModel",r.novoLembrete.mensagem))},dependencies:[dr,yh,vh,Vn,ul,ur,cr,Jn,Xn,Zn],styles:[`app-modal-incluir-lembrete .modal{position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;background-color:#00000080;display:flex;align-items:center;justify-content:center}app-modal-incluir-lembrete .modal-content{background-color:#fff;padding:20px;border-radius:10px;width:30%;box-shadow:0 4px 8px #0003;text-align:center}app-modal-incluir-lembrete .modal-content .underline{margin-bottom:10px}app-modal-incluir-lembrete .modal-content .formAdicionarLembrete{display:flex;flex-direction:column;align-items:center}app-modal-incluir-lembrete .modal-content .formAdicionarLembrete .info{display:flex;flex-direction:row;gap:10px;width:100%;margin-bottom:20px}app-modal-incluir-lembrete .modal-content .formAdicionarLembrete .info .left-info{flex:4;display:flex;flex-direction:column;gap:10px}app-modal-incluir-lembrete .modal-content .formAdicionarLembrete .info .left-info input,app-modal-incluir-lembrete .modal-content .formAdicionarLembrete .info .left-info select{font-family:Nunito Sans,sans-serif;height:30px;padding:5px}app-modal-incluir-lembrete .modal-content .formAdicionarLembrete .info .right-info{flex:8}app-modal-incluir-lembrete .modal-content .formAdicionarLembrete .info .right-info textarea{font-family:Nunito Sans,sans-serif;width:100%;height:100%;resize:none;padding:10px}app-modal-incluir-lembrete .modal-content .formAdicionarLembrete .modal-actions{width:100%;display:flex;gap:20px}app-modal-incluir-lembrete .modal-content .formAdicionarLembrete .modal-actions button{background-color:#3c3f3b;border:none;padding:10px;color:#fec870;text-transform:uppercase;cursor:pointer;width:50%}app-modal-incluir-lembrete .modal-content .formAdicionarLembrete .modal-actions button i{margin-right:10px}
`],encapsulation:2})};var nE=class n{constructor(e,t){this.passageiroService=e;this.toastr=t}telefoneMask={mask:"(00) 00000-0000"};cpfMask={mask:"000.000.000-00"};passageiro={nome:"",cpf:"",rg:"",numPassaporte:"",endereco:"",email:"",telefone:"",nascimento:"",obs:""};fecharModalPassageiro=new Xe;fecharModal(){this.fecharModalPassageiro.emit(),this.resetForm()}resetForm(){this.passageiro={nome:"",cpf:"",rg:"",numPassaporte:"",endereco:"",email:"",telefone:"",nascimento:"",obs:""}}adicionarPassageiro(){return N(this,null,function*(){try{yield this.passageiroService.adicionarPassageiro(this.passageiro).then(()=>{this.toastr.success("Passageiro inserido com sucesso!")}),this.fecharModal()}catch(e){console.error("Erro ao adicionar passageiro:",e)}})}static \u0275fac=function(t){return new(t||n)(te(ml),te(lr))};static \u0275cmp=pt({type:n,selectors:[["app-modal-incluir-passageiro"]],outputs:{fecharModalPassageiro:"fecharModalPassageiro"},decls:23,vars:11,consts:[[1,"modal"],[1,"modal-content"],[3,"ngSubmit"],[1,"contentForm"],[1,"contentDivider"],["type","text","id","nome","placeholder","Nome do Passageiro","name","nome","required","",3,"ngModelChange","ngModel"],["type","text","id","cpf","placeholder","CPF","name","cpf","required","",3,"ngModelChange","ngModel","imask"],["type","text","id","rg","placeholder","RG","name","rg","required","",3,"ngModelChange","ngModel"],["type","number","id","numPassaporte","placeholder","N\xFAmero do Passaporte","name","numPassaporte","required","",3,"ngModelChange","ngModel"],["type","text","id","endereco","placeholder","Endere\xE7o","name","endereco","required","",3,"ngModelChange","ngModel"],["type","email","id","email","placeholder","E-mail","name","email","required","",3,"ngModelChange","ngModel"],["type","tel","id","telefone","placeholder","Telefone","name","telefone","required","",3,"ngModelChange","ngModel","imask"],["type","text","onfocus","(this.type='date')","id","nascimento","placeholder","Data de Nascimento","name","nascimento","required","",3,"ngModelChange","ngModel"],["name","observacoes","id","observacoes","placeholder","Observa\xE7\xF5es","required","",3,"ngModelChange","ngModel"],[1,"modal-actions"],["type","submit",1,"btn","btn-primary"],[1,"fa-solid","fa-user-plus"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(t,r){t&1&&(D(0,"div",0)(1,"div",1)(2,"h3"),G(3,"Adicionar Passageiro"),T(),D(4,"form",2),me("ngSubmit",function(){return r.adicionarPassageiro()}),D(5,"div",3)(6,"div",4)(7,"input",5),ve("ngModelChange",function(s){return be(r.passageiro.nome,s)||(r.passageiro.nome=s),s}),T(),D(8,"input",6),ve("ngModelChange",function(s){return be(r.passageiro.cpf,s)||(r.passageiro.cpf=s),s}),T(),D(9,"input",7),ve("ngModelChange",function(s){return be(r.passageiro.rg,s)||(r.passageiro.rg=s),s}),T(),D(10,"input",8),ve("ngModelChange",function(s){return be(r.passageiro.numPassaporte,s)||(r.passageiro.numPassaporte=s),s}),T()(),D(11,"div",4)(12,"input",9),ve("ngModelChange",function(s){return be(r.passageiro.endereco,s)||(r.passageiro.endereco=s),s}),T(),D(13,"input",10),ve("ngModelChange",function(s){return be(r.passageiro.email,s)||(r.passageiro.email=s),s}),T(),D(14,"input",11),ve("ngModelChange",function(s){return be(r.passageiro.telefone,s)||(r.passageiro.telefone=s),s}),T(),D(15,"input",12),ve("ngModelChange",function(s){return be(r.passageiro.nascimento,s)||(r.passageiro.nascimento=s),s}),T()()(),D(16,"textarea",13),ve("ngModelChange",function(s){return be(r.passageiro.obs,s)||(r.passageiro.obs=s),s}),T(),D(17,"div",14)(18,"button",15),ce(19,"i",16),G(20," Adicionar "),T(),D(21,"button",17),me("click",function(){return r.fecharModal()}),G(22," Cancelar "),T()()()()()),t&2&&(z(7),ye("ngModel",r.passageiro.nome),z(),ye("ngModel",r.passageiro.cpf),Re("imask",r.cpfMask),z(),ye("ngModel",r.passageiro.rg),z(),ye("ngModel",r.passageiro.numPassaporte),z(2),ye("ngModel",r.passageiro.endereco),z(),ye("ngModel",r.passageiro.email),z(),ye("ngModel",r.passageiro.telefone),Re("imask",r.telefoneMask),z(),ye("ngModel",r.passageiro.nascimento),z(),ye("ngModel",r.passageiro.obs))},dependencies:[dr,Vn,ea,ur,cr,Jn,Xn,Zn,ra],styles:[`app-modal-incluir-passageiro .modal{position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;background-color:#00000080;display:flex;align-items:center;justify-content:center}app-modal-incluir-passageiro .modal .modal-content{background-color:#fff;padding:20px;border-radius:10px;width:30%;box-shadow:0 4px 8px #0003;text-align:center}app-modal-incluir-passageiro .modal .modal-content h3{margin-bottom:20px;text-align:center}app-modal-incluir-passageiro .modal .modal-content label{display:block;margin-bottom:5px}app-modal-incluir-passageiro .modal .modal-content input{width:100%;padding:8px;margin-bottom:15px;border:1px solid #ccc;border-radius:4px;height:36px}app-modal-incluir-passageiro .modal .modal-content textarea{width:100%;padding:8px;margin-bottom:15px;border:1px solid #ccc;border-radius:4px;resize:none;height:100px}app-modal-incluir-passageiro .modal .modal-content .modal-actions{width:100%;display:flex;gap:20px}app-modal-incluir-passageiro .modal .modal-content .modal-actions button{background-color:#3c3f3b;border:none;padding:10px;color:#fec870;text-transform:uppercase;cursor:pointer;width:50%}app-modal-incluir-passageiro .modal .modal-content .modal-actions button i{margin-right:10px}app-modal-incluir-passageiro .contentForm{display:flex;flex:1;width:100%;gap:10px}app-modal-incluir-passageiro .contentForm .contentDivider{flex:6}
`],encapsulation:2})};function rte(n,e){n&1&&(D(0,"div",6),ce(1,"app-menu"),T())}function ite(n,e){if(n&1){let t=Wt();D(0,"div",7)(1,"a",8),me("click",function(){Se(t);let i=ke();return Te(i.toggleMenu())}),ce(2,"i",9),T(),D(3,"ul")(4,"li")(5,"a",10),me("click",function(){Se(t);let i=ke();return Te(i.abrirModal("lembrete"))}),ce(6,"i",11),T()(),D(7,"li")(8,"a",12),ce(9,"i",13),T()(),D(10,"li")(11,"a",10),me("click",function(){Se(t);let i=ke();return Te(i.abrirModal("passageiro"))}),ce(12,"i",14),T()()()()}if(n&2){let t=ke();z(3),Ps("show",t.menuOpen)}}function ste(n,e){if(n&1){let t=Wt();D(0,"app-modal-incluir-lembrete",15),me("fecharModalLembrete",function(){Se(t);let i=ke();return Te(i.fecharModal("lembrete"))}),T()}}function ote(n,e){if(n&1){let t=Wt();D(0,"app-modal-incluir-passageiro",16),me("fecharModalPassageiro",function(){Se(t);let i=ke();return Te(i.fecharModal("passageiro"))}),T()}}var rE=class n{constructor(e,t,r){this.afAuth=e;this.authService=t;this.calendarioService=r}isLoggedIn=!1;mostrarModalLembreteIncluir=!1;mostrarModalLembreteEditar=!0;mostrarModalPassageiroIncluir=!1;menuOpen=!1;ngOnInit(){this.afAuth.authState.subscribe(e=>{e?(this.isLoggedIn=!0,localStorage.setItem("userLoggedIn","true")):(this.isLoggedIn=!1,localStorage.removeItem("userLoggedIn"))})}logout(){this.authService.logout().then(()=>{this.isLoggedIn=!1,localStorage.removeItem("userLoggedIn")})}toggleMenu(){this.menuOpen=!this.menuOpen}abrirModal(e){switch(e){case"lembrete":this.mostrarModalLembreteIncluir=!0;break;case"passageiro":this.mostrarModalPassageiroIncluir=!0;break}}fecharModal(e){switch(e){case"lembrete":this.mostrarModalLembreteIncluir=!1;break;case"passageiro":this.mostrarModalPassageiroIncluir=!1;break}}static \u0275fac=function(t){return new(t||n)(te(Zr),te(ln),te(Xs))};static \u0275cmp=pt({type:n,selectors:[["app-root"]],decls:7,vars:4,consts:[[1,"main"],["class","menu-container",4,"ngIf"],[1,"container"],["class","fixed-action-btn horizontal",4,"ngIf"],[3,"fecharModalLembrete",4,"ngIf"],[3,"fecharModalPassageiro",4,"ngIf"],[1,"menu-container"],[1,"fixed-action-btn","horizontal"],[1,"btn-floating","btn-large",3,"click"],[1,"fa-solid","fa-bell-concierge"],[1,"btn-floating-hidden",3,"click"],[1,"fas","fa-plus"],[1,"btn-floating-hidden"],[1,"fas","fa-list"],[1,"fa-solid","fa-user-plus"],[3,"fecharModalLembrete"],[3,"fecharModalPassageiro"]],template:function(t,r){t&1&&(D(0,"div",0),zt(1,rte,2,0,"div",1),D(2,"div",2),ce(3,"router-outlet"),T(),zt(4,ite,13,2,"div",3)(5,ste,1,0,"app-modal-incluir-lembrete",4)(6,ote,1,0,"app-modal-incluir-passageiro",5),T()),t&2&&(z(),Re("ngIf",r.isLoggedIn),z(3),Re("ngIf",r.isLoggedIn),z(),Re("ngIf",r.mostrarModalLembreteIncluir),z(),Re("ngIf",r.mostrarModalPassageiroIncluir))},dependencies:[Yr,ES,eE,tE,nE],styles:[".main[_ngcontent-%COMP%]{display:flex;height:100vh}.main[_ngcontent-%COMP%]   .fixed-action-btn[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px}.main[_ngcontent-%COMP%]   .btn-floating[_ngcontent-%COMP%]{background-color:#3c3f3b;color:#fff;width:60px;height:60px;right:15px;bottom:15px;border-radius:50%;display:flex;font-size:25px;align-items:center;justify-content:center;box-shadow:0 4px 6px #0000001a;cursor:pointer;position:absolute;z-index:100;transition:transform .3s ease,opacity .3s ease}.main[_ngcontent-%COMP%]   .btn-floating-hidden[_ngcontent-%COMP%]{background-color:#fec870;color:#3c3f3b;width:60px;height:60px;right:15px;bottom:25px;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 6px #0000001a;cursor:pointer;position:absolute;transition:transform .3s ease,opacity .3s ease}.main[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{position:relative;list-style:none;margin:0;padding:0;display:flex;flex-direction:row;opacity:0;transform:translate(0);transition:transform .3s ease,opacity .3s ease}.main[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:40px;height:40px}.main[_ngcontent-%COMP%]   ul.show[_ngcontent-%COMP%]{opacity:1;transform:translate(-80px)}.main[_ngcontent-%COMP%]   ul.show[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2){transform:translate(-60px)}.main[_ngcontent-%COMP%]   ul.show[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3){transform:translate(-120px)}.main[_ngcontent-%COMP%]   .menu-container[_ngcontent-%COMP%]{flex:1;background-color:#3c3f3b}.main[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{flex:5}"]})};var g3="@firebase/database",_3="1.0.8";var $k="";function qk(n){$k=n}var Ux=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),gn(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:g_(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Bx=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return mi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var Y3=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ux(e)}}catch{}return new Bx},Hu=Y3("localStorage"),jx=Y3("sessionStorage");var Uh=new ya("@firebase/database"),K3=function(){let n=1;return function(){return n++}}(),Q3=function(n){let e=P1(n),t=new N1;t.update(e);let r=t.digest();return f_.encodeByteArray(r)},rg=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=rg.apply(null,r):typeof r=="object"?e+=gn(r):e+=r,e+=" "}return e},$u=null,y3=!0,Z3=function(n,e){ne(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(Uh.logLevel=gi.VERBOSE,$u=Uh.log.bind(Uh),e&&jx.set("logging_enabled",!0)):typeof n=="function"?$u=n:($u=null,jx.remove("logging_enabled"))},Un=function(...n){if(y3===!0&&(y3=!1,$u===null&&jx.get("logging_enabled")===!0&&Z3(!0)),$u){let e=rg.apply(null,n);$u(e)}},ig=function(n){return function(...e){Un(n,...e)}},Hx=function(...n){let e="FIREBASE INTERNAL ERROR: "+rg(...n);Uh.error(e)},ro=function(...n){let e=`FIREBASE FATAL ERROR: ${rg(...n)}`;throw Uh.error(e),new Error(e)},mr=function(...n){let e="FIREBASE WARNING: "+rg(...n);Uh.warn(e)},ate=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&mr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},kE=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},lte=function(n){if(ys()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},vl="[MIN_NAME]",ia="[MAX_NAME]",zu=function(n,e){if(n===e)return 0;if(n===vl||e===ia)return-1;if(e===vl||n===ia)return 1;{let t=v3(n),r=v3(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},ute=function(n,e){return n===e?0:n<e?-1:1},Pm=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+gn(e))},zk=function(n){if(typeof n!="object"||n===null)return gn(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=gn(e[r]),t+=":",t+=zk(n[e[r]]);return t+="}",t},X3=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function Bn(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var J3=function(n){ne(!kE(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,s,o,a,l;n===0?(s=0,o=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-r-t))));let u=[];for(l=t;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();let h=u.join(""),p="";for(l=0;l<64;l+=8){let _=parseInt(h.substr(l,8),2).toString(16);_.length===1&&(_="0"+_),p=p+_}return p.toLowerCase()},cte=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},dte=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function hte(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");let r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}var fte=new RegExp("^-?(0*)\\d{1,10}$"),pte=-2147483648,mte=2147483647,v3=function(n){if(fte.test(n)){let e=Number(n);if(e>=pte&&e<=mte)return e}return null},Yh=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw mr("Exception was thrown by user callback.",t),e},Math.floor(0))}},gte=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Vm=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var $x=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){mr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var qx=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Un("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',mr(e)}},Um=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),sE="5",e4="v",t4="s",n4="r",r4="f",i4=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,s4="ls",o4="p",zx="ac",a4="websocket",l4="long_polling";var oE=class{constructor(e,t,r,i,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Hu.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Hu.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function _te(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function u4(n,e,t){ne(typeof e=="string","typeof type must == string"),ne(typeof t=="object","typeof params must == object");let r;if(e===a4)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===l4)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);_te(n)&&(t.ns=n.namespace);let i=[];return Bn(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var Wx=class{constructor(){this.counters_={}}incrementCounter(e,t=1){mi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return T1(this.counters_)}};var Rx={},Nx={};function Wk(n){let e=n.toString();return Rx[e]||(Rx[e]=new Wx),Rx[e]}function yte(n,e){let t=n.toString();return Nx[t]||(Nx[t]=e()),Nx[t]}var Gx=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Yh(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var w3="start",vte="close",wte="pLPCommand",Ete="pRTLPCB",c4="id",d4="pw",h4="ser",Cte="cb",bte="seg",Ite="ts",Dte="d",Ste="dframe",f4=1870,p4=30,Tte=f4-p4,Ate=25e3,Mte=3e4,$m=class n{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ig(e),this.stats_=Wk(t),this.urlFn=l=>(this.appCheckToken&&(l[zx]=this.appCheckToken),u4(t,l4,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Gx(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Mte)),lte(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Yx((...s)=>{let[o,a,l,u,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===w3)this.id=a,this.password=l;else if(o===vte)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[w3]="t",r[h4]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Cte]=this.scriptTagHolder.uniqueCallbackIdentifier),r[e4]=sE,this.transportSessionId&&(r[t4]=this.transportSessionId),this.lastSessionId&&(r[s4]=this.lastSessionId),this.applicationId&&(r[o4]=this.applicationId),this.appCheckToken&&(r[zx]=this.appCheckToken),typeof location<"u"&&location.hostname&&i4.test(location.hostname)&&(r[n4]=r4);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return ys()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!cte()&&!dte()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=gn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=S1(t),i=X3(r,Tte);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(ys())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[Ste]="t",r[c4]=e,r[d4]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=gn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},Yx=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,ys())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=K3(),window[wte+this.uniqueCallbackIdentifier]=e,window[Ete+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Un("frame writing exception"),a.stack&&Un(a.stack),Un(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Un("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[c4]=this.myID,e[d4]=this.myPW,e[h4]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+p4+r.length<=f4;){let o=this.pendingSegs.shift();r=r+"&"+bte+i+"="+o.seg+"&"+Ite+i+"="+o.ts+"&"+Dte+i+"="+o.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(Ate)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,t){ys()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Un("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var xte=16384,kte=45e3,aE=null;typeof MozWebSocket<"u"?aE=MozWebSocket:typeof WebSocket<"u"&&(aE=WebSocket);var Lh=(()=>{class n{constructor(t,r,i,s,o,a,l){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ig(this.connId),this.stats_=Wk(r),this.connURL=n.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){let a={};return a[e4]=sE,!ys()&&typeof location<"u"&&location.hostname&&i4.test(location.hostname)&&(a[n4]=r4),r&&(a[t4]=r),i&&(a[s4]=i),s&&(a[zx]=s),o&&(a[o4]=o),u4(t,a4,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Hu.set("previous_websocket_failure",!0);try{let i;if(ys()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${sE}/${$k}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new aE(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&aE!==null&&!n.forceDisallow_}static previouslyFailed(){return Hu.isInMemoryStorage||Hu.get("previous_websocket_failure")===!0}markConnectionHealthy(){Hu.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=g_(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(ne(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=gn(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=X3(r,xte);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(kte))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),m4=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[$m,Lh]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let r=Lh&&Lh.isAvailable(),i=r&&!Lh.previouslyFailed();if(t.webSocketOnly&&(r||mr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Lh];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),Rte=6e4,Nte=5e3,Pte=10*1024,Ote=100*1024,Px="t",E3="d",Fte="s",C3="r",Lte="e",b3="o",I3="a",D3="n",S3="p",Vte="h",Kx=class{constructor(e,t,r,i,s,o,a,l,u,h){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ig("c:"+this.id+":"),this.transportManager_=new m4(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Vm(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Ote?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Pte?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Px in e){let t=e[Px];t===I3?this.upgradeIfSecondaryHealthy_():t===C3?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===b3&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=Pm("t",e),r=Pm("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:S3,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:I3,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:D3,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=Pm("t",e),r=Pm("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=Pm(Px,e);if(E3 in e){let r=e[E3];if(t===Vte){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===D3){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===Fte?this.onConnectionShutdown_(r):t===C3?this.onReset_(r):t===Lte?Hx("Server Error: "+r):t===b3?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Hx("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),sE!==r&&mr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Vm(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Rte))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Vm(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Nte))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:S3,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Hu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var lE=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var uE=class{constructor(e){this.allowedEvents_=e,this.listeners_={},ne(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){ne(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var cE=class n extends uE{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!BC()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(e){return ne(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var T3=32,A3=768,Et=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function wt(){return new Et("")}function nt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function wl(n){return n.pieces_.length-n.pieceNum_}function Ft(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Et(n.pieces_,e)}function Gk(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Ute(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function qm(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function g4(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Et(e,0)}function Zt(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Et)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Et(t,0)}function rt(n){return n.pieceNum_>=n.pieces_.length}function Tr(n,e){let t=nt(n),r=nt(e);if(t===null)return e;if(t===r)return Tr(Ft(n),Ft(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Bte(n,e){let t=qm(n,0),r=qm(e,0);for(let i=0;i<t.length&&i<r.length;i++){let s=zu(t[i],r[i]);if(s!==0)return s}return t.length===r.length?0:t.length<r.length?-1:1}function Yk(n,e){if(wl(n)!==wl(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function xi(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(wl(n)>wl(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var Qx=class{constructor(e,t){this.errorPrefix_=t,this.parts_=qm(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=If(this.parts_[r]);_4(this)}};function jte(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=If(e),_4(n)}function Hte(n){let e=n.parts_.pop();n.byteLength_-=If(e),n.parts_.length>0&&(n.byteLength_-=1)}function _4(n){if(n.byteLength_>A3)throw new Error(n.errorPrefix_+"has a key path longer than "+A3+" bytes ("+n.byteLength_+").");if(n.parts_.length>T3)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+T3+") or object contains a cycle "+ju(n))}function ju(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var Zx=class n extends uE{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new n}getInitialEvent(e){return ne(e==="visible","Unknown event type: "+e),[this.visible_]}};var Om=1e3,$te=60*5*1e3,M3=30*1e3,qte=1.3,zte=3e4,Wte="server_kill",x3=3,Kk=(()=>{class n extends lE{constructor(t,r,i,s,o,a,l,u){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=u,this.id=n.nextPersistentConnectionId_++,this.log_=ig("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Om,this.maxReconnectDelay_=$te,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!ys())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Zx.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&cE.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(gn(o)),ne(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();let r=new Fn,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?r.resolve(l):r.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(t,r,i,s){this.initConnection_();let o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),ne(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ne(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let l={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,l=>{let u=l.d,h=l.s;n.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",l),h!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(h,u))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&mi(t,"w")){let i=_a(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();mr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||k1(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=M3)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=x1(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),ne(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);let o={p:t},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+gn(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):Hx("Unrecognized action received from server: "+gn(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){ne(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Om,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Om,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>zte&&(this.reconnectDelay_=Om),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*qte)}this.onConnectStatus_(!1)}establishConnection_(){return N(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,l=null,u=function(){l?l.close():(a=!0,i())},h=function(_){ne(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(_)};this.realtime_={close:u,sendRequest:h};let p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[_,w]=yield Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);a?Un("getToken() completed but was canceled"):(Un("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=w&&w.token,l=new Kx(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,E=>{mr(E+" ("+this.repoInfo_.toString()+")"),this.interrupt(Wte)},o))}catch(_){this.log_("Failed to get token: "+_),a||(this.repoInfo_.nodeAdmin&&mr(_),u())}}})}interrupt(t){Un("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Un("Resuming connection for reason: "+t),delete this.interruptReasons_[t],__(this.interruptReasons_)&&(this.reconnectDelay_=Om,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(o=>zk(o)).join("$"):i="default";let s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){let i=new Et(t).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Un("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=x3&&(this.reconnectDelay_=M3,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Un("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=x3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";ys()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+$k.replace(/\./g,"-")]=1,BC()?t["framework.cordova"]=1:A1()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=cE.getInstance().currentlyOnline();return __(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),st=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var Bh=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new st(vl,e),i=new st(vl,t);return this.compare(r,i)!==0}minPost(){return st.MIN}};var iE,dE=class extends Bh{static get __EMPTY_NODE(){return iE}static set __EMPTY_NODE(e){iE=e}compare(e,t){return zu(e.name,t.name)}isDefinedOn(e){throw Cc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return st.MIN}maxPost(){return new st(ia,iE)}makePost(e,t){return ne(typeof e=="string","KeyIndex indexValue must always be a string."),new st(e,iE)}toString(){return".key"}},no=new dE;var Vh=class{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?r(e.key,t):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},is=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??ki.EMPTY_NODE,this.right=o??ki.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this,o=i(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ki.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return ki.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),Xx=class{copy(e,t,r,i,s){return this}insert(e,t,r){return new is(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},ki=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,is.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,is.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Vh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Vh(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Vh(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Vh(this.root_,null,this.comparator_,!0,e)}};ki.EMPTY_NODE=new Xx;function Gte(n,e){return zu(n.name,e.name)}function Qk(n,e){return zu(n,e)}var Jx;function Yte(n){Jx=n}var y4=function(n){return typeof n=="number"?"number:"+J3(n):"string:"+n},v4=function(n){if(n.isLeafNode()){let e=n.val();ne(typeof e=="string"||typeof e=="number"||typeof e=="object"&&mi(e,".sv"),"Priority must be a string or number.")}else ne(n===Jx||n.isEmpty(),"priority of unexpected type.");ne(n===Jx||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var k3,jh=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,ne(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),v4(this.priorityNode_)}static set __childrenNodeConstructor(t){k3=t}static get __childrenNodeConstructor(){return k3}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return rt(t)?this:nt(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=nt(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(ne(i!==".priority"||wl(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ft(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+y4(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=J3(this.value_):t+=this.value_,this.lazyHash_=Q3(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(ne(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return ne(s>=0,"Unknown leaf type: "+r),ne(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),w4,E4;function Kte(n){w4=n}function Qte(n){E4=n}var ek=class extends Bh{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return s===0?zu(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return st.MIN}maxPost(){return new st(ia,new jh("[PRIORITY-POST]",E4))}makePost(e,t){let r=w4(e);return new st(t,new jh("[PRIORITY-POST]",r))}toString(){return".priority"}},Ht=new ek;var Zte=Math.log(2),tk=class{constructor(e){let t=s=>parseInt(Math.log(s)/Zte,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},hE=function(n,e,t,r){n.sort(e);let i=function(l,u){let h=u-l,p,_;if(h===0)return null;if(h===1)return p=n[l],_=t?t(p):p,new is(_,p.node,is.BLACK,null,null);{let w=parseInt(h/2,10)+l,E=i(l,w),S=i(w+1,u);return p=n[w],_=t?t(p):p,new is(_,p.node,is.BLACK,E,S)}},s=function(l){let u=null,h=null,p=n.length,_=function(E,S){let x=p-E,H=p;p-=E;let Y=i(x+1,H),q=n[x],Q=t?t(q):q;w(new is(Q,q.node,S,null,Y))},w=function(E){u?(u.left=E,u=E):(h=E,u=E)};for(let E=0;E<l.count;++E){let S=l.nextBitIsOne(),x=Math.pow(2,l.count-(E+1));S?_(x,is.BLACK):(_(x,is.BLACK),_(x,is.RED))}return h},o=new tk(n.length),a=s(o);return new ki(r||e,a)};var Ox,Fh={},Hh=class n{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return ne(Fh&&Ht,"ChildrenNode.ts has not been loaded"),Ox=Ox||new n({".priority":Fh},{".priority":Ht}),Ox}get(e){let t=_a(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ki?t:null}hasIndex(e){return mi(this.indexSet_,e.toString())}addIndex(e,t){ne(e!==no,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=t.getIterator(st.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=hE(r,e.getCompare()):a=Fh;let l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;let h=Object.assign({},this.indexes_);return h[l]=a,new n(h,u)}addToIndexes(e,t){let r=bf(this.indexes_,(i,s)=>{let o=_a(this.indexSet_,s);if(ne(o,"Missing index implementation for "+s),i===Fh)if(o.isDefinedOn(e.node)){let a=[],l=t.getIterator(st.Wrap),u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),hE(a,o.getCompare())}else return Fh;else{let a=t.get(e.name),l=i;return a&&(l=l.remove(new st(e.name,a))),l.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=bf(this.indexes_,i=>{if(i===Fh)return i;{let s=t.get(e.name);return s?i.remove(new st(e.name,s)):i}});return new n(r,this.indexSet_)}};var Fm,qe=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&v4(this.priorityNode_),this.children_.isEmpty()&&ne(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Fm||(Fm=new n(new ki(Qk),null,Hh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Fm}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?Fm:r}}getChild(t){let r=nt(t);return r===null?this:this.getImmediateChild(r).getChild(Ft(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(ne(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new st(t,r),s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?Fm:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){let i=nt(t);if(i===null)return r;{ne(nt(t)!==".priority"||wl(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(Ft(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(Ht,(a,l)=>{r[a]=l.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){let a=[];for(let l in r)a[l]=r[l];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+y4(this.getPriority().val())+":"),this.forEachChild(Ht,(r,i)=>{let s=i.hash();s!==""&&(t+=":"+r+":"+s)}),this.lazyHash_=t===""?"":Q3(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new st(t,r));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new st(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new st(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,st.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,st.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===sg?-1:0}withIndex(t){if(t===no||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===no||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Ht),s=r.getIterator(Ht),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===no?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),nk=class extends qe{constructor(){super(new ki(Qk),qe.EMPTY_NODE,Hh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return qe.EMPTY_NODE}isEmpty(){return!1}},sg=new nk;Object.defineProperties(st,{MIN:{value:new st(vl,qe.EMPTY_NODE)},MAX:{value:new st(ia,sg)}});dE.__EMPTY_NODE=qe.EMPTY_NODE;jh.__childrenNodeConstructor=qe;Yte(sg);Qte(sg);var Xte=!0;function tn(n,e=null){if(n===null)return qe.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ne(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new jh(t,tn(e))}if(!(n instanceof Array)&&Xte){let t=[],r=!1;if(Bn(n,(o,a)=>{if(o.substring(0,1)!=="."){let l=tn(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new st(o,l)))}}),t.length===0)return qe.EMPTY_NODE;let s=hE(t,Gte,o=>o.name,Qk);if(r){let o=hE(t,Ht.getCompare());return new qe(s,tn(e),new Hh({".priority":o},{".priority":Ht}))}else return new qe(s,tn(e),Hh.Default)}else{let t=qe.EMPTY_NODE;return Bn(n,(r,i)=>{if(mi(n,r)&&r.substring(0,1)!=="."){let s=tn(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(tn(e))}}Kte(tn);var zm=class extends Bh{constructor(e){super(),this.indexPath_=e,ne(!rt(e)&&nt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return s===0?zu(e.name,t.name):s}makePost(e,t){let r=tn(e),i=qe.EMPTY_NODE.updateChild(this.indexPath_,r);return new st(t,i)}maxPost(){let e=qe.EMPTY_NODE.updateChild(this.indexPath_,sg);return new st(ia,e)}toString(){return qm(this.indexPath_,0).join("/")}};var rk=class extends Bh{compare(e,t){let r=e.node.compareTo(t.node);return r===0?zu(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return st.MIN}maxPost(){return st.MAX}makePost(e,t){let r=tn(e);return new st(t,r)}toString(){return".value"}},Zk=new rk;function C4(n){return{type:"value",snapshotNode:n}}function $h(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Wm(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Gm(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function Jte(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var Ym=class{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){ne(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(Wm(t,a)):ne(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange($h(t,r)):o.trackChildChange(Gm(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Ht,(i,s)=>{t.hasChild(i)||r.trackChildChange(Wm(i,s))}),t.isLeafNode()||t.forEachChild(Ht,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Gm(i,s,o))}else r.trackChildChange($h(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?qe.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var fE=class n{constructor(e){this.indexedFilter_=new Ym(e.getIndex()),this.index_=e.getIndex(),this.startPost_=n.getStartPost_(e),this.endPost_=n.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new st(t,r))||(r=qe.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=qe.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(qe.EMPTY_NODE);let s=this;return t.forEachChild(Ht,(o,a)=>{s.matches(new st(o,a))||(i=i.updateImmediateChild(o,qe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}};var ik=class{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{let r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new fE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new st(t,r))||(r=qe.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=qe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=qe.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=t.withIndex(this.index_),i=i.updatePriority(qe.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,qe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){let p=this.index_.getCompare();o=(_,w)=>p(w,_)}else o=this.index_.getCompare();let a=e;ne(a.numChildren()===this.limit_,"");let l=new st(t,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(t)){let p=a.getImmediateChild(t),_=i.getChildAfterChild(this.index_,u,this.reverse_);for(;_!=null&&(_.name===t||a.hasChild(_.name));)_=i.getChildAfterChild(this.index_,_,this.reverse_);let w=_==null?1:o(_,l);if(h&&!r.isEmpty()&&w>=0)return s?.trackChildChange(Gm(t,r,p)),a.updateImmediateChild(t,r);{s?.trackChildChange(Wm(t,p));let S=a.updateImmediateChild(t,qe.EMPTY_NODE);return _!=null&&this.rangedFilter_.matches(_)?(s?.trackChildChange($h(_.name,_.node)),S.updateImmediateChild(_.name,_.node)):S}}else return r.isEmpty()?e:h&&o(u,l)>=0?(s!=null&&(s.trackChildChange(Wm(u.name,u.node)),s.trackChildChange($h(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(u.name,qe.EMPTY_NODE)):e}};var Km=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ht}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ne(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ne(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:vl}hasEnd(){return this.endSet_}getIndexEndValue(){return ne(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ne(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ia}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ne(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ht}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function ene(n){return n.loadsAllData()?new Ym(n.getIndex()):n.hasLimit()?new ik(n):new fE(n)}function tne(n,e){let t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}function nne(n,e){let t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}function sk(n,e,t){let r=n.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,t!=null?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function rne(n,e,t){let r;return n.index_===no||t?r=sk(n,e,t):r=sk(n,e,ia),r.startAfterSet_=!0,r}function ok(n,e,t){let r=n.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,t!==void 0?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function ine(n,e,t){let r;return n.index_===no||t?r=ok(n,e,t):r=ok(n,e,vl),r.endBeforeSet_=!0,r}function RE(n,e){let t=n.copy();return t.index_=e,t}function R3(n){let e={};if(n.isDefault())return e;let t;if(n.index_===Ht?t="$priority":n.index_===Zk?t="$value":n.index_===no?t="$key":(ne(n.index_ instanceof zm,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=gn(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=gn(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+gn(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=gn(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+gn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function N3(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Ht&&(e.i=n.index_.toString()),e}var ak=class n extends lE{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ig("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(ne(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=n.getListenId_(e,r),a={};this.listens_[o]=a;let l=R3(e._queryParams);this.restRequest_(s+".json",l,(u,h)=>{let p=h;if(u===404&&(p=null,u=null),u===null&&this.onDataUpdate_(s,p,!1,r),_a(this.listens_,o)===a){let _;u?u===401?_="permission_denied":_="rest_error:"+u:_="ok",i(_,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=R3(e._queryParams),r=e._path.toString(),i=new Fn;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+R1(t);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=g_(a.responseText)}catch{mr("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&mr("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var lk=class{constructor(){this.rootNode_=qe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function pE(){return{value:null,children:new Map}}function Kh(n,e,t){if(rt(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=nt(e);n.children.has(r)||n.children.set(r,pE());let i=n.children.get(r);e=Ft(e),Kh(i,e,t)}}function uk(n,e){if(rt(e))return n.value=null,n.children.clear(),!0;if(n.value!==null){if(n.value.isLeafNode())return!1;{let t=n.value;return n.value=null,t.forEachChild(Ht,(r,i)=>{Kh(n,new Et(r),i)}),uk(n,e)}}else if(n.children.size>0){let t=nt(e);return e=Ft(e),n.children.has(t)&&uk(n.children.get(t),e)&&n.children.delete(t),n.children.size===0}else return!0}function ck(n,e,t){n.value!==null?t(e,n.value):sne(n,(r,i)=>{let s=new Et(e.toString()+"/"+r);ck(i,s,t)})}function sne(n,e){n.children.forEach((t,r)=>{e(r,t)})}var dk=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Bn(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var P3=10*1e3,one=30*1e3,ane=5*60*1e3,hk=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new dk(e);let r=P3+(one-P3)*Math.random();Vm(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;Bn(e,(i,s)=>{s>0&&mi(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Vm(this.reportStats_.bind(this),Math.floor(Math.random()*2*ane))}};var to=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(to||{});function Xk(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Jk(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function eR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var fk=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=to.ACK_USER_WRITE,this.source=Xk()}operationForChild(e){if(rt(this.path)){if(this.affectedTree.value!=null)return ne(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new Et(e));return new n(wt(),t,this.revert)}}else return ne(nt(this.path)===e,"operationForChild called for unrelated child."),new n(Ft(this.path),this.affectedTree,this.revert)}};var mE=class n{constructor(e,t){this.source=e,this.path=t,this.type=to.LISTEN_COMPLETE}operationForChild(e){return rt(this.path)?new n(this.source,wt()):new n(this.source,Ft(this.path))}};var qh=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=to.OVERWRITE}operationForChild(e){return rt(this.path)?new n(this.source,wt(),this.snap.getImmediateChild(e)):new n(this.source,Ft(this.path),this.snap)}};var Qm=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=to.MERGE}operationForChild(e){if(rt(this.path)){let t=this.children.subtree(new Et(e));return t.isEmpty()?null:t.value?new qh(this.source,wt(),t.value):new n(this.source,wt(),t)}else return ne(nt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,Ft(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var io=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(rt(e))return this.isFullyInitialized()&&!this.filtered_;let t=nt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var pk=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function lne(n,e,t,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(Jte(o.childName,o.snapshotNode))}),Lm(n,i,"child_removed",e,r,t),Lm(n,i,"child_added",e,r,t),Lm(n,i,"child_moved",s,r,t),Lm(n,i,"child_changed",e,r,t),Lm(n,i,"value",e,r,t),i}function Lm(n,e,t,r,i,s){let o=r.filter(a=>a.type===t);o.sort((a,l)=>cne(n,a,l)),o.forEach(a=>{let l=une(n,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,n.query_))})})}function une(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function cne(n,e,t){if(e.childName==null||t.childName==null)throw Cc("Should only compare child_ events.");let r=new st(e.childName,e.snapshotNode),i=new st(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function NE(n,e){return{eventCache:n,serverCache:e}}function Bm(n,e,t,r){return NE(new io(e,t,r),n.serverCache)}function b4(n,e,t,r){return NE(n.eventCache,new io(e,t,r))}function gE(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function qu(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var Fx,dne=()=>(Fx||(Fx=new ki(ute)),Fx),Ar=class n{constructor(e,t=dne()){this.value=e,this.children=t}static fromObject(e){let t=new n(null);return Bn(e,(r,i)=>{t=t.set(new Et(r),i)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:wt(),value:this.value};if(rt(e))return null;{let r=nt(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(Ft(e),t);return s!=null?{path:Zt(new Et(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(rt(e))return this;{let t=nt(e),r=this.children.get(t);return r!==null?r.subtree(Ft(e)):new n(null)}}set(e,t){if(rt(e))return new n(t,this.children);{let r=nt(e),s=(this.children.get(r)||new n(null)).set(Ft(e),t),o=this.children.insert(r,s);return new n(this.value,o)}}remove(e){if(rt(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=nt(e),r=this.children.get(t);if(r){let i=r.remove(Ft(e)),s;return i.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,i),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(e){if(rt(e))return this.value;{let t=nt(e),r=this.children.get(t);return r?r.get(Ft(e)):null}}setTree(e,t){if(rt(e))return t;{let r=nt(e),s=(this.children.get(r)||new n(null)).setTree(Ft(e),t),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new n(this.value,o)}}fold(e){return this.fold_(wt(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Zt(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,wt(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(rt(e))return null;{let s=nt(e),o=this.children.get(s);return o?o.findOnPath_(Ft(e),Zt(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,wt(),t)}foreachOnPath_(e,t,r){if(rt(e))return this;{this.value&&r(t,this.value);let i=nt(e),s=this.children.get(i);return s?s.foreachOnPath_(Ft(e),Zt(t,i),r):new n(null)}}foreach(e){this.foreach_(wt(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Zt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var ss=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new Ar(null))}};function jm(n,e,t){if(rt(e))return new ss(new Ar(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=Tr(i,e);return s=s.updateChild(o,t),new ss(n.writeTree_.set(i,s))}else{let i=new Ar(t),s=n.writeTree_.setTree(e,i);return new ss(s)}}}function mk(n,e,t){let r=n;return Bn(t,(i,s)=>{r=jm(r,Zt(e,i),s)}),r}function O3(n,e){if(rt(e))return ss.empty();{let t=n.writeTree_.setTree(e,new Ar(null));return new ss(t)}}function gk(n,e){return Wu(n,e)!=null}function Wu(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Tr(t.path,e)):null}function F3(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Ht,(r,i)=>{e.push(new st(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new st(r,i.value))}),e}function _l(n,e){if(rt(e))return n;{let t=Wu(n,e);return t!=null?new ss(new Ar(t)):new ss(n.writeTree_.subtree(e))}}function _k(n){return n.writeTree_.isEmpty()}function zh(n,e){return I4(wt(),n.writeTree_,e)}function I4(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(ne(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):t=I4(Zt(n,i),s,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Zt(n,".priority"),r)),t}}function PE(n,e){return A4(e,n)}function hne(n,e,t,r,i){ne(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=jm(n.visibleWrites,e,t)),n.lastWriteId=r}function fne(n,e,t,r){ne(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=mk(n.visibleWrites,e,t),n.lastWriteId=r}function pne(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function mne(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);ne(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=t&&gne(a,r.path)?i=!1:xi(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return _ne(n),!0;if(r.snap)n.visibleWrites=O3(n.visibleWrites,r.path);else{let a=r.children;Bn(a,l=>{n.visibleWrites=O3(n.visibleWrites,Zt(r.path,l))})}return!0}else return!1}function gne(n,e){if(n.snap)return xi(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&xi(Zt(n.path,t),e))return!0;return!1}function _ne(n){n.visibleWrites=D4(n.allWrites,yne,wt()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function yne(n){return n.visible}function D4(n,e,t){let r=ss.empty();for(let i=0;i<n.length;++i){let s=n[i];if(e(s)){let o=s.path,a;if(s.snap)xi(t,o)?(a=Tr(t,o),r=jm(r,a,s.snap)):xi(o,t)&&(a=Tr(o,t),r=jm(r,wt(),s.snap.getChild(a)));else if(s.children){if(xi(t,o))a=Tr(t,o),r=mk(r,a,s.children);else if(xi(o,t))if(a=Tr(o,t),rt(a))r=mk(r,wt(),s.children);else{let l=_a(s.children,nt(a));if(l){let u=l.getChild(Ft(a));r=jm(r,wt(),u)}}}else throw Cc("WriteRecord should have .snap or .children")}}return r}function S4(n,e,t,r,i){if(!r&&!i){let s=Wu(n.visibleWrites,e);if(s!=null)return s;{let o=_l(n.visibleWrites,e);if(_k(o))return t;if(t==null&&!gk(o,wt()))return null;{let a=t||qe.EMPTY_NODE;return zh(o,a)}}}else{let s=_l(n.visibleWrites,e);if(!i&&_k(s))return t;if(!i&&t==null&&!gk(s,wt()))return null;{let o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(xi(u.path,e)||xi(e,u.path))},a=D4(n.allWrites,o,e),l=t||qe.EMPTY_NODE;return zh(a,l)}}}function vne(n,e,t){let r=qe.EMPTY_NODE,i=Wu(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ht,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){let s=_l(n.visibleWrites,e);return t.forEachChild(Ht,(o,a)=>{let l=zh(_l(s,new Et(o)),a);r=r.updateImmediateChild(o,l)}),F3(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=_l(n.visibleWrites,e);return F3(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function wne(n,e,t,r,i){ne(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=Zt(e,t);if(gk(n.visibleWrites,s))return null;{let o=_l(n.visibleWrites,s);return _k(o)?i.getChild(t):zh(o,i.getChild(t))}}function Ene(n,e,t,r){let i=Zt(e,t),s=Wu(n.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(t)){let o=_l(n.visibleWrites,i);return zh(o,r.getNode().getImmediateChild(t))}else return null}function Cne(n,e){return Wu(n.visibleWrites,e)}function bne(n,e,t,r,i,s,o){let a,l=_l(n.visibleWrites,e),u=Wu(l,wt());if(u!=null)a=u;else if(t!=null)a=zh(l,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let h=[],p=o.getCompare(),_=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),w=_.getNext();for(;w&&h.length<i;)p(w,r)!==0&&h.push(w),w=_.getNext();return h}else return[]}function Ine(){return{visibleWrites:ss.empty(),allWrites:[],lastWriteId:-1}}function _E(n,e,t,r){return S4(n.writeTree,n.treePath,e,t,r)}function tR(n,e){return vne(n.writeTree,n.treePath,e)}function L3(n,e,t,r){return wne(n.writeTree,n.treePath,e,t,r)}function yE(n,e){return Cne(n.writeTree,Zt(n.treePath,e))}function Dne(n,e,t,r,i,s){return bne(n.writeTree,n.treePath,e,t,r,i,s)}function nR(n,e,t){return Ene(n.writeTree,n.treePath,e,t)}function T4(n,e){return A4(Zt(n.treePath,e),n.writeTree)}function A4(n,e){return{treePath:n,writeTree:e}}var yk=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;ne(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ne(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(r,Gm(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(r,Wm(r,i.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(r,$h(r,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(r,Gm(r,e.snapshotNode,i.oldSnap));else throw Cc("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var vk=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},M4=new vk,Zm=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new io(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return nR(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:qu(this.viewCache_),s=Dne(this.writes_,i,t,1,r,e);return s.length===0?null:s[0]}};function Sne(n){return{filter:n}}function Tne(n,e){ne(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ne(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function Ane(n,e,t,r,i){let s=new yk,o,a;if(t.type===to.OVERWRITE){let u=t;u.source.fromUser?o=wk(n,e,u.path,u.snap,r,i,s):(ne(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!rt(u.path),o=vE(n,e,u.path,u.snap,r,i,a,s))}else if(t.type===to.MERGE){let u=t;u.source.fromUser?o=xne(n,e,u.path,u.children,r,i,s):(ne(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=Ek(n,e,u.path,u.children,r,i,a,s))}else if(t.type===to.ACK_USER_WRITE){let u=t;u.revert?o=Nne(n,e,u.path,r,i,s):o=kne(n,e,u.path,u.affectedTree,r,i,s)}else if(t.type===to.LISTEN_COMPLETE)o=Rne(n,e,t.path,r,s);else throw Cc("Unknown operation type: "+t.type);let l=s.getChanges();return Mne(e,o,l),{viewCache:o,changes:l}}function Mne(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=gE(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(C4(gE(e)))}}function x4(n,e,t,r,i,s){let o=e.eventCache;if(yE(r,t)!=null)return e;{let a,l;if(rt(t))if(ne(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let u=qu(e),h=u instanceof qe?u:qe.EMPTY_NODE,p=tR(r,h);a=n.filter.updateFullNode(e.eventCache.getNode(),p,s)}else{let u=_E(r,qu(e));a=n.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{let u=nt(t);if(u===".priority"){ne(wl(t)===1,"Can't have a priority with additional path components");let h=o.getNode();l=e.serverCache.getNode();let p=L3(r,t,h,l);p!=null?a=n.filter.updatePriority(h,p):a=o.getNode()}else{let h=Ft(t),p;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();let _=L3(r,t,o.getNode(),l);_!=null?p=o.getNode().getImmediateChild(u).updateChild(h,_):p=o.getNode().getImmediateChild(u)}else p=nR(r,u,e.serverCache);p!=null?a=n.filter.updateChild(o.getNode(),u,p,h,i,s):a=o.getNode()}}return Bm(e,a,o.isFullyInitialized()||rt(t),n.filter.filtersNodes())}}function vE(n,e,t,r,i,s,o,a){let l=e.serverCache,u,h=o?n.filter:n.filter.getIndexedFilter();if(rt(t))u=h.updateFullNode(l.getNode(),r,null);else if(h.filtersNodes()&&!l.isFiltered()){let w=l.getNode().updateChild(t,r);u=h.updateFullNode(l.getNode(),w,null)}else{let w=nt(t);if(!l.isCompleteForPath(t)&&wl(t)>1)return e;let E=Ft(t),x=l.getNode().getImmediateChild(w).updateChild(E,r);w===".priority"?u=h.updatePriority(l.getNode(),x):u=h.updateChild(l.getNode(),w,x,E,M4,null)}let p=b4(e,u,l.isFullyInitialized()||rt(t),h.filtersNodes()),_=new Zm(i,p,s);return x4(n,p,t,i,_,a)}function wk(n,e,t,r,i,s,o){let a=e.eventCache,l,u,h=new Zm(i,e,s);if(rt(t))u=n.filter.updateFullNode(e.eventCache.getNode(),r,o),l=Bm(e,u,!0,n.filter.filtersNodes());else{let p=nt(t);if(p===".priority")u=n.filter.updatePriority(e.eventCache.getNode(),r),l=Bm(e,u,a.isFullyInitialized(),a.isFiltered());else{let _=Ft(t),w=a.getNode().getImmediateChild(p),E;if(rt(_))E=r;else{let S=h.getCompleteChild(p);S!=null?Gk(_)===".priority"&&S.getChild(g4(_)).isEmpty()?E=S:E=S.updateChild(_,r):E=qe.EMPTY_NODE}if(w.equals(E))l=e;else{let S=n.filter.updateChild(a.getNode(),p,E,_,h,o);l=Bm(e,S,a.isFullyInitialized(),n.filter.filtersNodes())}}}return l}function V3(n,e){return n.eventCache.isCompleteForChild(e)}function xne(n,e,t,r,i,s,o){let a=e;return r.foreach((l,u)=>{let h=Zt(t,l);V3(e,nt(h))&&(a=wk(n,a,h,u,i,s,o))}),r.foreach((l,u)=>{let h=Zt(t,l);V3(e,nt(h))||(a=wk(n,a,h,u,i,s,o))}),a}function U3(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Ek(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;rt(t)?u=r:u=new Ar(null).setTree(t,r);let h=e.serverCache.getNode();return u.children.inorderTraversal((p,_)=>{if(h.hasChild(p)){let w=e.serverCache.getNode().getImmediateChild(p),E=U3(n,w,_);l=vE(n,l,new Et(p),E,i,s,o,a)}}),u.children.inorderTraversal((p,_)=>{let w=!e.serverCache.isCompleteForChild(p)&&_.value===null;if(!h.hasChild(p)&&!w){let E=e.serverCache.getNode().getImmediateChild(p),S=U3(n,E,_);l=vE(n,l,new Et(p),S,i,s,o,a)}}),l}function kne(n,e,t,r,i,s,o){if(yE(i,t)!=null)return e;let a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(rt(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return vE(n,e,t,l.getNode().getChild(t),i,s,a,o);if(rt(t)){let u=new Ar(null);return l.getNode().forEachChild(no,(h,p)=>{u=u.set(new Et(h),p)}),Ek(n,e,t,u,i,s,a,o)}else return e}else{let u=new Ar(null);return r.foreach((h,p)=>{let _=Zt(t,h);l.isCompleteForPath(_)&&(u=u.set(h,l.getNode().getChild(_)))}),Ek(n,e,t,u,i,s,a,o)}}function Rne(n,e,t,r,i){let s=e.serverCache,o=b4(e,s.getNode(),s.isFullyInitialized()||rt(t),s.isFiltered());return x4(n,o,t,r,M4,i)}function Nne(n,e,t,r,i,s){let o;if(yE(r,t)!=null)return e;{let a=new Zm(r,e,i),l=e.eventCache.getNode(),u;if(rt(t)||nt(t)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=_E(r,qu(e));else{let p=e.serverCache.getNode();ne(p instanceof qe,"serverChildren would be complete if leaf node"),h=tR(r,p)}h=h,u=n.filter.updateFullNode(l,h,s)}else{let h=nt(t),p=nR(r,h,e.serverCache);p==null&&e.serverCache.isCompleteForChild(h)&&(p=l.getImmediateChild(h)),p!=null?u=n.filter.updateChild(l,h,p,Ft(t),a,s):e.eventCache.getNode().hasChild(h)?u=n.filter.updateChild(l,h,qe.EMPTY_NODE,Ft(t),a,s):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=_E(r,qu(e)),o.isLeafNode()&&(u=n.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||yE(r,wt())!=null,Bm(e,u,o,n.filter.filtersNodes())}}var Ck=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Ym(r.getIndex()),s=ene(r);this.processor_=Sne(s);let o=t.serverCache,a=t.eventCache,l=i.updateFullNode(qe.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(qe.EMPTY_NODE,a.getNode(),null),h=new io(l,o.isFullyInitialized(),i.filtersNodes()),p=new io(u,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=NE(p,h),this.eventGenerator_=new pk(this.query_)}get query(){return this.query_}};function Pne(n){return n.viewCache_.serverCache.getNode()}function One(n){return gE(n.viewCache_)}function Fne(n,e){let t=qu(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!rt(e)&&!t.getImmediateChild(nt(e)).isEmpty())?t.getChild(e):null}function B3(n){return n.eventRegistrations_.length===0}function Lne(n,e){n.eventRegistrations_.push(e)}function j3(n,e,t){let r=[];if(t){ne(e==null,"A cancel should cancel all event registrations.");let i=n.query._path;n.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){let o=n.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function H3(n,e,t,r){e.type===to.MERGE&&e.source.queryId!==null&&(ne(qu(n.viewCache_),"We should always have a full cache before handling merges"),ne(gE(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,s=Ane(n.processor_,i,e,t,r);return Tne(n.processor_,s.viewCache),ne(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,k4(n,s.changes,s.viewCache.eventCache.getNode(),null)}function Vne(n,e){let t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Ht,(s,o)=>{r.push($h(s,o))}),t.isFullyInitialized()&&r.push(C4(t.getNode())),k4(n,r,t.getNode(),e)}function k4(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return lne(n.eventGenerator_,e,t,i)}var wE,EE=class{constructor(){this.views=new Map}};function Une(n){ne(!wE,"__referenceConstructor has already been defined"),wE=n}function Bne(){return ne(wE,"Reference.ts has not been loaded"),wE}function jne(n){return n.views.size===0}function rR(n,e,t,r){let i=e.source.queryId;if(i!==null){let s=n.views.get(i);return ne(s!=null,"SyncTree gave us an op for an invalid query."),H3(s,e,t,r)}else{let s=[];for(let o of n.views.values())s=s.concat(H3(o,e,t,r));return s}}function R4(n,e,t,r,i){let s=e._queryIdentifier,o=n.views.get(s);if(!o){let a=_E(t,i?r:null),l=!1;a?l=!0:r instanceof qe?(a=tR(t,r),l=!1):(a=qe.EMPTY_NODE,l=!1);let u=NE(new io(a,l,!1),new io(r,i,!1));return new Ck(e,u)}return o}function Hne(n,e,t,r,i,s){let o=R4(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),Lne(o,t),Vne(o,t)}function $ne(n,e,t,r){let i=e._queryIdentifier,s=[],o=[],a=El(n);if(i==="default")for(let[l,u]of n.views.entries())o=o.concat(j3(u,t,r)),B3(u)&&(n.views.delete(l),u.query._queryParams.loadsAllData()||s.push(u.query));else{let l=n.views.get(i);l&&(o=o.concat(j3(l,t,r)),B3(l)&&(n.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!El(n)&&s.push(new(Bne())(e._repo,e._path)),{removed:s,events:o}}function N4(n){let e=[];for(let t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function yl(n,e){let t=null;for(let r of n.views.values())t=t||Fne(r,e);return t}function P4(n,e){if(e._queryParams.loadsAllData())return OE(n);{let r=e._queryIdentifier;return n.views.get(r)}}function O4(n,e){return P4(n,e)!=null}function El(n){return OE(n)!=null}function OE(n){for(let e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var CE;function qne(n){ne(!CE,"__referenceConstructor has already been defined"),CE=n}function zne(){return ne(CE,"Reference.ts has not been loaded"),CE}var Wne=1,bE=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ar(null),this.pendingWriteTree_=Ine(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function iR(n,e,t,r,i){return hne(n.pendingWriteTree_,e,t,r,i),i?Qh(n,new qh(Xk(),e,t)):[]}function Gne(n,e,t,r){fne(n.pendingWriteTree_,e,t,r);let i=Ar.fromObject(t);return Qh(n,new Qm(Xk(),e,i))}function gl(n,e,t=!1){let r=pne(n.pendingWriteTree_,e);if(mne(n.pendingWriteTree_,e)){let s=new Ar(null);return r.snap!=null?s=s.set(wt(),!0):Bn(r.children,o=>{s=s.set(new Et(o),!0)}),Qh(n,new fk(r.path,s,t))}else return[]}function og(n,e,t){return Qh(n,new qh(Jk(),e,t))}function Yne(n,e,t){let r=Ar.fromObject(t);return Qh(n,new Qm(Jk(),e,r))}function Kne(n,e){return Qh(n,new mE(Jk(),e))}function Qne(n,e,t){let r=sR(n,t);if(r){let i=oR(r),s=i.path,o=i.queryId,a=Tr(s,e),l=new mE(eR(o),a);return aR(n,s,l)}else return[]}function IE(n,e,t,r,i=!1){let s=e._path,o=n.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||O4(o,e))){let l=$ne(o,e,t,r);jne(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));let u=l.removed;if(a=l.events,!i){let h=u.findIndex(_=>_._queryParams.loadsAllData())!==-1,p=n.syncPointTree_.findOnPath(s,(_,w)=>El(w));if(h&&!p){let _=n.syncPointTree_.subtree(s);if(!_.isEmpty()){let w=Jne(_);for(let E=0;E<w.length;++E){let S=w[E],x=S.query,H=U4(n,S);n.listenProvider_.startListening(Hm(x),Xm(n,x),H.hashFn,H.onComplete)}}}!p&&u.length>0&&!r&&(h?n.listenProvider_.stopListening(Hm(e),null):u.forEach(_=>{let w=n.queryToTagMap.get(LE(_));n.listenProvider_.stopListening(Hm(_),w)}))}ere(n,u)}return a}function F4(n,e,t,r){let i=sR(n,r);if(i!=null){let s=oR(i),o=s.path,a=s.queryId,l=Tr(o,e),u=new qh(eR(a),l,t);return aR(n,o,u)}else return[]}function Zne(n,e,t,r){let i=sR(n,r);if(i){let s=oR(i),o=s.path,a=s.queryId,l=Tr(o,e),u=Ar.fromObject(t),h=new Qm(eR(a),l,u);return aR(n,o,h)}else return[]}function bk(n,e,t,r=!1){let i=e._path,s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(_,w)=>{let E=Tr(_,i);s=s||yl(w,E),o=o||El(w)});let a=n.syncPointTree_.get(i);a?(o=o||El(a),s=s||yl(a,wt())):(a=new EE,n.syncPointTree_=n.syncPointTree_.set(i,a));let l;s!=null?l=!0:(l=!1,s=qe.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((w,E)=>{let S=yl(E,wt());S&&(s=s.updateImmediateChild(w,S))}));let u=O4(a,e);if(!u&&!e._queryParams.loadsAllData()){let _=LE(e);ne(!n.queryToTagMap.has(_),"View does not exist, but we have a tag");let w=tre();n.queryToTagMap.set(_,w),n.tagToQueryMap.set(w,_)}let h=PE(n.pendingWriteTree_,i),p=Hne(a,e,t,h,s,l);if(!u&&!o&&!r){let _=P4(a,e);p=p.concat(nre(n,e,_))}return p}function FE(n,e,t){let i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{let l=Tr(o,e),u=yl(a,l);if(u)return u});return S4(i,e,s,t,!0)}function Xne(n,e){let t=e._path,r=null;n.syncPointTree_.foreachOnPath(t,(u,h)=>{let p=Tr(u,t);r=r||yl(h,p)});let i=n.syncPointTree_.get(t);i?r=r||yl(i,wt()):(i=new EE,n.syncPointTree_=n.syncPointTree_.set(t,i));let s=r!=null,o=s?new io(r,!0,!1):null,a=PE(n.pendingWriteTree_,e._path),l=R4(i,e,a,s?o.getNode():qe.EMPTY_NODE,s);return One(l)}function Qh(n,e){return L4(e,n.syncPointTree_,null,PE(n.pendingWriteTree_,wt()))}function L4(n,e,t,r){if(rt(n.path))return V4(n,e,t,r);{let i=e.get(wt());t==null&&i!=null&&(t=yl(i,wt()));let s=[],o=nt(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){let u=t?t.getImmediateChild(o):null,h=T4(r,o);s=s.concat(L4(a,l,u,h))}return i&&(s=s.concat(rR(i,n,r,t))),s}}function V4(n,e,t,r){let i=e.get(wt());t==null&&i!=null&&(t=yl(i,wt()));let s=[];return e.children.inorderTraversal((o,a)=>{let l=t?t.getImmediateChild(o):null,u=T4(r,o),h=n.operationForChild(o);h&&(s=s.concat(V4(h,a,l,u)))}),i&&(s=s.concat(rR(i,n,r,t))),s}function U4(n,e){let t=e.query,r=Xm(n,t);return{hashFn:()=>(Pne(e)||qe.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?Qne(n,t._path,r):Kne(n,t._path);{let s=hte(i,t);return IE(n,t,null,s)}}}}function Xm(n,e){let t=LE(e);return n.queryToTagMap.get(t)}function LE(n){return n._path.toString()+"$"+n._queryIdentifier}function sR(n,e){return n.tagToQueryMap.get(e)}function oR(n){let e=n.indexOf("$");return ne(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Et(n.substr(0,e))}}function aR(n,e,t){let r=n.syncPointTree_.get(e);ne(r,"Missing sync point for query tag that we're tracking");let i=PE(n.pendingWriteTree_,e);return rR(r,t,i,null)}function Jne(n){return n.fold((e,t,r)=>{if(t&&El(t))return[OE(t)];{let i=[];return t&&(i=N4(t)),Bn(r,(s,o)=>{i=i.concat(o)}),i}})}function Hm(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(zne())(n._repo,n._path):n}function ere(n,e){for(let t=0;t<e.length;++t){let r=e[t];if(!r._queryParams.loadsAllData()){let i=LE(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}function tre(){return Wne++}function nre(n,e,t){let r=e._path,i=Xm(n,e),s=U4(n,t),o=n.listenProvider_.startListening(Hm(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)ne(!El(a.value),"If we're adding a query, it shouldn't be shadowed");else{let l=a.fold((u,h,p)=>{if(!rt(u)&&h&&El(h))return[OE(h).query];{let _=[];return h&&(_=_.concat(N4(h).map(w=>w.query))),Bn(p,(w,E)=>{_=_.concat(E)}),_}});for(let u=0;u<l.length;++u){let h=l[u];n.listenProvider_.stopListening(Hm(h),Xm(n,h))}}return o}var Ik=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},Dk=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=Zt(this.path_,e);return new n(this.syncTree_,t)}node(){return FE(this.syncTree_,this.path_)}},rre=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},$3=function(n,e,t){if(!n||typeof n!="object")return n;if(ne(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return ire(n[".sv"],e,t);if(typeof n[".sv"]=="object")return sre(n[".sv"],e);ne(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},ire=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ne(!1,"Unexpected server value: "+n)}},sre=function(n,e,t){n.hasOwnProperty("increment")||ne(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&ne(!1,"Unexpected increment value: "+r);let i=e.node();if(ne(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},B4=function(n,e,t,r){return uR(e,new Dk(t,n),r)},lR=function(n,e,t){return uR(n,new Ik(e),t)};function uR(n,e,t){let r=n.getPriority().val(),i=$3(r,e.getImmediateChild(".priority"),t),s;if(n.isLeafNode()){let o=n,a=$3(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new jh(a,tn(i)):n}else{let o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new jh(i))),o.forEachChild(Ht,(a,l)=>{let u=uR(l,e.getImmediateChild(a),t);u!==l&&(s=s.updateImmediateChild(a,u))}),s}}var Jm=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function VE(n,e){let t=e instanceof Et?e:new Et(e),r=n,i=nt(t);for(;i!==null;){let s=_a(r.node.children,i)||{children:{},childCount:0};r=new Jm(i,r,s),t=Ft(t),i=nt(t)}return r}function Gu(n){return n.node.value}function cR(n,e){n.node.value=e,Sk(n)}function j4(n){return n.node.childCount>0}function ore(n){return Gu(n)===void 0&&!j4(n)}function UE(n,e){Bn(n.node.children,(t,r)=>{e(new Jm(t,n,r))})}function H4(n,e,t,r){t&&!r&&e(n),UE(n,i=>{H4(i,e,!0,r)}),t&&r&&e(n)}function are(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ag(n){return new Et(n.parent===null?n.name:ag(n.parent)+"/"+n.name)}function Sk(n){n.parent!==null&&lre(n.parent,n.name,n)}function lre(n,e,t){let r=ore(t),i=mi(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Sk(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Sk(n))}var ure=/[\[\].#$\/\u0000-\u001F\u007F]/,cre=/[\[\].#$\u0000-\u001F\u007F]/,Lx=10*1024*1024,BE=function(n){return typeof n=="string"&&n.length!==0&&!ure.test(n)},$4=function(n){return typeof n=="string"&&n.length!==0&&!cre.test(n)},dre=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),$4(n)},eg=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!kE(n)||n&&typeof n=="object"&&mi(n,".sv")},so=function(n,e,t,r){r&&e===void 0||lg(Rr(n,"value"),e,t)},lg=function(n,e,t){let r=t instanceof Et?new Qx(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+ju(r));if(typeof e=="function")throw new Error(n+"contains a function "+ju(r)+" with contents = "+e.toString());if(kE(e))throw new Error(n+"contains "+e.toString()+" "+ju(r));if(typeof e=="string"&&e.length>Lx/3&&If(e)>Lx)throw new Error(n+"contains a string greater than "+Lx+" utf8 bytes "+ju(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Bn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!BE(o)))throw new Error(n+" contains an invalid key ("+o+") "+ju(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);jte(r,o),lg(n,a,r),Hte(r)}),i&&s)throw new Error(n+' contains ".value" child '+ju(r)+" in addition to actual children.")}},hre=function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];let s=qm(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!BE(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(Bte);let i=null;for(t=0;t<e.length;t++){if(r=e[t],i!==null&&xi(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},q4=function(n,e,t,r){if(r&&e===void 0)return;let i=Rr(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");let s=[];Bn(e,(o,a)=>{let l=new Et(o);if(lg(i,a,Zt(t,l)),Gk(l)===".priority"&&!eg(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),hre(i,s)},dR=function(n,e,t){if(!(t&&e===void 0)){if(kE(e))throw new Error(Rr(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!eg(e))throw new Error(Rr(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ug=function(n,e,t,r){if(!(r&&t===void 0)&&!BE(t))throw new Error(Rr(n,e)+'was an invalid key = "'+t+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Zh=function(n,e,t,r){if(!(r&&t===void 0)&&!$4(t))throw new Error(Rr(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},fre=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Zh(n,e,t,r)},ri=function(n,e){if(nt(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},z4=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!BE(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!dre(t))throw new Error(Rr(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Tk=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function jE(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();t!==null&&!Yk(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function W4(n,e,t){jE(n,t),G4(n,r=>Yk(r,e))}function ii(n,e,t){jE(n,t),G4(n,r=>xi(r,e)||xi(e,r))}function G4(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let s=i.path;e(s)?(pre(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function pre(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();$u&&Un("event: "+t.toString()),Yh(r)}}}var Y4="repo_interrupt",mre=25,Ak=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Tk,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=pE(),this.transactionQueueTree_=new Jm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function gre(n,e,t){if(n.stats_=Wk(n.repoInfo_),n.forceRestClient_||gte())n.server_=new ak(n.repoInfo_,(r,i,s,o)=>{q3(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>z3(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{gn(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Kk(n.repoInfo_,e,(r,i,s,o)=>{q3(n,r,i,s,o)},r=>{z3(n,r)},r=>{_re(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=yte(n.repoInfo_,()=>new hk(n.stats_,n.server_)),n.infoData_=new lk,n.infoSyncTree_=new bE({startListening:(r,i,s,o)=>{let a=[],l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=og(n.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),hR(n,"connected",!1),n.serverSyncTree_=new bE({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,l)=>{let u=o(a,l);ii(n.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function K4(n){let t=n.infoData_.getNode(new Et(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function cg(n){return rre({timestamp:K4(n)})}function q3(n,e,t,r,i){n.dataUpdateCount++;let s=new Et(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){let l=bf(t,u=>tn(u));o=Zne(n.serverSyncTree_,s,l,i)}else{let l=tn(t);o=F4(n.serverSyncTree_,s,l,i)}else if(r){let l=bf(t,u=>tn(u));o=Yne(n.serverSyncTree_,s,l)}else{let l=tn(t);o=og(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Wh(n,s)),ii(n.eventQueue_,a,o)}function z3(n,e){hR(n,"connected",e),e===!1&&wre(n)}function _re(n,e){Bn(e,(t,r)=>{hR(n,t,r)})}function hR(n,e,t){let r=new Et("/.info/"+e),i=tn(t);n.infoData_.updateSnapshot(r,i);let s=og(n.infoSyncTree_,r,i);ii(n.eventQueue_,r,s)}function HE(n){return n.nextWriteId_++}function yre(n,e,t){let r=Xne(n.serverSyncTree_,e);return r!=null?Promise.resolve(r):n.server_.get(e).then(i=>{let s=tn(i).withIndex(e._queryParams.getIndex());bk(n.serverSyncTree_,e,t,!0);let o;if(e._queryParams.loadsAllData())o=og(n.serverSyncTree_,e._path,s);else{let a=Xm(n.serverSyncTree_,e);o=F4(n.serverSyncTree_,e._path,s,a)}return ii(n.eventQueue_,e._path,o),IE(n.serverSyncTree_,e,t,null,!0),s},i=>(Xh(n,"get for query "+gn(e)+" failed: "+i),Promise.reject(new Error(i))))}function fR(n,e,t,r,i){Xh(n,"set",{path:e.toString(),value:t,priority:r});let s=cg(n),o=tn(t,r),a=FE(n.serverSyncTree_,e),l=lR(o,a,s),u=HE(n),h=iR(n.serverSyncTree_,e,l,u,!0);jE(n.eventQueue_,h),n.server_.put(e.toString(),o.val(!0),(_,w)=>{let E=_==="ok";E||mr("set at "+e+" failed: "+_);let S=gl(n.serverSyncTree_,u,!E);ii(n.eventQueue_,e,S),Cl(n,i,_,w)});let p=mR(n,e);Wh(n,p),ii(n.eventQueue_,p,[])}function vre(n,e,t,r){Xh(n,"update",{path:e.toString(),value:t});let i=!0,s=cg(n),o={};if(Bn(t,(a,l)=>{i=!1,o[a]=B4(Zt(e,a),tn(l),n.serverSyncTree_,s)}),i)Un("update() called with empty data.  Don't do anything."),Cl(n,r,"ok",void 0);else{let a=HE(n),l=Gne(n.serverSyncTree_,e,o,a);jE(n.eventQueue_,l),n.server_.merge(e.toString(),t,(u,h)=>{let p=u==="ok";p||mr("update at "+e+" failed: "+u);let _=gl(n.serverSyncTree_,a,!p),w=_.length>0?Wh(n,e):e;ii(n.eventQueue_,w,_),Cl(n,r,u,h)}),Bn(t,u=>{let h=mR(n,Zt(e,u));Wh(n,h)}),ii(n.eventQueue_,e,[])}}function wre(n){Xh(n,"onDisconnectEvents");let e=cg(n),t=pE();ck(n.onDisconnect_,wt(),(i,s)=>{let o=B4(i,s,n.serverSyncTree_,e);Kh(t,i,o)});let r=[];ck(t,wt(),(i,s)=>{r=r.concat(og(n.serverSyncTree_,i,s));let o=mR(n,i);Wh(n,o)}),n.onDisconnect_=pE(),ii(n.eventQueue_,wt(),r)}function Ere(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&uk(n.onDisconnect_,e),Cl(n,t,r,i)})}function W3(n,e,t,r){let i=tn(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{s==="ok"&&Kh(n.onDisconnect_,e,i),Cl(n,r,s,o)})}function Cre(n,e,t,r,i){let s=tn(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&Kh(n.onDisconnect_,e,s),Cl(n,i,o,a)})}function bre(n,e,t,r){if(__(t)){Un("onDisconnect().update() called with empty data.  Don't do anything."),Cl(n,r,"ok",void 0);return}n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{i==="ok"&&Bn(t,(o,a)=>{let l=tn(a);Kh(n.onDisconnect_,Zt(e,o),l)}),Cl(n,r,i,s)})}function Ire(n,e,t){let r;nt(e._path)===".info"?r=bk(n.infoSyncTree_,e,t):r=bk(n.serverSyncTree_,e,t),W4(n.eventQueue_,e._path,r)}function Mk(n,e,t){let r;nt(e._path)===".info"?r=IE(n.infoSyncTree_,e,t):r=IE(n.serverSyncTree_,e,t),W4(n.eventQueue_,e._path,r)}function Q4(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Y4)}function Dre(n){n.persistentConnection_&&n.persistentConnection_.resume(Y4)}function Xh(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Un(t,...e)}function Cl(n,e,t,r){e&&Yh(()=>{if(t==="ok")e(null);else{let i=(t||"error").toUpperCase(),s=i;r&&(s+=": "+r);let o=new Error(s);o.code=i,e(o)}})}function Sre(n,e,t,r,i,s){Xh(n,"transaction on "+e);let o={path:e,update:t,onComplete:r,status:null,order:K3(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=pR(n,e,void 0);o.currentInputSnapshot=a;let l=o.update(a.val());if(l===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{lg("transaction failed: Data returned ",l,o.path),o.status=0;let u=VE(n.transactionQueueTree_,e),h=Gu(u)||[];h.push(o),cR(u,h);let p;typeof l=="object"&&l!==null&&mi(l,".priority")?(p=_a(l,".priority"),ne(eg(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(FE(n.serverSyncTree_,e)||qe.EMPTY_NODE).getPriority().val();let _=cg(n),w=tn(l,p),E=lR(w,a,_);o.currentOutputSnapshotRaw=w,o.currentOutputSnapshotResolved=E,o.currentWriteId=HE(n);let S=iR(n.serverSyncTree_,e,E,o.currentWriteId,o.applyLocally);ii(n.eventQueue_,e,S),$E(n,n.transactionQueueTree_)}}function pR(n,e,t){return FE(n.serverSyncTree_,e,t)||qe.EMPTY_NODE}function $E(n,e=n.transactionQueueTree_){if(e||qE(n,e),Gu(e)){let t=X4(n,e);ne(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&Tre(n,ag(e),t)}else j4(e)&&UE(e,t=>{$E(n,t)})}function Tre(n,e,t){let r=t.map(u=>u.currentWriteId),i=pR(n,e,r),s=i,o=i.hash();for(let u=0;u<t.length;u++){let h=t[u];ne(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;let p=Tr(e,h.path);s=s.updateChild(p,h.currentOutputSnapshotRaw)}let a=s.val(!0),l=e;n.server_.put(l.toString(),a,u=>{Xh(n,"transaction put response",{path:l.toString(),status:u});let h=[];if(u==="ok"){let p=[];for(let _=0;_<t.length;_++)t[_].status=2,h=h.concat(gl(n.serverSyncTree_,t[_].currentWriteId)),t[_].onComplete&&p.push(()=>t[_].onComplete(null,!0,t[_].currentOutputSnapshotResolved)),t[_].unwatcher();qE(n,VE(n.transactionQueueTree_,e)),$E(n,n.transactionQueueTree_),ii(n.eventQueue_,e,h);for(let _=0;_<p.length;_++)Yh(p[_])}else{if(u==="datastale")for(let p=0;p<t.length;p++)t[p].status===3?t[p].status=4:t[p].status=0;else{mr("transaction at "+l.toString()+" failed: "+u);for(let p=0;p<t.length;p++)t[p].status=4,t[p].abortReason=u}Wh(n,e)}},o)}function Wh(n,e){let t=Z4(n,e),r=ag(t),i=X4(n,t);return Are(n,i,r),r}function Are(n,e,t){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let l=e[a],u=Tr(t,l.path),h=!1,p;if(ne(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,p=l.abortReason,i=i.concat(gl(n.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=mre)h=!0,p="maxretry",i=i.concat(gl(n.serverSyncTree_,l.currentWriteId,!0));else{let _=pR(n,l.path,o);l.currentInputSnapshot=_;let w=e[a].update(_.val());if(w!==void 0){lg("transaction failed: Data returned ",w,l.path);let E=tn(w);typeof w=="object"&&w!=null&&mi(w,".priority")||(E=E.updatePriority(_.getPriority()));let x=l.currentWriteId,H=cg(n),Y=lR(E,_,H);l.currentOutputSnapshotRaw=E,l.currentOutputSnapshotResolved=Y,l.currentWriteId=HE(n),o.splice(o.indexOf(x),1),i=i.concat(iR(n.serverSyncTree_,l.path,Y,l.currentWriteId,l.applyLocally)),i=i.concat(gl(n.serverSyncTree_,x,!0))}else h=!0,p="nodata",i=i.concat(gl(n.serverSyncTree_,l.currentWriteId,!0))}ii(n.eventQueue_,t,i),i=[],h&&(e[a].status=2,function(_){setTimeout(_,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(p==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(p),!1,null))))}qE(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Yh(r[a]);$E(n,n.transactionQueueTree_)}function Z4(n,e){let t,r=n.transactionQueueTree_;for(t=nt(e);t!==null&&Gu(r)===void 0;)r=VE(r,t),e=Ft(e),t=nt(e);return r}function X4(n,e){let t=[];return J4(n,e,t),t.sort((r,i)=>r.order-i.order),t}function J4(n,e,t){let r=Gu(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);UE(e,i=>{J4(n,i,t)})}function qE(n,e){let t=Gu(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,cR(e,t.length>0?t:void 0)}UE(e,r=>{qE(n,r)})}function mR(n,e){let t=ag(Z4(n,e)),r=VE(n.transactionQueueTree_,e);return are(r,i=>{Vx(n,i)}),Vx(n,r),H4(r,i=>{Vx(n,i)}),t}function Vx(n,e){let t=Gu(e);if(t){let r=[],i=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(ne(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(ne(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(gl(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?cR(e,void 0):t.length=s+1,ii(n.eventQueue_,ag(e),i);for(let o=0;o<r.length;o++)Yh(r[o])}}function Mre(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function xre(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):mr(`Invalid query segment '${t}' in query '${n}'`)}return e}var xk=function(n,e){let t=kre(n),r=t.namespace;t.domain==="firebase.com"&&ro(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&ro("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||ate();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new oE(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new Et(t.pathString)}},kre=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",l=443;if(typeof n=="string"){let u=n.indexOf("//");u>=0&&(a=n.substring(0,u-1),n=n.substring(u+2));let h=n.indexOf("/");h===-1&&(h=n.length);let p=n.indexOf("?");p===-1&&(p=n.length),e=n.substring(0,Math.min(h,p)),h<p&&(i=Mre(n.substring(h,p)));let _=xre(n.substring(Math.min(n.length,p)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;let w=e.slice(0,u);if(w.toLowerCase()==="localhost")t="localhost";else if(w.split(".").length<=2)t=w;else{let E=e.indexOf(".");r=e.substring(0,E).toLowerCase(),t=e.substring(E+1),s=r}"ns"in _&&(s=_.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var G3="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Rre=function(){let n=0,e=[];return function(t){let r=t===n;n=t;let i,s=new Array(8);for(i=7;i>=0;i--)s[i]=G3.charAt(t%64),t=Math.floor(t/64);ne(t===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=G3.charAt(e[i]);return ne(o.length===20,"nextPushId: Length should be 20."),o}}();var DE=class{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+gn(this.snapshot.exportVal())}},SE=class{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var tg=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return ne(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var TE=class{constructor(e,t){this._repo=e,this._path=t}cancel(){let e=new Fn;return Ere(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){ri("OnDisconnect.remove",this._path);let e=new Fn;return W3(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){ri("OnDisconnect.set",this._path),so("OnDisconnect.set",e,this._path,!1);let t=new Fn;return W3(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){ri("OnDisconnect.setWithPriority",this._path),so("OnDisconnect.setWithPriority",e,this._path,!1),dR("OnDisconnect.setWithPriority",t,!1);let r=new Fn;return Cre(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){ri("OnDisconnect.update",this._path),q4("OnDisconnect.update",e,this._path,!1);let t=new Fn;return bre(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}};var Mr=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return rt(this._path)?null:Gk(this._path)}get ref(){return new si(this._repo,this._path)}get _queryIdentifier(){let e=N3(this._queryParams),t=zk(e);return t==="{}"?"default":t}get _queryObject(){return N3(this._queryParams)}isEqual(e){if(e=Le(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=Yk(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Ute(this._path)}};function zE(n,e){if(n._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Il(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===no){let r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==vl)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==ia)throw new Error(r);if(typeof t!="string")throw new Error(i)}}else if(n.getIndex()===Ht){if(e!=null&&!eg(e)||t!=null&&!eg(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(ne(n.getIndex()instanceof zm||n.getIndex()===Zk,"unknown index type."),e!=null&&typeof e=="object"||t!=null&&typeof t=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function WE(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var si=class n extends Mr{constructor(e,t){super(e,t,new Km,!1)}get parent(){let e=g4(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Gh=class n{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new Et(e),r=bl(this.ref,e);return new n(this._node.getChild(t),r,Ht)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new n(i,bl(this.ref,r),Ht)))}hasChild(e){let t=new Et(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function gR(n,e){return n=Le(n),n._checkNotDeleted("ref"),e!==void 0?bl(n._root,e):n._root}function _R(n,e){n=Le(n),n._checkNotDeleted("refFromURL");let t=xk(e,n._repo.repoInfo_.nodeAdmin);z4("refFromURL",t);let r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ro("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),gR(n,t.path.toString())}function bl(n,e){return n=Le(n),nt(n._path)===null?fre("child","path",e,!1):Zh("child","path",e,!1),new si(n._repo,Zt(n._path,e))}function eH(n,e){n=Le(n),ri("push",n._path),so("push",e,n._path,!0);let t=K4(n._repo),r=Rre(t),i=bl(n,r),s=bl(n,r),o;return e!=null?o=GE(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function tH(n){return ri("remove",n._path),GE(n,null)}function GE(n,e){n=Le(n),ri("set",n._path),so("set",e,n._path,!1);let t=new Fn;return fR(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function nH(n,e){n=Le(n),ri("setPriority",n._path),dR("setPriority",e,!1);let t=new Fn;return fR(n._repo,Zt(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}function rH(n,e,t){if(ri("setWithPriority",n._path),so("setWithPriority",e,n._path,!1),dR("setWithPriority",t,!1),n.key===".length"||n.key===".keys")throw"setWithPriority failed: "+n.key+" is a read-only object.";let r=new Fn;return fR(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}function iH(n,e){q4("update",e,n._path,!1);let t=new Fn;return vre(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function sH(n){n=Le(n);let e=new tg(()=>{}),t=new ng(e);return yre(n._repo,n,t).then(r=>new Gh(r,new si(n._repo,n._path),n._queryParams.getIndex()))}var ng=class n{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){let r=t._queryParams.getIndex();return new DE("value",this,new Gh(e.snapshotNode,new si(t._repo,t._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new SE(this,e,t):null}matches(e){return e instanceof n?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},AE=class n{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new SE(this,e,t):null}createEvent(e,t){ne(e.childName!=null,"Child events should have a childName.");let r=bl(new si(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new DE(e.type,this,new Gh(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof n?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function dg(n,e,t,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){let l=t,u=(h,p)=>{Mk(n._repo,n,a),l(h,p)};u.userCallback=t.userCallback,u.context=t.context,t=u}let o=new tg(t,s||void 0),a=e==="value"?new ng(o):new AE(e,o);return Ire(n._repo,n,a),()=>Mk(n._repo,n,a)}function YE(n,e,t,r){return dg(n,"value",e,t,r)}function yR(n,e,t,r){return dg(n,"child_added",e,t,r)}function vR(n,e,t,r){return dg(n,"child_changed",e,t,r)}function wR(n,e,t,r){return dg(n,"child_moved",e,t,r)}function ER(n,e,t,r){return dg(n,"child_removed",e,t,r)}function CR(n,e,t){let r=null,i=t?new tg(t):null;e==="value"?r=new ng(i):e&&(r=new AE(e,i)),Mk(n._repo,n,r)}var oi=class{},ME=class extends oi{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){so("endAt",this._value,e._path,!0);let t=ok(e._queryParams,this._value,this._key);if(WE(t),Il(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Mr(e._repo,e._path,t,e._orderByCalled)}};function oH(n,e){return ug("endAt","key",e,!0),new ME(n,e)}var kk=class extends oi{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){so("endBefore",this._value,e._path,!1);let t=ine(e._queryParams,this._value,this._key);if(WE(t),Il(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Mr(e._repo,e._path,t,e._orderByCalled)}};function aH(n,e){return ug("endBefore","key",e,!0),new kk(n,e)}var xE=class extends oi{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){so("startAt",this._value,e._path,!0);let t=sk(e._queryParams,this._value,this._key);if(WE(t),Il(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Mr(e._repo,e._path,t,e._orderByCalled)}};function lH(n=null,e){return ug("startAt","key",e,!0),new xE(n,e)}var Rk=class extends oi{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){so("startAfter",this._value,e._path,!1);let t=rne(e._queryParams,this._value,this._key);if(WE(t),Il(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Mr(e._repo,e._path,t,e._orderByCalled)}};function uH(n,e){return ug("startAfter","key",e,!0),new Rk(n,e)}var Nk=class extends oi{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Mr(e._repo,e._path,tne(e._queryParams,this._limit),e._orderByCalled)}};function cH(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Nk(n)}var Pk=class extends oi{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Mr(e._repo,e._path,nne(e._queryParams,this._limit),e._orderByCalled)}};function dH(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Pk(n)}var Ok=class extends oi{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){zE(e,"orderByChild");let t=new Et(this._path);if(rt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let r=new zm(t),i=RE(e._queryParams,r);return Il(i),new Mr(e._repo,e._path,i,!0)}};function hH(n){if(n==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(n==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(n==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Zh("orderByChild","path",n,!1),new Ok(n)}var Fk=class extends oi{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){zE(e,"orderByKey");let t=RE(e._queryParams,no);return Il(t),new Mr(e._repo,e._path,t,!0)}};function fH(){return new Fk}var Lk=class extends oi{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){zE(e,"orderByPriority");let t=RE(e._queryParams,Ht);return Il(t),new Mr(e._repo,e._path,t,!0)}};function pH(){return new Lk}var Vk=class extends oi{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){zE(e,"orderByValue");let t=RE(e._queryParams,Zk);return Il(t),new Mr(e._repo,e._path,t,!0)}};function mH(){return new Vk}var Uk=class extends oi{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(so("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new ME(this._value,this._key)._apply(new xE(this._value,this._key)._apply(e))}};function gH(n,e){return ug("equalTo","key",e,!0),new Uk(n,e)}function Ri(n,...e){let t=Le(n);for(let r of e)t=r._apply(t);return t}Une(si);qne(si);var Nre="FIREBASE_DATABASE_EMULATOR_HOST",Bk={},Pre=!1;function Ore(n,e,t,r){n.repoInfo_=new oE(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function bR(n,e,t,r,i){let s=r||n.options.databaseURL;s===void 0&&(n.options.projectId||ro("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Un("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=xk(s,i),a=o.repoInfo,l,u;typeof process<"u"&&process.env&&(u=process.env[Nre]),u?(l=!0,s=`http://${u}?ns=${a.namespace}`,o=xk(s,i),a=o.repoInfo):l=!o.repoInfo.secure;let h=i&&l?new Um(Um.OWNER):new qx(n.name,n.options,e);z4("Invalid Firebase Database URL",o),rt(o.path)||ro("Database URL must point to the root of a Firebase Database (not including a child path).");let p=Lre(a,n,h,new $x(n.name,t));return new jk(p,n)}function Fre(n,e){let t=Bk[e];(!t||t[n.key]!==n)&&ro(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Q4(n),delete t[n.key]}function Lre(n,e,t,r){let i=Bk[e.name];i||(i={},Bk[e.name]=i);let s=i[n.toURLString()];return s&&ro("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Ak(n,Pre,t,r),i[n.toURLString()]=s,s}var jk=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(gre(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new si(this._repo,wt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Fre(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ro("Cannot call "+e+" on a deleted database.")}};function _H(){m4.IS_TRANSPORT_INITIALIZED&&mr("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function yH(){_H(),$m.forceDisallow()}function vH(){_H(),Lh.forceDisallow(),$m.forceAllow()}function wH(n,e,t,r={}){n=Le(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&ro("Cannot call useEmulator() after instance has already been initialized.");let i=n._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ro('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Um(Um.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:bc(r.mockUserToken,n.app.options.projectId);s=new Um(o)}Ore(i,e,t,s)}function EH(n){n=Le(n),n._checkNotDeleted("goOffline"),Q4(n._repo)}function CH(n){n=Le(n),n._checkNotDeleted("goOnline"),Dre(n._repo)}function bH(n,e){Z3(n,e)}function Vre(n){qk(Ic),bo(new $n("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return bR(r,i,s,t)},"PUBLIC").setMultipleInstances(!0)),Nr(g3,_3,n),Nr(g3,_3,"esm2017")}var Ure={".sv":"timestamp"};function IH(){return Ure}function DH(n){return{".sv":{increment:n}}}var Hk=class{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function SH(n,e,t){var r;if(n=Le(n),ri("Reference.transaction",n._path),n.key===".length"||n.key===".keys")throw"Reference.transaction failed: "+n.key+" is a read-only object.";let i=(r=t?.applyLocally)!==null&&r!==void 0?r:!0,s=new Fn,o=(l,u,h)=>{let p=null;l?s.reject(l):(p=new Gh(h,new si(n._repo,n._path),Ht),s.resolve(new Hk(u,p)))},a=YE(n,()=>{});return Sre(n._repo,n._path,e,o,a,i),s.promise}Kk.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Kk.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};Vre();var Bre="@firebase/database-compat",jre="1.0.8";var Hre=new ya("@firebase/database-compat"),TH=function(n){let e="FIREBASE WARNING: "+n;Hre.warn(e)};var $re=function(n,e,t,r){if(!(r&&t===void 0)&&typeof t!="boolean")throw new Error(Rr(n,e)+"must be a boolean.")},qre=function(n,e,t){if(!(t&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Rr(n,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};var IR=class{constructor(e){this._delegate=e}cancel(e){Pe("OnDisconnect.cancel",0,1,arguments.length),An("OnDisconnect.cancel","onComplete",e,!0);let t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){Pe("OnDisconnect.remove",0,1,arguments.length),An("OnDisconnect.remove","onComplete",e,!0);let t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){Pe("OnDisconnect.set",1,2,arguments.length),An("OnDisconnect.set","onComplete",t,!0);let r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){Pe("OnDisconnect.setWithPriority",2,3,arguments.length),An("OnDisconnect.setWithPriority","onComplete",r,!0);let i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if(Pe("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){let i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,TH("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}An("OnDisconnect.update","onComplete",t,!0);let r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}};var DR=class{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return Pe("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}};var Yu=class n{constructor(e,t){this._database=e,this._delegate=t}val(){return Pe("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return Pe("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return Pe("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return Pe("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return Pe("DataSnapshot.child",0,1,arguments.length),e=String(e),Zh("DataSnapshot.child","path",e,!1),new n(this._database,this._delegate.child(e))}hasChild(e){return Pe("DataSnapshot.hasChild",1,1,arguments.length),Zh("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return Pe("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return Pe("DataSnapshot.forEach",1,1,arguments.length),An("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new n(this._database,t)))}hasChildren(){return Pe("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return Pe("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return Pe("DataSnapshot.ref",0,0,arguments.length),new sa(this._database,this._delegate.ref)}get ref(){return this.getRef()}},KE=class n{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;Pe("Query.on",2,4,arguments.length),An("Query.on","callback",t,!1);let o=n.getCancelAndContextArgs_("Query.on",r,i),a=(u,h)=>{t.call(o.context,new Yu(this.database,u),h)};a.userCallback=t,a.context=o.context;let l=(s=o.cancel)===null||s===void 0?void 0:s.bind(o.context);switch(e){case"value":return YE(this._delegate,a,l),t;case"child_added":return yR(this._delegate,a,l),t;case"child_removed":return ER(this._delegate,a,l),t;case"child_changed":return vR(this._delegate,a,l),t;case"child_moved":return wR(this._delegate,a,l),t;default:throw new Error(Rr("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if(Pe("Query.off",0,3,arguments.length),qre("Query.off",e,!0),An("Query.off","callback",t,!0),$C("Query.off","context",r,!0),t){let i=()=>{};i.userCallback=t,i.context=r,CR(this._delegate,e,i)}else CR(this._delegate,e)}get(){return sH(this._delegate).then(e=>new Yu(this.database,e))}once(e,t,r,i){Pe("Query.once",1,4,arguments.length),An("Query.once","callback",t,!0);let s=n.getCancelAndContextArgs_("Query.once",r,i),o=new Fn,a=(u,h)=>{let p=new Yu(this.database,u);t&&t.call(s.context,p,h),o.resolve(p)};a.userCallback=t,a.context=s.context;let l=u=>{s.cancel&&s.cancel.call(s.context,u),o.reject(u)};switch(e){case"value":YE(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":yR(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":ER(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":vR(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":wR(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error(Rr("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return Pe("Query.limitToFirst",1,1,arguments.length),new n(this.database,Ri(this._delegate,cH(e)))}limitToLast(e){return Pe("Query.limitToLast",1,1,arguments.length),new n(this.database,Ri(this._delegate,dH(e)))}orderByChild(e){return Pe("Query.orderByChild",1,1,arguments.length),new n(this.database,Ri(this._delegate,hH(e)))}orderByKey(){return Pe("Query.orderByKey",0,0,arguments.length),new n(this.database,Ri(this._delegate,fH()))}orderByPriority(){return Pe("Query.orderByPriority",0,0,arguments.length),new n(this.database,Ri(this._delegate,pH()))}orderByValue(){return Pe("Query.orderByValue",0,0,arguments.length),new n(this.database,Ri(this._delegate,mH()))}startAt(e=null,t){return Pe("Query.startAt",0,2,arguments.length),new n(this.database,Ri(this._delegate,lH(e,t)))}startAfter(e=null,t){return Pe("Query.startAfter",0,2,arguments.length),new n(this.database,Ri(this._delegate,uH(e,t)))}endAt(e=null,t){return Pe("Query.endAt",0,2,arguments.length),new n(this.database,Ri(this._delegate,oH(e,t)))}endBefore(e=null,t){return Pe("Query.endBefore",0,2,arguments.length),new n(this.database,Ri(this._delegate,aH(e,t)))}equalTo(e,t){return Pe("Query.equalTo",1,2,arguments.length),new n(this.database,Ri(this._delegate,gH(e,t)))}toString(){return Pe("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return Pe("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(Pe("Query.isEqual",1,1,arguments.length),!(e instanceof n)){let t="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(t)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){let i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,An(e,"cancel",i.cancel,!0),i.context=r,$C(e,"context",i.context,!0);else if(t)if(typeof t=="object"&&t!==null)i.context=t;else if(typeof t=="function")i.cancel=t;else throw new Error(Rr(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return i}get ref(){return new sa(this.database,new si(this._delegate._repo,this._delegate._path))}},sa=class n extends KE{constructor(e,t){super(e,new Mr(t._repo,t._path,new Km,!1)),this.database=e,this._delegate=t}getKey(){return Pe("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return Pe("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new n(this.database,bl(this._delegate,e))}getParent(){Pe("Reference.parent",0,0,arguments.length);let e=this._delegate.parent;return e?new n(this.database,e):null}getRoot(){return Pe("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}set(e,t){Pe("Reference.set",1,2,arguments.length),An("Reference.set","onComplete",t,!0);let r=GE(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if(Pe("Reference.update",1,2,arguments.length),Array.isArray(e)){let i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,TH("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ri("Reference.update",this._delegate._path),An("Reference.update","onComplete",t,!0);let r=iH(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){Pe("Reference.setWithPriority",2,3,arguments.length),An("Reference.setWithPriority","onComplete",r,!0);let i=rH(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){Pe("Reference.remove",0,1,arguments.length),An("Reference.remove","onComplete",e,!0);let t=tH(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){Pe("Reference.transaction",1,3,arguments.length),An("Reference.transaction","transactionUpdate",e,!1),An("Reference.transaction","onComplete",t,!0),$re("Reference.transaction","applyLocally",r,!0);let i=SH(this._delegate,e,{applyLocally:r}).then(s=>new DR(s.committed,new Yu(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){Pe("Reference.setPriority",1,2,arguments.length),An("Reference.setPriority","onComplete",t,!0);let r=nH(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){Pe("Reference.push",0,2,arguments.length),An("Reference.push","onComplete",t,!0);let r=eH(this._delegate,e),i=r.then(o=>new n(this.database,o));t&&i.then(()=>t(null),o=>t(o));let s=new n(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return ri("Reference.onDisconnect",this._delegate._path),new IR(new TE(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};var Ku=class{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:yH,forceLongPolling:vH}}useEmulator(e,t,r={}){wH(this._delegate,e,t,r)}ref(e){if(Pe("database.ref",0,1,arguments.length),e instanceof sa){let t=_R(this._delegate,e.toString());return new sa(this,t)}else{let t=gR(this._delegate,e);return new sa(this,t)}}refFromURL(e){Pe("database.refFromURL",1,1,arguments.length);let r=_R(this._delegate,e);return new sa(this,r)}goOffline(){return Pe("database.goOffline",0,0,arguments.length),EH(this._delegate)}goOnline(){return Pe("database.goOnline",0,0,arguments.length),CH(this._delegate)}};Ku.ServerValue={TIMESTAMP:IH(),increment:n=>DH(n)};function zre({app:n,url:e,version:t,customAuthImpl:r,customAppCheckImpl:i,namespace:s,nodeAdmin:o=!1}){qk(t);let a=new qC("database-standalone"),l=new y_("auth-internal",a);l.setComponent(new $n("auth-internal",()=>r,"PRIVATE"));let u;return i&&(u=new y_("app-check-internal",a),u.setComponent(new $n("app-check-internal",()=>i,"PRIVATE"))),{instance:new Ku(bR(n,l,u,e,o),n),namespace:s}}var Wre=Object.freeze({__proto__:null,initStandalone:zre});var Gre=Ku.ServerValue;function Yre(n){n.INTERNAL.registerComponent(new $n("database-compat",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Ku(i,r)},"PUBLIC").setServiceProps({Reference:sa,Query:KE,Database:Ku,DataSnapshot:Yu,enableLogging:bH,INTERNAL:Wre,ServerValue:Gre}).setMultipleInstances(!0)),n.registerVersion(Bre,jre)}Yre(dn);function hg(n,e,t="on",r=So){return new He(i=>{let s=null;return s=n[t](e,(o,a)=>{r.schedule(()=>{i.next({snapshot:o,prevKey:a})}),t==="once"&&r.schedule(()=>i.complete())},o=>{r.schedule(()=>i.error(o))}),t==="on"?{unsubscribe(){s!=null&&n.off(e,s)}}:{unsubscribe(){}}}).pipe(he(i=>{let{snapshot:s,prevKey:o}=i,a=null;return s.exists()&&(a=s.key),{type:e,payload:s,prevKey:o,key:a}}),Rf())}function Kre(n){return typeof n=="string"}function Qre(n){return typeof n.exportVal=="function"}function RH(n){return n==null}function NH(n){return typeof n.set=="function"}function AH(n,e){return NH(e)?e:n.ref(e)}function PH(n,e){if(Kre(n))return e.stringCase();if(NH(n))return e.firebaseCase();if(Qre(n))return e.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof n}`)}function OH(n){return(RH(n)||n.length===0)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function FH(n,e,t){e=OH(e);let r=e.map(i=>hg(n,i,"on",t));return Lc(...r)}function Zre(n,e,t){let r=FH(n,e).pipe(ws((i,s)=>[...i,s],[]));return Jre(n,r,t)}function Xre(n,e){return hg(n,"value","on",e).pipe(he(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}function Jre(n,e,t){return Xre(n,t).pipe(_b(e),he(([i,s])=>{let o=i.lastKeyToLoad,a=s.map(l=>l.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),mb(i=>i.loadedKeys.indexOf(i.lastKeyToLoad)===-1),he(i=>i.actions))}function MH(n,e){return function(r,i){return PH(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function eie(n){return function(t){return t?PH(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function tie(n,e,t){return hg(n,"value","once",t).pipe(bt(r=>{let i=[De(r)];return e.forEach(s=>i.push(hg(n,s,"on",t))),Lc(...i).pipe(ws(rie,[]))}),xf())}function LH(n,e){let t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function nie(n,e){if(RH(e))return 0;{let t=LH(n,e);return t===-1?n.length:t+1}}function rie(n,e){let{payload:t,prevKey:r,key:i}=e,s=LH(n,i),o=nie(n,r);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(l=>{let u={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,n=[...n,u],!1})}return n;case"child_added":if(s>-1)(n[s-1]?.key||null)!==r&&(n=n.filter(l=>l.payload.key!==t.key),n.splice(o,0,e));else{if(r==null)return[e,...n];n=n.slice(),n.splice(o,0,e)}return n;case"child_removed":return n.filter(a=>a.payload.key!==t.key);case"child_changed":return n.map(a=>a.payload.key===i?e:a);case"child_moved":if(s>-1){let a=n.splice(s,1)[0];return n=n.slice(),n.splice(o,0,a),n}return n;default:return n}}function xH(n,e,t){return e=OH(e),tie(n,e,t)}function iie(n,e){let t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:MH(r,"update"),set:MH(r,"set"),push:i=>r.push(i),remove:eie(r),snapshotChanges(i){return xH(n,i,t).pipe(Yt)},stateChanges(i){return FH(n,i,t).pipe(Yt)},auditTrail(i){return Zre(n,i,t).pipe(Yt)},valueChanges(i,s){return xH(n,i,t).pipe(he(a=>a.map(l=>s&&s.idField?de(V({},l.payload.val()),{[s.idField]:l.key}):l.payload.val())),Yt)}}}function kH(n,e){return function(){return hg(n,"value","on",e)}}function sie(n,e){return{query:n,snapshotChanges(){return kH(n,e.schedulers.outsideAngular)().pipe(Yt)},update(t){return n.ref.update(t)},set(t){return n.ref.set(t)},remove(){return n.ref.remove()},valueChanges(){return kH(n,e.schedulers.outsideAngular)().pipe(Yt,he(r=>r.payload.exists()?r.payload.val():null))}}}var oie=new oe("angularfire2.realtimeDatabaseURL"),aie=new oe("angularfire2.database.use-emulator"),lie=(()=>{class n{schedulers;database;constructor(t,r,i,s,o,a,l,u,h,p,_,w,E,S,x){this.schedulers=a;let H=l,Y=$o(t,o,r);u&&Ap(Y,o,h,_,w,E,p,S),this.database=Ba(`${Y.name}.database.${i}`,"AngularFireDatabase",Y.name,()=>{let q=o.runOutsideAngular(()=>Y.database(i||void 0));return H&&q.useEmulator(...H),q},[H])}list(t,r){let i=this.schedulers.ngZone.runOutsideAngular(()=>AH(this.database,t)),s=i;return r&&(s=r(i)),iie(s,this)}object(t){let r=this.schedulers.ngZone.runOutsideAngular(()=>AH(this.database,t));return sie(r,this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(r){return new(r||n)(B(Vs),B(Us,8),B(oie,8),B(vn),B($e),B(Va),B(aie,8),B(Zr,8),B(Cp,8),B(bp,8),B(Ip,8),B(Dp,8),B(Sp,8),B(Tp,8),B(Qi,8))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),VH=(()=>{class n{constructor(){dn.registerVersion("angularfire",Ho.full,"rtdb-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=vt({type:n});static \u0275inj=yt({providers:[lie]})}return n})();function UH(n){return new X(3e3,!1)}function uie(){return new X(3100,!1)}function cie(){return new X(3101,!1)}function die(n){return new X(3001,!1)}function hie(n){return new X(3003,!1)}function fie(n){return new X(3004,!1)}function pie(n,e){return new X(3005,!1)}function mie(){return new X(3006,!1)}function gie(){return new X(3007,!1)}function _ie(n,e){return new X(3008,!1)}function yie(n){return new X(3002,!1)}function vie(n,e,t,r,i){return new X(3010,!1)}function wie(){return new X(3011,!1)}function Eie(){return new X(3012,!1)}function Cie(){return new X(3200,!1)}function bie(){return new X(3202,!1)}function Iie(){return new X(3013,!1)}function Die(n){return new X(3014,!1)}function Sie(n){return new X(3015,!1)}function Tie(n){return new X(3016,!1)}function Aie(n,e){return new X(3404,!1)}function Mie(n){return new X(3502,!1)}function xie(n){return new X(3503,!1)}function kie(){return new X(3300,!1)}function Rie(n){return new X(3504,!1)}function Nie(n){return new X(3301,!1)}function Pie(n,e){return new X(3302,!1)}function Oie(n){return new X(3303,!1)}function Fie(n,e){return new X(3400,!1)}function Lie(n){return new X(3401,!1)}function Vie(n){return new X(3402,!1)}function Uie(n,e){return new X(3505,!1)}function Dl(n){switch(n.length){case 0:return new al;case 1:return n[0];default:return new gm(n)}}function JH(n,e,t=new Map,r=new Map){let i=[],s=[],o=-1,a=null;if(e.forEach(l=>{let u=l.get("offset"),h=u==o,p=h&&a||new Map;l.forEach((_,w)=>{let E=w,S=_;if(w!=="offset")switch(E=n.normalizePropertyName(E,i),S){case hw:S=t.get(w);break;case Qs:S=r.get(w);break;default:S=n.normalizeStyleValue(w,E,S,i);break}p.set(E,S)}),h||s.push(p),a=p,o=u}),i.length)throw Mie(i);return s}function YR(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&SR(t,"start",n)));break;case"done":n.onDone(()=>r(t&&SR(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&SR(t,"destroy",n)));break}}function SR(n,e,t){let r=t.totalTime,i=!!t.disabled,s=KR(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),o=n._data;return o!=null&&(s._data=o),s}function KR(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function li(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function BH(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var Bie=typeof document>"u"?null:document.documentElement;function QR(n){let e=n.parentNode||n.host||null;return e===Bie?null:e}function jie(n){return n.substring(1,6)=="ebkit"}var Qu=null,jH=!1;function Hie(n){Qu||(Qu=$ie()||{},jH=Qu.style?"WebkitAppearance"in Qu.style:!1);let e=!0;return Qu.style&&!jie(n)&&(e=n in Qu.style,!e&&jH&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Qu.style)),e}function $ie(){return typeof document<"u"?document.body:null}function e$(n,e){for(;e;){if(e===n)return!0;e=QR(e)}return!1}function t$(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var ZR=(()=>{class n{validateStyleProperty(t){return Hie(t)}containsElement(t,r){return e$(t,r)}getParentElement(t){return QR(t)}query(t,r,i){return t$(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],l){return new al(i,s)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})(),Ju=class{static{this.NOOP=new ZR}},ec=class{};var qie=1e3,n$="{{",zie="}}",r$="ng-enter",RR="ng-leave",QE="ng-trigger",tC=".ng-trigger",HH="ng-animating",NR=".ng-animating";function oa(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:PR(parseFloat(e[1]),e[2])}function PR(n,e){switch(e){case"s":return n*qie;default:return n}}function nC(n,e,t){return n.hasOwnProperty("duration")?n:Wie(n,e,t)}function Wie(n,e,t){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,s=0,o="";if(typeof n=="string"){let a=n.match(r);if(a===null)return e.push(UH(n)),{duration:0,delay:0,easing:""};i=PR(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(s=PR(parseFloat(l),a[4]));let u=a[5];u&&(o=u)}else i=n;if(!t){let a=!1,l=e.length;i<0&&(e.push(uie()),a=!0),s<0&&(e.push(cie()),a=!0),a&&e.splice(l,0,UH(n))}return{duration:i,delay:s,easing:o}}function Gie(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function oo(n,e,t){e.forEach((r,i)=>{let s=XR(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function Xu(n,e){e.forEach((t,r)=>{let i=XR(r);n.style[i]=""})}function fg(n){return Array.isArray(n)?n.length==1?n[0]:WB(n):n}function Yie(n,e,t){let r=e.params||{},i=i$(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(die(s))})}var OR=new RegExp(`${n$}\\s*(.+?)\\s*${zie}`,"g");function i$(n){let e=[];if(typeof n=="string"){let t;for(;t=OR.exec(n);)e.push(t[1]);OR.lastIndex=0}return e}function mg(n,e,t){let r=`${n}`,i=r.replace(OR,(s,o)=>{let a=e[o];return a==null&&(t.push(hie(o)),a=""),a.toString()});return i==r?n:i}var Kie=/-+([a-z0-9])/g;function XR(n){return n.replace(Kie,(...e)=>e[1].toUpperCase())}function Qie(n,e){return n===0||e===0}function Zie(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,JR(n,a)))}}return e}function ai(n,e,t){switch(e.type){case Ge.Trigger:return n.visitTrigger(e,t);case Ge.State:return n.visitState(e,t);case Ge.Transition:return n.visitTransition(e,t);case Ge.Sequence:return n.visitSequence(e,t);case Ge.Group:return n.visitGroup(e,t);case Ge.Animate:return n.visitAnimate(e,t);case Ge.Keyframes:return n.visitKeyframes(e,t);case Ge.Style:return n.visitStyle(e,t);case Ge.Reference:return n.visitReference(e,t);case Ge.AnimateChild:return n.visitAnimateChild(e,t);case Ge.AnimateRef:return n.visitAnimateRef(e,t);case Ge.Query:return n.visitQuery(e,t);case Ge.Stagger:return n.visitStagger(e,t);default:throw fie(e.type)}}function JR(n,e){return window.getComputedStyle(n)[e]}var Xie=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),rC=class extends ec{normalizePropertyName(e,t){return XR(e)}normalizeStyleValue(e,t,r,i){let s="",o=r.toString().trim();if(Xie.has(t)&&r!==0&&r!=="0")if(typeof r=="number")s="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(pie(e,r))}return o+s}};var iC="*";function Jie(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>ese(r,t,e)):t.push(n),t}function ese(n,e,t){if(n[0]==":"){let l=tse(n,t);if(typeof l=="function"){e.push(l);return}n=l}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(Sie(n)),e;let i=r[1],s=r[2],o=r[3];e.push($H(i,o));let a=i==iC&&o==iC;s[0]=="<"&&!a&&e.push($H(o,i))}function tse(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(Tie(n)),"* => *"}}var ZE=new Set(["true","1"]),XE=new Set(["false","0"]);function $H(n,e){let t=ZE.has(n)||XE.has(n),r=ZE.has(e)||XE.has(e);return(i,s)=>{let o=n==iC||n==i,a=e==iC||e==s;return!o&&t&&typeof i=="boolean"&&(o=i?ZE.has(n):XE.has(n)),!a&&r&&typeof s=="boolean"&&(a=s?ZE.has(e):XE.has(e)),o&&a}}var s$=":self",nse=new RegExp(`s*${s$}s*,?`,"g");function o$(n,e,t,r){return new FR(n).build(e,t,r)}var qH="",FR=class{constructor(e){this._driver=e}build(e,t,r){let i=new LR(t);return this._resetContextStyleTimingState(i),ai(this,fg(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=qH,e.collectedStyles=new Map,e.collectedStyles.set(qH,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(mie()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==Ge.State){let l=a,u=l.name;u.toString().split(/\s*,\s*/).forEach(h=>{l.name=h,s.push(this.visitState(l,t))}),l.name=u}else if(a.type==Ge.Transition){let l=this.visitTransition(a,t);r+=l.queryCount,i+=l.depCount,o.push(l)}else t.errors.push(gie())}),{type:Ge.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{i$(l).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}),s.size&&t.errors.push(_ie(e.name,[...s.values()]))}return{type:Ge.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=ai(this,fg(e.animation),t),i=Jie(e.expr,t.errors);return{type:Ge.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Zu(e.options)}}visitSequence(e,t){return{type:Ge.Sequence,steps:e.steps.map(r=>ai(this,r,t)),options:Zu(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,s=e.steps.map(o=>{t.currentTime=r;let a=ai(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:Ge.Group,steps:s,options:Zu(e.options)}}visitAnimate(e,t){let r=ose(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Ou({});if(s.type==Ge.Keyframes)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let u={};r.easing&&(u.easing=r.easing),o=Ou(u)}t.currentTime+=r.duration+r.delay;let l=this.visitStyle(o,t);l.isEmptyStep=a,i=l}return t.currentAnimateTimings=null,{type:Ge.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===Qs?r.push(a):t.errors.push(yie(a)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let l of a.values())if(l.toString().indexOf(n$)>=0){s=!0;break}}}),{type:Ge.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,l)=>{let u=t.collectedStyles.get(t.currentQuerySelector),h=u.get(l),p=!0;h&&(s!=i&&s>=h.startTime&&i<=h.endTime&&(t.errors.push(vie(l,h.startTime,h.endTime,s,i)),p=!1),s=h.startTime),p&&u.set(l,{startTime:s,endTime:i}),t.options&&Yie(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:Ge.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(wie()),r;let i=1,s=0,o=[],a=!1,l=!1,u=0,h=e.steps.map(H=>{let Y=this._makeStyleAst(H,t),q=Y.offset!=null?Y.offset:sse(Y.styles),Q=0;return q!=null&&(s++,Q=Y.offset=q),l=l||Q<0||Q>1,a=a||Q<u,u=Q,o.push(Q),Y});l&&t.errors.push(Eie()),a&&t.errors.push(Cie());let p=e.steps.length,_=0;s>0&&s<p?t.errors.push(bie()):s==0&&(_=i/(p-1));let w=p-1,E=t.currentTime,S=t.currentAnimateTimings,x=S.duration;return h.forEach((H,Y)=>{let q=_>0?Y==w?1:_*Y:o[Y],Q=q*x;t.currentTime=E+S.delay+Q,S.duration=Q,this._validateStyleAst(H,t),H.offset=q,r.styles.push(H)}),r}visitReference(e,t){return{type:Ge.Reference,animation:ai(this,fg(e.animation),t),options:Zu(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:Ge.AnimateChild,options:Zu(e.options)}}visitAnimateRef(e,t){return{type:Ge.AnimateRef,animation:this.visitReference(e.animation,t),options:Zu(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=rse(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,li(t.collectedStyles,t.currentQuerySelector,new Map);let a=ai(this,fg(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:Ge.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Zu(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(Iie());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:nC(e.timings,t.errors,!0);return{type:Ge.Stagger,animation:ai(this,fg(e.animation),t),timings:r,options:null}}};function rse(n){let e=!!n.split(/\s*,\s*/).find(t=>t==s$);return e&&(n=n.replace(nse,"")),n=n.replace(/@\*/g,tC).replace(/@\w+/g,t=>tC+"-"+t.slice(1)).replace(/:animating/g,NR),[n,e]}function ise(n){return n?V({},n):null}var LR=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function sse(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function ose(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=nC(n,e).duration;return TR(s,0,"")}let t=n;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=TR(0,0,"");return s.dynamic=!0,s.strValue=t,s}let i=nC(t,e);return TR(i.duration,i.delay,i.easing)}function Zu(n){return n?(n=V({},n),n.params&&(n.params=ise(n.params))):n={},n}function TR(n,e,t){return{duration:n,delay:e,easing:t}}function e1(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}var gg=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},ase=1,lse=":enter",use=new RegExp(lse,"g"),cse=":leave",dse=new RegExp(cse,"g");function a$(n,e,t,r,i,s=new Map,o=new Map,a,l,u=[]){return new VR().buildKeyframes(n,e,t,r,i,s,o,a,l,u)}var VR=class{buildKeyframes(e,t,r,i,s,o,a,l,u,h=[]){u=u||new gg;let p=new UR(e,t,u,i,s,h,[]);p.options=l;let _=l.delay?oa(l.delay):0;p.currentTimeline.delayNextStep(_),p.currentTimeline.setStyles([o],null,p.errors,l),ai(this,r,p);let w=p.timelines.filter(E=>E.containsAnimation());if(w.length&&a.size){let E;for(let S=w.length-1;S>=0;S--){let x=w[S];if(x.element===t){E=x;break}}E&&!E.allowOnlyTimelineStyles()&&E.setStyles([a],null,p.errors,l)}return w.length?w.map(E=>E.buildKeyframes()):[e1(t,[],[],[],0,_,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let s=i?.delay;if(s){let o=typeof s=="number"?s:oa(mg(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime,o=r.duration!=null?oa(r.duration):null,a=r.delay!=null?oa(r.delay):null;return o!==0&&e.forEach(l=>{let u=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,u.duration+u.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),ai(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),s.delay!=null)){i.previousNode.type==Ge.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=sC);let o=oa(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>ai(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,s=e.options&&e.options.delay?oa(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),ai(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?mg(r,t.params,t.errors):r;return nC(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let s=e.style;s.type==Ge.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(l=>{let u=l.offset||0;a.forwardTime(u*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?oa(i.delay):0;s&&(t.previousNode.type===Ge.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=sC);let o=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((u,h)=>{t.currentQueryIndex=h;let p=t.createSubContext(e.options,u);s&&p.delayNextStep(s),u===t.element&&(l=p.currentTimeline),ai(this,e.animation,p),p.currentTimeline.applyStylesToKeyframe();let _=p.currentTimeline.currentTime;o=Math.max(o,_)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime;break}let h=t.currentTimeline;l&&h.delayNextStep(l);let p=h.currentTime;ai(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-p+(i.startTime-r.currentTimeline.startTime)}},sC={},UR=class n{constructor(e,t,r,i,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=sC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new oC(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=oa(r.duration)),r.delay!=null&&(i.delay=oa(r.delay));let s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=mg(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,s=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=sC,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new BR(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(use,"."+this._enterClassName),e=e.replace(dse,"."+this._leaveClassName);let l=r!=1,u=this._driver.query(this.element,e,l);r!==0&&(u=r<0?u.slice(u.length+r,u.length):u.slice(0,r)),a.push(...u)}return!s&&a.length==0&&o.push(Die(t)),a}},oC=class n{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=ase,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Qs),this._currentKeyframe.set(t,Qs);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let s=i&&i.params||{},o=hse(e,this._globalTimelineStyles);for(let[a,l]of o){let u=mg(l,s,r);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Qs),this._updateStyle(a,u)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,l)=>{let u=new Map([...this._backFill,...a]);u.forEach((h,p)=>{h===hw?e.add(p):h===Qs&&t.add(p)}),r||u.set("offset",l/this.duration),i.push(u)});let s=[...e.values()],o=[...t.values()];if(r){let a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return e1(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}},BR=class extends oC{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=r+t,a=t/o,l=new Map(e[0]);l.set("offset",0),s.push(l);let u=new Map(e[0]);u.set("offset",zH(a)),s.push(u);let h=e.length-1;for(let p=1;p<=h;p++){let _=new Map(e[p]),w=_.get("offset"),E=t+w*r;_.set("offset",zH(E/o)),s.push(_)}r=o,t=0,i="",e=s}return e1(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function zH(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function hse(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let s of r)t.set(s,Qs)}else for(let[s,o]of i)t.set(s,o)}),t}function WH(n,e,t,r,i,s,o,a,l,u,h,p,_){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:u,postStyleProps:h,totalTime:p,errors:_}}var AR={},aC=class{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return fse(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,l,u,h){let p=[],_=this.ast.options&&this.ast.options.params||AR,w=a&&a.params||AR,E=this.buildStyles(r,w,p),S=l&&l.params||AR,x=this.buildStyles(i,S,p),H=new Set,Y=new Map,q=new Map,Q=i==="void",pe={params:l$(S,_),delay:this.ast.options?.delay},re=h?[]:a$(e,t,this.ast.animation,s,o,E,x,pe,u,p),k=0;return re.forEach(I=>{k=Math.max(I.duration+I.delay,k)}),p.length?WH(t,this._triggerName,r,i,Q,E,x,[],[],Y,q,k,p):(re.forEach(I=>{let A=I.element,P=li(Y,A,new Set);I.preStyleProps.forEach(L=>P.add(L));let O=li(q,A,new Set);I.postStyleProps.forEach(L=>O.add(L)),A!==t&&H.add(A)}),WH(t,this._triggerName,r,i,Q,E,x,re,[...H.values()],Y,q,k))}};function fse(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}function l$(n,e){let t=V({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var jR=class{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=l$(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=mg(o,i,t));let l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),r.set(a,o)})}),r}};function pse(n,e,t){return new HR(n,e,t)}var HR=class{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{let s=i.options&&i.options.params||{};this.states.set(i.name,new jR(i.style,s,r))}),GH(this.states,"true","1"),GH(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new aC(e,i,this.states))}),this.fallbackTransition=mse(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function mse(n,e,t){let r=[(o,a)=>!0],i={type:Ge.Sequence,steps:[],options:null},s={type:Ge.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new aC(n,s,e)}function GH(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var gse=new gg,$R=class{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){let r=[],i=[],s=o$(this._driver,t,r,i);if(r.length)throw xie(r);i.length&&void 0,this._animations.set(e,s)}_buildPlayer(e,t,r){let i=e.element,s=JH(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],s=this._animations.get(e),o,a=new Map;if(s?(o=a$(this._driver,t,s,r$,RR,new Map,new Map,r,gse,i),o.forEach(h=>{let p=li(a,h.element,new Map);h.postStyleProps.forEach(_=>p.set(_,null))})):(i.push(kie()),o=[]),i.length)throw Rie(i);a.forEach((h,p)=>{h.forEach((_,w)=>{h.set(w,this._driver.computeStyle(p,w,Qs))})});let l=o.map(h=>{let p=a.get(h.element);return this._buildPlayer(h,new Map,p)}),u=Dl(l);return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw Nie(e);return t}listen(e,t,r,i){let s=KR(t,"","","");return YR(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let o=i[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},YH="ng-animate-queued",_se=".ng-animate-queued",MR="ng-animate-disabled",yse=".ng-animate-disabled",vse="ng-star-inserted",wse=".ng-star-inserted",Ese=[],u$={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Cse={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},os="__ng_removed",_g=class{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=Ise(i),r){let s=e,{value:o}=s,a=Bt(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},pg="void",xR=new _g(pg),qR=class{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ni(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw Pie(r,t);if(r==null||r.length==0)throw Oie(t);if(!Dse(r))throw Fie(r,t);let s=li(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);let a=li(this._engine.statesByElement,e,new Map);return a.has(t)||(Ni(e,QE),Ni(e,QE+"-"+t),a.set(t,xR)),()=>{this._engine.afterFlush(()=>{let l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw Lie(e);return t}trigger(e,t,r,i=!0){let s=this._getTrigger(t),o=new yg(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Ni(e,QE),Ni(e,QE+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t),u=new _g(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&u.absorbOptions(l.options),a.set(t,u),l||(l=xR),!(u.value===pg)&&l.value===u.value){if(!Ase(l.params,u.params)){let S=[],x=s.matchStyles(l.value,l.params,S),H=s.matchStyles(u.value,u.params,S);S.length?this._engine.reportError(S):this._engine.afterFlush(()=>{Xu(e,x),oo(e,H)})}return}let _=li(this._engine.playersByElement,e,[]);_.forEach(S=>{S.namespaceId==this.id&&S.triggerName==t&&S.queued&&S.destroy()});let w=s.matchTransition(l.value,u.value,e,u.params),E=!1;if(!w){if(!i)return;w=s.fallbackTransition,E=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:w,fromState:l,toState:u,player:o,isFallbackTransition:E}),E||(Ni(e,YH),o.onStart(()=>{Jh(e,YH)})),o.onDone(()=>{let S=this.players.indexOf(o);S>=0&&this.players.splice(S,1);let x=this._engine.playersByElement.get(e);if(x){let H=x.indexOf(o);H>=0&&x.splice(H,1)}}),this.players.push(o),_.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,tC,!0);r.forEach(i=>{if(i[os])return;let s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((l,u)=>{if(o.set(u,l.value),this._triggers.has(u)){let h=this.trigger(e,u,pg,i);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&Dl(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(s=>{let o=s.name;if(i.has(o))return;i.add(o);let l=this._triggers.get(o).fallbackTransition,u=r.get(o)||xR,h=new _g(pg),p=new yg(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:u,toState:h,player:p,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let s=e[os];(!s||s===u$)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ni(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){let l=KR(s,r.triggerName,r.fromState.value,r.toState.value);l._data=e,YR(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let s=r.transition.ast.depCount,o=i.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},zR=class{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new qR(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let l=i.get(a);if(l){let u=r.indexOf(l);r.splice(u+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}}return t}trigger(e,t,r,i){if(JE(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!JE(t))return;let s=t[os];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ni(e,MR)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Jh(e,MR))}removeNode(e,t,r){if(JE(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[os]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return JE(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,tC,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,NR,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Dl(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[os];if(t&&t.setForRemoval){if(e[os]=u$,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(MR)&&this.markElementAsDisabled(e,!1),this.driver.query(e,yse,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];Ni(i,vse)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?Dl(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw Vie(e)}_flushAnimations(e,t){let r=new gg,i=[],s=new Map,o=[],a=new Map,l=new Map,u=new Map,h=new Set;this.disabledNodes.forEach(Ee=>{h.add(Ee);let Me=this.driver.query(Ee,_se,!0);for(let Ce=0;Ce<Me.length;Ce++)h.add(Me[Ce])});let p=this.bodyNode,_=Array.from(this.statesByElement.keys()),w=ZH(_,this.collectedEnterElements),E=new Map,S=0;w.forEach((Ee,Me)=>{let Ce=r$+S++;E.set(Me,Ce),Ee.forEach(Ye=>Ni(Ye,Ce))});let x=[],H=new Set,Y=new Set;for(let Ee=0;Ee<this.collectedLeaveElements.length;Ee++){let Me=this.collectedLeaveElements[Ee],Ce=Me[os];Ce&&Ce.setForRemoval&&(x.push(Me),H.add(Me),Ce.hasAnimation?this.driver.query(Me,wse,!0).forEach(Ye=>H.add(Ye)):Y.add(Me))}let q=new Map,Q=ZH(_,Array.from(H));Q.forEach((Ee,Me)=>{let Ce=RR+S++;q.set(Me,Ce),Ee.forEach(Ye=>Ni(Ye,Ce))}),e.push(()=>{w.forEach((Ee,Me)=>{let Ce=E.get(Me);Ee.forEach(Ye=>Jh(Ye,Ce))}),Q.forEach((Ee,Me)=>{let Ce=q.get(Me);Ee.forEach(Ye=>Jh(Ye,Ce))}),x.forEach(Ee=>{this.processLeaveNode(Ee)})});let pe=[],re=[];for(let Ee=this._namespaceList.length-1;Ee>=0;Ee--)this._namespaceList[Ee].drainQueuedTransitions(t).forEach(Ce=>{let Ye=Ce.player,Lt=Ce.element;if(pe.push(Ye),this.collectedEnterElements.length){let $t=Lt[os];if($t&&$t.setForMove){if($t.previousTriggersValues&&$t.previousTriggersValues.has(Ce.triggerName)){let Pi=$t.previousTriggersValues.get(Ce.triggerName),rr=this.statesByElement.get(Ce.element);if(rr&&rr.has(Ce.triggerName)){let Oi=rr.get(Ce.triggerName);Oi.value=Pi,rr.set(Ce.triggerName,Oi)}}Ye.destroy();return}}let nr=!p||!this.driver.containsElement(p,Lt),St=q.get(Lt),ae=E.get(Lt),xt=this._buildInstruction(Ce,r,ae,St,nr);if(xt.errors&&xt.errors.length){re.push(xt);return}if(nr){Ye.onStart(()=>Xu(Lt,xt.fromStyles)),Ye.onDestroy(()=>oo(Lt,xt.toStyles)),i.push(Ye);return}if(Ce.isFallbackTransition){Ye.onStart(()=>Xu(Lt,xt.fromStyles)),Ye.onDestroy(()=>oo(Lt,xt.toStyles)),i.push(Ye);return}let as=[];xt.timelines.forEach($t=>{$t.stretchStartingKeyframe=!0,this.disabledNodes.has($t.element)||as.push($t)}),xt.timelines=as,r.append(Lt,xt.timelines);let aa={instruction:xt,player:Ye,element:Lt};o.push(aa),xt.queriedElements.forEach($t=>li(a,$t,[]).push(Ye)),xt.preStyleProps.forEach(($t,Pi)=>{if($t.size){let rr=l.get(Pi);rr||l.set(Pi,rr=new Set),$t.forEach((Oi,ls)=>rr.add(ls))}}),xt.postStyleProps.forEach(($t,Pi)=>{let rr=u.get(Pi);rr||u.set(Pi,rr=new Set),$t.forEach((Oi,ls)=>rr.add(ls))})});if(re.length){let Ee=[];re.forEach(Me=>{Ee.push(Uie(Me.triggerName,Me.errors))}),pe.forEach(Me=>Me.destroy()),this.reportError(Ee)}let k=new Map,I=new Map;o.forEach(Ee=>{let Me=Ee.element;r.has(Me)&&(I.set(Me,Me),this._beforeAnimationBuild(Ee.player.namespaceId,Ee.instruction,k))}),i.forEach(Ee=>{let Me=Ee.element;this._getPreviousPlayers(Me,!1,Ee.namespaceId,Ee.triggerName,null).forEach(Ye=>{li(k,Me,[]).push(Ye),Ye.destroy()})});let A=x.filter(Ee=>XH(Ee,l,u)),P=new Map;QH(P,this.driver,Y,u,Qs).forEach(Ee=>{XH(Ee,l,u)&&A.push(Ee)});let L=new Map;w.forEach((Ee,Me)=>{QH(L,this.driver,new Set(Ee),l,hw)}),A.forEach(Ee=>{let Me=P.get(Ee),Ce=L.get(Ee);P.set(Ee,new Map([...Me?.entries()??[],...Ce?.entries()??[]]))});let M=[],tr=[],ui={};o.forEach(Ee=>{let{element:Me,player:Ce,instruction:Ye}=Ee;if(r.has(Me)){if(h.has(Me)){Ce.onDestroy(()=>oo(Me,Ye.toStyles)),Ce.disabled=!0,Ce.overrideTotalTime(Ye.totalTime),i.push(Ce);return}let Lt=ui;if(I.size>1){let St=Me,ae=[];for(;St=St.parentNode;){let xt=I.get(St);if(xt){Lt=xt;break}ae.push(St)}ae.forEach(xt=>I.set(xt,Lt))}let nr=this._buildAnimation(Ce.namespaceId,Ye,k,s,L,P);if(Ce.setRealPlayer(nr),Lt===ui)M.push(Ce);else{let St=this.playersByElement.get(Lt);St&&St.length&&(Ce.parentPlayer=Dl(St)),i.push(Ce)}}else Xu(Me,Ye.fromStyles),Ce.onDestroy(()=>oo(Me,Ye.toStyles)),tr.push(Ce),h.has(Me)&&i.push(Ce)}),tr.forEach(Ee=>{let Me=s.get(Ee.element);if(Me&&Me.length){let Ce=Dl(Me);Ee.setRealPlayer(Ce)}}),i.forEach(Ee=>{Ee.parentPlayer?Ee.syncPlayerEvents(Ee.parentPlayer):Ee.destroy()});for(let Ee=0;Ee<x.length;Ee++){let Me=x[Ee],Ce=Me[os];if(Jh(Me,RR),Ce&&Ce.hasAnimation)continue;let Ye=[];if(a.size){let nr=a.get(Me);nr&&nr.length&&Ye.push(...nr);let St=this.driver.query(Me,NR,!0);for(let ae=0;ae<St.length;ae++){let xt=a.get(St[ae]);xt&&xt.length&&Ye.push(...xt)}}let Lt=Ye.filter(nr=>!nr.destroyed);Lt.length?Sse(this,Me,Lt):this.processLeaveNode(Me)}return x.length=0,M.forEach(Ee=>{this.players.push(Ee),Ee.onDone(()=>{Ee.destroy();let Me=this.players.indexOf(Ee);this.players.splice(Me,1)}),Ee.play()}),M}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let l=!s||s==pg;a.forEach(u=>{u.queued||!l&&u.triggerName!=i||o.push(u)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){let i=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let l of t.timelines){let u=l.element,h=u!==s,p=li(r,u,[]);this._getPreviousPlayers(u,h,o,a,t.toState).forEach(w=>{let E=w.getRealPlayer();E.beforeDestroy&&E.beforeDestroy(),w.destroy(),p.push(w)})}Xu(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){let a=t.triggerName,l=t.element,u=[],h=new Set,p=new Set,_=t.timelines.map(E=>{let S=E.element;h.add(S);let x=S[os];if(x&&x.removedBeforeQueried)return new al(E.duration,E.delay);let H=S!==l,Y=Tse((r.get(S)||Ese).map(k=>k.getRealPlayer())).filter(k=>{let I=k;return I.element?I.element===S:!1}),q=s.get(S),Q=o.get(S),pe=JH(this._normalizer,E.keyframes,q,Q),re=this._buildPlayer(E,pe,Y);if(E.subTimeline&&i&&p.add(S),H){let k=new yg(e,a,S);k.setRealPlayer(re),u.push(k)}return re});u.forEach(E=>{li(this.playersByQueriedElement,E.element,[]).push(E),E.onDone(()=>bse(this.playersByQueriedElement,E.element,E))}),h.forEach(E=>Ni(E,HH));let w=Dl(_);return w.onDestroy(()=>{h.forEach(E=>Jh(E,HH)),oo(l,t.toStyles)}),p.forEach(E=>{li(i,E,[]).push(w)}),w}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new al(e.duration,e.delay)}},yg=class{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new al,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>YR(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){li(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function bse(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function Ise(n){return n??null}function JE(n){return n&&n.nodeType===1}function Dse(n){return n=="start"||n=="done"}function KH(n,e){let t=n.style.display;return n.style.display=e??"none",t}function QH(n,e,t,r,i){let s=[];t.forEach(l=>s.push(KH(l)));let o=[];r.forEach((l,u)=>{let h=new Map;l.forEach(p=>{let _=e.computeStyle(u,p,i);h.set(p,_),(!_||_.length==0)&&(u[os]=Cse,o.push(u))}),n.set(u,h)});let a=0;return t.forEach(l=>KH(l,s[a++])),o}function ZH(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let l=s.get(a);if(l)return l;let u=a.parentNode;return t.has(u)?l=u:i.has(u)?l=r:l=o(u),s.set(a,l),l}return e.forEach(a=>{let l=o(a);l!==r&&t.get(l).push(a)}),t}function Ni(n,e){n.classList?.add(e)}function Jh(n,e){n.classList?.remove(e)}function Sse(n,e,t){Dl(t).onDone(()=>n.processLeaveNode(e))}function Tse(n){let e=[];return c$(n,e),e}function c$(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof gm?c$(r.players,e):e.push(r)}}function Ase(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function XH(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}var ef=class{constructor(e,t,r){this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new zR(e.body,t,r),this._timelineEngine=new $R(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){let o=e+"-"+i,a=this._triggerCache[o];if(!a){let l=[],u=[],h=o$(this._driver,s,l,u);if(l.length)throw Aie(i,l);u.length&&void 0,a=pse(i,h,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[s,o]=BH(r),a=i;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if(r.charAt(0)=="@"){let[o,a]=BH(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function Mse(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=kR(e[0]),e.length>1&&(r=kR(e[e.length-1]))):e instanceof Map&&(t=kR(e)),t||r?new WR(n,t,r):null}var WR=class n{static{this.initialStylesByElement=new WeakMap}constructor(e,t,r){this._element=e,this._startStyles=t,this._endStyles=r,this._state=0;let i=n.initialStylesByElement.get(e);i||n.initialStylesByElement.set(e,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&oo(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(oo(this._element,this._initialStyles),this._endStyles&&(oo(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Xu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Xu(this._element,this._endStyles),this._endStyles=null),oo(this._element,this._initialStyles),this._state=3)}};function kR(n){let e=null;return n.forEach((t,r)=>{xse(r)&&(e=e||new Map,e.set(r,t))}),e}function xse(n){return n==="display"||n==="position"}var lC=class{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:JR(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},uC=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return e$(e,t)}getParentElement(e){return QR(e)}query(e,t,r){return t$(e,t,r)}computeStyle(e,t,r){return JR(e,t)}animate(e,t,r,i,s,o=[]){let a=i==0?"both":"forwards",l={duration:r,delay:i,fill:a};s&&(l.easing=s);let u=new Map,h=o.filter(w=>w instanceof lC);Qie(r,i)&&h.forEach(w=>{w.currentSnapshot.forEach((E,S)=>u.set(S,E))});let p=Gie(t).map(w=>new Map(w));p=Zie(e,p,u);let _=Mse(e,p);return new lC(e,p,l,_)}};var eC="@",d$="@.disabled",cC=class{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==eC&&t==d$?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},GR=class extends cC{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==eC?t.charAt(1)=="."&&t==d$?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if(t.charAt(0)==eC){let i=kse(e),s=t.slice(1),o="";return s.charAt(0)!=eC&&([s,o]=Rse(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{let l=a._data||-1;this.factory.scheduleListenerCallback(l,r,a)})}return this.delegate.listen(e,t,r)}};function kse(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function Rse(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var dC=class{constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(i,s)=>{s?.removeChild(null,i)}}createRenderer(e,t){let r="",i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let u=this._rendererCache,h=u.get(i);if(!h){let p=()=>u.delete(i);h=new cC(r,i,this.engine,p),u.set(i,h)}return h}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=u=>{Array.isArray(u)?u.forEach(a):this.engine.registerTrigger(s,o,e,u.name,u)};return t.data.animation.forEach(a),new GR(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var Pse=(()=>{class n extends ef{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(r){return new(r||n)(B(wn),B(Ju),B(ec))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})();function Ose(){return new rC}function Fse(n,e,t){return new dC(n,e,t)}var f$=[{provide:ec,useFactory:Ose},{provide:ef,useClass:Pse},{provide:Ma,useFactory:Fse,deps:[pv,ef,$e]}],h$=[{provide:Ju,useFactory:()=>new uC},{provide:GI,useValue:"BrowserAnimations"},...f$],Lse=[{provide:Ju,useClass:ZR},{provide:GI,useValue:"NoopAnimations"},...f$],p$=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?Lse:h$}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=vt({type:n})}static{this.\u0275inj=yt({providers:h$,imports:[fd]})}}return n})();var hC=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=vt({type:n});static \u0275inj=yt({imports:[dd,wh]})};var fC=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=vt({type:n});static \u0275inj=yt({imports:[dd,hC,fd,wh]})};var m$={production:!1,firebaseConfig:{apiKey:"AIzaSyBvgAzRfM_cCaF1LHfg8Hf5ijt-rcKtKGs",authDomain:"ssr-travel.firebaseapp.com",databaseURL:"https://ssr-travel-default-rtdb.firebaseio.com",projectId:"ssr-travel",storageBucket:"ssr-travel.appspot.com",messagingSenderId:"800568900099",appId:"1:800568900099:web:8ce6e24bde91e8732eac36",measurementId:"G-WPTVKN7Y6X"}};var pC=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=vt({type:n,bootstrap:[rE]});static \u0275inj=yt({imports:[fd,wp,Jw,wh,VS,VS.initializeApp(m$.firebaseConfig),cV,VH,QB.forRoot({timeOut:3e3,positionClass:"toast-top-right",preventDuplicates:!0}),p$,fC,f3]})};rL().bootstrapModule(pC,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
